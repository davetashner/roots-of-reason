{"id":"roots-of-reason-013","title":"Generate terrain tile art: forest","description":"Generate 4 forest tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nDense forest canopy viewed from above. Overlapping tree crowns with dappled light filtering through. Rich foliage texture with depth. Warm sunlight from the upper-left illuminating the canopy tops. Colors: deep greens (#2D5A2D, #1D4A1D, #3D6A3D).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/forest_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:21:12Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:21:12Z","labels":["art"]}
{"id":"roots-of-reason-02j","title":"ADR-021: Tech Tree Historical Expansion — Impact Analysis","description":"Decision record evaluating the addition of 13 historically significant technologies to the tech tree. Covers impact on balance, prerequisite chains, research pacing, AI personalities, Knowledge Burning, and the Singularity Chain.","status":"closed","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:05:00Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:29:55Z","closed_at":"2026-02-26T01:29:55Z","close_reason":"ADR-021 written and merged in PR #61. Tech tree historical expansion impact analysis complete.","labels":["adr architecture tech history"]}
{"id":"roots-of-reason-08s","title":"Generate terrain tile art: shallows","description":"Generate 4 shallows tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nCrystal-clear shallow water over a visible sandy bottom. Light caustic patterns dancing on the seabed. Bright sunlight from the upper-left. Colors: light aqua blues (#7EC8E3, #6EB8D3, #90D4EC).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/shallows_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:21:05Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:21:05Z","labels":["art"]}
{"id":"roots-of-reason-0m7","title":"Add tests for combatant_component.gd","description":"scripts/prototype/combatant_component.gd (492 lines) is the combat state machine with no test file. Create tests/prototype/test_combatant_component.gd covering: CombatState transitions, stance behaviors, leash return, attack cooldown, save/load round-trip.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:10:49Z","closed_at":"2026-02-28T14:10:49Z","close_reason":"Completed in PR #186"}
{"id":"roots-of-reason-0ns","title":"Extract heal/feed from prototype_unit.gd before 1000-line limit","description":"prototype_unit.gd at 859 lines. Extract _tick_heal, _tick_feed, assign_feed_target into a HealFeedComponent (RefCounted). Reduces to ~740 lines and makes subsystems directly testable.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:05:50Z","closed_at":"2026-02-28T14:05:50Z","close_reason":"Completed in PR #182"}
{"id":"roots-of-reason-0wn","title":"Villager self-defense against wolves","description":"Add attack command handler, enable villager auto-scan, buff villager attack stat so villagers can defend themselves against wolves","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T03:52:32Z","created_by":"Dave Tashner","updated_at":"2026-02-28T04:08:50Z","closed_at":"2026-02-28T04:08:50Z","close_reason":"Completed in PR #162","labels":["combat","villager","wolf"]}
{"id":"roots-of-reason-15u","title":"Full scene save/load: units, buildings, map, all managers","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T13:55:37Z","created_by":"Dave Tashner","updated_at":"2026-02-27T14:42:40Z","closed_at":"2026-02-27T14:42:40Z","close_reason":"Completed in PR #112","labels":["load","save"]}
{"id":"roots-of-reason-162","title":"Fix command panel not visible when villager selected","status":"closed","priority":1,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T22:58:32Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:02:05Z","closed_at":"2026-02-28T23:02:05Z","close_reason":"Completed in PR #207","labels":["bugfix","ui"]}
{"id":"roots-of-reason-1bx","title":"Expand scene_save_handler tests beyond happy path","description":"test_scene_save_handler.gd has only 7 tests. Add: load-and-restore round-trip, saving mid-gather unit, saving unit with pending_combat_target_name.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-03-01T05:38:34Z","closed_at":"2026-03-01T05:38:34Z","close_reason":"Completed in PR #254"}
{"id":"roots-of-reason-1oo","title":"Epic: Developer Toolbox (ror CLI + Claude Skills)","description":"A unified developer toolbox for Roots of Reason: a `ror` CLI for common dev tasks (test, lint, scaffolding, validation) and Claude Code skills for AI-assisted workflows (test generation, ADR creation, sprint planning). Build incrementally — each tool/skill gets its own PR.","status":"closed","priority":1,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:17Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:01:53Z","closed_at":"2026-02-23T03:01:53Z","close_reason":"All 13 child tasks completed across PRs #16-#23","labels":["dx","tools"]}
{"id":"roots-of-reason-1oo.1","title":"ror test — local headless test runner","description":"Wrapper to run GdUnit4 tests locally via headless Godot. Supports: ror test (all), ror test tests/autoloads/ (subset). Calls godot --headless with the GdUnit4 runtest script. Should print colorized pass/fail summary.","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:22Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:13:21Z","closed_at":"2026-02-22T22:13:21Z","close_reason":"Completed in PR #3","labels":["cli","testing","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.1","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.10","title":"/adr skill — create or update architecture decision records","description":"Claude Code skill: interactive ADR creation flow. Asks for topic, generates the decision record, appends to AGENTS.md under the ADR section, creates a beads decision issue. Can also update existing ADRs.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:59Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:37Z","closed_at":"2026-02-23T02:48:37Z","close_reason":"Completed in PR #17","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.10","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.11","title":"/epic skill — plan and create an epic with stories","description":"Claude Code skill: takes a feature description, breaks it into stories with dependencies, creates beads epic + child task issues, sets up blocker relationships. Generates the dependency tree.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:00:00Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:38Z","closed_at":"2026-02-23T02:48:38Z","close_reason":"Completed in PR #17","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.11","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.12","title":"/preflight skill — pre-merge quality check","description":"Claude Code skill: runs lint, format check, tests, checks CI status on current branch, verifies beads issues are linked in commit messages, confirms no secrets staged. One-stop pre-merge gate.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:00:00Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:38Z","closed_at":"2026-02-23T02:48:38Z","close_reason":"Completed in PR #18","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.12","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T17:00:00Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.13","title":"/sprint skill — suggest next tasks from backlog","description":"Claude Code skill: reads the beads backlog, identifies unblocked P0/P1 work, considers dependency order and epic progress, suggests the next 3-5 tasks with context on why each is ready and what it unblocks.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:00:01Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:39Z","closed_at":"2026-02-23T02:48:39Z","close_reason":"Completed in PR #18","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.13","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T17:00:00Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.2","title":"ror lint — one-command lint and format check","description":"Wraps gdlint scripts/ tests/ \u0026\u0026 gdformat --check scripts/ tests/. Supports --fix mode to auto-format. Ensures gdtoolkit venv is available (auto-creates if missing).","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:38Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:13:22Z","closed_at":"2026-02-22T22:13:22Z","close_reason":"Completed in PR #3","labels":["cli","quality","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.2","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.3","title":"ror new-test — test file scaffolder","description":"Scaffolds a GdUnit4 test file for a given script. Reads the source, creates test file in mirror tests/ directory, generates test stubs for each public function. Usage: ror new-test scripts/autoloads/resource_manager.gd","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:39Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:36Z","closed_at":"2026-02-23T02:48:36Z","close_reason":"Completed in PR #19","labels":["cli","testing","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.3","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:38Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.4","title":"ror coverage — coverage report wrapper","description":"Coverage report wrapper for local dev. Shows which scripts are below the CI threshold. Depends on mgt.5 (coverage enforcement) landing first.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:39Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:30:05Z","closed_at":"2026-02-22T22:30:05Z","close_reason":"Completed in PR #4","labels":["cli","testing","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.4","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.5","title":"ror gen-sprites — procedural art generator orchestrator","description":"One command to regenerate all Phase 1 placeholder art: tiles, units, buildings. Orchestrates the individual Python generators in tools/. Usage: ror gen-sprites (all), ror gen-sprites tiles, etc.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:40Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:36Z","closed_at":"2026-02-23T02:48:36Z","close_reason":"Completed in PR #20","labels":["art","cli","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.5","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.6","title":"ror validate-assets — CI-ready asset validator","description":"Validates all sprites against ADR-008 conventions: dimensions match entity type, naming is snake_case, frame counts match animation budget, magenta mask regions present for player-colored sprites.\n\n## Acceptance Criteria\n- [ ] CLI command: ror validate-assets (or ror va shorthand)\n- [ ] Validates all sprites in assets/ against rules in tools/asset_config.json\n- [ ] Checks: file naming convention (snake_case), dimensions match sprite scale contract\n- [ ] Checks: required animation frames present (idle/walk/attack/death per unit)\n- [ ] Checks: player color mask region present (#FF00FF) where required\n- [ ] Reports errors with file path + expected vs actual values\n- [ ] Exit code 0 on pass, 1 on failure (CI-compatible)\n- [ ] Runs in \u003c 10 seconds for full asset directory\n- [ ] Unit tests for each validation rule","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:40Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:01:44Z","closed_at":"2026-02-23T03:01:44Z","close_reason":"Completed in PR #22","labels":["art","cli","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.6","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.7","title":"ror scene-tree — print scene node tree without editor","description":"Parses a .tscn file and prints its node tree structure. Useful for debugging scene composition without opening the editor. Usage: ror scene-tree scenes/prototype/prototype_main.tscn\n\n## Acceptance Criteria\n- [ ] CLI command: ror scene-tree \u003cscene_path\u003e (e.g., ror scene-tree scenes/game/main.tscn)\n- [ ] Prints indented node tree of the .tscn file without launching Godot editor\n- [ ] Shows: node name, node type, attached script path\n- [ ] Supports --depth flag to limit tree depth\n- [ ] Parses .tscn text format directly (no Godot runtime needed)\n- [ ] Handles inherited scenes (shows base scene reference)\n- [ ] Exit code 0 on success, 1 on invalid path or parse error\n- [ ] Unit tests for .tscn parsing","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:41Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:01:44Z","closed_at":"2026-02-23T03:01:44Z","close_reason":"Completed in PR #21","labels":["cli","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.7","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.8","title":"ror data-check — JSON data schema validator","description":"Validates all JSON files in data/ against expected schemas: unit stats have required fields (hp, attack, defense, speed), building costs are positive integers, tech tree references are valid, etc.\n\n## Acceptance Criteria\n- [ ] CLI command: ror data-check validates all JSON files in data/ against schemas\n- [ ] Schemas defined in data/schemas/ (one per data type: units, buildings, tech, etc.)\n- [ ] Checks: required fields present, types correct, enum values valid\n- [ ] Checks: cross-references valid (e.g., prerequisite_building IDs exist in buildings data)\n- [ ] Reports all errors (not just first) with file path + field + issue description\n- [ ] Exit code 0 on pass, 1 on failure (CI-compatible)\n- [ ] New data types require a schema before data files are added\n- [ ] Unit tests for each validation rule","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:42Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:01:45Z","closed_at":"2026-02-23T03:01:45Z","close_reason":"Completed in PR #23","labels":["cli","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.8","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:41Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.9","title":"/gdtest skill — generate GdUnit4 test suite for a script","description":"Claude Code skill: reads a GDScript file, generates a full GdUnit4 test suite following project conventions (extends GdUnitTestSuite, test_ prefix, assert_vector/assert_int/etc., mirror directory structure). Invoked as /gdtest \u003cpath\u003e.","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:58Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:13:22Z","closed_at":"2026-02-22T22:13:22Z","close_reason":"Completed in PR #3","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.9","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:58Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj","title":"Epic 6: Unit System","description":"Unit stats (HP, attack, defense, speed, range, LOS), unit types (Villager, Infantry, Archer, Cavalry, Siege, Naval), production queues, upgrades, formations.","status":"closed","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:08Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:15:14Z","closed_at":"2026-02-26T05:15:14Z","close_reason":"All 7 children completed. Last child 2hj.7 (Dog AI) closed previously.","labels":["epic","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj","depends_on_id":"roots-of-reason-7y5","type":"blocks","created_at":"2026-02-22T14:44:55Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.1","title":"Unit stats: HP, attack, defense, speed, range, LOS","description":"Define unit stat model: HP (hit points), Attack (base damage), Defense (damage reduction), Speed (tiles/sec), Range (attack range in tiles), LOS (line of sight radius). Stats loaded from data files.\n\n## Acceptance Criteria\n- [ ] Unit stat schema: hp, attack, defense, speed, range, line_of_sight, armor_type, attack_type\n- [ ] All unit stats defined in data/units/*.json per unit type\n- [ ] Stats loaded via DataLoader.get_unit_stats(unit_id)\n- [ ] Stats can be modified by age upgrades (base_stat + upgrade_bonus pattern)\n- [ ] Stat modifiers from civ bonuses applied at load time\n- [ ] Runtime stat access via unit.get_stat(stat_name) method\n- [ ] Stats serializable for save/load (base + current with modifiers)\n- [ ] Unit tests for stat loading, modifier stacking, and civ bonus application\n- [ ] Validation: all unit JSON files checked for required fields at load time","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:28Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:31:58Z","closed_at":"2026-02-23T13:31:58Z","close_reason":"Completed in PR #36","labels":["stats","story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.1","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:27Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.2","title":"Unit types: Villager, Infantry, Archer, Cavalry, Siege, Naval","description":"Implement unit categories: Villager (gathers, builds), Infantry (melee, slow, armored), Archer (ranged, fragile), Cavalry (fast melee, bonus vs archers), Siege (slow, anti-building), Naval (water-only). Each with base stats.\n\n## Acceptance Criteria\n- [ ] 6 base unit categories defined in data/units/\n- [ ] Villager: gathers resources, builds, repairs, low combat stats\n- [ ] Infantry: melee, medium HP/attack, bonus vs Archers\n- [ ] Archer: ranged, low HP, bonus vs Cavalry, minimum range (can't fire point-blank)\n- [ ] Cavalry: fast, high attack, bonus vs Infantry, weak to Archers\n- [ ] Siege: slow, high building damage (ignores 80% building reduction), fragile vs units\n- [ ] Naval: water-only movement, ranged attack, transports land units\n- [ ] Each unit type has Phase 1 placeholder sprite (colored circle with letter: V, I, A, C, S, N)\n- [ ] Unit type determines available commands (e.g., only Villagers can gather/build)\n- [ ] All stats per unit type data-driven from JSON\n- [ ] Civ-specific unique units inherit from base type with stat overrides\n- [ ] Unit tests for type-specific command availability\n- [ ] Unit tests for bonus damage application (rock-paper-scissors)","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:28Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:46:29Z","closed_at":"2026-02-23T13:46:29Z","close_reason":"Completed in PR #38","labels":["story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.2","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:28Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.3","title":"Unit production from buildings with queue","description":"Buildings produce units: select building, click unit icon, unit added to queue. Queue shows up to 5 units. Production takes time and costs resources (deducted on queue). Units spawn at rally point.\n\n## Acceptance Criteria\n- [ ] Buildings that produce units have a production queue (max 5 items, configurable in JSON)\n- [ ] Queue displays in building info panel when building is selected\n- [ ] Each unit has a train_time and cost defined in JSON\n- [ ] Training begins when building is idle and queue is non-empty\n- [ ] Progress bar shown for current training unit\n- [ ] Trained unit spawns at rally point (default: building entrance, relocatable by right-click)\n- [ ] Training paused if population cap reached (resumes when cap freed)\n- [ ] Right-click queue item to cancel (refunds full cost)\n- [ ] Shift+click to queue 5 of same unit at once\n- [ ] Queue state serializable for save/load\n- [ ] Unit tests for queue operations (add, remove, cancel, refund)\n- [ ] Unit tests for pop cap pause/resume logic\n- [ ] Integration test: queue 3 infantry → verify 3 units spawn sequentially","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:29Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:58:45Z","closed_at":"2026-02-23T13:58:45Z","close_reason":"Completed in PR #41","labels":["production","story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.3","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:28Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.4","title":"Unit upgrades via tech tree","description":"Tech tree unlocks unit upgrades: +attack, +defense, +range, +speed. Upgrades apply globally to all existing and future units of that type. Research at specific buildings (Blacksmith, Library, etc.).","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:29Z","created_by":"Dave Tashner","updated_at":"2026-02-25T13:25:10Z","closed_at":"2026-02-25T13:25:10Z","close_reason":"Completed in PR #57","labels":["story","units","upgrades"],"dependencies":[{"issue_id":"roots-of-reason-2hj.4","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:29Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.5","title":"Formation movement","description":"Basic formation support: line, box, staggered. Selected group maintains formation shape when moving. Units adjust speed to stay in formation. Default formation is staggered.","status":"closed","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:30Z","created_by":"Dave Tashner","updated_at":"2026-02-26T04:12:00Z","closed_at":"2026-02-26T04:12:00Z","close_reason":"Completed in PR #69","labels":["formations","story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.5","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:30Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.6","title":"Wolf fauna AI: patrol, aggro, and flee behavior","description":"Implement wolf AI behavior as a Gaia fauna unit.\n\nWolf behavior states (simple state machine):\n\nPATROL (default):\n- Wander randomly within 8-tile radius of spawn point\n- Pick a random tile in radius, walk to it, idle 3-5 seconds, pick another\n- If a lone villager enters aggro_radius (3 tiles): transition to ATTACK\n- If 3+ military units enter 5-tile radius: transition to FLEE\n- Wolves in the same pack stay loosely grouped (pack cohesion: try to stay within 4 tiles of packmates)\n\nATTACK:\n- Target the nearest villager within aggro radius\n- Chase at speed 2.0 (faster than villager at 1.5)\n- Attack with 8 damage on contact\n- If target dies or moves beyond 6 tiles: return to PATROL\n- If 2+ military units approach within 4 tiles: transition to FLEE\n- Pack behavior: if one wolf attacks, nearby packmates also aggro the same target\n\nFLEE:\n- Run away from the threat (opposite direction) at speed 2.0\n- Flee for 5 seconds or until 10 tiles from threat, then return to PATROL\n- Flee toward the pack's spawn point (run home)\n\nBEING_FED:\n- Entered when a villager uses the Feed command (see domestication story)\n- Wolf stops moving, plays eating animation (or idle facing the villager)\n- Cannot be aggro'd while being fed\n- After feeding completes, return to PATROL (with updated domestication progress)\n- If villager is killed during feeding: return to PATROL immediately\n\nDOMESTICATED:\n- Terminal state — wolf transforms into Dog unit (see dog story)\n- Remove wolf from Gaia faction, create Dog unit for the feeding player\n\nWolf death:\n- When killed: drop 50 Food as a harvestable food source (like hunting a deer)\n- Death animation, corpse fades\n- Pack members do NOT avenge — they flee when a packmate is killed\n\nAcceptance criteria:\n- Wolves patrol naturally around spawn point in loose packs\n- Wolves aggro lone villagers and chase them\n- Wolves flee from military groups\n- Pack behavior: aggro spreads to packmates, flee when packmate dies\n- Smooth state transitions with no flickering between states\n- Being_fed state correctly pauses aggro","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:05:57Z","created_by":"Dave Tashner","updated_at":"2026-02-25T13:49:32Z","closed_at":"2026-02-25T13:49:32Z","close_reason":"Completed in PR #58","labels":["fauna","story","units","wolves"],"dependencies":[{"issue_id":"roots-of-reason-2hj.6","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T16:05:57Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-2hj.6","depends_on_id":"roots-of-reason-ovr.8","type":"blocks","created_at":"2026-02-22T16:06:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.7","title":"Dog companion unit with hunting, alert, and town visibility behaviors","description":"Implement the Dog as a player-owned companion unit created through wolf domestication.\n\nDog stats:\n- HP: 25\n- Attack: 5\n- Defense: 0\n- Speed: 2.5 (fastest non-cavalry land unit)\n- LOS: 6 (excellent for scouting)\n- Population cost: 0 (does not count toward pop cap)\n- Not trainable at any building — only obtained through wolf domestication\n\nDog behavior AI (semi-autonomous, player can override with move commands):\n\nTOWN_PATROL (default when idle near Town Center):\n- If within 10 tiles of a friendly Town Center and no player commands pending\n- Wander between buildings in the town (pick random building within 8 tiles, walk to it, idle 2-3s, repeat)\n- Provides passive LOS bonus: all buildings within 8 tiles of TC gain +2 LOS\n- Bonus stacks up to 2 dogs (max +4 LOS from dog patrol)\n- Track which dogs are in town patrol range and recalculate LOS bonus when dogs move in/out\n\nHUNT_ASSIST (when near hunting villagers):\n- If within 5 tiles of a villager actively hunting (gathering from deer/boar) and no player commands pending\n- Follow the hunting villager at 3-tile distance\n- When villager targets prey, dog runs ahead toward the prey\n- Hunting gather rate for that villager: +25%\n- Deer flee radius reduced from 6 to 3 tiles when dog is within 5 tiles of prey\n- Visual: dog runs alongside villager, small bark animation when prey is targeted\n- If the villager stops hunting, return to TOWN_PATROL or IDLE\n\nDANGER_ALERT:\n- Passive ability, always active regardless of current behavior\n- Alert radius: 10 tiles (wider than LOS — the dog senses threats beyond sight)\n- When an enemy military unit enters alert radius:\n  - Dog plays bark animation + audio cue\n  - Minimap ping at dog's location\n  - All friendly units within 8 tiles of the dog gain +10% speed for 5 seconds\n  - Alert cooldown: 15 seconds (no spam alerts)\n- After alerting: transition to FLEE\n\nFLEE:\n- Dog runs toward nearest friendly Town Center or military unit at full speed (2.5)\n- Dogs NEVER fight — they always flee from enemy units\n- If cornered (no path to safety): cower in place\n\nFOLLOW (player command):\n- Player right-clicks a villager or unit: dog follows that unit at 3-tile distance\n- Useful for scouting or manually assigning to a hunting party\n- Override behavior until new command or unit dies\n\nGARRISON:\n- Dogs can be garrisoned inside Town Center for protection during raids\n- Garrisoned dogs still contribute to town LOS bonus (they're still in the town)\n- Ungarrison to resume patrol\n\nData file: data/units/dog.json\n{\n  \"name\": \"Dog\",\n  \"hp\": 25,\n  \"attack\": 5,\n  \"defense\": 0,\n  \"speed\": 2.5,\n  \"los\": 6,\n  \"population_cost\": 0,\n  \"alert_radius\": 10,\n  \"alert_speed_bonus\": 0.10,\n  \"alert_speed_duration\": 5.0,\n  \"alert_cooldown\": 15.0,\n  \"hunt_gather_bonus\": 0.25,\n  \"hunt_assist_radius\": 5,\n  \"town_patrol_radius\": 10,\n  \"town_los_bonus\": 2,\n  \"max_town_los_stacks\": 2,\n  \"flee_speed\": 2.5\n}\n\nPlaceholder sprite: lighter gray circle (smaller than wolf) with small collar indicator (colored line = player color). Direction triangle like other units.\n\nAcceptance criteria:\n- Dogs patrol town and provide measurable LOS bonus (+2 per dog, max +4)\n- Dogs follow hunting villagers and increase gather rate by 25%\n- Deer flee less when dogs are nearby\n- Dogs bark and alert when enemies approach (audio + visual + minimap ping)\n- Alert speed boost applies to nearby friendly units\n- Dogs flee from combat and can be garrisoned\n- Dogs cost 0 population\n- Player can command dogs to move/follow","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:05:58Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:37:50Z","closed_at":"2026-02-26T03:37:50Z","close_reason":"Completed in PR #66","labels":["dogs","fauna","story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.7","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T16:05:57Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-2hj.7","depends_on_id":"roots-of-reason-7wg.9","type":"blocks","created_at":"2026-02-22T16:06:11Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2rx","title":"ADR-010: Wolf Domestication — Early Game Companion Mechanic","description":"In the Stone and Bronze Ages, players can domesticate wolves into dogs by feeding them. Dogs provide hunting, scouting, and early warning benefits. This is one of the first meaningful decisions a player makes — spending scarce early food on a wolf is a gamble that pays off over time.\n\nDECISION\n\n1. WOLVES AS GAIA FAUNA\nWolves spawn during map generation as neutral (Gaia-owned) fauna, similar to deer. They roam in small packs of 2-3 near forests and away from starting positions.\n- Spawn count: 3-5 wolf packs per map (6-15 individual wolves)\n- Behavior: wolves patrol a small territory (8-tile radius from spawn), wander randomly\n- Wolves are HOSTILE to villagers who get too close (aggro radius: 3 tiles). They attack with 8 damage, 30 HP, speed 2.0 (faster than villagers). A lone villager will die to a wolf pack.\n- Wolves flee from groups of 3+ military units\n- Wolves can be killed for 50 Food (huntable like deer, but they fight back)\n\nSo the player has a choice: HUNT the wolves for quick food, or FEED them to domesticate.\n\n2. FEEDING / DOMESTICATION PROCESS\nTo domesticate a wolf, a villager must carry food to it using a new \"Feed\" command:\n(a) Select villager, right-click wolf while holding a modifier key (Shift+right-click) or use a \"Feed\" button in the command panel\n(b) Villager walks toward the wolf carrying food from the nearest stockpile (costs 25 Food per feeding)\n(c) Villager plays a \"feeding\" animation at 2-tile distance (doesn't get close enough to trigger aggro)\n(d) Wolf enters a \"being fed\" state — stops patrolling, plays eating animation\n(e) After feeding, the wolf's domestication progress increases by 33%\n(f) Three feedings (75 Food total) fully domesticates the wolf → it transforms into a Dog unit owned by the player\n(g) Domestication progress decays slowly if not fed within 60 seconds (10% per minute) — you need to commit, not just feed once and forget\n(h) If another player feeds the same wolf, progress resets to that player (contested domestication)\n\n3. DOG UNIT\nOnce domesticated, the wolf becomes a Dog — a non-trainable companion unit:\n- HP: 25 (fragile, not a combat unit)\n- Attack: 5 (light, can help finish off wounded units)\n- Defense: 0\n- Speed: 2.5 (very fast — faster than all land units except cavalry)\n- LOS: 6 (excellent scouting range, higher than any Stone Age unit)\n- Population cost: 0 (dogs don't count toward pop cap — they're companions, not trained soldiers)\n- Cannot be produced at any building — only obtained through domestication\n- Lifespan: unlimited (they don't die of old age)\n\n4. DOG BEHAVIORS AND BONUSES\n\n(a) HUNTING ASSIST\nDogs automatically follow villagers who are hunting (gathering from deer/boar). When a dog is within 5 tiles of a hunting villager:\n- Hunting gather rate increased by 25% (dogs help chase and corner prey)\n- Deer do not flee as far when a dog is nearby (reduced flee radius from 6 tiles to 3)\n- Visual: dog runs alongside the villager during hunting, barks at prey\n\n(b) DANGER ALERT\nDogs detect approaching enemy units earlier than other units:\n- Dog alert radius: 10 tiles (wider than its LOS of 6 — the dog \"senses\" threats it can't see)\n- When an enemy unit enters the alert radius, the dog barks (audio cue + visual bark icon)\n- A minimap ping appears at the dog's location\n- All friendly units within 8 tiles of the alerting dog receive a brief speed boost (+10% for 5 seconds) — adrenaline response to the warning\n- Alert triggers once per enemy group approach, not per-frame (cooldown: 15 seconds)\n\n(c) TOWN VISIBILITY BONUS\nWhen at least one dog is within 10 tiles of a Town Center:\n- All buildings within 8 tiles of the Town Center gain +2 LOS (dogs patrol the settlement, extending sight)\n- This bonus stacks up to 2 dogs (max +4 LOS from dogs)\n- Visual: dogs occasionally wander between buildings in the town (patrol animation)\n- The bonus is passive — no micromanagement needed, just keep dogs alive near your TC\n\n(d) DOG BEHAVIOR AI\nDogs are semi-autonomous — the player can issue move commands, but dogs also have AI:\n- If idle near Town Center: wander between buildings (town patrol)\n- If idle near hunting villagers: follow and assist\n- If enemy detected: bark alert, then flee toward nearest friendly military unit or Town Center\n- Dogs never attack-move or stand ground — they always flee from combat\n- Can be garrisoned inside Town Center for protection during raids\n\n5. LIMITATIONS AND COUNTERPLAY\n- Dogs are fragile (25 HP) — a few archer shots kill them. Protecting dogs during raids matters.\n- 75 Food in Stone Age is expensive (roughly 2 villagers worth). Domesticating multiple wolves is a significant investment.\n- Only 3-5 packs on the map means dogs are a LIMITED RESOURCE — competitive scouting to find and feed wolves before opponents\n- Wolves near the center of the map are contested — feeding them is risky if enemies are nearby\n- Dogs become less impactful in later ages as military units have higher LOS and better scouting. They remain useful for hunting bonus and alert.\n- If all dogs die, the player has no way to get more (unless the map has undomesticated wolves remaining)\n\n6. CIV INTERACTIONS\n- Mesopotamia: no specific wolf/dog bonus\n- Rome: potential future unique tech \"War Dogs\" — dogs gain +10 HP and +3 attack, become light combat units\n- Polynesia: no specific wolf/dog bonus (dogs historically important in Polynesian culture — could add a bonus later)\n\n7. AGE RESTRICTIONS\n- Wolf feeding is available from Stone Age (the very start of the game)\n- Dogs remain useful through all ages but have diminishing relative value\n- No tech required to feed wolves — it's a discovered mechanic (tooltip on wolf hover explains it)\n\nCONSEQUENCES\n- Creates an interesting Stone Age decision: spend 75 food on a wolf or train another villager?\n- Rewards map exploration (finding wolf packs before opponents)\n- Adds life to the early game — wolves roaming, dogs patrolling towns\n- Hunting becomes more engaging with dog assist\n- Early warning system rewards players who invest in dogs\n- Dogs become an emotional attachment for players (protecting them matters)\n- Limited supply creates scarcity and competition\n- Simple mechanic with deep strategic implications","status":"closed","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:04:39Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:49Z","closed_at":"2026-02-22T22:39:49Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","resources","units"]}
{"id":"roots-of-reason-2xv","title":"Define playable milestones","description":"The backlog is prioritized (P0/P1/P2) but lacks milestone groupings that define playable vertical slices. Needed to prevent scope creep and provide development cadence.\n\nAcceptance Criteria:\n- [ ] Milestone 1 defined: \"First Playable\" — camera + map + villager + gathering + Town Center\n- [ ] Milestone 2 defined: \"Combat Loop\" — units + buildings + basic combat + win condition\n- [ ] Milestone 3 defined: \"Full Game Loop\" — tech tree + ages + all victory conditions + AI\n- [ ] Milestone 4 defined: \"Content Complete\" — 3 civs + all buildings/units + balanced data\n- [ ] Each milestone lists specific beads issue IDs that must be closed\n- [ ] Milestones documented in a MILESTONES.md or equivalent\n- [ ] bd tags or labels used to associate issues with milestones","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:58:21Z","created_by":"Dave Tashner","updated_at":"2026-02-23T00:07:08Z","closed_at":"2026-02-23T00:07:08Z","close_reason":"Completed in PR #7","labels":["milestones","planning","task"]}
{"id":"roots-of-reason-2yx","title":"Fix terrain and fog tiles not rendering","description":"Terrain and fog TileMapLayers not rendering - tiles invisible, gray background","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T21:47:17Z","created_by":"Dave Tashner","updated_at":"2026-02-27T22:01:19Z","closed_at":"2026-02-27T22:01:19Z","close_reason":"Completed in PR #140"}
{"id":"roots-of-reason-317","title":"Epic 2: Core Game Loop","description":"Isometric camera, unit selection, movement with pathfinding, right-click commands, game clock and speed controls.","status":"closed","priority":0,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:06Z","created_by":"Dave Tashner","updated_at":"2026-02-23T01:29:27Z","closed_at":"2026-02-23T01:29:27Z","close_reason":"All 5 children completed: camera (PR #8), selection (PR #9), pathfinding (PR #10), right-click commands (PR #12), game clock (PR #11)","labels":["core","epic"],"dependencies":[{"issue_id":"roots-of-reason-317","depends_on_id":"roots-of-reason-81x","type":"blocks","created_at":"2026-02-22T14:44:53Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-317","depends_on_id":"roots-of-reason-be7","type":"blocks","created_at":"2026-02-22T15:06:30Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-317","depends_on_id":"roots-of-reason-mgt","type":"blocks","created_at":"2026-02-22T14:53:38Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.1","title":"Isometric camera with pan, zoom, edge-scroll","description":"Implement Camera2D with: WASD/arrow key panning, mouse wheel zoom (min/max limits), edge-of-screen scrolling, middle-mouse drag pan. Camera should work with isometric coordinate system.\n\nAcceptance Criteria:\n- [ ] Camera2D node centered on the isometric map\n- [ ] WASD/arrow key panning at configurable speed (data/settings/camera.json)\n- [ ] Edge-scroll when cursor within 20px of viewport edge (configurable threshold)\n- [ ] Mouse wheel zoom with min/max bounds (e.g., 0.5x to 2.0x)\n- [ ] Middle-mouse-drag panning as alternative input\n- [ ] Camera position clamped to map bounds (no scrolling into void)\n- [ ] Zoom centers on mouse cursor position, not screen center\n- [ ] All speed/threshold/bounds values loaded from JSON, never hardcoded\n- [ ] Camera state serializable (position, zoom) for save/load\n- [ ] Smooth interpolation on all movement (no jittery snapping)\n- [ ] Unit tests for clamp logic and zoom math\n- [ ] Works at 1920x1080 and scales with viewport stretch mode","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:15Z","created_by":"Dave Tashner","updated_at":"2026-02-23T00:23:54Z","closed_at":"2026-02-23T00:23:54Z","close_reason":"Completed in PR #8","labels":["camera","core","story"],"dependencies":[{"issue_id":"roots-of-reason-317.1","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:15Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.2","title":"Unit selection: click, box-select, control groups","description":"Left-click to select single unit, click-drag for box selection, Shift+click to add/remove from selection, Ctrl+number to set control group, number key to recall group. Selection highlight/indicator on units.\n\nAcceptance Criteria:\n- [ ] Left-click selects a single unit (deselects previous)\n- [ ] Left-click on empty ground deselects all\n- [ ] Click-drag draws a selection rectangle, selects all owned units within\n- [ ] Selection rectangle renders visually (semi-transparent green or team color)\n- [ ] Shift+click adds/removes individual unit from selection\n- [ ] Ctrl+[0-9] assigns selection to control group\n- [ ] [0-9] recalls control group (double-tap centers camera on group)\n- [ ] Selected units show visual indicator (circle, highlight, or outline)\n- [ ] Cannot select enemy units (click on enemy shows info only)\n- [ ] Selection state serializable for save/load\n- [ ] Maximum selection size: 40 units (configurable in JSON)\n- [ ] Unit tests for box-select geometry (isometric coordinate conversion)\n- [ ] Unit tests for control group assign/recall logic","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:16Z","created_by":"Dave Tashner","updated_at":"2026-02-23T00:42:24Z","closed_at":"2026-02-23T00:42:24Z","close_reason":"Completed in PR #9","labels":["core","selection","story"],"dependencies":[{"issue_id":"roots-of-reason-317.2","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:15Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.3","title":"Unit movement with A* pathfinding on isometric grid","description":"Implement A* pathfinding on isometric tile grid. Right-click to move selected units. Handle terrain obstacles, unit collision avoidance. Use Godot's AStarGrid2D or custom implementation suited to iso grid.\n\nAcceptance Criteria:\n- [ ] Right-click on ground issues move command to selected units\n- [ ] A* pathfinding on isometric tile grid using Godot's AStar2D or AStarGrid2D\n- [ ] Terrain types affect movement cost (e.g., road=0.5, grass=1.0, forest=1.5, river=2.0)\n- [ ] Movement costs loaded from data/settings/terrain.json\n- [ ] Units navigate around impassable tiles (water, cliffs, buildings)\n- [ ] Group movement: units move in formation, not single-file through one path\n- [ ] Move command shows click feedback (ground marker or ping animation)\n- [ ] Unit plays walk animation while moving, idle animation when stopped\n- [ ] Unit faces movement direction (8-direction sprite facing)\n- [ ] Path recalculates if obstacle appears mid-move (building placed, etc.)\n- [ ] Movement speed per unit type loaded from JSON unit stats\n- [ ] Unit position serializable for save/load\n- [ ] Unit tests for A* path computation on known grid layouts\n- [ ] Unit tests for terrain cost lookups\n- [ ] Integration test: unit moves from A to B avoiding obstacles","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:17Z","created_by":"Dave Tashner","updated_at":"2026-02-23T00:54:43Z","closed_at":"2026-02-23T00:54:43Z","close_reason":"Completed in PR #10","labels":["core","pathfinding","story"],"dependencies":[{"issue_id":"roots-of-reason-317.3","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:16Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.4","title":"Right-click context commands","description":"Right-click context-sensitive commands: move to empty ground, attack enemy unit, gather from resource node, build/repair building. Show appropriate cursor for each action.\n\nAcceptance Criteria:\n- [ ] Right-click on enemy unit/building → attack command\n- [ ] Right-click on resource node (with villager selected) → gather command\n- [ ] Right-click on own building (with unit selected) → garrison command\n- [ ] Right-click on ground → move command (handled by 317.3)\n- [ ] Cursor changes to indicate command type (sword for attack, pickaxe for gather, etc.)\n- [ ] Context determined by: selected unit type + clicked target type\n- [ ] Command dispatch via signal (e.g., command_issued(unit, command_type, target))\n- [ ] Invalid commands ignored with audio/visual feedback (error beep, cursor shake)\n- [ ] Right-click command table configurable per unit type in JSON\n- [ ] Unit tests for command resolution logic (unit type + target → command type)","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:17Z","created_by":"Dave Tashner","updated_at":"2026-02-23T01:28:15Z","closed_at":"2026-02-23T01:28:15Z","close_reason":"Completed in PR #12","labels":["commands","core","story"],"dependencies":[{"issue_id":"roots-of-reason-317.4","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:17Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.5","title":"Game clock and pause/speed controls","description":"Game timer with pause (Space), normal speed, fast (2x), very fast (3x). Display game time in HUD. All game logic should use game delta time, not real time.\n\nAcceptance Criteria:\n- [ ] Game clock tracks elapsed time in game-seconds (not wall-clock)\n- [ ] Pause/unpause with spacebar (configurable keybind)\n- [ ] Speed controls: 1x (normal), 1.5x, 2x, 3x (configurable in JSON)\n- [ ] Speed control via +/- keys and UI buttons\n- [ ] Game clock displayed in HUD (MM:SS format)\n- [ ] All game systems use game clock delta, not Engine.delta (respects pause/speed)\n- [ ] Pausing freezes all unit movement, gathering, construction, and combat\n- [ ] UI remains interactive while paused (can issue commands, queue actions)\n- [ ] Game clock value serializable for save/load\n- [ ] Unit tests for clock tick math at different speed multipliers\n- [ ] Visual indicator for current speed (1x/2x/3x shown in HUD)","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:18Z","created_by":"Dave Tashner","updated_at":"2026-02-23T01:10:21Z","closed_at":"2026-02-23T01:10:21Z","close_reason":"Completed in PR #11","labels":["clock","core","story"],"dependencies":[{"issue_id":"roots-of-reason-317.5","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:17Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-3hk","title":"ADR-008: Art Pipeline — Isometric Asset Production Strategy","description":"Defines the visual production pipeline for all game assets: tiles, units, buildings, UI elements, effects. This is the single highest-risk bottleneck for a solo/small team building an isometric RTS.\n\nDECISION\n\n1. Tile geometry: 128x64px diamond tiles (2:1 ratio). Elevation step: 32px vertical offset per level (half tile height). 3 usable elevation levels.\n\n2. Sprite scale contract:\n   - Villager: ~48px tall (standing), fits within one tile footprint\n   - Infantry/military: ~52-56px tall\n   - Cavalry/mounted: ~64px tall\n   - Buildings (1x1): 128x128px max\n   - Buildings (2x2): 256x192px max\n   - Buildings (3x3): 384x256px max\n   - Trees/resources: ~64-80px tall, single tile footprint\n\n3. Animation budget per unit type (AUTHORING cost, not output count):\n   - Idle: 4 keyframes (rendered to 32 output frames via 8 cameras)\n   - Walk: 8 keyframes (rendered to 64 output frames)\n   - Attack: 6 keyframes (rendered to 48 output frames)\n   - Death: 6 keyframes (rendered to 6 output frames, 1 direction mirrored)\n   - Gather (villager, per resource): 6 keyframes x 4 types (rendered to 96 output frames each)\n   - Military unit authoring cost: ~24 keyframes -\u003e ~150 output frames (6x multiplication via render rig)\n   - Villager authoring cost: ~48 keyframes -\u003e ~230 output frames\n   The 3D render pipeline eliminates per-direction manual work entirely.\n\n4. Art production method: THREE-PHASE AUTOMATED PIPELINE.\n\n   Phase 1 (prototype) — FULLY PROCEDURAL, ZERO MANUAL ART:\n   A Python/GDScript generator creates all placeholder sprites programmatically.\n   Colored geometric shapes: diamonds for tiles, circles for units, rectangles for buildings.\n   Script generates all directions, animation frames, player color variants.\n   Output committed to repo OR generated at build time.\n   Game is playable within hours of project creation.\n\n   Phase 2 (alpha) — BLENDER 3D-TO-2D RENDER PIPELINE:\n   This is the core production method, modeled after how Age of Empires was actually made.\n   (a) Model unit/building once in Blender (low-poly, stylized)\n   (b) Rig with standard humanoid skeleton (units) or no rig (buildings)\n   (c) Animate once — walk cycle, attack, idle, death. ONE direction only.\n   (d) Isometric render rig: 8 cameras at 45-degree intervals, all at iso angle (30 deg from horizontal), orthographic projection, consistent lighting\n   (e) Blender script batch-renders all animations from all 8 cameras automatically\n   (f) Pipeline script packs rendered PNGs into spritesheets, generates Godot SpriteFrames resources\n   (g) Player color variants: render with neutral base, apply team color via shader at runtime (NOT re-rendering per player)\n   One animation authored = 8 directions output. One model = all player colors via shader.\n\n   Phase 3 (polish) — TEXTURE REFINEMENT:\n   AI-generated textures applied to 3D models, re-rendered through same pipeline.\n   Hand-touch-up on final spritesheets in Aseprite for hero units and unique buildings.\n   Pipeline stays the same — only the model/texture quality improves.\n\n5. Player color system: Runtime shader recoloring, NOT baked sprites.\n   Units and buildings rendered with a designated \"team color\" mask region.\n   A Godot shader swaps the mask color to the player's color at runtime.\n   This means ONE set of sprites serves all players — no per-player sprite variants needed.\n   Player colors: Blue (#2E86DE), Red (#E74C3C), Teal (#1ABC9C), Orange (#F39C12).\n\n6. Color palettes per age cluster:\n   - Stone/Bronze: earthy browns, muted greens, terracotta\n   - Iron/Medieval: deeper greens, grays, stone blues\n   - Industrial: brick reds, iron grays, smoke, amber\n   - Information/Singularity: steel blues, white, neon accents, holographic\n\n7. Tileset production:\n   - 5 base terrains, ~15-20 variants each via Godot TileMap terrain autotiling\n   - Terrain tiles: procedurally generated for Phase 1, Blender-rendered for Phase 2\n   - Total: ~120 tiles minimum viable (80-100 terrain + 20 mountain + 12 elevation)\n\n8. Asset file organization:\n   - assets/sprites/units/{unit_name}/ — spritesheet per unit (shared across players via shader)\n   - assets/sprites/buildings/{building_name}/ — spritesheet per building\n   - assets/tiles/terrain/ — tileset textures\n   - assets/ui/ — UI elements, icons, fonts\n   - assets/effects/ — particle textures, projectiles\n   - blender/ — source .blend files, render rig template, batch export scripts\n   - tools/ — procedural generator, spritesheet packer, CI validation scripts\n\n9. Automation toolchain (all scripted, all CI-validated):\n   - tools/generate_placeholders.py — generates Phase 1 geometric sprites\n   - tools/spritesheet_packer.py — packs rendered PNGs into spritesheets + Godot resources\n   - blender/render_rig.blend — template scene with 8 cameras, lighting, render settings\n   - blender/batch_render.py — Blender script: render all animations for a model from all cameras\n   - CI step: validate sprite dimensions match scale contract, frame counts match budget\n\nCONSEQUENCES\n\n- Phase 1 is FULLY AUTOMATED — zero manual art, game playable immediately\n- Phase 2 authoring cost: ~24 keyframes per military unit (not 150 hand-drawn frames)\n- 3D pipeline gives 6-8x frame multiplication — 8 directions for the cost of 1\n- Player colors handled by shader — no per-player sprite duplication\n- Same pipeline serves all 3 phases — only input quality improves\n- Blender is free, scriptable, and has excellent isometric rendering support\n- CI validates sprite consistency — wrong dimensions caught before merge\n- Total authoring cost for 6 unit types: ~200 keyframes (not 1050 hand-drawn frames)","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:04:37Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:48Z","closed_at":"2026-02-22T22:39:48Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","art"]}
{"id":"roots-of-reason-3r7","title":"Sprite split tool + grass tile variants","description":"Create reusable split_spritesheet.py tool for cropping multi-sprite images, split grass-quad.png into 4 variant tiles, and wire up random variant selection in tilemap_terrain.gd","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:38:18Z","created_by":"Dave Tashner","updated_at":"2026-02-28T00:02:05Z","closed_at":"2026-02-28T00:02:05Z","close_reason":"Completed in PR #145"}
{"id":"roots-of-reason-49f","title":"Add state machine interrupt matrix tests","description":"Only one cross-state interrupt test exists. Create tests/prototype/test_unit_state_interrupts.gd testing every unit state interrupted by each of the other commands. Verify cancel chains properly zero references and reset state.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:06:58Z","closed_at":"2026-02-28T14:06:58Z","close_reason":"Completed in PR #183"}
{"id":"roots-of-reason-4f5","title":"Generate terrain tile art: dirt","description":"Generate 4 dirt tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nPacked earth with subtle cracks and pebbles. Dry, well-trodden ground with slight color variation suggesting foot traffic. Warm sunlight from the upper-left. Colors: warm browns (#8B7355, #A0845C, #6B5B42).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/dirt_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:20:54Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:20:54Z","labels":["art"]}
{"id":"roots-of-reason-4hg","title":"Rename CI coverage job and clarify metric","description":"Coverage gate measures file presence not line coverage. Rename from \"Test-File Coverage\" to \"Test-File Presence\" and document as proxy metric.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T13:50:51Z","closed_at":"2026-02-28T13:50:51Z","close_reason":"Completed in PR #176"}
{"id":"roots-of-reason-5au","title":"Fix shore tile orientation based on water direction","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:10:57Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:28:23Z","closed_at":"2026-02-28T05:28:23Z","close_reason":"Completed in PR #169","labels":["coastline","fix","map"]}
{"id":"roots-of-reason-5b0","title":"Fix units walking through impassable terrain","description":"Units can walk through mountains, canyons, and deep water because move_to() ignores terrain passability. The pathfinding grid correctly marks these as solid, but many callers (AI combat, gathering, patrol) use move_to() directly instead of pathfinding.","status":"closed","priority":2,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T00:43:40Z","created_by":"Dave Tashner","updated_at":"2026-02-28T00:55:23Z","closed_at":"2026-02-28T00:55:23Z","close_reason":"Completed in PR #149"}
{"id":"roots-of-reason-5gp","title":"Add mid-action save/load tests for combat state","description":"No test for saving while combat_state == PURSUING. pending_combat_target_name resolution has no coverage. Add save/load round-trip tests for combat state.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:04:35Z","closed_at":"2026-02-28T14:04:35Z","close_reason":"Completed in PR #181"}
{"id":"roots-of-reason-62i","title":"Villager attack animation","description":"Add attack animation state for villagers using existing gather frames","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T04:47:47Z","created_by":"Dave Tashner","updated_at":"2026-02-28T04:52:41Z","closed_at":"2026-02-28T04:52:41Z","close_reason":"Completed in PR #165"}
{"id":"roots-of-reason-636","title":"Epic 9: AI Opponent System","description":"AI opponents are the entire opposing experience in a single-player RTS. This epic covers difficulty tiers, economic simulation, military decision-making, personality types, and integration with unique mechanics like Knowledge Burning and Singularity victory.","status":"closed","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:10Z","created_by":"Dave Tashner","updated_at":"2026-02-26T20:32:01Z","closed_at":"2026-02-26T20:32:01Z","close_reason":"All 7 stories completed (636.1-636.7 across PRs #84-#89)","labels":["ai","epic"],"dependencies":[{"issue_id":"roots-of-reason-636","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T17:56:57Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-636","depends_on_id":"roots-of-reason-fk5","type":"blocks","created_at":"2026-02-22T14:44:57Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-636","depends_on_id":"roots-of-reason-fxt","type":"blocks","created_at":"2026-02-22T14:44:56Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.1","title":"AI personality types — Builder, Rusher, Boomer, Turtle","description":"Distinct AI personalities that create varied opponent experiences.\n\nAcceptance Criteria:\n- [ ] 4 personality types defined in data/ai/personalities.json\n- [ ] Builder: prioritizes economy and age advancement, attacks late\n- [ ] Rusher: early military pressure, sacrifices economy\n- [ ] Boomer: fast expansion to multiple TCs, greedy economy\n- [ ] Turtle: walls and defensive buildings, strong late-game army\n- [ ] Personality modifies build order selection and military thresholds\n- [ ] Each personality has a name and flavor text for game setup screen\n- [ ] Personality selection per AI slot in game setup (or random)\n- [ ] All personality parameters data-driven from JSON","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:37Z","created_by":"Dave Tashner","updated_at":"2026-02-26T12:40:24Z","closed_at":"2026-02-26T12:40:24Z","close_reason":"Completed in PR #84","labels":["ai","story"],"dependencies":[{"issue_id":"roots-of-reason-636.1","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.2","title":"AI economic simulation — resource gathering and build order","description":"AI manages villager allocation, resource gathering priorities, and building construction order.\n\nAcceptance Criteria:\n- [ ] AI assigns villagers to resources based on current needs and age goals\n- [ ] Build order templates loaded from data/ai/build_orders.json per difficulty\n- [ ] AI rebalances economy when resource stockpile is imbalanced (\u003e2x ratio)\n- [ ] AI advances ages when prerequisites met and resources available\n- [ ] AI builds houses proactively to avoid population cap stalls\n- [ ] Economic decisions run on configurable tick interval (not every frame)\n- [ ] All economic thresholds and ratios data-driven from JSON\n- [ ] Unit tests for villager allocation logic\n- [ ] Integration test: AI reaches Bronze Age within expected time range","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:38Z","created_by":"Dave Tashner","updated_at":"2026-02-25T01:56:15Z","closed_at":"2026-02-25T01:56:15Z","close_reason":"Completed in PR #46","labels":["ai","economy","story"],"dependencies":[{"issue_id":"roots-of-reason-636.2","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.3","title":"AI military decision-making — army composition and attack timing","description":"AI builds military units, forms armies, and decides when/where to attack.\n\nAcceptance Criteria:\n- [ ] AI builds counter-units based on scouted enemy composition (rock-paper-scissors)\n- [ ] Army threshold before attacking loaded from JSON per difficulty\n- [ ] AI targets weakest enemy expansion or undefended resource lines\n- [ ] AI retreats damaged units below configurable HP threshold\n- [ ] AI garrisons units in buildings when outnumbered\n- [ ] Attack timing varies by difficulty (Easy: late, Expert: aggressive timing attacks)\n- [ ] All army thresholds, composition ratios data-driven from JSON\n- [ ] Unit tests for target prioritization logic","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:39Z","created_by":"Dave Tashner","updated_at":"2026-02-25T02:23:54Z","closed_at":"2026-02-25T02:23:54Z","close_reason":"Completed in PR #48","labels":["ai","military","story"],"dependencies":[{"issue_id":"roots-of-reason-636.3","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:38Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.4","title":"AI tech progression and age advancement","description":"AI researches technologies and advances ages. Economic AI prioritizes age advancement. Aggressive AI prioritizes military upgrades. AI follows a predefined tech order per personality per age.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:39Z","created_by":"Dave Tashner","updated_at":"2026-02-25T02:42:38Z","closed_at":"2026-02-25T02:42:38Z","close_reason":"Completed in PR #49","labels":["ai","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-636.4","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.5","title":"AI difficulty tiers — Easy, Normal, Hard, Expert","description":"Four difficulty tiers controlling AI economic bonus, reaction speed, and strategic sophistication.\n\nAcceptance Criteria:\n- [ ] Difficulty enum in data/settings/ai_difficulty.json with 4 tiers\n- [ ] Easy: 0.7x gather rate, 2s reaction delay, no rush strategies\n- [ ] Normal: 1.0x gather rate, 1s reaction delay, basic build orders\n- [ ] Hard: 1.2x gather rate, 0.5s reaction delay, adaptive strategies\n- [ ] Expert: 1.5x gather rate, 0s reaction delay, full strategic AI\n- [ ] All bonus multipliers data-driven from JSON, never hardcoded\n- [ ] Difficulty selection in game setup screen\n- [ ] Tests cover each tier's parameter loading","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:40Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:00:55Z","closed_at":"2026-02-25T03:00:55Z","close_reason":"Completed in PR #50","labels":["ai","difficulty","story"],"dependencies":[{"issue_id":"roots-of-reason-636.5","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.6","title":"AI: factor tech regression risk into Town Center defense priority","description":"Adjust AI behavior to account for the Knowledge Burning mechanic.\n\nAI defensive adjustments:\n- AI assigns a \"tech vulnerability score\" to each of its Town Centers based on:\n  - Number of researched techs (more techs = more to lose = higher priority to defend)\n  - Proximity to enemy units/bases (closer = more vulnerable)\n  - Current military presence near the TC (more defenders = less vulnerable)\n- AI allocates more military units to defend TCs with high vulnerability scores\n- The defensive allocation increases in later ages (more techs at stake)\n- Aggressive AI personality still raids more, but maintains a minimum TC garrison proportional to tech count\n\nAI offensive adjustments:\n- AI recognizes enemy TCs as high-value targets (not just for territory, but for tech regression)\n- When AI has military advantage, it may prioritize TC snipes over unit kills\n- If the enemy is ahead in tech, AI increases priority of TC raids as a catch-up mechanism\n- Aggressive AI explicitly targets tech-leading opponents' TCs\n\nAI forward TC decision:\n- AI evaluates risk/reward of building forward TCs:\n  - Benefit: map control, shorter unit reinforcement path\n  - Risk: if destroyed, lose a tech\n  - Decision weight: build forward TCs only when military advantage is clear, or when the forward position has natural defenses (hills, river, chokepoint)\n- Economic AI personality avoids forward TCs (risk-averse)\n- Aggressive AI personality builds forward TCs more freely\n\nAI response to own tech loss:\n- When AI loses a tech from TC destruction:\n  - Increase overall military production priority for 2 minutes (defensive reaction)\n  - Re-research the lost tech as soon as resources allow (high priority)\n  - If the lost TC was forward: do not rebuild it in the same exposed location\n\nAcceptance criteria:\n- AI garrisons TCs proportional to tech count\n- AI targets enemy TCs when ahead militarily\n- AI avoids building forward TCs when tech regression risk is high\n- AI re-researches lost techs promptly\n- Different AI personalities (aggressive/economic/balanced) handle the mechanic differently\n- AI does not over-prioritize TC defense to the point of never attacking","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:37Z","created_by":"Dave Tashner","updated_at":"2026-02-26T13:05:55Z","closed_at":"2026-02-26T13:05:55Z","close_reason":"Completed in PR #86","labels":["ai","knowledge-burning","story"],"dependencies":[{"issue_id":"roots-of-reason-636.6","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T16:11:37Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-636.6","depends_on_id":"roots-of-reason-fk5.7","type":"blocks","created_at":"2026-02-22T16:11:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.7","title":"AI Singularity awareness — race and disruption strategy","description":"AI understands the Singularity victory condition and reacts to enemy progress toward it.\n\nAcceptance Criteria:\n- [ ] AI monitors enemy tech research alerts (Singularity techs are public)\n- [ ] AI increases military aggression when enemy researches Singularity-tier techs\n- [ ] AI pursues Singularity victory path on Hard/Expert if ahead in tech\n- [ ] AI prioritizes destroying enemy GPU Foundry / Transformer Lab / AGI Core\n- [ ] Response urgency scales with enemy progress through the Singularity chain\n- [ ] All thresholds and priorities data-driven from JSON\n- [ ] Unit tests for Singularity threat assessment logic","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:57:36Z","created_by":"Dave Tashner","updated_at":"2026-02-26T18:25:47Z","closed_at":"2026-02-26T18:25:47Z","close_reason":"Completed in PR #89","labels":["ai","singularity","story"],"dependencies":[{"issue_id":"roots-of-reason-636.7","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T17:57:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-64l","title":"Fix villagers disappearing when gathering trees on water-adjacent tiles","description":"Cluster screen-space offsets on resource nodes can map to adjacent water tiles when converted back to grid coords via IsoUtils.screen_to_grid(). This causes move_to() to silently reject the move, leaving villagers stuck in MOVING_TO_RESOURCE state. Fix by storing the logical grid_position on resource nodes and using it for pathfinding.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T22:12:11Z","created_by":"Dave Tashner","updated_at":"2026-02-28T22:18:42Z","closed_at":"2026-02-28T22:18:42Z","close_reason":"Completed in PR #205","labels":["bug","gathering","units"]}
{"id":"roots-of-reason-6af","title":"Fix villager sprites invisible — z_index too low","description":"Villager sprite Sprite2D child was created with z_index=-1, putting it below terrain tiles which have z_index=col+row. Change to z_index=0 so sprites render at the same level as the unit's _draw() output.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T03:25:57Z","created_by":"Dave Tashner","updated_at":"2026-02-28T03:30:37Z","closed_at":"2026-02-28T03:30:37Z","close_reason":"Completed in PR #159"}
{"id":"roots-of-reason-6ax","title":"Debug server v3: improved observability and game control","status":"closed","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T01:16:11Z","created_by":"Dave Tashner","updated_at":"2026-03-01T01:53:28Z","closed_at":"2026-03-01T01:53:28Z","close_reason":"All 6 stories completed: PRs #224-#227, #229-#230"}
{"id":"roots-of-reason-6ax.1","title":"Add ror units compact status CLI","description":"Add cmd_units() to tools/ror that calls GET /entities?category=own_unit and prints a compact table: NAME | ACTION | CARRIED | HP | POSITION. Support --all flag to include enemy units and wild fauna. No server changes needed — uses existing entities endpoint with entity_category inference from PR #221.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T01:16:26Z","created_by":"Dave Tashner","updated_at":"2026-03-01T01:22:19Z","closed_at":"2026-03-01T01:22:19Z","close_reason":"Completed in PR #224","dependencies":[{"issue_id":"roots-of-reason-6ax.1","depends_on_id":"roots-of-reason-6ax","type":"parent-child","created_at":"2026-02-28T20:16:26Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6ax.2","title":"Add stop command to cancel unit actions","description":"Add stop action to POST /command that cancels combat, gather, and movement on selected units. Add stop to scenario runner. Tests: parse_command_body_stop.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T01:16:27Z","created_by":"Dave Tashner","updated_at":"2026-03-01T01:30:13Z","closed_at":"2026-03-01T01:30:13Z","close_reason":"Completed in PR #225","dependencies":[{"issue_id":"roots-of-reason-6ax.2","depends_on_id":"roots-of-reason-6ax","type":"parent-child","created_at":"2026-02-28T20:16:27Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6ax.3","title":"Add reset command to restart the scene","description":"Add reset action to POST /command that calls get_tree().reload_current_scene(). Add ror reset CLI wrapper. Tests: parse_command_body_reset.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T01:16:28Z","created_by":"Dave Tashner","updated_at":"2026-03-01T01:33:42Z","closed_at":"2026-03-01T01:33:42Z","close_reason":"Completed in PR #226","dependencies":[{"issue_id":"roots-of-reason-6ax.3","depends_on_id":"roots-of-reason-6ax","type":"parent-child","created_at":"2026-02-28T20:16:28Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6ax.4","title":"Fix annotation overlay to include player units","description":"_create_annotation_overlay skips entities with empty entity_category. Apply same inference logic from serialize_entity (PR #221) so player/enemy units get labels, health bars, state text in annotated screenshots.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T01:16:30Z","created_by":"Dave Tashner","updated_at":"2026-03-01T01:37:24Z","closed_at":"2026-03-01T01:37:24Z","close_reason":"Completed in PR #227","dependencies":[{"issue_id":"roots-of-reason-6ax.4","depends_on_id":"roots-of-reason-6ax","type":"parent-child","created_at":"2026-02-28T20:16:29Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6ax.5","title":"Add set-resources debug command to directly set player resource values","description":"Add a new 'set-resources' action to POST /command that sets player resource values directly:\n  {\"action\": \"set-resources\", \"food\": 500, \"wood\": 300, \"gold\": 200, \"stone\": 100}\nOnly sets resources that are specified (omitted resources unchanged). Uses ResourceManager.set_resource() or equivalent.\nEssential for integration test scenarios that need specific starting conditions without waiting for gather cycles.\nAdd corresponding 'ror game-cmd set-resources food=500 wood=300' CLI usage.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-03-01T01:34:42Z","created_by":"Dave Tashner","updated_at":"2026-03-01T01:49:02Z","closed_at":"2026-03-01T01:49:02Z","close_reason":"Completed in PR #229","labels":["debug","tooling"],"dependencies":[{"issue_id":"roots-of-reason-6ax.5","depends_on_id":"roots-of-reason-6ax","type":"parent-child","created_at":"2026-02-28T20:34:41Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6ax.6","title":"Add save and load debug commands for scenario testing","description":"Add 'save' and 'load' actions to POST /command:\n- {\"action\": \"save\", \"slot\": \"test\"} — triggers SaveManager to save current game state\n- {\"action\": \"load\", \"slot\": \"test\"} — triggers SaveManager to load from saved state\nUses the existing SaveManager infrastructure. The slot name defaults to 'debug_scenario' if omitted.\nRequired for save/load integration test scenarios.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-03-01T01:34:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T01:52:59Z","closed_at":"2026-03-01T01:52:59Z","close_reason":"Completed in PR #230","labels":["debug","save-load","tooling"],"dependencies":[{"issue_id":"roots-of-reason-6ax.6","depends_on_id":"roots-of-reason-6ax","type":"parent-child","created_at":"2026-02-28T20:34:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc","title":"Epic: Codebase Health — Duplication, Performance \u0026 Architecture","description":"Address code duplication, performance bottlenecks, and architectural issues identified in comprehensive codebase review. Covers shared utility extraction, spatial indexing, god object decomposition, event-driven rendering, and organizational cleanup.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:03Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:20:01Z","closed_at":"2026-02-27T20:20:01Z","close_reason":"All 25 stories completed across PRs #114-#139","labels":["architecture","epic","performance","refactor"]}
{"id":"roots-of-reason-6cc.1","title":"Extract shared utilities for _get_game_delta() and _dl_settings()","description":"Extract _get_game_delta() (duplicated in 8 files: wolf_ai, pirate_ai, dog_ai, historical_event_manager, pirate_manager, trade_cart_ai, prototype_resource_node, pandemic_manager) and _dl_settings()/_load_config() (duplicated in 40+ files) into a shared utility module. Create a GameUtils or NodeUtils autoload/static class. Eliminates ~200+ lines of copy-paste code.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:18Z","created_by":"Dave Tashner","updated_at":"2026-02-27T16:02:03Z","closed_at":"2026-02-27T16:02:03Z","close_reason":"Completed in PR #115","labels":["duplication","refactor","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.1","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:18Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.10","title":"Consolidate save/load slot refresh and civ card duplication","description":"Three UI duplication issues: (1) pause_menu.gd _refresh_save_slots() and _refresh_load_slots() are 95% identical — consolidate into _refresh_slot_buttons(buttons, allow_disable). (2) game_lobby_screen.gd and civ_selection_screen.gd both implement _build_civ_card() with minor sizing differences — extract to shared CivCardBuilder. (3) postgame_stats_screen.gd has 4 near-identical time series builders — extract _build_time_series_for_field() generic method.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:52Z","created_by":"Dave Tashner","updated_at":"2026-02-27T17:33:01Z","closed_at":"2026-02-27T17:33:01Z","close_reason":"Completed in PR #124","labels":["duplication","refactor","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-6cc.10","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.11","title":"Consolidate progress bar and HP bar drawing","description":"prototype_building.gd has _draw_progress_bar() and _draw_hp_bar() (lines ~285-314) with near-identical background/fill/border pattern. Consolidate into single _draw_bar(fill_ratio, fill_color) method. Check if prototype_unit.gd has similar bar drawing that can share the same utility.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:52Z","created_by":"Dave Tashner","updated_at":"2026-02-27T19:06:17Z","closed_at":"2026-02-27T19:06:17Z","close_reason":"Completed in PR #127","labels":["duplication","refactor","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.11","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.12","title":"Optimize unit queue_redraw() calls with dirty flag","description":"prototype_unit.gd calls queue_redraw() every frame while moving (line ~230), and also in _tick_heal, _tick_combat, _try_retaliate, and other state updates — even when nothing visually changed. With 100+ units, this creates 100+ redundant draw calls per frame. Add a _visual_dirty flag: only set it when facing direction changes, HP changes, gather state changes, or combat state changes. Only call queue_redraw() when the flag is set. Note: may be partially addressed by the prototype_unit decomposition story.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:06Z","created_by":"Dave Tashner","updated_at":"2026-02-27T17:33:02Z","closed_at":"2026-02-27T17:33:02Z","close_reason":"Completed in PR #126","labels":["performance","rendering","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.12","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:05Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-6cc.12","depends_on_id":"roots-of-reason-6cc.4","type":"blocks","created_at":"2026-02-27T10:34:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.13","title":"Replace polling with signals in resource bar and cursor overlay","description":"resource_bar.gd _process() calls _update_transit_labels() every frame, querying river_transport.get_in_transit_resources() and iterating 5 resource types. cursor_overlay.gd updates position every frame even when mouse hasn't moved. Replace with signal-driven updates: resource bar listens for transit_changed signal; cursor overlay only updates on InputEventMouseMotion.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:07Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:10:01Z","closed_at":"2026-02-27T20:10:01Z","close_reason":"Completed in PR #131","labels":["performance","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.13","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:06Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.14","title":"Batch fog of war tilemap updates","description":"fog_of_war_layer.gd update_fog() iterates previous visible tiles and calls set_cell() for each changed tile individually. Each set_cell() is O(log n) for the tilemap internal structure. With 100+ tiles changing per visibility update, this accumulates. Batch the updates or defer to next frame to avoid frame spikes.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:07Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:10:01Z","closed_at":"2026-02-27T20:10:01Z","close_reason":"Completed in PR #130","labels":["performance","rendering","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.14","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:07Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.15","title":"Reduce combat stats dictionary allocations","description":"prototype_unit.gd _deal_damage_to_target() creates two new dictionaries (_build_stats_dict and _build_target_stats_dict) on every attack (every 0.5-2s per unit). With 20+ active combats, this creates GC pressure. Reuse dictionaries with clear() + reset, or pass pre-allocated stat references instead of creating new dicts each time.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:08Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:10:02Z","closed_at":"2026-02-27T20:10:02Z","close_reason":"Completed in PR #132","labels":["performance","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.15","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:07Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.16","title":"Optimize formation slot assignment from O(n²) to O(n log n)","description":"prototype_input.gd _assign_slots() is O(n²): for each of n selected units, it iterates all n slot positions to find minimum distance. With 40 selected units = 1,600 distance comparisons per move order. Also, pathfinding_grid.gd get_formation_targets() uses an array with O(n) membership check in a spiral search. Use a Set for O(1) membership check and consider Hungarian algorithm or sorted greedy approach for slot assignment.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:18Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:10:03Z","closed_at":"2026-02-27T20:10:03Z","close_reason":"Completed in PR #137","labels":["algorithm","performance","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.16","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:18Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.17","title":"Replace parallel dictionaries with state objects in historical_event_manager","description":"historical_event_manager.gd (681 lines) uses 5+ parallel dictionaries for per-player plague state: _plague_mit_death, _plague_mit_duration, _aftermath_active, _aftermath_timer, _renaissance_triggered, _renaissance_active. All mutated in _process(). Replace with a PlagueState class with proper member variables. Also extract event-specific logic into separate classes (BlackPlagueEvent, RenaissanceEvent) to reduce the file's 681-line size.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:19Z","created_by":"Dave Tashner","updated_at":"2026-02-27T19:06:15Z","closed_at":"2026-02-27T19:06:15Z","close_reason":"Completed in PR #124","labels":["architecture","refactor","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.17","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:18Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.18","title":"Extract command handlers from prototype_input.gd","description":"prototype_input.gd (612 lines) _issue_context_command() has 10+ if/elif branches for different command types (feed, build, gather, garrison, embark, etc). Extract a CommandHandler interface with pluggable handlers for each command type. This reduces prototype_input.gd's size and makes it easier to add new commands without modifying the central dispatcher.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:19Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:10:04Z","closed_at":"2026-02-27T20:10:04Z","close_reason":"Completed in PR #136","labels":["architecture","refactor","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.18","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.19","title":"Reorganize data/settings/ into subdirectories","description":"data/settings/ has 37 files in a flat directory. Organize into subdirectories: gameplay/ (combat, gathering, construction, population, etc), ai/ (ai_personalities, ai_build_orders, etc), mechanics/ (trade, corruption, pandemic, etc), graphics/ (rendering, particles). Update DataLoader to handle subdirectory paths. All references in scripts that load settings will need path updates.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:33Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:10:05Z","closed_at":"2026-02-27T20:10:05Z","close_reason":"Completed in PR #138","labels":["organization","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.19","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.2","title":"Add spatial indexing for unit/building lookups","description":"Replace O(n²) scene tree scanning with spatial partitioning. Current hot paths: prototype_unit._scan_for_targets() iterates ALL children per unit on 0.5s timer; prototype_unit._find_nearest_drop_off() and _try_find_replacement_resource() scan all children; target_detector.detect() iterates all registered entities; ai_military._refresh_entity_lists() re-classifies all children every 3s. Implement a grid-based spatial index or maintain faction-indexed unit/building registries updated via signals on spawn/death.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:19Z","created_by":"Dave Tashner","updated_at":"2026-02-27T16:19:40Z","closed_at":"2026-02-27T16:19:40Z","close_reason":"Completed in PR #117","labels":["architecture","performance","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.2","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:18Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.20","title":"Clean up empty placeholder directories in scripts/","description":"scripts/buildings/, scripts/resources/, scripts/units/, scripts/combat/ exist with .gdkeep files but are empty — all logic lives in scripts/prototype/. Either: (a) begin migrating relevant code from prototype/ into these directories as part of the decomposition stories, or (b) remove the empty directories if the prototype/ flat structure is intentional. Decision should align with the prototype_unit and prototype_main decomposition stories.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:34Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:19:56Z","closed_at":"2026-02-27T20:19:56Z","close_reason":"Completed in PR #139","labels":["organization","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.20","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:33Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-6cc.20","depends_on_id":"roots-of-reason-6cc.4","type":"blocks","created_at":"2026-02-27T10:34:11Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-6cc.20","depends_on_id":"roots-of-reason-6cc.7","type":"blocks","created_at":"2026-02-27T10:34:12Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.21","title":"Standardize building JSON data with consistent optional fields","description":"13 of 15 buildings are missing garrison_capacity field. Some buildings have inconsistent optional fields (dock, market, factory, agi_core, wonder missing expected fields). Ensure all building JSON files have a uniform set of fields (even if null/0 for unused ones). Validate against the building schema in data/schemas/. Add schema validation to CI if not already present.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:34Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:10:05Z","closed_at":"2026-02-27T20:10:05Z","close_reason":"Completed in PR #134","labels":["data","quality","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.21","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.22","title":"Decompose AI monoliths into strategy/tactics layers","description":"ai_military.gd (739 lines) handles unit recruitment, attack planning, tactical positioning, and resource allocation all in one file. ai_economy.gd (661 lines) similarly handles building, unit production, resource management, and villager assignment. Split ai_military into AIMilitaryStrategy (what to build, when to attack) and AIMilitaryTactics (how to position/move units, target prioritization). Split ai_economy into AIBuildPlanner and AIResourceAllocator.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:35Z","created_by":"Dave Tashner","updated_at":"2026-02-27T19:06:16Z","closed_at":"2026-02-27T19:06:16Z","close_reason":"Completed in PR #126","labels":["ai","architecture","refactor","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.22","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.23","title":"Harden initialization order between civ bonuses and resource manager","description":"In prototype_main._start_game(), civ bonuses are applied in _setup_civilizations() before ResourceManager.init_player(0) is called (which happens later in _setup_hud() → _setup_resource_bar()). This works currently by coincidence but is fragile — reordering setup steps could cause bonuses to be applied to uninitialized resources. Make the dependency explicit: either initialize resources before applying bonuses, or document the ordering constraint with an assertion.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:44Z","created_by":"Dave Tashner","updated_at":"2026-02-27T19:06:16Z","closed_at":"2026-02-27T19:06:16Z","close_reason":"Completed in PR #125","labels":["architecture","robustness","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.23","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.24","title":"Optimize visibility manager FOV computation","description":"visibility_manager.gd update_visibility() runs at ~5Hz and for each player unit (30+), computes shadowcasting FOV — creating new dictionaries and merging them repeatedly. Optimizations: (1) cache FOV shapes per unit type (units of same type at same position have identical FOV), (2) only recompute for units that moved since last update, (3) consider simpler circular FOV for most units, reserving shadowcasting for buildings/towers.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:45Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:12:00Z","closed_at":"2026-02-27T20:12:00Z","close_reason":"Completed in PR #133","labels":["performance","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.24","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.25","title":"Only tick garrison arrow logic for buildings with garrisoned units","description":"prototype_building.gd _process() ticks garrison arrow logic for every building (20+) every frame, even buildings with no garrisoned units. Add an early-out check: skip arrow tick if garrison is empty. Consider using Timer nodes instead of manual delta accumulation for buildings that do have garrison.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:33:46Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:10:03Z","closed_at":"2026-02-27T20:10:03Z","close_reason":"Completed in PR #129","labels":["performance","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.25","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:33:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.3","title":"Make minimap redraw event-driven with dirty flag","description":"minimap.gd calls queue_redraw() unconditionally in _process() every frame, triggering ~80,000 set_pixel operations at 60fps (two 200x200 images). Replace with a dirty flag that only triggers redraw when visibility or fog state actually changes. Connect to visibility_manager signals instead of polling.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:20Z","created_by":"Dave Tashner","updated_at":"2026-02-27T15:53:24Z","closed_at":"2026-02-27T15:53:24Z","close_reason":"Completed in PR #114","labels":["performance","rendering","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.3","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.4","title":"Decompose prototype_unit.gd into components","description":"prototype_unit.gd is 1,196 lines with 109 member variables, 83 functions, and 5+ interleaved state machines. Exceeds the project's 1000-line limit. Extract into composition pattern: GathererComponent (gather states, drop-off finding, resource targeting), CombatantComponent (combat states, target scanning, damage dealing, pursuit), TransportComponent (embark/disembark, passenger management). Keep unit as coordinator. This also fixes the excessive queue_redraw() calls — only redraw when component state actually changes visual appearance.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:31Z","created_by":"Dave Tashner","updated_at":"2026-02-27T16:42:40Z","closed_at":"2026-02-27T16:42:40Z","close_reason":"Completed in PR #118","labels":["architecture","refactor","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.4","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:30Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.5","title":"Extract BaseFaunaAI from wolf/pirate/dog AI","description":"wolf_ai.gd, pirate_ai.gd, and dog_ai.gd share identical implementations of: _tick_movement() (lines ~520-530 in each), _get_game_delta(), _dl_settings()/_load_config(), and near-identical target scanning (_scan_for_aggro_target / _scan_for_target / _find_hunting_villager). Create a BaseFaunaAI class with shared movement, config loading, and generic target scanning (taking filter callback). Each subclass only implements behavior-specific logic.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:31Z","created_by":"Dave Tashner","updated_at":"2026-02-27T17:33:00Z","closed_at":"2026-02-27T17:33:00Z","close_reason":"Completed in PR #119","labels":["duplication","refactor","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.5","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:31Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-6cc.5","depends_on_id":"roots-of-reason-6cc.1","type":"blocks","created_at":"2026-02-27T10:34:08Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.6","title":"Cache autoload references in _ready() instead of per-frame lookups","description":"prototype_unit.gd _get_autoload() calls Engine.get_main_loop().root.get_node_or_null() with string lookup 6+ times per frame per unit. With 100 units, that's 600+ redundant lookups per frame. Cache GameManager, ResourceManager, DataLoader, CivBonusManager references in _ready() or on first access. Apply same pattern to all files using _get_autoload() or _dl_settings() (40+ files, but most will be fixed by the shared utility extraction story).","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:32Z","created_by":"Dave Tashner","updated_at":"2026-02-27T17:33:00Z","closed_at":"2026-02-27T17:33:00Z","close_reason":"Completed in PR #120","labels":["performance","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.6","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:32Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-6cc.6","depends_on_id":"roots-of-reason-6cc.1","type":"blocks","created_at":"2026-02-27T10:34:09Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.7","title":"Split prototype_main.gd into bootstrapper and flow controller","description":"prototype_main.gd is 1,199 lines — a god object with 64 preloaded scripts, 28 manager references, ~150 lines of setup code. Handles scene assembly, game state transitions, all child system setup, pause/resume, input interception, and victory/defeat flow. Extract: GameBootstrapper (one-time setup, manager initialization, scene assembly), GameFlowController (civ selection → game start → pause → end state machine). Push manager setup into factory pattern. Reduces coupling and makes the game flow testable.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:43Z","created_by":"Dave Tashner","updated_at":"2026-02-27T20:10:04Z","closed_at":"2026-02-27T20:10:04Z","close_reason":"Completed in PR #135","labels":["architecture","refactor","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.7","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:43Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-6cc.7","depends_on_id":"roots-of-reason-6cc.9","type":"blocks","created_at":"2026-02-27T10:34:11Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.8","title":"Implement faction/type unit registries to replace scene tree scanning","description":"Multiple systems scan get_children() to find units by owner_id and type: ai_military._refresh_entity_lists() every 3s, ai_economy similarly, prototype_unit._scan_for_targets(). Create a UnitRegistry (or EntityRegistry) that maintains indexed lists by faction and unit_category. Register on spawn, unregister on death/free. Provides O(1) faction lookup instead of O(n) tree scanning. Works alongside spatial indexing story for complete solution.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:44Z","created_by":"Dave Tashner","updated_at":"2026-02-27T19:10:29Z","closed_at":"2026-02-27T19:10:29Z","close_reason":"Completed in PR #128","labels":["architecture","performance","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.8","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:44Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-6cc.8","depends_on_id":"roots-of-reason-6cc.2","type":"blocks","created_at":"2026-02-27T10:34:09Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cc.9","title":"Introduce event bus for cross-system communication","description":"Currently prototype_main.gd has hard references to 28 systems, and ResourceManager.add_resource() is called directly by units, buildings, tech, trade, and civs. Changes to shared interfaces ripple across 40+ files. Bidirectional coupling exists between TechManager↔HistoricalEventManager and PopulationManager↔PandemicManager. Introduce an EventBus singleton to decouple systems: resource changes, combat events, tech completions, and victory conditions flow through the bus. Add event logging for debugging. This also provides a natural point for event ordering guarantees (currently signal handler execution order is undefined).","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T15:32:45Z","created_by":"Dave Tashner","updated_at":"2026-02-27T17:33:01Z","closed_at":"2026-02-27T17:33:01Z","close_reason":"Completed in PR #123","labels":["architecture","story"],"dependencies":[{"issue_id":"roots-of-reason-6cc.9","depends_on_id":"roots-of-reason-6cc","type":"parent-child","created_at":"2026-02-27T10:32:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cm","title":"Epic: Pandemic \u0026 Corruption Event System","description":"Two early-game friction mechanics: corruption (persistent scaling drain on resources with empire size) and pandemics (random events reducing productivity and killing villagers). Both mitigated and eventually eliminated by specific techs. All settings data-driven from JSON.\n\nKey mechanics:\n- Corruption: active ages 1-4, scales with building count above 8, caps at 30%, countered by Code of Laws/Banking/Civil Service\n- Pandemics: active ages 0-3, random check every 2 min, countered by Herbalism/Sanitation/Vaccines\n- Settings in data/settings/corruption.json and data/settings/pandemics.json","status":"closed","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:25:53Z","created_by":"Dave Tashner","updated_at":"2026-02-27T02:26:35Z","closed_at":"2026-02-27T02:26:35Z","close_reason":"All 3 children closed","labels":["economy","epic","events"]}
{"id":"roots-of-reason-6cm.1","title":"Corruption system: resource drain scaling with empire size","description":"Implement corruption mechanic that reduces resource income based on building count. Active ages 1-4. Starts above 8 buildings at 1.5%/building, caps at 30%. Affected: food, wood, stone, gold (not Knowledge). Countered by Code of Laws (-30%), Banking (-25%), Civil Service (eliminates). Settings in data/settings/corruption.json.\n\n## Acceptance Criteria\n- [ ] Corruption rate calculated per tick based on building count and threshold\n- [ ] Rate capped at max_corruption (30%)\n- [ ] Tech reductions applied cumulatively\n- [ ] Civil Service sets corruption to 0 permanently\n- [ ] Knowledge resource immune to corruption\n- [ ] Only active in configured ages\n- [ ] UI indicator shows current corruption rate\n- [ ] Unit tests for rate calculation with various building counts\n- [ ] Unit tests for tech reduction stacking","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:13Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:53:55Z","closed_at":"2026-02-26T03:53:55Z","close_reason":"Completed in PR #68","labels":["corruption","economy","story"],"dependencies":[{"issue_id":"roots-of-reason-6cm.1","depends_on_id":"roots-of-reason-6cm","type":"parent-child","created_at":"2026-02-22T18:26:12Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cm.2","title":"Pandemic event system: random disease outbreaks","description":"Implement pandemic random events based on population density. Active ages 0-3. Checked every 2 min, base 5% chance (+2% per villager above 15). Effects: -30% work rate, 5% villager death chance, 45s duration. Mitigated by Herbalism (-25%), Sanitation (-50%), Vaccines (immunity). Visual: green particle cloud. Audio: plague bell toll. Settings in data/settings/pandemics.json.\n\n## Acceptance Criteria\n- [ ] Timer-based check every 120 game seconds\n- [ ] Probability scales with population above density threshold\n- [ ] Work rate penalty applied to all villagers during pandemic\n- [ ] Death chance rolled per villager per pandemic tick\n- [ ] Tech mitigations reduce severity and probability\n- [ ] Vaccines grant full immunity\n- [ ] Green particle cloud VFX over Town Center during pandemic\n- [ ] Plague bell toll audio on pandemic start\n- [ ] Only active in configured ages\n- [ ] Unit tests for probability calculation\n- [ ] Unit tests for mitigation stacking","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:13Z","created_by":"Dave Tashner","updated_at":"2026-02-27T01:54:14Z","closed_at":"2026-02-27T01:54:14Z","close_reason":"Completed in PR #104","labels":["events","pandemic","story"],"dependencies":[{"issue_id":"roots-of-reason-6cm.2","depends_on_id":"roots-of-reason-6cm","type":"parent-child","created_at":"2026-02-22T18:26:13Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cm.3","title":"Historical events system: Black Plague and Renaissance","description":"Implement named historical events that fire based on age/tech milestones. Black Plague is a guaranteed mega-pandemic in Medieval Age (-50% work rate, 15% death chance, 90s). Renaissance is a per-player golden age triggered by Printing Press + Banking + Guilds (+35% research, +50% Knowledge, 3 min). Phoenix interaction: Renaissance within 120s of plague gives 1.5x bonuses. Settings in data/settings/historical_events.json.\n\n## Acceptance Criteria\n- [ ] Black Plague fires once per game in Medieval Age (random delay 180-360s into age)\n- [ ] Black Plague affects all players simultaneously\n- [ ] Black Plague effects: -50% work rate, 15% villager death chance, -75% trade income, 90s duration\n- [ ] Medical tech mitigations reduce Black Plague severity (Herbalism, Sanitation, Vaccines=immune)\n- [ ] Post-plague aftermath bonuses: +15% work rate, +20% research speed for 120s\n- [ ] Renaissance triggers per-player when Printing Press + Banking + Guilds all researched\n- [ ] Renaissance effects: +35% research, +50% Knowledge gen, +20% gold, 180s duration\n- [ ] Bonus effects for 3+ Libraries and 2+ Markets during Renaissance\n- [ ] Phoenix interaction: Renaissance within 120s of plague survival → 1.5x multiplier\n- [ ] Visual effects: dark fog (plague), golden glow (renaissance)\n- [ ] Audio: death knells (plague), fanfare (renaissance)\n- [ ] Announcement text for both events\n- [ ] Unit tests for trigger conditions, effect application, mitigation stacking\n- [ ] Integration test: advance to Medieval → plague fires → research 3 techs → renaissance triggers","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:29:20Z","created_by":"Dave Tashner","updated_at":"2026-02-27T02:24:22Z","closed_at":"2026-02-27T02:24:22Z","close_reason":"Completed in PR #105","labels":["events","historical","story"],"dependencies":[{"issue_id":"roots-of-reason-6cm.3","depends_on_id":"roots-of-reason-6cm","type":"parent-child","created_at":"2026-02-22T18:29:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6j9","title":"ADR-011: Knowledge Burning — Tech Regression on City Destruction","description":"When an enemy army destroys a Town Center, the defending civilization loses its most recently researched technology. This represents the burning of libraries, the scattering of scholars, and the destruction of institutional knowledge that historically accompanied the sack of cities.\n\nThis mechanic creates high stakes for base defense, meaningful punishment for over-expansion, and dramatic comeback moments when an attacker cripples a tech leader.\n\nDECISION\n\n1. TRIGGER CONDITION: TOWN CENTER DESTRUCTION\nTech regression triggers ONLY when a Town Center is destroyed by an enemy. Specifically:\n- The destroyed TC must have been fully constructed (not a foundation)\n- The destroyer must be an enemy player (not self-destruction or Gaia)\n- Triggers EVERY time a TC is destroyed, not just the last one\n- If a player has multiple TCs and loses one, they still lose a tech\n- Rationale: each TC represents a center of learning. Losing ANY city is catastrophic to knowledge.\n\nThis makes forward Town Centers (aggressive expansions) risky — they're not just map control, they're tech insurance liabilities.\n\n2. WHICH TECH IS LOST\nThe most recently researched technology is reverted. Rules:\n(a) The tech research history is tracked as an ordered list (first researched → most recent)\n(b) On TC destruction, pop the most recent tech from the list — it becomes un-researched\n(c) Age advancements CANNOT be lost — only individual techs within ages. Losing a tech doesn't de-age you. Rationale: once a civilization has undergone an age transition, the foundational knowledge is too distributed to be lost from one city burning.\n(d) If the player has no researched techs (only age advancements), no tech is lost\n(e) Unique civ techs CAN be lost (they're regular techs, just civ-specific)\n(f) The Singularity chain techs (Transformer Architecture, etc.) CAN be lost — this is intentionally devastating. It means defending your base in the late game is critical for the Singularity victory path.\n\n3. EFFECTS OF LOSING A TECH\nWhen a tech is reverted:\n(a) The bonus from that tech is immediately removed from all units/buildings/economy\n(b) Unit stat upgrades revert: if you lose \"+2 Infantry Attack\", all infantry immediately lose 2 attack\n(c) Economic bonuses revert: if you lose \"+15% farm output\", farms immediately produce less\n(d) Building unlocks: if the lost tech unlocked a building type, existing buildings of that type REMAIN but you cannot build new ones until re-researched\n(e) Unit unlocks: if the lost tech unlocked a unit type, existing units REMAIN but you cannot produce new ones until re-researched\n(f) In-progress research at other buildings is NOT affected (you don't lose partially-researched techs)\n\n4. RE-RESEARCHING LOST TECH\nLost techs can be re-researched:\n- Full resource cost (no discount — the knowledge is truly lost)\n- Requires the same prerequisites as original research (building + age)\n- Can be researched at any surviving building of the appropriate type\n- The tech is added back to the end of the research history (it becomes the \"most recent\" again)\n\n5. KNOWLEDGE BURNING VISUAL AND NOTIFICATION\nWhen a TC is destroyed and tech is lost:\n(a) Dramatic visual: a \"burning scroll\" particle effect rises from the destroyed TC\n(b) Screen flash for the affected player (brief amber/red overlay)\n(c) Large notification: \"City destroyed! Lost technology: [Tech Name]\"\n(d) For the attacking player: \"Enemy city sacked! They lost: [Tech Name]\"\n(e) Game-wide notification (all players): \"[Player] lost knowledge of [Tech Name]\"\n(f) The tech tree UI shows the lost tech reverting (un-highlighting animation)\n(g) Audio: a distinctive \"knowledge lost\" chime/crash sound\n\n6. STRATEGIC IMPLICATIONS\n\nBase defense:\n- Protecting Town Centers is now critical beyond just avoiding defeat\n- Walls and garrisons around TCs become more valuable\n- Players must balance aggressive expansion with TC defense\n\nForward bases:\n- Building a forward TC for map control is a calculated risk — if it falls, you lose tech\n- This creates a meaningful downside to aggressive expansion that doesn't exist in most RTS games\n- \"Should I build a forward TC?\" becomes a strategic question with real consequences\n\nRaiding strategy:\n- Targeting enemy TCs becomes a dual-purpose tactic: deny territory AND regress their tech\n- A surgical TC snipe can be more valuable than killing 20 units\n- Siege units gain strategic importance beyond just building damage\n\nSingularity defense:\n- In the late game, a player pursuing Singularity victory has the most to lose from TC destruction\n- Losing the Transformer Architecture tech forces a costly re-research\n- This makes the Singularity path high-risk/high-reward: you need an advanced tech tree AND you need to defend it\n- Other players are incentivized to target the tech leader's TCs\n\nComeback mechanic:\n- A player who falls behind militarily but leads in tech can be pulled back by TC raids\n- Creates natural rubber-banding without artificial handicaps\n- A successful defense of your TCs under pressure is genuinely rewarding\n\n7. EDGE CASES AND LIMITS\n- Maximum 1 tech lost per TC destruction (not cascading)\n- If multiple TCs are destroyed in rapid succession (\u003c5 seconds apart), each triggers a separate tech loss\n- If the lost tech was a prerequisite for another researched tech: the dependent tech is NOT lost (only the most recent one). The prerequisite chain is not recursively unwound.\n- During an age advancement in progress at the destroyed TC: the age advancement is cancelled and resources refunded (but no tech is lost from the cancellation — the trigger is TC destruction, not research cancellation)\n- AI players also lose tech when their TCs are destroyed (no AI immunity)\n\n8. BALANCE TUNING\nThe severity can be tuned via data:\n- data/settings/knowledge_burning.json:\n  {\n    \"enabled\": true,\n    \"trigger\": \"town_center_destroyed\",\n    \"tech_loss_count\": 1,\n    \"protect_age_advancements\": true,\n    \"protect_first_n_techs\": 0,\n    \"re_research_cost_multiplier\": 1.0,\n    \"cooldown_seconds\": 0\n  }\n- protect_first_n_techs: could be set to 2-3 to protect the earliest techs (gentler for new players)\n- re_research_cost_multiplier: could be 0.5 for half-price re-research (less punishing)\n- cooldown_seconds: could prevent multiple tech losses within N seconds (prevents total wipeout from a coordinated TC rush)\n\nCONSEQUENCES\n- Town Centers become the highest-value targets in the game\n- Every TC construction is a strategic decision (expansion vs risk)\n- The tech tree has genuine stakes — progress is not permanent\n- Late-game Singularity pushes require serious military defense\n- Creates natural comeback mechanics through targeted raids\n- Adds emotional weight to city destruction (players will FEEL the loss)\n- AI must factor TC defense into its strategy\n- The mechanic is easy to explain but creates deep strategic ripples","status":"closed","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:09:23Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:50Z","closed_at":"2026-02-22T22:39:50Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","combat","tech"]}
{"id":"roots-of-reason-6rm","title":"Epic: Naval Gameplay Completion","description":"Complete the naval gameplay systems. While data definitions exist for naval units (Fishing Boat, War Galley, Cannon Ship, Transport Ship, Merchant Ship), the full gameplay loops need integration testing and polish. Includes: fishing boat gather cycles, naval combat mechanics, transport ship embark/disembark flow, merchant ship trade routes over water, dock production queue, deep ocean navigation building, and naval AI opponent behavior.","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:55:56Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:55:56Z","labels":["gameplay","naval","water"]}
{"id":"roots-of-reason-6rm.1","title":"Fishing Boat gather cycle: dock→fish deposit→dock return","description":"Implement and test the full Fishing Boat economic loop: train at Dock, sail to nearest fish deposit, gather fish (0.5/s), return to Dock to drop off food, repeat. Handle deposit depletion and reassignment to next nearest deposit. Integration test with resource tracking.","acceptance_criteria":"- [ ] Fishing Boat trained at Dock (75 Wood, 25s)\n- [ ] Auto-sails to nearest fish deposit after training\n- [ ] Gathers fish at 0.5/s per data/units/fishing_boat.json\n- [ ] Returns to Dock to deposit food when carry capacity (15) full\n- [ ] Resumes gathering after deposit\n- [ ] When fish deposit depleted, reassigns to next nearest deposit\n- [ ] If no deposits available, idles at Dock\n- [ ] GdUnit4 test: fishing boat completes gather→deposit→return cycle, food increases\n- [ ] GdUnit4 test: deposit depletion triggers reassignment\n- [ ] GdUnit4 test: multiple fishing boats share deposits correctly","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:40Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:40Z","labels":["economy","gameplay","naval"],"dependencies":[{"issue_id":"roots-of-reason-6rm.1","depends_on_id":"roots-of-reason-6rm","type":"parent-child","created_at":"2026-03-01T11:58:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6rm.2","title":"Naval combat: War Galley vs War Galley engagement mechanics","description":"Implement naval combat engagement: War Galleys use ranged attacks (range 4), movement on water tiles only, targeting priority, retreat behavior. Test: 2v2 galley combat resolves correctly, damaged ships flee, sinking animation triggers on death. Verify Polynesia's War Canoe speed advantage.","acceptance_criteria":"- [ ] War Galley attacks with range 4 on water tiles only\n- [ ] War Galley cannot move on land tiles\n- [ ] Damaged War Galley flees when HP \u003c 20%\n- [ ] Sinking animation plays on death\n- [ ] Polynesia War Canoe has 2.34 speed (1.8 * 1.3) vs War Galley 1.8\n- [ ] GdUnit4 test: 2v2 galley combat resolves (one side eliminated)\n- [ ] GdUnit4 test: War Canoe speed advantage verified\n- [ ] GdUnit4 test: naval units cannot path onto land\n- [ ] Damage formula uses standard combat_resolver.gd (attack - defense, min 1)","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:40Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:40Z","labels":["combat","gameplay","naval"],"dependencies":[{"issue_id":"roots-of-reason-6rm.2","depends_on_id":"roots-of-reason-6rm","type":"parent-child","created_at":"2026-03-01T11:58:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6rm.3","title":"Transport Ship embark/disembark flow with land units","description":"Complete Transport Ship mechanics: land units embark at Dock or shore, transport moves on water, disembark at destination shore/dock. Handle: capacity limits (10 units), embark/disembark animation, units retain HP/buffs during transport. Integration test: move 5 infantry across water.","acceptance_criteria":"- [ ] Land units can embark Transport Ship at Dock or adjacent shore tile\n- [ ] Transport Ship capacity: 10 units per data/units/transport_ship.json\n- [ ] Embarked units hidden from map, not selectable\n- [ ] Disembark at destination shore or Dock\n- [ ] Units retain HP, buffs, and state during transport\n- [ ] Attempting to embark beyond capacity fails with signal\n- [ ] GdUnit4 test: embark 5 infantry → sail → disembark → 5 infantry at destination\n- [ ] GdUnit4 test: embark 11 units fails (capacity 10)\n- [ ] GdUnit4 test: embarked units not targetable by enemies","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:41Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:41Z","labels":["gameplay","naval","transport"],"dependencies":[{"issue_id":"roots-of-reason-6rm.3","depends_on_id":"roots-of-reason-6rm","type":"parent-child","created_at":"2026-03-01T11:58:41Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6rm.4","title":"Merchant Ship trade routes over water","description":"Implement Merchant Ship water trade: train at Dock, establish trade route between two Docks (own or allied), generate gold based on distance traveled. Handle route pathfinding on water tiles, trade income calculation, and route visualization on minimap.","acceptance_criteria":"- [ ] Merchant Ship trained at Dock (150 Wood + 75 Gold, 35s)\n- [ ] Right-click on another Dock to establish trade route\n- [ ] Gold generated per trip based on distance between Docks\n- [ ] Route visualized on minimap as dotted line\n- [ ] Merchant Ship paths only on water tiles\n- [ ] GdUnit4 test: trade route generates gold proportional to distance\n- [ ] GdUnit4 test: destroying destination Dock cancels route\n- [ ] Trade income affected by Guild/Banking tech bonuses","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:42Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:42Z","labels":["economy","gameplay","naval"],"dependencies":[{"issue_id":"roots-of-reason-6rm.4","depends_on_id":"roots-of-reason-6rm","type":"parent-child","created_at":"2026-03-01T11:58:41Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6rm.5","title":"Dock production queue integration","description":"Ensure Dock building properly supports production_queue.gd for training all naval units: Fishing Boat, Transport Ship, War Galley, Merchant Ship, Cannon Ship. Verify tech prerequisites gate unit availability correctly. Test queue cancellation and resource refund.","acceptance_criteria":"- [ ] Dock production queue supports: Fishing Boat, Transport Ship, War Galley, Merchant Ship, Cannon Ship\n- [ ] Units gated by tech prerequisites: War Galley requires Trireme tech, Cannon Ship requires Galleon tech\n- [ ] Queue max 5 units (same as Barracks)\n- [ ] Cancel refunds full cost\n- [ ] GdUnit4 test: Dock queues and produces Fishing Boat\n- [ ] GdUnit4 test: War Galley unavailable without Trireme tech\n- [ ] GdUnit4 test: queue cancel refunds resources","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:42Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:42Z","labels":["buildings","gameplay","naval"],"dependencies":[{"issue_id":"roots-of-reason-6rm.5","depends_on_id":"roots-of-reason-6rm","type":"parent-child","created_at":"2026-03-01T11:58:42Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6rm.6","title":"Cannon Ship siege mechanics vs coastal buildings","description":"Implement Cannon Ship's anti-building capability: 8x bonus vs buildings from water, range 6. Ships can bombard coastal buildings (Docks, Town Centers near shore). Test: Cannon Ship destroys enemy Dock, damage calculation with building damage reduction bypass (siege armor).","acceptance_criteria":"- [ ] Cannon Ship deals 8x bonus vs buildings (per data/units/cannon_ship.json)\n- [ ] Can attack buildings within range 6 from water tiles\n- [ ] Building must be within 6 tiles of water to be targetable\n- [ ] Building damage reduction bypass: siege armor class ignores 60% per combat settings\n- [ ] GdUnit4 test: Cannon Ship destroys enemy Dock\n- [ ] GdUnit4 test: inland Barracks not targetable from water\n- [ ] GdUnit4 test: damage calculation matches combat_resolver with siege bypass","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:43Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:43Z","labels":["combat","gameplay","naval"],"dependencies":[{"issue_id":"roots-of-reason-6rm.6","depends_on_id":"roots-of-reason-6rm","type":"parent-child","created_at":"2026-03-01T11:58:42Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6rm.7","title":"Naval AI: opponent builds and uses naval units","description":"Extend AI opponent to build Docks, train naval units, establish fishing economy, and use War Galleys for water control. AI should prioritize Dock construction on maps with significant water. Polynesia AI should lean heavily into naval strategy.","acceptance_criteria":"- [ ] AI builds Dock on maps with \u003e15% water tiles\n- [ ] AI trains Fishing Boats (at least 2) for food economy\n- [ ] AI trains War Galleys when enemy has naval presence\n- [ ] Polynesia AI prioritizes naval strategy (builds Dock first, more naval units)\n- [ ] AI does not build Dock on maps with \u003c5% water tiles\n- [ ] GdUnit4 test: AI with Polynesia civ builds Dock within first 5 minutes\n- [ ] GdUnit4 test: AI responds to enemy naval attack with War Galleys","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:44Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:43Z","labels":["ai","gameplay","naval"],"dependencies":[{"issue_id":"roots-of-reason-6rm.7","depends_on_id":"roots-of-reason-6rm","type":"parent-child","created_at":"2026-03-01T11:58:43Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-6rm.7","depends_on_id":"roots-of-reason-6rm.5","type":"blocks","created_at":"2026-03-01T12:09:13Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6s9","title":"[epic] Debug server v2: entity inspection and game automation","description":"Extends the debug HTTP server (from epic a15) with entity inspection, conditional waiting, scenario scripting, entity spawning, and annotated screenshots. Enables Claude Code to fully observe and control game state for debugging and testing.","status":"closed","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T23:29:50Z","created_by":"Dave Tashner","updated_at":"2026-03-01T00:30:48Z","closed_at":"2026-03-01T00:30:48Z","close_reason":"All 5 stories completed: PRs #212, #214, #216, #217, #218"}
{"id":"roots-of-reason-6s9.1","title":"Entity query endpoint (GET /entities)","description":"Add GET /entities endpoint to the debug server that returns structured data about all game entities.\n\n## Query parameters\n- category — filter by entity_category (resource_node, unit, building)\n- type — filter by resource_type or unit_type (tree, fish, villager, etc.)\n- owner — filter by owner_id (0=player, 1=AI, -1=gaia)\n\n## Response fields per entity\n- name, entity_category, position (grid and screen), owner_id\n- For units: unit_type, current action/state (idle, gathering, moving, combat), gather_state, gather_type, carried_amount, carry_capacity, selected, hp\n- For resources: resource_type, resource_name, current_yield, total_yield, grid_position\n- For buildings: building_type, hp, is_drop_off, drop_off_types\n\n## CLI wrapper\n- \\`./tools/ror entities [--category X] [--type Y] [--owner N]\\`\n- Pretty-print table or JSON output\n\nThis is the highest-impact addition — enables Claude Code to inspect game state beyond raw pixel screenshots.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T23:30:18Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:37:52Z","closed_at":"2026-02-28T23:37:52Z","close_reason":"Completed in PR #212","dependencies":[{"issue_id":"roots-of-reason-6s9.1","depends_on_id":"roots-of-reason-6s9","type":"parent-child","created_at":"2026-02-28T18:30:18Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6s9.2","title":"Conditional wait CLI (ror wait-until)","description":"Add \\`./tools/ror wait-until \u003ccondition\u003e [--timeout N]\\` that polls GET /status until a condition is met.\n\n## Conditions\n- Resource comparisons: \\`wood\u003e250\\`, \\`food\u003e=100\\`\n- Time: \\`time\u003e120\\`\n- Unit state: \\`idle\u003e3\\` (more than 3 idle units)\n\n## Behavior\n- Polls every 1s (configurable with --interval)\n- Default timeout 60s\n- Exits 0 on success, 1 on timeout\n- Prints final status on exit\n\nEnables scripted waits between game-cmd actions without manual polling.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T23:30:19Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:42:26Z","closed_at":"2026-02-28T23:42:26Z","close_reason":"Completed in PR #214","dependencies":[{"issue_id":"roots-of-reason-6s9.2","depends_on_id":"roots-of-reason-6s9","type":"parent-child","created_at":"2026-02-28T18:30:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6s9.3","title":"Scenario runner (ror scenario)","description":"Add \\`./tools/ror scenario \u003cscript\u003e\\` that executes a semicolon-separated sequence of debug commands with built-in waits.\n\n## Syntax\n- Commands: select-all, gather X Y, right-click X Y, camera-to X Y, speed N, screenshot NAME, wait CONDITION\n- Example: \\`select-all; gather 5 4; wait wood\u003e250; screenshot drop-off-complete\\`\n\n## Features\n- Sequential execution with error handling (stop on first failure)\n- Optional --file flag to read from a .scenario file\n- Print step-by-step progress\n\nEnables reproducible multi-step test sequences for visual bug verification.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T23:30:20Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:45:36Z","closed_at":"2026-02-28T23:45:36Z","close_reason":"Completed in PR #216","dependencies":[{"issue_id":"roots-of-reason-6s9.3","depends_on_id":"roots-of-reason-6s9","type":"parent-child","created_at":"2026-02-28T18:30:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6s9.4","title":"Spawn and teleport commands","description":"Add spawn and teleport actions to POST /command endpoint.\n\n## Actions\n- spawn: create entity at grid position\n  - \\`{\"action\": \"spawn\", \"type\": \"villager\", \"grid_x\": 5, \"grid_y\": 5, \"owner\": 0}\\`\n  - \\`{\"action\": \"spawn\", \"type\": \"tree\", \"grid_x\": 8, \"grid_y\": 8}\\`\n  - Support: villager, tree, stone, gold, fish, and any unit/resource type in data/\n- teleport: move selected units to grid position instantly (no pathfinding)\n  - \\`{\"action\": \"teleport\", \"grid_x\": 5, \"grid_y\": 5}\\`\n\n## CLI\n- \\`./tools/ror game-cmd spawn type=villager grid_x=5 grid_y=5 owner=0\\`\n- \\`./tools/ror game-cmd teleport grid_x=5 grid_y=5\\`\n\nEnables setting up specific test scenarios without relying on random map generation.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T23:30:20Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:55:11Z","closed_at":"2026-02-28T23:55:11Z","close_reason":"Completed in PR #217","dependencies":[{"issue_id":"roots-of-reason-6s9.4","depends_on_id":"roots-of-reason-6s9","type":"parent-child","created_at":"2026-02-28T18:30:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6s9.5","title":"Annotated screenshot mode","description":"Add GET /screenshot?annotate=true that overlays debug information on the viewport capture.\n\n## Annotations\n- Entity name labels above each unit/resource/building\n- Unit state text (idle, gathering wood, moving, carrying 8 wood)\n- Health bars\n- Grid coordinate overlay on tiles\n- Selection highlight (bright outline on selected units)\n\n## Implementation options\n- Option A: Draw annotations in GDScript before capture (temporary CanvasLayer), remove after\n- Option B: Post-process the PNG in Python (add text overlays via PIL)\n\nOption A is more accurate (uses game coordinates). Option B is simpler and doesn't modify game state.\n\nSolves the problem of multiple units stacked on the same tile being indistinguishable in raw screenshots.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T23:30:21Z","created_by":"Dave Tashner","updated_at":"2026-03-01T00:06:12Z","closed_at":"2026-03-01T00:06:12Z","close_reason":"Completed in PR #218","dependencies":[{"issue_id":"roots-of-reason-6s9.5","depends_on_id":"roots-of-reason-6s9","type":"parent-child","created_at":"2026-02-28T18:30:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6u4","title":"ADR-006: Project Structure","description":"Godot 4 project layout: scenes/ (by feature), scripts/ (GDScript), assets/ (art, audio, fonts), autoloads/ (singletons: GameManager, ResourceManager), data/ (JSON: tech trees, unit stats, civ data).","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:05Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:46Z","closed_at":"2026-02-22T22:39:46Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-73y","title":"Forest Tree Clusters","status":"closed","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T03:16:10Z","created_by":"Dave Tashner","updated_at":"2026-02-28T04:03:45Z","closed_at":"2026-02-28T04:03:45Z","close_reason":"All child stories completed: cluster placement (#158), sprite support (#158), tree art (#160), ground tiles (#161)"}
{"id":"roots-of-reason-73y.2","title":"Cluster placement logic","description":"Add _expand_clusters() to resource_generator, reduce tree yield to 50, apply sub-tile offsets in game_bootstrapper","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T03:16:27Z","created_by":"Dave Tashner","updated_at":"2026-02-28T03:28:27Z","closed_at":"2026-02-28T03:28:27Z","close_reason":"Completed in PR #158","dependencies":[{"issue_id":"roots-of-reason-73y.2","depends_on_id":"roots-of-reason-73y","type":"parent-child","created_at":"2026-02-27T22:16:27Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-73y.3","title":"Sprite support in resource node","description":"Add Sprite2D rendering to prototype_resource_node.gd with states: full, half, stump. Fallback to _draw() when no sprites.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T03:16:32Z","created_by":"Dave Tashner","updated_at":"2026-02-28T03:28:28Z","closed_at":"2026-02-28T03:28:28Z","close_reason":"Completed in PR #158","dependencies":[{"issue_id":"roots-of-reason-73y.3","depends_on_id":"roots-of-reason-73y","type":"parent-child","created_at":"2026-02-27T22:16:31Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-73y.4","title":"Tree art sprites","description":"Generate AI art: tree_full.png, tree_half.png, tree_stump.png (80x80 max)","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T03:16:32Z","created_by":"Dave Tashner","updated_at":"2026-02-28T03:48:10Z","closed_at":"2026-02-28T03:48:10Z","close_reason":"Completed in PR #160","dependencies":[{"issue_id":"roots-of-reason-73y.4","depends_on_id":"roots-of-reason-73y","type":"parent-child","created_at":"2026-02-27T22:16:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-73y.5","title":"Forest ground tile art","description":"Generate forest_flat_01..04 ground tiles (128x64) — bare forest floor variants","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T03:16:33Z","created_by":"Dave Tashner","updated_at":"2026-02-28T04:03:37Z","closed_at":"2026-02-28T04:03:37Z","close_reason":"Completed in PR #161","dependencies":[{"issue_id":"roots-of-reason-73y.5","depends_on_id":"roots-of-reason-73y","type":"parent-child","created_at":"2026-02-27T22:16:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-73y.6","title":"Split tree quads and add variant sprite support","description":"Split tree_full_quad.png, tree_half_quad.png, tree_stump_quad.png into individual 80x80 sprites. Update prototype_resource_node.gd to support variant arrays per state. Each tree picks a variant by index for visual diversity.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T03:38:33Z","created_by":"Dave Tashner","updated_at":"2026-02-28T03:48:09Z","closed_at":"2026-02-28T03:48:09Z","close_reason":"Completed in PR #160","dependencies":[{"issue_id":"roots-of-reason-73y.6","depends_on_id":"roots-of-reason-73y","type":"parent-child","created_at":"2026-02-27T22:38:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-759","title":"Add formation offsets to gather commands so villagers spread around resources","description":"When multiple villagers are sent to gather from the same resource, they all converge on the same tile and stack on top of each other. Reuse the existing FormationManager to compute offsets around the resource tile so each villager gets a unique nearby position. Validate offset tiles are passable.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T03:07:37Z","created_by":"Dave Tashner","updated_at":"2026-03-01T03:20:08Z","closed_at":"2026-03-01T03:20:08Z","close_reason":"Completed in PR #240"}
{"id":"roots-of-reason-7cc","title":"Project foundation fixes: .gitignore, CLAUDE.md, close ADR issues","status":"closed","priority":0,"issue_type":"chore","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:40:12Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:42:13Z","closed_at":"2026-02-22T22:42:13Z","close_reason":"Completed in PR #5","labels":["dx","housekeeping"]}
{"id":"roots-of-reason-7nh","title":"Add wood chopping animation for villagers","description":"Process villager_axe_spritesheet_01.png into 3 game-ready frames, add chop animation to sprite system, wire up to play when gathering wood. South direction only; other directions fall back to generic gather.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:23:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:26:43Z","closed_at":"2026-03-01T02:26:43Z","close_reason":"Completed in PR #234"}
{"id":"roots-of-reason-7vx","title":"Terrain Improvements","description":"Improve noise-based terrain generation: unbuildable shore, larger forests, smoother biomes, desert zone, border blending","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T13:16:47Z","created_by":"Dave Tashner","updated_at":"2026-03-01T13:53:38Z","closed_at":"2026-03-01T13:53:38Z","close_reason":"All 7 stories completed: PRs #256-#262","labels":["map","terrain"]}
{"id":"roots-of-reason-7vx.1","title":"story","description":"Change shore.buildable from true to false in terrain.json. Docks already use placement_constraint adjacent_to_water which checks water/shallows/deep_water neighbors, not shore itself.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T13:17:02Z","created_by":"Dave Tashner","updated_at":"2026-03-01T13:22:06Z","closed_at":"2026-03-01T13:22:06Z","close_reason":"Completed in PR #256","labels":["map","terrain"],"dependencies":[{"issue_id":"roots-of-reason-7vx.1","depends_on_id":"roots-of-reason-7vx","type":"parent-child","created_at":"2026-03-01T08:17:01Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7vx.2","title":"story","description":"Lower noise frequencies (elevation 0.015→0.008, moisture 0.02→0.012) and add cellular automaton smoothing pass to eliminate single-tile outliers.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T13:17:06Z","created_by":"Dave Tashner","updated_at":"2026-03-01T13:29:25Z","closed_at":"2026-03-01T13:29:25Z","close_reason":"Completed in PR #257","labels":["map","terrain"],"dependencies":[{"issue_id":"roots-of-reason-7vx.2","depends_on_id":"roots-of-reason-7vx","type":"parent-child","created_at":"2026-03-01T08:17:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7vx.3","title":"story","description":"Reduce min_spacing to 1, increase cluster sizes and density, add secondary forest noise layer for natural clustering with clearings.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T13:17:07Z","created_by":"Dave Tashner","updated_at":"2026-03-01T13:33:43Z","closed_at":"2026-03-01T13:33:43Z","close_reason":"Completed in PR #258","labels":["map","terrain"],"dependencies":[{"issue_id":"roots-of-reason-7vx.3","depends_on_id":"roots-of-reason-7vx","type":"parent-child","created_at":"2026-03-01T08:17:06Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7vx.4","title":"story","description":"Add desert as a biome where elevation is sand-level AND moisture is very low (\u003c0.25). Currently desert is defined in prototype_map but not used in tilemap_terrain.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T13:33:51Z","created_by":"Dave Tashner","updated_at":"2026-03-01T13:39:04Z","closed_at":"2026-03-01T13:39:04Z","close_reason":"Completed in PR #259","labels":["map","terrain"],"dependencies":[{"issue_id":"roots-of-reason-7vx.4","depends_on_id":"roots-of-reason-7vx","type":"parent-child","created_at":"2026-03-01T08:33:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7vx.5","title":"story","description":"Probabilistic border blending during smoothing pass — where grass meets dirt or sand meets grass, scatter neighboring type 1-2 tiles into border zone.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T13:33:53Z","created_by":"Dave Tashner","updated_at":"2026-03-01T13:43:50Z","closed_at":"2026-03-01T13:43:50Z","close_reason":"Completed in PR #260","labels":["map","terrain"],"dependencies":[{"issue_id":"roots-of-reason-7vx.5","depends_on_id":"roots-of-reason-7vx","type":"parent-child","created_at":"2026-03-01T08:33:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7vx.6","title":"story","description":"Forest terrain tiles should always have trees on them. Non-forest tiles should have sparser trees. Connect terrain type to resource density.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T13:33:55Z","created_by":"Dave Tashner","updated_at":"2026-03-01T13:47:37Z","closed_at":"2026-03-01T13:47:37Z","close_reason":"Completed in PR #261","labels":["map","terrain"],"dependencies":[{"issue_id":"roots-of-reason-7vx.6","depends_on_id":"roots-of-reason-7vx","type":"parent-child","created_at":"2026-03-01T08:33:54Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7vx.7","title":"story","description":"Add high-frequency noise layer for micro-variation — occasional meadow/clearing tiles within forest zones to break up monotony.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T13:33:57Z","created_by":"Dave Tashner","updated_at":"2026-03-01T13:53:29Z","closed_at":"2026-03-01T13:53:29Z","close_reason":"Completed in PR #262","labels":["map","terrain"],"dependencies":[{"issue_id":"roots-of-reason-7vx.7","depends_on_id":"roots-of-reason-7vx","type":"parent-child","created_at":"2026-03-01T08:33:56Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wd","title":"Add unlock_buildings cross-reference validation to data_check.py","description":"data_check.py validates tech prerequisites but not unlock_buildings references. Extend cross_reference_checks to verify building IDs exist in data/buildings/.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T06:45:03Z","closed_at":"2026-02-28T06:45:03Z","close_reason":"Completed in PR #177"}
{"id":"roots-of-reason-7wg","title":"Epic 4: Resource System","description":"5 core resources (Food, Wood, Stone, Gold, Knowledge), villager gathering, resource depletion/regeneration, resource UI, trade mechanics.","status":"closed","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:07Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:13:25Z","closed_at":"2026-02-26T05:13:25Z","close_reason":"All children completed. Final child 7wg.5 (Trade) closed in PR #74.","labels":["epic","resources"],"dependencies":[{"issue_id":"roots-of-reason-7wg","depends_on_id":"roots-of-reason-ovr","type":"blocks","created_at":"2026-02-22T14:44:54Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.1","title":"Define 5 core resources: Food, Wood, Stone, Gold, Knowledge","description":"Create resource data model with 5 types: Food, Wood, Stone, Gold, Knowledge. Each player has a stockpile. Resources are integers. Knowledge is a unique resource earned from Libraries and research.\n\nAcceptance Criteria:\n- [ ] Resource enum/constants: FOOD, WOOD, STONE, GOLD, KNOWLEDGE\n- [ ] Resource configuration in data/resources/resource_config.json\n- [ ] Each resource has: id, display_name, icon_path, color, starting_amount\n- [ ] Starting amounts per resource defined per difficulty in JSON\n- [ ] Knowledge is NOT gathered from map — generated by buildings (Library, Ziggurat) and research\n- [ ] ResourceManager autoload tracks current stockpile per resource per player\n- [ ] ResourceManager emits signals: resource_changed(player_id, resource_type, old_amount, new_amount)\n- [ ] ResourceManager.can_afford(player_id, cost: Dictionary) -\u003e bool\n- [ ] ResourceManager.spend(player_id, cost: Dictionary) -\u003e bool (returns false if insufficient)\n- [ ] All amounts stored as integers (no floating-point resource bugs)\n- [ ] Resource state serializable for save/load\n- [ ] Unit tests for can_afford, spend, and signal emission","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:21Z","created_by":"Dave Tashner","updated_at":"2026-02-23T17:17:45Z","closed_at":"2026-02-23T17:17:45Z","close_reason":"Completed in PR #44","labels":["resources","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.1","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.2","title":"Villager gathering mechanics","description":"Villagers: right-click resource node to gather. Walk to node, harvest animation (timed), carry resources back to nearest drop-off (Town Center, Mill, Mining Camp, Lumber Camp). Carry capacity limit. Repeat cycle.\n\nAcceptance Criteria:\n- [ ] Villager right-clicks resource node → walks to it → gathers → returns to drop-off\n- [ ] Gather rate per resource type loaded from data/units/villager.json\n- [ ] Villager carries limited amount per trip (carry capacity in JSON)\n- [ ] Villager auto-returns to nearest drop-off building (Town Center, Mining Camp, Lumber Camp, Mill)\n- [ ] Villager deposits carried resources, then auto-returns to same resource node\n- [ ] Gathering depletes resource node; node disappears when yield reaches 0\n- [ ] Villager auto-finds nearest same-type resource when current node depleted\n- [ ] Gather animation plays while collecting (Phase 1: simple timer + particle)\n- [ ] Multiple villagers can gather from same node simultaneously\n- [ ] Gathering state serializable (current node, carried amount, trip state)\n- [ ] Unit tests for gather rate math and carry capacity logic\n- [ ] Integration test: villager gathers 100 food from berry bush to Town Center","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:22Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:18:15Z","closed_at":"2026-02-23T02:18:15Z","close_reason":"Completed in PR #15","labels":["gathering","resources","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.2","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.3","title":"Resource depletion and regeneration","description":"Resource nodes have finite amounts that deplete with gathering. Trees regrow slowly. Berry bushes deplete permanently. Gold/stone mines deplete permanently. Fish deplete slowly. Show remaining amount on hover.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:23Z","created_by":"Dave Tashner","updated_at":"2026-02-25T04:17:26Z","closed_at":"2026-02-25T04:17:26Z","close_reason":"Completed in PR #55","labels":["resources","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.3","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.4","title":"Resource UI display (top bar)","description":"Top-of-screen resource bar showing: Food, Wood, Stone, Gold, Knowledge amounts. Also show population (current/cap). Update in real-time. Icons for each resource type.\n\nAcceptance Criteria:\n- [ ] HUD bar at top of screen showing all 5 resource amounts\n- [ ] Each resource shows: icon + current amount (e.g., 🌾 450)\n- [ ] Amount updates in real-time as resources change\n- [ ] Connects to ResourceManager.resource_changed signal\n- [ ] Insufficient resources flash red when player attempts unaffordable action\n- [ ] Population counter shown alongside resources (e.g., 14/20 with house icon)\n- [ ] Layout scales with viewport width (no clipping at 1920x1080)\n- [ ] Resource bar does not intercept mouse events for game world below\n- [ ] Phase 1: colored rectangles for icons, numeric labels for amounts\n- [ ] Unit tests for display formatting (large numbers, zero values)\n- [ ] Smoke test: UI scene loads without errors","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:23Z","created_by":"Dave Tashner","updated_at":"2026-02-23T17:19:29Z","closed_at":"2026-02-23T17:19:29Z","close_reason":"Already implemented: resource_bar.gd and test_resource_bar.gd cover all acceptance criteria","labels":["resources","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-7wg.4","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.5","title":"Trade and market mechanics","description":"Market building allows converting between resources at exchange rates. Trade carts between own markets and allied/neutral markets for gold income. Rates fluctuate based on supply/demand. Available from Bronze Age.","status":"closed","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:24Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:13:07Z","closed_at":"2026-02-26T05:13:07Z","close_reason":"Completed in PR #74","labels":["resources","story","trade"],"dependencies":[{"issue_id":"roots-of-reason-7wg.5","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.6","title":"River resource transport system with barges","description":"Implement the river transport system: resources deposited at upstream River Docks are automatically shipped downstream via barges.\n\nCore transport logic:\n1. When a villager deposits resources at a River Dock, check for a valid downstream route:\n   - Trace river tiles following flow_direction from the dock's adjacent river tile\n   - Look for the nearest downstream building that is a valid drop-off (another River Dock owned by same player, or a Town Center within 2 tiles of the river)\n   - If found, initiate a barge shipment\n   - If no downstream depot exists, resources just stay in the player stockpile as normal (the River Dock still functions as a regular drop-off)\n\n2. Barge entity:\n   - Visual: small sprite moving along river tiles following flow_direction\n   - Speed: 3x base villager movement speed (configurable via river_dock.json transport_speed_multiplier)\n   - Capacity: 30 resources per trip (configurable via max_barge_capacity)\n   - Dispatch interval: every 5 seconds, if resources are waiting at the dock (configurable via barge_spawn_interval)\n   - Batching: barge carries up to capacity of mixed resource types deposited since last dispatch\n\n3. Resource flow accounting:\n   - When barge departs: resources are already in player stockpile (deposited by villager at dock)\n   - The barge is purely visual + vulnerability — resources are not \"held\" by the barge for accounting purposes\n   - HOWEVER: if the barge is destroyed, the carried resource amount is DEDUCTED from the player stockpile\n   - This creates risk: fast transport but vulnerable to raiding\n   - Display \"in transit\" amount in resource UI as a secondary indicator\n\n4. Barge destruction:\n   - Barges have 15 HP and 0 defense (very fragile)\n   - Any unit can attack a barge (melee units must be adjacent to river, ranged can shoot from bank)\n   - When destroyed: carried resources are lost (deducted from player stockpile), small splash visual\n   - Destroyed barges do not respawn automatically — the dock simply dispatches a new one on its next cycle\n\n5. Pathfinding for barges:\n   - Barges follow river tiles via flow_direction — no pathfinding needed, just follow the chain\n   - At river merges (two rivers join), barge continues downstream on the merged river\n   - If the downstream river is blocked (enemy building on bank? destroyed bridge?), barge queues at the blockage\n\n6. Multiple docks on same river:\n   - Each dock independently dispatches barges to the nearest downstream depot\n   - A chain of docks acts like a relay: Dock A ships to Dock B, Dock B ships to Town Center\n   - Each hop is a separate barge\n\nData file: data/buildings/river_dock.json\n{\n  \"transport_speed_multiplier\": 3.0,\n  \"max_barge_capacity\": 30,\n  \"barge_spawn_interval\": 5.0,\n  \"barge_hp\": 15\n}\n\nAcceptance criteria:\n- Resources deposited at upstream River Dock are visibly transported downstream\n- Barges follow river flow direction correctly\n- Barges arrive at nearest downstream drop-off and resources remain in stockpile\n- Barges can be attacked and destroyed, causing resource loss\n- Multiple docks on the same river chain correctly\n- Transport speed is noticeably faster than villager walking\n- System handles edge cases: dock destroyed mid-transit, no downstream depot, river with no docks","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:20Z","created_by":"Dave Tashner","updated_at":"2026-02-23T12:54:37Z","closed_at":"2026-02-23T12:54:37Z","close_reason":"Completed in PR #31","labels":["resources","river","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.6","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T16:01:20Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.6","depends_on_id":"roots-of-reason-7y5.6","type":"blocks","created_at":"2026-02-22T16:01:36Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.6","depends_on_id":"roots-of-reason-ovr.6","type":"blocks","created_at":"2026-02-22T16:01:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.7","title":"Barge entity: visual, movement, and combat vulnerability","description":"Implement the barge as a visible, attackable entity that moves along rivers carrying resources.\n\nBarge entity:\n- Node type: extends the base unit entity (CharacterBody2D or Area2D)\n- NOT player-controllable — moves automatically following river flow_direction\n- Sprite: small boat/raft placeholder (Phase 1: brown rectangle on water)\n- Size: roughly half a tile width\n- Movement: follows river tiles sequentially, moving from tile center to tile center along flow_direction\n- Speed: transport_speed_multiplier * base_villager_speed (default 3x)\n- Shows small resource icons above the barge indicating what it carries\n\nCombat properties:\n- HP: 15 (very fragile — 1-2 hits from most units)\n- Defense: 0\n- Targetable by any unit (melee must be adjacent to river tile, ranged can attack from bank)\n- Does NOT fight back\n- When destroyed: splash particle effect, resource icons scatter and fade\n- Resource loss: on destruction, the carried resource amounts are deducted from the owning player's stockpile\n- The player receives a notification: \"Barge destroyed! Lost: 20 Gold, 10 Stone\"\n\nVisual feedback:\n- Barge has a small wake/ripple trail behind it\n- Carries a tiny player-color flag (team color shader applies)\n- When taking damage: flash red\n- Resource load shown as small stacked icons on the barge sprite\n- Empty barges are not spawned — only dispatched when resources are queued\n\nLifecycle:\n1. Spawned at River Dock when dispatch timer fires and resources are queued\n2. Resources loaded (up to barge_capacity)\n3. Barge moves along river tiles following flow_direction chain\n4. On reaching destination drop-off: barge fades out, no resource change needed (resources already in stockpile)\n5. On destruction: resources deducted, barge removed, dock can dispatch a new one next cycle\n\nBarge pooling: for performance, reuse barge nodes rather than creating/destroying (max ~20 barges on screen at once expected).\n\nAcceptance criteria:\n- Barges visually move along river following flow direction\n- Barges display carried resource types\n- Barges can be selected (for info) but not commanded\n- Enemy units can attack and destroy barges\n- Resource deduction occurs on barge destruction with player notification\n- Player color visible on barges\n- Smooth movement along curved river paths\n- No performance issues with up to 20 simultaneous barges","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:22Z","created_by":"Dave Tashner","updated_at":"2026-02-26T04:31:42Z","closed_at":"2026-02-26T04:31:42Z","close_reason":"Completed in PR #71","labels":["combat","resources","river","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.7","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T16:01:22Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.7","depends_on_id":"roots-of-reason-7wg.6","type":"blocks","created_at":"2026-02-22T16:01:36Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.8","title":"River transport UI: in-transit indicators and dock info panel","description":"Add UI elements that communicate river transport status to the player.\n\nResource bar additions:\n- Next to each resource amount in the top bar, show a small arrow icon with the \"in transit\" amount when barges are active\n- Format: \"Gold: 450 (+30 in transit)\" or a small barge icon with the number\n- In-transit amount updates in real-time as barges depart and arrive (or are destroyed)\n- Only shown when in-transit amount \u003e 0\n\nRiver Dock selection panel:\nWhen a River Dock is selected, the bottom-center info panel shows:\n- Building portrait, name, HP bar\n- \"Drop-off: All resources\" label\n- \"Downstream: Town Center (12 tiles)\" — name and distance of downstream destination\n- \"Queued: 15 Gold, 8 Stone\" — resources waiting for next barge\n- \"In Transit: 2 barges\" — number of active barges from this dock\n- \"Next dispatch: 3s\" — countdown to next barge departure\n- If no downstream destination: \"No downstream depot — resources stay here\" warning in yellow\n\nMinimap indicators:\n- River Docks shown as small square dots on minimap (player colored)\n- Active barges shown as moving dots along rivers (player colored, smaller than units)\n\nNotification events:\n- \"Barge arrived at Town Center with 30 Gold\" — brief notification on delivery\n- \"Barge destroyed! Lost 20 Gold, 10 Stone\" — warning notification on destruction (red)\n- \"River Dock destroyed!\" — alert notification (red, higher priority)\n\nRiver overlay (toggle with hotkey, e.g., R):\n- When active, highlights all river tiles with flow direction arrows\n- Colors rivers by: green = flows toward your base, red = flows away, yellow = perpendicular\n- Helps player read the map for River Dock placement decisions\n- Shows potential dock placement spots as glowing indicators on valid tiles\n\nAcceptance criteria:\n- In-transit resources visible in top resource bar\n- River Dock info panel shows transport status when selected\n- Barges visible on minimap\n- Notifications fire for barge arrival and destruction\n- River overlay toggle works and correctly shows flow direction relative to player base","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:23Z","created_by":"Dave Tashner","updated_at":"2026-02-26T04:31:42Z","closed_at":"2026-02-26T04:31:42Z","close_reason":"Completed in PR #71","labels":["resources","river","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-7wg.8","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T16:01:22Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.8","depends_on_id":"roots-of-reason-7wg.6","type":"blocks","created_at":"2026-02-22T16:01:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.9","title":"Wolf feeding command and domestication process","description":"Implement the Feed command that allows villagers to domesticate wolves.\n\nFeed command:\n- Available when: a villager is selected and the cursor is over a wolf\n- Activation: Shift+right-click on wolf, or \"Feed\" button in command panel (only visible when hovering/targeting a wolf)\n- Cursor changes to a food/hand icon when hovering a wolf with a villager selected\n- Cost: 25 Food per feeding, deducted from stockpile when villager begins walking to wolf\n\nFeeding process:\n1. Villager checks if player has 25 Food — if not, error sound + \"Not enough food\" message\n2. 25 Food deducted from player stockpile\n3. Villager walks toward wolf, stopping at 2-tile distance (outside aggro radius of 3)\n4. Villager plays feeding animation (extend arm) for 5 seconds\n5. Wolf enters BEING_FED state, plays eating animation\n6. After 5 seconds: wolf.domestication_progress += 0.33\n7. wolf.fed_by = player_id (track who is domesticating this wolf)\n8. If domestication_progress \u003e= 1.0: wolf transforms into Dog for this player\n9. If domestication_progress \u003c 1.0: wolf returns to PATROL, villager returns to previous task\n\nDomestication progress:\n- 3 feedings required (each adds 33.3%, stored as float 0.0 to 1.0)\n- Progress decays at 10% per minute if not fed (decay_interval: 60 seconds)\n- Progress displayed as a small bar above the wolf when hovered\n- If a different player feeds the wolf: progress resets and fed_by changes to the new player (contested domestication)\n\nWolf-to-Dog transformation:\n- At progress \u003e= 1.0, remove the wolf entity from Gaia\n- Spawn a Dog entity at the same position, owned by the feeding player\n- Small transformation visual: sparkle/glow effect, wolf sprite morphs to dog sprite\n- Notification: \"Wolf domesticated! You gained a Dog companion.\"\n- Packmates of the domesticated wolf do NOT automatically become friendly — they remain wild\n\nTooltip on wolf hover (for any player):\n- \"Wolf — Wild fauna\"\n- \"Can be domesticated by feeding (Shift+Right Click with villager)\"\n- \"Cost: 25 Food per feeding (3 feedings required)\"\n- Domestication bar showing current progress and owner\n- \"Can be hunted for 50 Food\"\n\nEdge cases:\n- Villager killed while feeding: feeding interrupted, food already spent (lost), wolf returns to PATROL\n- Wolf killed while being fed: feeding interrupted, food already spent, wolf drops 50 Food corpse\n- Two villagers feeding same wolf simultaneously: only one feed counts per 5-second window\n- Wolf attacked by another player while being fed: feeding interrupted, wolf enters FLEE\n\nAcceptance criteria:\n- Feed command visible and usable with villager selected + wolf targeted\n- 25 Food deducted per feeding\n- Domestication progress bar visible on wolf\n- 3 feedings transforms wolf to player-owned dog\n- Progress decays over time if not maintained\n- Contested domestication resets progress to new player\n- Tooltip explains the mechanic to new players\n- Transformation has visual/audio feedback","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:05:59Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:09:37Z","closed_at":"2026-02-26T03:09:37Z","close_reason":"Completed in PR #65","labels":["resources","story","units","wolves"],"dependencies":[{"issue_id":"roots-of-reason-7wg.9","depends_on_id":"roots-of-reason-2hj.6","type":"blocks","created_at":"2026-02-22T16:06:11Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.9","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T16:05:58Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.9","depends_on_id":"roots-of-reason-ovr.8","type":"blocks","created_at":"2026-02-22T16:06:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5","title":"Epic 5: Building System","description":"Building placement with ghost preview, construction process, core buildings (Town Center, House, Farm, Barracks, etc.), HP/destruction, population cap.","status":"closed","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:07Z","created_by":"Dave Tashner","updated_at":"2026-02-25T04:38:01Z","closed_at":"2026-02-25T04:38:01Z","close_reason":"All 6 stories completed. Last story (7y5.4) merged in PR #56.","labels":["buildings","epic"],"dependencies":[{"issue_id":"roots-of-reason-7y5","depends_on_id":"roots-of-reason-7wg","type":"blocks","created_at":"2026-02-22T14:44:54Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.1","title":"Building placement with ghost preview","description":"Select building from build menu, show translucent ghost on cursor following isometric grid. Green = valid placement, red = invalid (blocked by terrain, other buildings, or resources). Click to place.\n\nAcceptance Criteria:\n- [ ] Player selects building from command panel → enters placement mode\n- [ ] Ghost preview follows mouse cursor snapped to isometric grid\n- [ ] Ghost shows green tint when placement is valid, red when invalid\n- [ ] Invalid placement: overlapping existing building, on water, on resource node, on unit\n- [ ] Building footprint size loaded from data/buildings/ JSON (1x1, 2x2, 3x3)\n- [ ] Left-click confirms placement → deducts resource cost → creates construction site\n- [ ] Right-click or Escape cancels placement mode\n- [ ] Placement blocked if player cannot afford building cost\n- [ ] Ghost preview shows building footprint on grid (highlighted tiles)\n- [ ] Placement events emitted via signal for other systems to react\n- [ ] Unit tests for grid-snapping math and validity checks\n- [ ] Unit tests for footprint overlap detection","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:25Z","created_by":"Dave Tashner","updated_at":"2026-02-23T01:45:12Z","closed_at":"2026-02-23T01:45:12Z","close_reason":"Completed in PR #13","labels":["buildings","placement","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.1","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:24Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.2","title":"Construction process with villager builders","description":"After placement, building appears as foundation. Villager walks to site and builds over time (progress bar). Multiple villagers speed up construction. Building not functional until complete.\n\nAcceptance Criteria:\n- [ ] Construction site placed → villager tasked to build → walks to site → constructs\n- [ ] Build time per building loaded from data/buildings/ JSON\n- [ ] Multiple villagers can build same construction site (additive build rate)\n- [ ] Construction progress bar shown above construction site (0% to 100%)\n- [ ] Building HP increases proportionally with construction progress\n- [ ] Incomplete buildings can be attacked and destroyed\n- [ ] Construction site shows scaffolding/partial sprite (Phase 1: translucent version)\n- [ ] When complete: construction site replaced with finished building, builder goes idle\n- [ ] Villager auto-assigned to build nearest unfinished construction site if idle\n- [ ] Construction state serializable (progress %, assigned builders, building type)\n- [ ] Unit tests for build rate math (1 villager vs 3 villagers)\n- [ ] Integration test: place building → assign villager → building completes","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:25Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:01:57Z","closed_at":"2026-02-23T02:01:57Z","close_reason":"Completed in PR #14","labels":["buildings","construction","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.2","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:25Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.3","title":"Core buildings: Town Center, House, Farm, Barracks, Dock, Market, Library, Wonder","description":"Implement core building types with stats: Town Center (villager production, drop-off, pop+5), House (pop+5), Farm (food source), Barracks (military units), Dock (ships), Market (trade), Library (research/knowledge), Wonder (win condition). Each has cost, build time, HP.\n\nAcceptance Criteria:\n- [ ] 8 building types defined in data/buildings/*.json with: cost, build_time, hp, footprint, age_requirement\n- [ ] Town Center: trains villagers, resource drop-off, supports 5 population, garrison capacity 15\n- [ ] House: +5 population capacity, no other function\n- [ ] Farm: infinite slow food source (villager works farm, not a node), food rate in JSON\n- [ ] Barracks: trains Infantry, Archer, Cavalry (unit roster per age in JSON)\n- [ ] Dock: trains naval units, naval repair, water resource drop-off\n- [ ] Market: resource trading (buy/sell at fluctuating rates per JSON)\n- [ ] Library: generates Knowledge per second (rate in JSON), required for tech research\n- [ ] Wonder: triggers Wonder victory countdown (10 min), extremely expensive\n- [ ] Each building has Phase 1 placeholder sprite (colored rectangle with label)\n- [ ] All stats and costs data-driven from JSON — zero hardcoded values\n- [ ] Building data loaded via DataLoader.get_building_data()\n- [ ] Unit tests for building data loading and validation","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:26Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:06:15Z","closed_at":"2026-02-23T13:06:15Z","close_reason":"Completed in PR #32","labels":["buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.3","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:25Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.4","title":"Building HP, destruction, and ruins","description":"Buildings have HP. Take damage from attacks. Show damage states (intact, damaged, critical). When destroyed, leave ruins tile that can be built over. Destroyed buildings free population cap.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:26Z","created_by":"Dave Tashner","updated_at":"2026-02-25T04:37:43Z","closed_at":"2026-02-25T04:37:43Z","close_reason":"Completed in PR #56","labels":["buildings","combat","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.4","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:26Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.5","title":"Population cap tied to houses","description":"Each House adds +5 population cap. Town Center adds +5. Maximum population cap of 200. Cannot produce units when at cap. Display current/max in resource bar.\n\nAcceptance Criteria:\n- [ ] Each House provides +5 population capacity (value in JSON)\n- [ ] Town Center provides +5 population capacity (value in JSON)\n- [ ] Population cap = sum of all completed housing buildings' capacity\n- [ ] Current population = count of all living units (villagers + military)\n- [ ] Cannot train new units when current population \u003e= population cap\n- [ ] \"Need more houses\" warning when population is within 2 of cap\n- [ ] Training queue paused (not cancelled) when pop cap reached mid-queue\n- [ ] Destroying a House reduces cap — if now over cap, existing units remain but no new training\n- [ ] Population displayed in resource bar as \"current/cap\" (e.g., 14/20)\n- [ ] Population state serializable for save/load\n- [ ] Unit tests for cap calculation, over-cap edge cases\n- [ ] Integration test: build house → train villager → verify cap respected","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:27Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:20:54Z","closed_at":"2026-02-23T13:20:54Z","close_reason":"Completed in PR #34","labels":["buildings","population","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.5","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:26Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.6","title":"River Dock building: placement, drop-off, and transport origin","description":"Implement the River Dock as a new building type that enables river resource transport.\n\nBuilding specification:\n- Name: River Dock\n- Footprint: 1x1 tile\n- Placement constraint: must be placed on a land tile that is adjacent (8-directional) to at least one river tile. Placement ghost shows red if no adjacent river.\n- Cost: 100 Wood\n- Build time: 30 seconds\n- HP: 400 (fragile compared to other buildings — intentionally raidable)\n- Age required: Bronze Age (age 1) — available early\n- Population bonus: 0\n\nDrop-off functionality:\n- Acts as a universal resource drop-off: accepts Food, Wood, Stone, and Gold\n- Villagers gathering nearby resources will pathfind to the River Dock if it is their nearest drop-off\n- Identical drop-off logic to Town Center / Mill / Mining Camp / Lumber Camp — the River Dock is simply another entry in the drop-off building list\n\nTransport origin functionality:\n- When resources are deposited, check if a downstream route exists (delegate to river transport system)\n- If yes, queue resources for barge dispatch\n- Visual indicator on the dock: small resource pile icon when resources are queued for shipping\n- Visual indicator: barge departing animation when dispatch occurs\n\nBarge spawning:\n- The dock spawns barge entities when it has queued resources and the dispatch timer fires\n- Barge sprite departs from the dock position and moves onto the adjacent river tile\n- Dock tracks: resources_queued (Dictionary of resource_type -\u003e amount), last_dispatch_time\n\nUI integration:\n- When River Dock is selected, info panel shows:\n  - Building HP\n  - Resources queued for transport\n  - Downstream destination (name and distance in tiles)\n  - Barges in transit count\n- Build menu: appears under villager build options alongside Mill, Mining Camp, Lumber Camp\n- Tooltip: \"Drop-off building that ships resources downstream via river. Build near mines upstream of your base.\"\n\nPlacement preview:\n- Ghost shows valid (green) only on land tiles adjacent to river\n- When valid, draw a subtle highlight on the adjacent river tile showing which river the dock connects to\n- Draw a small arrow on the river tile showing flow direction (which way resources will travel)\n\nData file: data/buildings/river_dock.json (extends existing building data format)\n{\n  \"name\": \"River Dock\",\n  \"hp\": 400,\n  \"footprint\": [1, 1],\n  \"build_time\": 30,\n  \"build_cost\": { \"wood\": 100 },\n  \"population_bonus\": 0,\n  \"is_drop_off\": true,\n  \"drop_off_types\": [\"food\", \"wood\", \"stone\", \"gold\"],\n  \"age_required\": 1,\n  \"placement_constraint\": \"adjacent_to_river\",\n  \"transport_speed_multiplier\": 3.0,\n  \"max_barge_capacity\": 30,\n  \"barge_spawn_interval\": 5.0,\n  \"barge_hp\": 15\n}\n\nAcceptance criteria:\n- River Dock can only be placed adjacent to river tiles (enforced in placement validation)\n- Functions as universal resource drop-off\n- Villagers pathfind to River Dock when it is nearest drop-off\n- Shows downstream destination info when selected\n- Barge spawning integrates with river transport system\n- Available from Bronze Age\n- Placeholder sprite generated by building sprite generator","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:21Z","created_by":"Dave Tashner","updated_at":"2026-02-23T12:32:57Z","closed_at":"2026-02-23T12:32:57Z","close_reason":"Completed in PR #29","labels":["buildings","river","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.6","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T16:01:20Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7y5.6","depends_on_id":"roots-of-reason-ovr.6","type":"blocks","created_at":"2026-02-22T16:01:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-81x","title":"Epic 1: Project Foundation","description":"Set up Godot 4 project with folder structure, export presets, CI pipeline, and placeholder asset pipeline.","status":"closed","priority":0,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:05Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:20:31Z","closed_at":"2026-02-22T21:20:31Z","close_reason":"All 4 stories complete. Project foundation established with Godot 4 project, export presets, CI pipeline, and placeholder assets.","labels":["epic","foundation"]}
{"id":"roots-of-reason-81x.1","title":"Set up Godot 4 project with folder structure","description":"Initialize Godot 4.x project. Create directory structure: scenes/, scripts/, assets/, autoloads/, data/. Configure project.godot with window settings for isometric view.","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:13Z","created_by":"Dave Tashner","updated_at":"2026-02-22T20:53:31Z","closed_at":"2026-02-22T20:53:31Z","close_reason":"Godot 4.6 project initialized with folder structure, autoloads, and sample data","labels":["foundation","story"],"dependencies":[{"issue_id":"roots-of-reason-81x.1","depends_on_id":"roots-of-reason-81x","type":"parent-child","created_at":"2026-02-22T14:44:12Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-81x.2","title":"Configure export presets for macOS and Windows","description":"Set up Godot export templates for macOS (.dmg/.app) and Windows (.exe). Test export builds run on both platforms.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:13Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:20:21Z","closed_at":"2026-02-22T21:20:21Z","close_reason":"Export presets for macOS and Windows configured in commit 3d3d4a2. Branch protection and repo settings also configured.","labels":["foundation","story"],"dependencies":[{"issue_id":"roots-of-reason-81x.2","depends_on_id":"roots-of-reason-81x","type":"parent-child","created_at":"2026-02-22T14:44:13Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-81x.3","title":"Set up CI build pipeline with GitHub Actions","description":"Create GitHub Actions workflow that builds Godot project for macOS and Windows on push. Use official Godot Docker image or headless export.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:14Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:53:34Z","closed_at":"2026-02-22T19:53:34Z","close_reason":"Superseded by dedicated Quality Pipeline epic with comprehensive CI stories","labels":["ci","foundation","story"],"dependencies":[{"issue_id":"roots-of-reason-81x.3","depends_on_id":"roots-of-reason-81x","type":"parent-child","created_at":"2026-02-22T14:44:14Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-81x.4","title":"Create placeholder asset pipeline","description":"Create placeholder sprites for terrain tiles (128x64 iso), basic unit sprite, basic building sprite. Set up tileset resource. Establish asset naming conventions.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:15Z","created_by":"Dave Tashner","updated_at":"2026-02-22T20:04:41Z","closed_at":"2026-02-22T20:04:41Z","close_reason":"Superseded by expanded art pipeline stories under dedicated epic","labels":["assets","foundation","story"],"dependencies":[{"issue_id":"roots-of-reason-81x.4","depends_on_id":"roots-of-reason-81x","type":"parent-child","created_at":"2026-02-22T14:44:14Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-84e","title":"Define DataLoader contract and API","description":"DataLoader autoload is referenced in coding standards but lacks a defined contract. Must be specified before gameplay systems begin consuming it.\n\nAcceptance Criteria:\n- [ ] DataLoader.get_unit_stats(unit_id: String) -\u003e Dictionary — returns stat dict or null\n- [ ] DataLoader.get_building_data(building_id: String) -\u003e Dictionary\n- [ ] DataLoader.get_tech_data(tech_id: String) -\u003e Dictionary\n- [ ] DataLoader.get_civ_data(civ_id: String) -\u003e Dictionary\n- [ ] DataLoader.get_resource_config() -\u003e Dictionary\n- [ ] DataLoader.get_setting(path: String) -\u003e Variant — for settings JSONs\n- [ ] All methods return null (not crash) for missing keys, with push_warning()\n- [ ] Data cached on first load, cache invalidated only on explicit reload()\n- [ ] JSON schema documented in data/schemas/ for each data type\n- [ ] Unit tests for all public methods including missing key behavior\n- [ ] Integration test: load actual JSON files from data/ and verify structure","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:57:53Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:29:39Z","closed_at":"2026-02-23T02:29:39Z","close_reason":"Completed in PR #16","labels":["api","foundation","task"],"dependencies":[{"issue_id":"roots-of-reason-84e","depends_on_id":"roots-of-reason-317","type":"blocks","created_at":"2026-02-22T17:57:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-874","title":"Generate wolf idle sprites (8 directions, 2 frames)","description":"Generate wolf_idle_{dir}_{frame}.png for all 8 directions x 2 frames = 16 PNGs. See docs/design/wolf_sprite_prompt.md for prompts and specs.","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:42:44Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:42:44Z","labels":["art","sprites","wolf"]}
{"id":"roots-of-reason-90j","title":"[epic] Integration Test Suite: scenario-based game loop testing","description":"Build an integration test layer above GdUnit4 unit tests using the existing scenario runner and game-cmd tooling. Add assertion support to the scenario language, create a test-scenarios subcommand, and author starter scenarios covering economy cycles, combat resolution, tech progression, save/load round-trips, and multi-system chains. These tests exercise the real game loop (not mocks) and catch interaction bugs that unit tests miss.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T01:33:01Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:21:43Z","closed_at":"2026-03-01T02:21:43Z","close_reason":"All 10 stories completed across PRs #228, #231, #232, #233","labels":["qa","testing"]}
{"id":"roots-of-reason-90j.1","title":"Add assert and assert-count commands to scenario runner","description":"Extend the 'ror scenario' command language with assertion primitives:\n- 'assert \u003cresource\u003e\u003cop\u003e\u003cvalue\u003e' — e.g., 'assert food\u003e=100', fails scenario with non-zero exit if false\n- 'assert-count \u003centity-filter\u003e \u003cop\u003e \u003cvalue\u003e' — e.g., 'assert-count units owner=0 category=villager \u003e= 5'\n- 'assert-no-idle' — all player-0 units should have a non-idle action\n- 'assert-building-at \u003cname\u003e \u003cx\u003e \u003cy\u003e' — verify a building exists at grid position\n- 'assert-entity-hp \u003cname-or-filter\u003e \u003cop\u003e \u003cvalue\u003e' — HP-based assertions\nOn failure: print the assertion, actual value, and expected value, then exit 1.\nThis is the critical enabler for turning .scenario files into integration tests.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":60,"created_at":"2026-03-01T01:33:48Z","created_by":"Dave Tashner","updated_at":"2026-03-01T01:44:34Z","closed_at":"2026-03-01T01:44:34Z","close_reason":"Completed in PR #228","labels":["testing","tooling"],"dependencies":[{"issue_id":"roots-of-reason-90j.1","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:33:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90j.10","title":"Write enemy_raid.scenario: military defends base from attack","description":"Author tests/scenarios/enemy_raid.scenario:\n1. Speed 3x\n2. Place a player town center and house\n3. Spawn 3 player swordsmen near base\n4. Spawn 2 enemy swordsmen approaching from edge of map\n5. Wait for combat to resolve\n6. Assert player buildings survived (HP \u003e 0)\n7. Assert enemy unit count == 0 (raid repelled)\n8. Screenshot --annotate at start and end\nTests LOS detection→auto-engage→combat resolution→building survival chain.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-03-01T01:34:33Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:21:29Z","closed_at":"2026-03-01T02:21:29Z","close_reason":"Completed in PR #233","labels":["combat","testing"],"dependencies":[{"issue_id":"roots-of-reason-90j.10","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:34:33Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-90j.10","depends_on_id":"roots-of-reason-90j.1","type":"blocks","created_at":"2026-02-28T20:34:33Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90j.2","title":"Add 'ror test-scenarios' subcommand to run all .scenario files as tests","description":"Add a new 'ror test-scenarios' subcommand that:\n1. Launches Godot headlessly with --debug-server\n2. Waits for the debug server to respond to /ping\n3. Discovers all .scenario files in tests/scenarios/\n4. Runs each scenario sequentially via 'ror scenario --file \u003cpath\u003e'\n5. Captures pass/fail results and annotated failure screenshots\n6. Reports summary (N passed, N failed, N skipped) and exits non-zero on any failure\n7. Cleans up the Godot process on exit\nSupport --filter to run a subset of scenarios by name pattern.\nThis becomes the integration test runner invoked in CI after unit tests pass.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":90,"created_at":"2026-03-01T01:33:53Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:09:32Z","closed_at":"2026-03-01T02:09:32Z","close_reason":"Completed in PR #231","labels":["ci","testing","tooling"],"dependencies":[{"issue_id":"roots-of-reason-90j.2","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:33:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90j.3","title":"Write gather_cycle.scenario: villager gathers and deposits resources","description":"Author tests/scenarios/gather_cycle.scenario:\n1. Speed 3x for faster execution\n2. Spawn a villager near a tree\n3. Select-all, gather at the tree position\n4. Wait until wood \u003e 0 (villager completes a drop-off cycle)\n5. Assert wood \u003e= 10\n6. Assert-count units owner=0 category=villager \u003e= 1 (villager survived)\n7. Screenshot --annotate for visual record\nTests the full gather→walk→chop→carry→drop-off→resource-increment chain.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-03-01T01:34:02Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:18:16Z","closed_at":"2026-03-01T02:18:16Z","close_reason":"Completed in PR #232","labels":["testing"],"dependencies":[{"issue_id":"roots-of-reason-90j.3","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:34:01Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-90j.3","depends_on_id":"roots-of-reason-90j.1","type":"blocks","created_at":"2026-02-28T20:34:01Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90j.4","title":"Write build_cycle.scenario: place and construct a building","description":"Author tests/scenarios/build_cycle.scenario:\n1. Speed 3x\n2. Spawn a villager\n3. Place a house under construction at a clear grid position\n4. Select villager, right-click the house position (triggers build assignment)\n5. Wait until the house is fully constructed (poll /entities for under_construction=false)\n6. Assert-building-at house \u003cx\u003e \u003cy\u003e\n7. Assert the building HP equals max HP\n8. Screenshot --annotate\nTests villager→build-assignment→construction-progress→completion chain.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-03-01T01:34:06Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:18:16Z","closed_at":"2026-03-01T02:18:16Z","close_reason":"Completed in PR #232","labels":["testing"],"dependencies":[{"issue_id":"roots-of-reason-90j.4","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:34:05Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-90j.4","depends_on_id":"roots-of-reason-90j.1","type":"blocks","created_at":"2026-02-28T20:34:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90j.5","title":"Write combat_resolution.scenario: verify unit combat outcomes","description":"Author tests/scenarios/combat_resolution.scenario:\n1. Speed 3x\n2. Spawn 3 player archers at one position\n3. Spawn 1 enemy cavalry nearby\n4. Wait for combat to resolve (wait until enemy unit count == 0 or player unit count \u003c 3)\n5. Assert the expected winner based on game balance (archers should beat lone cavalry)\n6. Screenshot --annotate at engagement start and end\nTests target detection→engagement→damage resolution→death cleanup chain.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-03-01T01:34:10Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:18:17Z","closed_at":"2026-03-01T02:18:17Z","close_reason":"Completed in PR #232","labels":["combat","testing"],"dependencies":[{"issue_id":"roots-of-reason-90j.5","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:34:09Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-90j.5","depends_on_id":"roots-of-reason-90j.1","type":"blocks","created_at":"2026-02-28T20:34:09Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90j.6","title":"Write resource_depletion.scenario: villager retargets after tree exhaustion","description":"Author tests/scenarios/resource_depletion.scenario:\n1. Speed 3x\n2. Spawn a single tree with low yield (or use default and wait)\n3. Spawn a villager, assign to gather the tree\n4. Wait until tree is depleted\n5. Assert villager either auto-retargets to another tree or goes idle\n6. Assert-count entities type=tree with current_yield=0 to confirm depletion\n7. Screenshot --annotate\nTests the gather→depletion→signal→retarget-or-idle chain.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-03-01T01:34:17Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:18:17Z","closed_at":"2026-03-01T02:18:17Z","close_reason":"Completed in PR #232","labels":["testing"],"dependencies":[{"issue_id":"roots-of-reason-90j.6","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:34:17Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-90j.6","depends_on_id":"roots-of-reason-90j.1","type":"blocks","created_at":"2026-02-28T20:34:17Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90j.7","title":"Write save_load_economy.scenario: economy survives save/load round-trip","description":"Author tests/scenarios/save_load_economy.scenario:\n1. Speed 3x\n2. Spawn villagers, assign to gather different resources\n3. Wait until food \u003e 50 and wood \u003e 50 (economy is running)\n4. Record current resource values via /status\n5. Trigger save via game-cmd (may need a new 'save' command on debug server)\n6. Trigger load\n7. Assert resource values match pre-save values\n8. Wait a few more seconds, assert resources continue increasing (economy resumed)\n9. Screenshot --annotate\nTests that the full economy state (villager assignments, gather targets, resource counts) round-trips through save/load.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":45,"created_at":"2026-03-01T01:34:22Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:18:18Z","closed_at":"2026-03-01T02:18:18Z","close_reason":"Completed in PR #232","labels":["save-load","testing"],"dependencies":[{"issue_id":"roots-of-reason-90j.7","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:34:22Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-90j.7","depends_on_id":"roots-of-reason-90j.1","type":"blocks","created_at":"2026-02-28T20:34:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90j.8","title":"Write age_advance.scenario: research age-up and verify unlocks","description":"Author tests/scenarios/age_advance.scenario:\n1. Speed 3x\n2. Set resources high enough to afford age advance (may need a set-resources debug command)\n3. Trigger age advance research\n4. Wait until current_age \u003e 0 (via /status)\n5. Assert new age-specific buildings or units are available\n6. Screenshot --annotate\nTests the resource-check→research→age-transition→unlock chain. May require adding a 'set-resources' or 'research' debug command.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-03-01T01:34:26Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:21:28Z","closed_at":"2026-03-01T02:21:28Z","close_reason":"Completed in PR #233","labels":["tech","testing"],"dependencies":[{"issue_id":"roots-of-reason-90j.8","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:34:26Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-90j.8","depends_on_id":"roots-of-reason-90j.1","type":"blocks","created_at":"2026-02-28T20:34:26Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90j.9","title":"Write multi_dropoff.scenario: villagers choose nearest drop-off point","description":"Author tests/scenarios/multi_dropoff.scenario:\n1. Speed 3x\n2. Place two lumber camps at different positions\n3. Place trees near each lumber camp\n4. Spawn villagers, assign to gather trees\n5. Wait for drop-offs to occur\n6. Assert wood \u003e 0 (drop-offs succeeded)\n7. Verify via /entities that villagers are using the nearest camp (check their positions)\n8. Screenshot --annotate\nTests multi-building drop-off selection and pathfinding efficiency.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-03-01T01:34:30Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:21:28Z","closed_at":"2026-03-01T02:21:28Z","close_reason":"Completed in PR #233","labels":["economy","testing"],"dependencies":[{"issue_id":"roots-of-reason-90j.9","depends_on_id":"roots-of-reason-90j","type":"parent-child","created_at":"2026-02-28T20:34:29Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-90j.9","depends_on_id":"roots-of-reason-90j.1","type":"blocks","created_at":"2026-02-28T20:34:29Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-90n","title":"Generate terrain tile art: deep_water","description":"Generate 4 deep_water tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nDark deep ocean water with slow rolling wave patterns. Minimal reflections, suggesting great depth. Muted sunlight from the upper-left. Colors: dark navy blues (#2B5F8A, #1B4F7A, #3A6F9A).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/deep_water_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:21:03Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:21:03Z","labels":["art"]}
{"id":"roots-of-reason-91o","title":"Fix terrain/fog tiles not rendering — coordinate system mismatch","description":"TileMapLayer uses Godot's default staggered isometric coords which don't match IsoUtils diamond isometric. Set TILE_LAYOUT_DIAMOND_DOWN and offset layers by (-HALF_W, -HALF_H) to align.","status":"closed","priority":2,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T22:58:25Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:58:53Z","closed_at":"2026-02-27T23:58:53Z","close_reason":"Completed in PR #144"}
{"id":"roots-of-reason-97n","title":"Auto-assign idle villagers to nearby construction sites","description":"When a villager becomes idle (combat ends, gather completes, etc.), check for nearby buildings under construction and auto-assign the villager to build the nearest one. This prevents construction sites from sitting at 0% because all villagers were busy at placement time.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:29:14Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:35:24Z","closed_at":"2026-03-01T16:35:24Z","close_reason":"Completed in PR #274","labels":["story"]}
{"id":"roots-of-reason-9ah","title":"Fog of war never reveals when units move","description":"The _update_fog_of_war() method in prototype_main.gd is only called during _start_game(), on_unit_died, on_building_destroyed, and load_state. There is no periodic update during gameplay, so moving units into unexplored areas never triggers fog reveal.","status":"closed","priority":1,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T00:29:28Z","created_by":"Dave Tashner","updated_at":"2026-02-28T00:34:13Z","closed_at":"2026-02-28T00:34:13Z","close_reason":"Completed in PR #148"}
{"id":"roots-of-reason-9gi","title":"Add villager sprites to replace colored circles","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T01:25:39Z","created_by":"Dave Tashner","updated_at":"2026-02-28T01:42:27Z","closed_at":"2026-02-28T01:42:27Z","close_reason":"Completed in PR #151"}
{"id":"roots-of-reason-9r1","title":"Establish error handling conventions (ADR-012)","description":"No project-wide error handling conventions exist. Agents will invent patterns independently unless standardized.\n\nAcceptance Criteria:\n- [ ] ADR-012 added to AGENTS.md covering error handling patterns\n- [ ] Define pattern for recoverable errors (push_warning + fallback value)\n- [ ] Define pattern for unrecoverable errors (push_error + assert in debug)\n- [ ] Define pattern for data validation (validate at load time, trust at runtime)\n- [ ] Define pattern for missing data files (graceful degradation vs hard fail)\n- [ ] Define signal-based error propagation for gameplay events (e.g., path_not_found)\n- [ ] Define logging conventions (what to log, when, severity levels)\n- [ ] At least 2 code examples (WRONG/RIGHT style matching existing ADR format)\n- [ ] Existing autoloads (GameManager, ResourceManager, DataLoader) updated to follow conventions","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:58:09Z","created_by":"Dave Tashner","updated_at":"2026-02-23T12:54:36Z","closed_at":"2026-02-23T12:54:36Z","close_reason":"Completed in PR #30","labels":["adr","architecture","conventions","task"],"dependencies":[{"issue_id":"roots-of-reason-9r1","depends_on_id":"roots-of-reason-317","type":"blocks","created_at":"2026-02-22T17:58:09Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-a15","title":"Tool: in-game screenshot capture for Claude Code","description":"## Problem\n\nClaude Code cannot observe the running game. When debugging visual issues (z-ordering, sprite rendering, unit positioning), the user must manually take screenshots and save them for Claude to review. This breaks the feedback loop and slows iteration.\n\nThe existing `tools/screenshot_helper.gd` only captures static screenshots at startup — it cannot interact with a running game instance.\n\n## Goal\n\nA tool that lets Claude Code capture a screenshot of the running Godot game on demand, so it can observe the visual state during an active play session. This enables a tighter debug loop: launch game → perform action → screenshot → analyze → iterate.\n\n## Design\n\n### Architecture: GDScript HTTP server inside the game\n\nAdd a lightweight HTTP debug server that runs inside the game process (dev builds only). Claude Code sends HTTP requests to capture screenshots and (optionally) perform basic game actions.\n\n### Components\n\n**1. `scripts/debug/debug_server.gd` — In-game HTTP server (autoload, dev-only)**\n- Listens on `localhost:9222` (configurable)\n- Only active when launched with `--debug-server` user arg or `OS.is_debug_build()`\n- Endpoints:\n  - `GET /screenshot` — captures viewport, returns PNG bytes (or saves to path and returns JSON with path)\n  - `GET /status` — returns JSON: game tick, player resources, unit count, selected units, camera position\n  - `POST /command` — execute simple game actions: select-all, right-click at grid position, pan camera, set game speed\n- Minimal footprint — no external dependencies, uses Godot's built-in `TCPServer`/`HTTPServer` or `StreamPeerTCP`\n\n**2. `tools/ror screenshot` — CLI wrapper**\n- Sends `GET /screenshot` to the debug server\n- Saves PNG to `tests/screenshots/\u003cname\u003e.png`\n- Returns the file path so Claude Code can `Read` it\n- Usage: `./tools/ror screenshot [--output path] [--name label]`\n\n**3. `tools/ror game-status` — Game state query**\n- Sends `GET /status` to the debug server\n- Returns JSON summary of current game state\n\n**4. `tools/ror game-cmd` — Send commands to running game**\n- `./tools/ror game-cmd select-all`\n- `./tools/ror game-cmd right-click 5,10` (grid coords)\n- `./tools/ror game-cmd camera-to 5,10`\n- `./tools/ror game-cmd speed 2`\n\n**5. Update `/launch` skill** to enable the debug server automatically\n\n### Security\n\n- Bind to `127.0.0.1` only (localhost)\n- Only active in debug builds or when explicitly enabled via cmdline arg\n- No file system write access beyond screenshot output directory\n\n### Integration with Claude Code\n\nAfter this tool ships, the workflow becomes:\n1. `/launch` — starts game with debug server enabled\n2. `./tools/ror screenshot --name before_fix` — Claude reads the PNG\n3. Make code changes\n4. `./tools/ror game-cmd select-all \u0026\u0026 ./tools/ror game-cmd right-click 5,10`\n5. Wait a few seconds\n6. `./tools/ror screenshot --name after_fix` — Claude verifies the fix visually\n\n### Stories (suggested breakdown)\n\n1. **Debug HTTP server** — TCP listener + `/screenshot` endpoint\n2. **`/status` endpoint** — game state query\n3. **`/command` endpoint** — basic remote control (select, right-click, camera)\n4. **CLI wrappers** — `ror screenshot`, `ror game-status`, `ror game-cmd`\n5. **`/launch` integration** — auto-enable debug server, update skill","status":"closed","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T22:47:34Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:08:25Z","closed_at":"2026-02-28T23:08:25Z","close_reason":"All 5 stories completed: PRs #206, #208, #209"}
{"id":"roots-of-reason-a15.1","title":"Debug HTTP server with /screenshot endpoint","description":"Create `scripts/debug/debug_server.gd` — a lightweight TCP server autoload that listens on localhost:9222 and serves a `/screenshot` endpoint.\n\n## Acceptance criteria\n\n- GDScript autoload registered in project.godot\n- Only activates when `--debug-server` is in `OS.get_cmdline_user_args()` (no-op otherwise)\n- Binds to `127.0.0.1:9222` only\n- `GET /screenshot` captures the viewport and returns raw PNG bytes with `Content-Type: image/png`\n- `GET /ping` returns 200 OK (health check)\n- Handles concurrent connections gracefully (reject if busy)\n- Minimal `_process` polling — check for connections each frame only when server is active\n- Tests: unit tests for request parsing and response formatting","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T22:49:19Z","created_by":"Dave Tashner","updated_at":"2026-02-28T22:57:38Z","closed_at":"2026-02-28T22:57:38Z","close_reason":"Completed in PR #206","dependencies":[{"issue_id":"roots-of-reason-a15.1","depends_on_id":"roots-of-reason-a15","type":"parent-child","created_at":"2026-02-28T17:49:18Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-a15.2","title":"Add /status endpoint to debug server","description":"Add `GET /status` endpoint to the debug server.\n\nReturns JSON with: game tick, player resources (all types), unit count by owner, selected unit count, camera position, camera zoom, current game speed.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T22:49:19Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:04:59Z","closed_at":"2026-02-28T23:04:59Z","close_reason":"Completed in PR #209","dependencies":[{"issue_id":"roots-of-reason-a15.2","depends_on_id":"roots-of-reason-a15","type":"parent-child","created_at":"2026-02-28T17:49:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-a15.3","title":"Add /command endpoint to debug server","description":"Add `POST /command` endpoint to the debug server for basic remote control.\n\nCommands: select-all, right-click at grid coords, camera-to grid coords, set game speed. Returns JSON confirmation with result.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T22:49:20Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:04:59Z","closed_at":"2026-02-28T23:04:59Z","close_reason":"Completed in PR #209","dependencies":[{"issue_id":"roots-of-reason-a15.3","depends_on_id":"roots-of-reason-a15","type":"parent-child","created_at":"2026-02-28T17:49:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-a15.4","title":"CLI wrappers: ror screenshot, game-status, game-cmd","description":"Add CLI commands to tools/ror that wrap the debug server HTTP API:\n\n- \\`./tools/ror screenshot [--output path] [--name label]\\` — GET /screenshot, save PNG, print path\n- \\`./tools/ror game-status\\` — GET /status, print JSON\n- \\`./tools/ror game-cmd \u003caction\u003e [args]\\` — POST /command, print result","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T22:49:21Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:08:12Z","closed_at":"2026-02-28T23:08:12Z","close_reason":"Completed in PR #208","dependencies":[{"issue_id":"roots-of-reason-a15.4","depends_on_id":"roots-of-reason-a15","type":"parent-child","created_at":"2026-02-28T17:49:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-a15.5","title":"Update /launch skill to enable debug server","description":"Update the /launch slash command to pass \\`--debug-server\\` so the screenshot/status/command endpoints are available automatically when launching via Claude Code.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T22:49:21Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:08:13Z","closed_at":"2026-02-28T23:08:13Z","close_reason":"Completed in PR #208","dependencies":[{"issue_id":"roots-of-reason-a15.5","depends_on_id":"roots-of-reason-a15","type":"parent-child","created_at":"2026-02-28T17:49:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-a7v","title":"Update asset validator with footprint-based dimension categories","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T15:07:24Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:11:20Z","closed_at":"2026-02-28T15:11:20Z","close_reason":"Completed in PR #198","labels":["art","tools"]}
{"id":"roots-of-reason-aca","title":"Create placeholder data for 6 missing unlock_buildings targets","description":"Building IDs in tech_tree.json unlock_buildings with no backing data: sheep_pen, stone_wall, siege_workshop, aqueduct, deep_ocean_navigation, castle. Create placeholder JSON files.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T06:36:59Z","closed_at":"2026-02-28T06:36:59Z","close_reason":"Completed in PR #173"}
{"id":"roots-of-reason-agh","title":"Fix orphan nodes in test_minimap.gd","description":"16 tests leak Node.new() scene_root args that are never added to tree or freed","status":"closed","priority":2,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T22:51:27Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:58:53Z","closed_at":"2026-02-27T23:58:53Z","close_reason":"Completed in PR #143"}
{"id":"roots-of-reason-ai8","title":"Fix node leaks v2: use tree_exiting instead of PREDELETE","description":"Previous PREDELETE approach (PR #141) didn't work because children are still in-tree when it fires. Switch to tree_exiting signal handler.","status":"closed","priority":2,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T22:37:56Z","created_by":"Dave Tashner","updated_at":"2026-02-27T22:48:09Z","closed_at":"2026-02-27T22:48:09Z","close_reason":"Completed in PR #142"}
{"id":"roots-of-reason-aja","title":"Generate terrain tile art: grass","description":"Generate 4 grass tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nLush green grassland with subtle variation in shade. Short grass texture with occasional tiny wildflowers. Warm sunlight from the upper-left. Colors: spring greens (#5B8C3E, #7DB356, #4A7A2E).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/grass_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:20:52Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:20:52Z","labels":["art"]}
{"id":"roots-of-reason-ale","title":"Villager carry capacity display in info panel","description":"When a villager is selected, the info panel should show what resource they are carrying and how much (e.g., 'Carrying: 7/10 Wood'). Villagers carry up to 10 of any resource before needing to drop off. Display should update in real-time as they gather and deposit.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T23:40:54Z","created_by":"Dave Tashner","updated_at":"2026-03-01T00:00:12Z","closed_at":"2026-03-01T00:00:12Z","close_reason":"Completed in PR #215"}
{"id":"roots-of-reason-ant","title":"Epic: Building Line of Sight through Fog of War","description":"Buildings should provide inherent LOS through fog of war. Default buildings get 4-tile LOS, defensive/military buildings (Town Center, Barracks, Castle, Siege Workshop, Stone Wall) get 6-tile LOS. Dog LOS bonus stacks on top of base building LOS.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:09:20Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:15:52Z","closed_at":"2026-03-01T16:15:52Z","close_reason":"All stories completed in PR #272","labels":["epic"]}
{"id":"roots-of-reason-ant.1","title":"Add los property to all building JSON data files","description":"Add a 'los' integer field to every building JSON in data/buildings/. Default buildings get los: 4 (house, farm, lumber_camp, sheep_pen, market, library, aqueduct, factory, gpu_foundry, agi_core, colosseum, wonder, marae, ziggurat, dock, river_dock, deep_ocean_navigation). Defensive/military buildings get los: 6 (town_center, barracks, castle, siege_workshop, stone_wall).","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:09:29Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:15:49Z","closed_at":"2026-03-01T16:15:49Z","close_reason":"Completed in PR #272","labels":["story"],"dependencies":[{"issue_id":"roots-of-reason-ant.1","depends_on_id":"roots-of-reason-ant","type":"parent-child","created_at":"2026-03-01T11:09:28Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ant.2","title":"Update prototype_building.gd to use base LOS from data","description":"Load the 'los' field from building JSON into prototype_building.gd. Update get_los() to return base LOS + dog bonus (instead of just dog bonus). Ensure the building exposes LOS correctly for the visibility system.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:09:32Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:15:50Z","closed_at":"2026-03-01T16:15:50Z","close_reason":"Completed in PR #272","labels":["story"],"dependencies":[{"issue_id":"roots-of-reason-ant.2","depends_on_id":"roots-of-reason-ant","type":"parent-child","created_at":"2026-03-01T11:09:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ant.3","title":"Include buildings with LOS in fog of war visibility update","description":"Update prototype_main.gd _update_fog_of_war() to include buildings that have get_los() \u003e 0 in the units list passed to visibility_manager.update_visibility(). Buildings with LOS should contribute to FOV calculation via the existing shadowcasting system, using their grid_pos as origin and footprint center.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:09:33Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:15:51Z","closed_at":"2026-03-01T16:15:51Z","close_reason":"Completed in PR #272","labels":["story"],"dependencies":[{"issue_id":"roots-of-reason-ant.3","depends_on_id":"roots-of-reason-ant","type":"parent-child","created_at":"2026-03-01T11:09:33Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ant.4","title":"Add tests for building LOS through fog of war","description":"Add tests verifying: (1) buildings with los \u003e 0 reveal tiles in fog of war, (2) default buildings reveal 4 tiles, (3) defensive buildings reveal 6 tiles, (4) dog bonus stacks on top of base building LOS, (5) buildings under construction do not provide LOS (or do — decide and test), (6) destroyed buildings stop providing LOS.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:09:37Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:15:51Z","closed_at":"2026-03-01T16:15:51Z","close_reason":"Completed in PR #272","labels":["story"],"dependencies":[{"issue_id":"roots-of-reason-ant.4","depends_on_id":"roots-of-reason-ant","type":"parent-child","created_at":"2026-03-01T11:09:36Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-anx","title":"House construction animation with building sequence sprite","description":"Animate house construction using a multi-frame spritesheet that progresses from foundation to frame to completed building. Includes progress bar above structure and in info panel. Build time set to 15 real seconds.","status":"in_progress","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T15:11:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T15:11:50Z"}
{"id":"roots-of-reason-b8w","title":"Per-system architecture documentation","description":"AGENTS.md covers ADRs (what to build) but not system architecture (how systems connect). As the codebase grows past ~30 scripts, agents need architectural context.\n\nAcceptance Criteria:\n- [ ] Create docs/architecture/ directory\n- [ ] Document autoload signal flow (which autoloads emit/receive what signals)\n- [ ] Document scene tree conventions (expected node structure for units, buildings, maps)\n- [ ] Document state machine pattern (if used for unit AI, building states, etc.)\n- [ ] Each doc includes a box-drawing diagram of system relationships\n- [ ] Docs updated as each epic is completed (not all upfront)\n- [ ] Referenced from AGENTS.md with a pointer to docs/architecture/","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:58:44Z","created_by":"Dave Tashner","updated_at":"2026-02-27T02:55:27Z","closed_at":"2026-02-27T02:55:27Z","close_reason":"Completed in PR #107","labels":["architecture","docs","task"]}
{"id":"roots-of-reason-bcg","title":"Add economy multiplier stacking end-to-end test","description":"No test exercises tech bonus + civ bonus + gather multiplier composed together. Add test applying all multipliers and verifying ResourceManager.add_resource matches composed formula.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:24:18Z","closed_at":"2026-02-28T14:24:18Z","close_reason":"Completed in PR #190"}
{"id":"roots-of-reason-be7","title":"Epic 1c: Art Pipeline \u0026 Visual Foundation","description":"Establish the complete art production pipeline before gameplay epics begin. Lock in tile geometry, sprite scale, animation budgets, color palettes, and production method. Produce the Phase 1 geometric placeholder tileset so map generation and gameplay can be developed and tested immediately. Build alongside Epic 1 and 1b — art decisions cannot wait until after CI is done.","status":"closed","priority":0,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:17Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:32Z","closed_at":"2026-02-22T22:34:32Z","close_reason":"Deferred — art pipeline not blocking Core Game Loop, will revisit later","labels":["art","epic","foundation"]}
{"id":"roots-of-reason-be7.1","title":"Procedural tileset generator — Phase 1 terrain tiles","description":"Create a Python script (tools/generate_tiles.py) that procedurally generates the entire Phase 1 placeholder tileset. Zero manual drawing.\n\nThe script generates 128x64px isometric diamond tiles using PIL/Pillow:\n- Grass: green fill (#4A7C4A) with 1px darker border\n- Forest floor: dark green (#3D5A3D) with small triangle shapes suggesting trees\n- Desert: tan fill (#D4B87A) with subtle dot pattern\n- Shallow water: light blue (#5B9BD5) with wavy line pattern\n- Deep water: dark blue (#2E5B8A) with darker wavy lines\n- Mountain: gray (#8C8C8C) with triangle peaks\n- Elevation ramp: gradient from low to high color\n\nFor terrain autotiling, generate transition variants:\n- Use Godot 4 TileMap terrain peering bit system\n- For each terrain pair, generate edge tiles by splitting the diamond into regions and filling each with the appropriate terrain color\n- Generate: center, 4 cardinal edges, 4 corners, 4 inner corners = 13 variants per terrain type\n- Total output: ~65-80 tile PNGs\n\nAlso generate resource node sprites (32x32 on tile):\n- Gold: yellow circle with G label\n- Stone: gray hexagon with S label\n- Wood: brown rectangle (tree trunk)\n- Berry bush: red dots cluster\n- Fish: blue fish shape on water\n- Deer: brown triangle\n\nScript outputs:\n- Individual PNGs to assets/tiles/terrain/\n- A Godot .tres TileSet resource file configured with terrain sets and peering bits\n- A manifest JSON listing all generated tiles with metadata\n\nScript is idempotent — running it again overwrites with identical output.\nAdd to CI: regenerate and diff to ensure committed tiles match generator output.\n\nAcceptance criteria:\n- python3 tools/generate_tiles.py runs without dependencies beyond Pillow\n- Generates 60+ tile PNGs that load correctly in Godot TileMap\n- Terrain autotiling produces smooth transitions in editor\n- All 5 terrain types + resources visually distinct at game zoom\n- CI validates generated output matches committed assets","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:18Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:25Z","closed_at":"2026-02-22T22:34:25Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","story","tiles"],"dependencies":[{"issue_id":"roots-of-reason-be7.1","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:17Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.1","depends_on_id":"roots-of-reason-be7.4","type":"blocks","created_at":"2026-02-22T15:21:06Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.1","depends_on_id":"roots-of-reason-be7.5","type":"blocks","created_at":"2026-02-22T15:21:04Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.10","title":"Build automated spritesheet packer with Godot resource generation","description":"Create a Python script (tools/spritesheet_packer.py) that takes rendered individual frame PNGs and produces packed spritesheets plus Godot SpriteFrames resources.\n\nInput: directory of PNGs following naming convention {animation}_{direction}_{frame}.png, plus manifest.json from the render script.\n\nOutput per unit/building:\n1. Packed spritesheet PNG — all frames arranged in a grid (rows = animations, columns = frames). Tightly packed with no wasted space. Power-of-2 texture dimensions preferred but not required.\n2. Spritesheet metadata JSON — frame positions, sizes, animation names, frame durations.\n3. Godot SpriteFrames .tres resource file — directly importable by Godot, with:\n   - Named animations: idle_n, idle_ne, idle_e, idle_se, idle_s, idle_sw, idle_w, idle_nw, walk_n, walk_ne, ..., attack_n, ..., death\n   - Frame references pointing to atlas regions in the spritesheet\n   - Animation FPS (configurable, default 10fps for idle, 12fps for walk, 15fps for attack)\n   - Loop flag per animation (idle/walk loop, attack/death don't loop)\n\nPacking algorithm:\n- Simple grid packing (all frames same bounding box, padded to largest frame)\n- Trim transparent pixels per frame before packing (store offset for reconstruction)\n- Output both trimmed spritesheet and a padding-info JSON for Godot to reconstruct positions\n\nCLI: python3 tools/spritesheet_packer.py --input renders/infantry/ --output assets/sprites/units/infantry/ --name infantry --fps-idle 10 --fps-walk 12 --fps-attack 15\n\nBatch mode: python3 tools/spritesheet_packer.py --batch renders/ --output assets/sprites/ (processes all subdirectories)\n\nAcceptance criteria:\n- Packs frames into spritesheet with zero visual artifacts\n- Generated .tres file loads in Godot editor with correct animations\n- Animation preview in editor plays correctly at specified FPS\n- Batch mode processes all units/buildings in one command\n- Transparent pixel trimming reduces spritesheet size by at least 30% vs naive packing\n- Script completes in under 10 seconds for a full unit (all animations)","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:20:46Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:27Z","closed_at":"2026-02-22T22:34:27Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","story","tools"],"dependencies":[{"issue_id":"roots-of-reason-be7.10","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:20:46Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.10","depends_on_id":"roots-of-reason-be7.1","type":"blocks","created_at":"2026-02-22T15:21:00Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.10","depends_on_id":"roots-of-reason-be7.2","type":"blocks","created_at":"2026-02-22T15:21:01Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.10","depends_on_id":"roots-of-reason-be7.3","type":"blocks","created_at":"2026-02-22T15:21:01Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.11","title":"Implement team color shader for runtime player color recoloring","description":"Create a Godot shader that replaces a designated mask color with the player's team color at runtime. This eliminates the need to render separate sprite variants per player.\n\nApproach:\n- All unit and building sprites are rendered with magenta (#FF00FF) as the team-color region\n- A fragment shader detects pixels matching the mask color (with tolerance for anti-aliasing)\n- Replaces mask pixels with the player's assigned color, preserving luminance/shading\n- Shader uniform: team_color (Color) — set per-unit based on owning player\n- Shader uniform: mask_tolerance (float, default 0.1) — how close to magenta counts as mask\n\nShader must handle:\n- Anti-aliased edges: mask region borders will have blended pixels. Use smooth interpolation between original and team color based on proximity to mask color.\n- Shading preservation: a dark magenta pixel should become a dark version of the team color, not flat team color. Preserve the luminance channel.\n- Multiple mask regions: some units may have primary (body) and secondary (banner/shield) team color regions. Support 2 mask colors: magenta (#FF00FF) for primary, cyan (#00FFFF) for secondary.\n\nImplementation:\n- Create shader file: assets/shaders/team_color.gdshader\n- Create ShaderMaterial resource: assets/shaders/team_color_material.tres\n- Helper script: scripts/utils/team_color.gd with:\n  - apply_team_color(sprite: Sprite2D, player_color: Color)\n  - Static player color definitions matching ADR-008\n\nTest the shader with:\n- Phase 1 geometric sprites (magenta regions)\n- Verify all 4 player colors look correct\n- Verify shading gradients are preserved\n- Verify performance: shader should add negligible cost per sprite\n\nAcceptance criteria:\n- Shader correctly recolors magenta mask to any team color\n- Shading/luminance preserved (dark mask pixels become dark team color)\n- Anti-aliased edges look clean (no magenta fringing)\n- Works with both Sprite2D and AnimatedSprite2D\n- Performance: no measurable frame time increase with 100 recolored sprites\n- Unit test verifying team_color.gd helper applies shader correctly","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:20:47Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:20Z","closed_at":"2026-02-22T22:34:20Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","shader","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.11","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:20:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.12","title":"Add CI validation for sprite dimensions, frame counts, and naming","description":"Create a validation script (tools/validate_sprites.py) that runs in CI to enforce sprite consistency rules from ADR-008.\n\nValidations:\n1. Dimension check: verify all sprites match the scale contract\n   - Villager sprites: bounding box \u003c= 64x64px (with ~48px content height)\n   - Infantry: bounding box \u003c= 72x72px\n   - Cavalry: bounding box \u003c= 80x80px\n   - Building 1x1: bounding box \u003c= 128x128px\n   - Building 2x2: bounding box \u003c= 256x192px\n   - Building 3x3: bounding box \u003c= 384x256px\n\n2. Frame count check: verify each unit has the expected number of frames\n   - Read manifest.json for each unit\n   - Verify all 8 directions present for directional animations\n   - Verify frame counts match animation definitions\n   - Flag missing or extra frames\n\n3. Naming convention check: verify all files follow asset naming rules\n   - snake_case, lowercase\n   - Match pattern: {name}_{animation}_{direction}_{frame}.png\n   - No spaces, no uppercase, no special characters\n\n4. Team color mask check: verify magenta (#FF00FF) pixels exist in team-color regions\n   - Sample center pixels of units/buildings\n   - Warn if no magenta mask found (unit won't recolor)\n\n5. Transparency check: verify all sprites have transparent backgrounds (alpha channel)\n\n6. Spritesheet integrity: verify packed spritesheets match their metadata JSON\n   - Frame positions don't overlap\n   - All declared frames exist in the sheet\n   - Sheet dimensions match metadata\n\n7. Regeneration check (Phase 1 only): regenerate procedural sprites and diff against committed\n   - If committed sprites don't match generator output, fail CI\n   - Ensures no one hand-edits generated files\n\nOutput: structured report (JSON + human-readable summary). Exit code 0 if all pass, 1 if any fail.\n\nAdd to GitHub Actions CI workflow as a step after tests but before export.\n\nAcceptance criteria:\n- Catches dimension violations\n- Catches missing frames or directions\n- Catches naming convention violations\n- Catches missing team color mask\n- Clean output format with actionable error messages\n- Runs in under 5 seconds for the full asset set\n- Integrated into CI pipeline","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:20:48Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:27Z","closed_at":"2026-02-22T22:34:27Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","ci","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.12","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:20:47Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.12","depends_on_id":"roots-of-reason-be7.10","type":"blocks","created_at":"2026-02-22T15:21:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.13","title":"Create end-to-end asset pipeline orchestrator script","description":"Create a master orchestrator script (tools/asset_pipeline.py) that runs the full asset production pipeline in one command.\n\nUsage:\n  python3 tools/asset_pipeline.py --phase 1                    # Generate all Phase 1 procedural assets\n  python3 tools/asset_pipeline.py --phase 2 --model infantry   # Render one model through Blender pipeline\n  python3 tools/asset_pipeline.py --phase 2 --all              # Render all models\n  python3 tools/asset_pipeline.py --validate                   # Run validation only\n  python3 tools/asset_pipeline.py --pack                       # Re-pack all spritesheets from renders\n\nPhase 1 pipeline (fully automated):\n1. Run generate_tiles.py -\u003e terrain tileset\n2. Run generate_unit_sprites.py -\u003e unit placeholders\n3. Run generate_building_sprites.py -\u003e building placeholders\n4. Run spritesheet_packer.py --batch -\u003e pack all into spritesheets\n5. Run validate_sprites.py -\u003e verify everything\n6. Report: total assets generated, total file size, any warnings\n\nPhase 2 pipeline (per model):\n1. Find .blend file for the model in blender/models/\n2. Run Blender headless with batch_render.py -\u003e individual PNGs\n3. Run spritesheet_packer.py -\u003e pack into spritesheets + Godot resources\n4. Run validate_sprites.py -\u003e verify dimensions and frame counts\n5. Report: frames rendered, spritesheet size, validation results\n\nPipeline configuration via tools/asset_config.json:\n- List of all units with type, scale preset, animations, FPS values\n- List of all buildings with type, footprint, states\n- Validation thresholds and dimension limits\n- Output directory mappings\n\nThe config file is the single source of truth for what assets exist and their properties.\n\nMakefile/justfile targets for convenience:\n  make assets-phase1    # Generate Phase 1\n  make assets-validate  # Validate all\n  make assets-pack      # Re-pack spritesheets\n  make assets-clean     # Remove all generated assets\n\nAcceptance criteria:\n- Single command generates entire Phase 1 asset set from scratch\n- Phase 2 pipeline renders a model through Blender and produces game-ready sprites\n- Validation runs automatically after generation\n- Config file is the single source of truth — adding a new unit means adding a JSON entry\n- Pipeline completes Phase 1 in under 30 seconds\n- Pipeline completes Phase 2 for one model in under 2 minutes","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:20:48Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:28Z","closed_at":"2026-02-22T22:34:28Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","story","tools"],"dependencies":[{"issue_id":"roots-of-reason-be7.13","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:20:48Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.13","depends_on_id":"roots-of-reason-be7.10","type":"blocks","created_at":"2026-02-22T15:21:03Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.13","depends_on_id":"roots-of-reason-be7.12","type":"blocks","created_at":"2026-02-22T15:21:04Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.13","depends_on_id":"roots-of-reason-be7.9","type":"blocks","created_at":"2026-02-22T15:21:03Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.2","title":"Procedural unit sprite generator — Phase 1 placeholder units","description":"Create a Python script (tools/generate_unit_sprites.py) that procedurally generates all Phase 1 placeholder unit sprites. Zero manual drawing.\n\nThe script generates sprites using PIL/Pillow for each unit type:\n\nUnit definitions (shape, base size):\n- Villager: circle, 24px diameter, carry-bag indicator when gathering\n- Infantry: circle with flat bottom (shield), 26px\n- Archer: circle with line extending outward (bow), 26px\n- Cavalry: horizontal oval, 32x20px\n- Siege: rectangle, 28x20px\n- Naval: wide diamond, 36x16px\n\nFor each unit, generate:\n- 8 directional variants (N, NE, E, SE, S, SW, W, NW) — same shape with rotated direction arrow/indicator\n- Idle animation: 2 frames (subtle size pulse) x 8 dirs = 16 frames\n- Walk animation: 4 frames (bouncing motion via vertical offset) x 8 dirs = 32 frames\n- Attack animation: 3 frames (flash + extend) x 8 dirs = 24 frames\n- Death animation: 4 frames (shrink + fade) x 1 dir = 4 frames\n- Total per unit: ~76 frames (simplified from 150 — Phase 1 uses fewer frames)\n\nPlayer color: render with NEUTRAL color (magenta #FF00FF) as the team-color mask region.\nThe runtime shader will replace this with actual player color.\nAlso generate a preview set with Player 1 blue for visual testing.\n\nSelection indicator: separate green circle outline sprite.\nHealth bar: separate sprite (green/yellow/red segments).\n\nOutput:\n- Individual PNGs organized per unit: assets/sprites/units/placeholder/{unit_name}/\n- Packed spritesheets per unit (one PNG + JSON frame data)\n- Godot SpriteFrames .tres resource per unit with named animations\n- Manifest JSON listing all units, frame counts, dimensions\n\nAcceptance criteria:\n- python3 tools/generate_unit_sprites.py generates all 6 unit types\n- Each unit visually distinct from others at game zoom\n- Direction arrow makes facing obvious\n- Magenta team-color region clearly defined for shader swap\n- SpriteFrames resources load and preview correctly in Godot editor\n- CI validates output matches committed sprites","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:18Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:26Z","closed_at":"2026-02-22T22:34:26Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","story","units"],"dependencies":[{"issue_id":"roots-of-reason-be7.2","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:18Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.2","depends_on_id":"roots-of-reason-be7.4","type":"blocks","created_at":"2026-02-22T15:21:06Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.2","depends_on_id":"roots-of-reason-be7.5","type":"blocks","created_at":"2026-02-22T15:21:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.3","title":"Procedural building sprite generator — Phase 1 placeholder buildings","description":"Create a Python script (tools/generate_building_sprites.py) that procedurally generates all Phase 1 placeholder building sprites. Zero manual drawing.\n\nBuilding definitions (shape, footprint, icon):\n- Town Center (3x3): large rectangle 384x256, flag icon, player color banner\n- House (1x1): small square 128x128, door shape\n- Farm (2x2): green rectangle 256x192 with grid lines\n- Barracks (2x2): rectangle 256x192, crossed swords icon\n- Dock (2x1): rectangle 256x128 extending over water\n- Market (2x2): rectangle 256x192, coin circle icon\n- Library (2x2): rectangle 256x192, book icon\n- Wonder (4x4): large distinctive octagon 512x320\n- Mill (1x1): rectangle 128x128, wheat icon\n- Mining Camp (1x1): rectangle 128x128, pickaxe icon\n- Lumber Camp (1x1): rectangle 128x128, axe icon\n- GPU Foundry (2x2): rectangle 256x192, chip icon (Information Age)\n- Transformer Lab (2x2): rectangle 256x192, neural net icon (Singularity)\n- AGI Core (3x3): glowing rectangle 384x256, brain icon (Singularity)\n\nFor each building generate:\n- Complete state: solid fill with icon and player color banner (magenta mask)\n- Construction stages: 4 frames (25/50/75/100% fill from bottom up, wireframe outline)\n- Damaged overlay: red tint at \u003c50% HP (separate overlay sprite)\n- Ruins: gray desaturated outline (post-destruction)\n- Ghost preview: semi-transparent green and red variants for placement\n\nOutput:\n- PNGs to assets/sprites/buildings/placeholder/{building_name}/\n- Packed spritesheets + Godot SpriteFrames resources\n- Manifest JSON with building metadata (footprint, icon, states)\n\nAcceptance criteria:\n- All 14 building types generated and visually distinct\n- Footprints match tile grid exactly (verify pixel dimensions)\n- Construction progression is visually clear\n- Player color mask (magenta) present on all buildings\n- CI validates output","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:19Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:26Z","closed_at":"2026-02-22T22:34:26Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.3","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:19Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.3","depends_on_id":"roots-of-reason-be7.4","type":"blocks","created_at":"2026-02-22T15:21:07Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.3","depends_on_id":"roots-of-reason-be7.5","type":"blocks","created_at":"2026-02-22T15:21:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.4","title":"Establish asset directory structure and naming conventions","description":"Create the asset directory tree and document naming conventions before any assets are committed.\n\nDirectory structure:\n- assets/sprites/units/placeholder/ — Phase 1 geometric units\n- assets/sprites/units/{civ}/ — Per-civ unit art (future phases)\n- assets/sprites/buildings/placeholder/ — Phase 1 geometric buildings\n- assets/sprites/buildings/{civ}/ — Per-civ buildings (future phases)\n- assets/tiles/terrain/ — Tileset textures\n- assets/tiles/elevation/ — Elevation and cliff tiles\n- assets/tiles/transitions/ — Terrain transition tiles\n- assets/ui/icons/ — Resource icons, button icons\n- assets/ui/panels/ — HUD panel backgrounds\n- assets/ui/fonts/ — Game fonts\n- assets/effects/ — Particle textures, projectiles\n- assets/portraits/ — Unit/building portrait art for info panel\n\nNaming convention (document in assets/README.md):\n- All snake_case, lowercase\n- Units: {unit_name}_{animation}_{direction}_{frame}.png (e.g., villager_walk_se_03.png)\n- Spritesheets: {unit_name}_{animation}_sheet.png (packed)\n- Buildings: {building_name}_{state}.png (e.g., town_center_complete.png, barracks_construction_02.png)\n- Tiles: {terrain}_{variant}_{index}.png (e.g., grass_center_01.png, grass_edge_n_01.png)\n- UI: {element}_{state}.png (e.g., button_normal.png, button_pressed.png)\n\nAlso create:\n- assets/.gdignore for any source files (Aseprite .ase) that shouldn't be imported\n- Godot import presets: pixel art (no filtering, no mipmaps) as default for all sprites\n- Document sprite scale contract from ADR-008 in assets/README.md\n\nAcceptance criteria:\n- All directories created\n- README.md documents conventions with examples\n- Godot import defaults configured for pixel art\n- One sample asset in each directory category (can be 1x1 pixel placeholder)","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:20Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:17Z","closed_at":"2026-02-22T22:34:17Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","conventions","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.4","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.5","title":"Define color palettes and player colors","description":"Create and document the color palette system for the entire game.\n\nAge cluster palettes (each is a set of 8-12 colors):\n- Stone/Bronze Age: earthy browns (#8B7355), muted greens (#6B8E4E), terracotta (#C75B39), clay (#D4A574), bone white (#F5F0E1)\n- Iron/Medieval Age: deeper greens (#3D6B3D), stone gray (#8C8C8C), steel blue (#4682B4), burgundy (#722F37), gold accent (#DAA520)\n- Industrial Age: brick red (#A0522D), iron gray (#696969), smoke (#B0B0B0), amber (#FFBF00), coal black (#2C2C2C)\n- Information/Singularity Age: steel blue (#4169E1), clean white (#F0F0F0), neon cyan (#00CED1), holographic purple (#9370DB), circuit green (#00FF41)\n\nPlayer colors (high contrast, colorblind-considered):\n- Player 1: Blue (#2E86DE)\n- Player 2: Red (#E74C3C)\n- Player 3: Teal (#1ABC9C)\n- Player 4: Orange (#F39C12)\n- Gaia/neutral: Gray (#95A5A6)\n\nTerrain colors:\n- Grass: #4A7C4A (base), #3D6B3D (shadow)\n- Desert: #D4B87A (base), #C4A86A (shadow)\n- Water shallow: #5B9BD5 (base), #4A8AC4 (shadow)\n- Water deep: #2E5B8A (base), #1D4A79 (shadow)\n- Forest floor: #3D5A3D (base), #2C492C (shadow)\n- Mountain: #8C8C8C (base), #6B6B6B (shadow)\n\nCreate:\n- Palette reference image (PNG swatch sheet) committed to assets/reference/\n- Godot theme resource with player colors defined\n- Document palette usage rules in assets/README.md\n\nAcceptance criteria:\n- All palettes defined with hex values\n- Swatch reference image in repo\n- Player colors pass WCAG AA contrast against all terrain types\n- Palettes feel distinct per age cluster","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:20Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:17Z","closed_at":"2026-02-22T22:34:17Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","palette","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.5","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.6","title":"Create Phase 1 placeholder UI assets and icons","description":"Create minimal UI assets so HUD development can proceed without final art.\n\nResource icons (32x32px each, simple geometric):\n- Food: red apple circle\n- Wood: brown log rectangle\n- Stone: gray rock triangle\n- Gold: yellow coin circle\n- Knowledge: blue book square\n- Population: white person silhouette\n\nHUD panel backgrounds:\n- Bottom panel: dark semi-transparent rectangle (#1A1A1A at 80% opacity)\n- Minimap frame: dark border rectangle\n- Resource bar: dark strip with slight gradient\n- Tooltip background: dark with 1px border\n\nButton states (64x32px):\n- Normal: dark gray with slight bevel\n- Hover: slightly lighter\n- Pressed: slightly darker, 1px inset\n- Disabled: desaturated\n\nCursor sprites:\n- Default: standard arrow\n- Move: boot/arrow pointing down\n- Attack: sword/crosshair\n- Gather: hand/pick\n- Build: hammer\n- Invalid: red X\n\nFont selection:\n- Choose 1 primary font for UI (readable at small sizes, free license)\n- Choose 1 header/title font (more stylized, free license)\n- Import as Godot FontFile resources with fallback chain\n\nAcceptance criteria:\n- All resource icons distinguishable at 32x32\n- HUD panels render cleanly at 1920x1080 and 1280x720\n- Cursor states are visually distinct\n- Fonts render clearly at 12px, 16px, and 24px sizes","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:21Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:18Z","closed_at":"2026-02-22T22:34:18Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-be7.6","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.7","title":"Build throwaway isometric feel prototype","description":"Build a quick throwaway prototype (separate scene, not production code) to validate the isometric feel before building real systems. This is a time-boxed spike — max 1 day of effort.\n\nPrototype must answer these questions:\n1. Does 128x64 tile size feel right at target zoom? Can you see enough of the map?\n2. Does the camera pan/zoom feel responsive? What are good min/max zoom limits?\n3. Is a villager at ~48px tall visible and selectable without squinting?\n4. Does unit movement speed feel right? How many tiles per second is good?\n5. Can you visually distinguish 3-4 different terrain types at game zoom?\n6. Does the isometric click-to-world coordinate conversion feel accurate?\n\nBuild:\n- Hand-place a 20x20 isometric tilemap with 3-4 terrain types using placeholder tiles\n- Add a Camera2D with pan (WASD) and zoom (scroll wheel)\n- Place 5-10 unit placeholders (colored circles)\n- Click to select, right-click to move (basic, no pathfinding — just lerp to position)\n- Isometric screen-to-world coordinate conversion for click targeting\n\nDocument findings in a short writeup:\n- What tile size / zoom range felt good\n- What unit speed felt good (tiles per second)\n- Any surprises about iso coordinate math\n- Screenshots at min zoom, default zoom, max zoom\n\nThis prototype is explicitly throwaway — it does NOT need tests, lint, or coverage. It informs ADR decisions before real implementation begins.\n\nAcceptance criteria:\n- Can pan and zoom around a 20x20 iso map\n- Can click to select and right-click to move a unit\n- Findings documented with specific numbers (zoom range, speed, etc.)\n- Prototype clearly marked as throwaway (separate directory or branch)","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:21Z","created_by":"Dave Tashner","updated_at":"2026-02-22T20:53:32Z","closed_at":"2026-02-22T20:53:32Z","close_reason":"Isometric prototype built with camera, selection, movement, and procedural map","labels":["art","prototype","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.7","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.8","title":"Build Blender isometric render rig with 8-camera setup","description":"Create a Blender template scene (blender/render_rig.blend) that automates rendering 3D models into isometric 2D sprites from 8 directions.\n\nRender rig specification:\n- 8 orthographic cameras arranged at 45-degree intervals around the origin\n- Camera naming: cam_n, cam_ne, cam_e, cam_se, cam_s, cam_sw, cam_w, cam_nw\n- All cameras at isometric angle: 30 degrees from horizontal (atan(1/sqrt(2)) = 35.264 degrees technically, but 30 is the standard iso approximation — test both, pick what matches 128x64 tiles)\n- Orthographic projection with scale calibrated so a standing humanoid renders at ~48px tall (villager scale) in the output\n- Consistent 3-point lighting: key light (warm, upper-left), fill light (cool, lower-right), rim light (behind, subtle)\n- Transparent background (RGBA PNG output)\n- Render resolution: 256x256px per frame (2x target size for downscale quality, final sprites are 128x128 max bounding box)\n- Output format: PNG with alpha, 8-bit color\n\nCamera calibration process:\n- Place a reference cube at origin matching 1-tile footprint\n- Render from all 8 cameras\n- Verify the cube renders as a proper 128x64 isometric diamond when downscaled\n- Save camera transforms as constants in the batch render script\n\nInclude in the .blend file:\n- Empty at origin as the model placement target\n- Reference cube (hidden by default) for scale calibration\n- Collection structure: Cameras, Lights, Model (empty, user places their model here)\n- World settings: transparent background\n\nDocument in blender/README.md:\n- How to import a model and place it in the rig\n- How to adjust scale for different unit sizes (villager vs cavalry vs building)\n- Camera angle rationale and how it maps to tile geometry\n\nAcceptance criteria:\n- Render rig produces correct isometric angle matching 128x64 tile geometry\n- All 8 directions render with consistent lighting and framing\n- Transparent background on all output\n- Reference cube renders as proper iso diamond\n- A test model (Blender default monkey/suzanne) renders correctly from all 8 cameras","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:19:32Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:18Z","closed_at":"2026-02-22T22:34:18Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","blender","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.8","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:19:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.9","title":"Create Blender batch render script for automated sprite export","description":"Create a Blender Python script (blender/batch_render.py) that automates rendering all animations of a model from all 8 cameras.\n\nUsage: blender --background render_rig.blend --python batch_render.py -- --model infantry --animations idle,walk,attack,death --output-dir ./renders/infantry/\n\nThe script:\n1. Loads the render rig scene\n2. Imports or links the specified model into the Model collection\n3. For each animation in the model's action list (or specified via CLI):\n   a. Set the animation as active\n   b. Determine frame range from action\n   c. For each camera (8 directions):\n      - Set active camera\n      - For each frame in the animation:\n        - Set frame\n        - Render to PNG: {output_dir}/{animation}_{direction}_{frame:02d}.png\n4. Generate a manifest.json listing all rendered files with metadata:\n   - animation name, direction, frame index, file path, dimensions\n\nScale presets (passed via CLI --scale):\n- villager: ortho scale calibrated for ~48px tall output\n- infantry: ~52px tall\n- cavalry: ~64px tall\n- building_1x1: ~128px wide\n- building_2x2: ~256px wide\n- building_3x3: ~384px wide\n\nCLI arguments:\n- --model: name for output organization\n- --blend-file: path to .blend file with the model (if not in render rig)\n- --animations: comma-separated animation names (or 'all')\n- --scale: preset name or custom ortho scale value\n- --output-dir: where to write PNGs\n- --directions: override which cameras to use (default: all 8)\n- --resolution: override render resolution (default: 256x256)\n- --downscale: final sprite size after downscale (default: 128x128 bounding box)\n\nThe script handles downscaling from render resolution to final sprite size using high-quality Lanczos resampling (via Pillow post-process or Blender compositor).\n\nAcceptance criteria:\n- Script runs headless: blender --background --python batch_render.py\n- Renders all animations from all 8 cameras without manual intervention\n- Output file naming matches asset convention exactly\n- Manifest JSON is complete and accurate\n- Renders complete in under 60 seconds for a simple model with 3 animations\n- Script is idempotent — same input produces identical output","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:19:33Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:19Z","closed_at":"2026-02-22T22:34:19Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","blender","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.9","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:19:32Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.9","depends_on_id":"roots-of-reason-be7.8","type":"blocks","created_at":"2026-02-22T15:21:00Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-bkg","title":"ADR-004: Historical Civilizations","description":"Three civilizations: Mesopotamia (builders, +15% build speed), Rome (military, +10% military stats), Polynesia (naval, +20% naval speed). Each with unique units, buildings, and techs.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:03Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:44Z","closed_at":"2026-02-22T22:39:44Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-boc","title":"Inject pathfinding grid reference instead of hardcoding path","description":"prototype_unit.gd line 756 hardcodes /root/PrototypeMain/PathfindingGrid. Silently fails in tests. Inject via _scene_root at setup time.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:08:14Z","closed_at":"2026-02-28T14:08:14Z","close_reason":"Completed in PR #184"}
{"id":"roots-of-reason-bqo","title":"ADR-005: Age Progression System","description":"Seven ages: Stone → Bronze → Iron → Medieval → Industrial → Information → Singularity. Each unlocks buildings, units, techs. Advancing requires resources + prerequisite buildings. Singularity endgame: GPU Foundry → Transformer Lab → AGI Core.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:04Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:45Z","closed_at":"2026-02-22T22:39:45Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-bw9","title":"Generate dog death sprites (8 directions, 2 frames)","description":"Generate dog_death_{dir}_{frame}.png for all 8 directions x 2 frames = 16 PNGs. Includes magenta collar for player color. See docs/design/wolf_sprite_prompt.md.","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:42:50Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:42:50Z","labels":["art","dog","sprites"]}
{"id":"roots-of-reason-c6h","title":"Add tests for transport_handler.gd","description":"scripts/prototype/transport_handler.gd implements embark/disembark with save/load. Create tests/prototype/test_transport_handler.gd testing: embark_unit, capacity, kill_passengers, save/load round-trip.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:20:08Z","closed_at":"2026-02-28T14:20:08Z","close_reason":"Completed in PR #188"}
{"id":"roots-of-reason-c8y","title":"Improve villager woman walk animation frames — more leg stride","description":"The walk_c animation (n/nw/ne/w/e directions) has minimal foot movement — looks like a shuffle rather than a walk. The walk_d south-facing animation has a proper stride with distinct leg positions across frames. Need to either re-extract or regenerate walk frames for non-south directions with more leg movement to match the quality of walk_d south. Options: (1) generate new spritesheet with better stride for all directions, (2) derive additional directions from walk_d by mirroring/rotating, (3) commission improved frames. Use ror sprite-sheet villager_woman walk_c vs ror sprite-sheet villager_woman walk_d s to compare.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T04:41:33Z","created_by":"Dave Tashner","updated_at":"2026-03-01T04:41:33Z","labels":["animation","art"]}
{"id":"roots-of-reason-cph","title":"Add villager_woman walk_d animation for s/sw/se directions","description":"Process villager_woman_walk_spritesheet_02.png into 14 walk frames: 4 south + 5 southwest + 5 southeast (mirrored). Completes all 8 walk directions for the villager_woman variant.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:49:28Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:52:30Z","closed_at":"2026-03-01T02:52:30Z","close_reason":"Completed in PR #237"}
{"id":"roots-of-reason-cvx","title":"Generate wolf death sprites (8 directions, 2 frames)","description":"Generate wolf_death_{dir}_{frame}.png for all 8 directions x 2 frames = 16 PNGs. See docs/design/wolf_sprite_prompt.md for prompts and specs.","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:42:47Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:42:47Z","labels":["art","sprites","wolf"]}
{"id":"roots-of-reason-d4a","title":"Villagers resume gathering after manual move command","description":"move_to() and follow_path() don't cancel gather state, so villagers resume gathering after arriving at a manually-commanded destination.","status":"open","priority":1,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:22:09Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:22:09Z"}
{"id":"roots-of-reason-daw","title":"Generate terrain tile art: shore","description":"Generate 4 shore tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nSandy shoreline where water meets land. Wet sand with a subtle sheen, tiny shell fragments. Warm sunlight from the upper-left. Colors: wet sand tones (#C2B280, #B2A270, #D0C090).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/shore_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:21:07Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:21:07Z","labels":["art"]}
{"id":"roots-of-reason-de0","title":"ADR-023: Debug Console \u0026 Integration Test Architecture","description":"## Context\n\nThe game needs developer tooling for: (a) manually reproducing and debugging gameplay issues, (b) fast-forwarding to late-game scenarios without playing through early game, (c) fine-grained integration tests that set up complex multi-system scenarios. Currently, the only debug tool is DebugServer (HTTP API with /economy, /combat-log, /pathfinding, /perf endpoints). This works for data inspection but cannot mutate game state.\n\n## Decision\n\n### Architecture: In-Game Debug Console + Scriptable Test API\n\n**Two complementary interfaces, one shared backend:**\n\n1. **DebugConsole (in-game overlay)** — for manual interactive debugging\n   - Toggle with backtick/tilde key (\\`)\n   - Translucent overlay at top of screen, does not pause game\n   - Text input with command history (up/down arrows)\n   - Auto-complete for commands, unit types, building types, tech names\n   - Output log area shows command results and errors\n\n2. **DebugAPI (GDScript API)** — for automated integration tests\n   - Static methods callable from test scripts: DebugAPI.spawn_unit(), DebugAPI.set_resources(), etc.\n   - Same command implementations as console, different entry point\n   - No UI dependency — works in headless test runner\n\n3. **DebugCommandRegistry (shared backend)** — command parsing and execution\n   - Commands registered as Dictionary entries: {name, args_spec, handler_callable, help_text}\n   - Each command validates args, executes against live game state, returns result string\n   - All mutations go through existing system APIs (GameManager, ResourceManager, etc.) — no direct state hacking\n\n### Command Categories\n\n| Category | Commands | Notes |\n|----------|----------|-------|\n| **Spawn** | spawn \\\u003cunit_type\\\u003e [player] [count] [x,y], build \\\u003cbuilding_type\\\u003e [player] [x,y] | Uses existing unit/building creation paths. Bypasses cost checks. |\n| **Control** | move \\\u003cid\\\u003e \\\u003cx,y\\\u003e, attack \\\u003cid\\\u003e \\\u003ctarget\\\u003e, gather \\\u003cid\\\u003e \\\u003cresource\\\u003e, set-hp \\\u003cid\\\u003e \\\u003chp\\\u003e, kill \\\u003cid\\\u003e, teleport \\\u003cid\\\u003e \\\u003cx,y\\\u003e | Issues commands through CommandHandler (same path as player input). |\n| **Economy** | give \\\u003cresource\\\u003e \\\u003camount\\\u003e [player], give-all \\\u003camount\\\u003e, set-pop-cap \\\u003camount\\\u003e | Mutates via ResourceManager/PopulationManager. |\n| **Tech** | research \\\u003ctech_id\\\u003e, research-all, advance-age [target_age], set-age \\\u003cage\\\u003e | Uses TechManager.complete_research() to properly trigger effects. |\n| **Vision** | reveal-map, fog on/off, show-ai | Toggles VisibilityManager state. |\n| **Time** | speed \\\u003cmultiplier\\\u003e, pause, step [ticks], skip \\\u003cseconds\\\u003e | Modifies Engine.time_scale or GameManager.game_speed. |\n| **Overlays** | show pathfinding/los/fog/spatial-index/attack-ranges, hide \\\u003coverlay\\\u003e | Renders debug visualization layers on game world. |\n| **Query** | list units [player], list buildings [player], info \\\u003cid\\\u003e, stats | Read-only inspection. |\n\n### File Organization\n\n- autoloads/debug_console.gd — DebugConsole autoload (UI + command input)\n- scripts/debug/debug_api.gd — DebugAPI static class (test-facing)\n- scripts/debug/debug_command_registry.gd — Shared command registry + execution\n- scripts/debug/debug_overlays.gd — Visual debug overlay rendering\n- tests/helpers/scenario_builder.gd — Test helper wrapping DebugAPI for scenario setup\n\n### Release Build Behavior\n\n- **Debug console is STRIPPED from release exports.** Use Godot's feature tags: all debug files wrapped in \\`if OS.is_debug_build()\\` guards.\n- DebugConsole autoload registered conditionally in project.godot (or via a debug-only scene)\n- DebugAPI remains available in debug builds only — tests never run against release builds\n- No debug command should have side effects that could affect game balance if somehow invoked in release\n\n### Integration with Existing DebugServer\n\n- DebugServer (HTTP API) continues to serve read-only endpoints\n- New write endpoints added to DebugServer that delegate to DebugCommandRegistry: POST /spawn, POST /research, etc.\n- This enables external tool integration (e.g., a web dashboard that controls the game)\n\n### ScenarioBuilder Test Helper\n\nScenarioBuilder wraps DebugAPI for readable test setup:\n\\`\\`\\`gdscript\nvar scenario = ScenarioBuilder.new()\nscenario.set_civ(1, \"rome\").set_civ(2, \"polynesia\")\nscenario.set_age(1, \"medieval\").set_age(2, \"medieval\")\nscenario.give_resources(1, {food=1000, gold=500})\nscenario.spawn_units(1, \"infantry\", 10, Vector2i(20, 20))\nscenario.spawn_units(2, \"archer\", 10, Vector2i(25, 20))\nscenario.build(1, \"barracks\", Vector2i(18, 20))\n# Now assert combat outcomes...\n\\`\\`\\`\n\n## Consequences\n\n- Two entry points (console + API) share one implementation — no logic duplication\n- Commands go through existing system APIs — debug tools stay correct as systems evolve\n- Stripped from release — zero performance/security impact on shipped game\n- ScenarioBuilder enables readable, maintainable integration tests\n- HTTP integration enables future external tooling (web debug dashboard, CI smoke tests)\n- Command registry is extensible — new systems register their own debug commands","status":"open","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T17:08:15Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:08:15Z","labels":["adr","architecture","debug","testing"]}
{"id":"roots-of-reason-dhb","title":"Decrease unit default speed by 30% — units explore map too fast","description":"Units move too quickly at current MOVE_SPEED of 150.0 (in scripts/prototype/prototype_unit.gd:19). Players can explore the entire map too fast, reducing strategic tension. Reduce default speed by 30% to ~105.0. This should be a data-driven change in data/units/villager.json (and potentially other unit JSON files) rather than a hardcoded constant change.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T03:08:49Z","created_by":"Dave Tashner","updated_at":"2026-02-28T03:17:26Z","closed_at":"2026-02-28T03:17:26Z","close_reason":"Completed in PR #157"}
{"id":"roots-of-reason-dqd","title":"Validate building cost resource keys in data schemas","description":"Building/unit cost objects don't validate resource keys against allowed set (food, wood, stone, gold, knowledge). Add enum constraint to schemas.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T13:58:47Z","closed_at":"2026-02-28T13:58:47Z","close_reason":"Completed in PR #180"}
{"id":"roots-of-reason-e2s","title":"ADR-007: Quality Pipeline — Test-Driven Game Development","description":"Every system in Roots of Reason must be testable and tested before merge. The CI pipeline is a first-class game system that enforces quality gates on every PR.\n\nDecisions: (1) GdUnit4 as the unit/integration test framework (GDScript-native, JUnit XML output, CI-friendly). (2) Minimum 90% line coverage on all gameplay scripts (autoloads/, scripts/). Coverage enforced in CI — PRs that drop below threshold are blocked. (3) Static analysis via gdtoolkit (gdlint + gdformat) — zero warnings policy. (4) Headless scene smoke tests — every scene must load without errors in headless mode. (5) Playability integration tests — automated scenarios that simulate real gameplay headless and assert game state correctness. (6) Screenshot regression testing — capture UI screenshots in CI and compare against baselines. (7) Performance budgets — frame time benchmarks for key scenarios, CI fails if benchmarks regress beyond 15%. (8) Export validation — CI builds macOS and Windows exports and verifies they launch.\n\nConsequences: High confidence in every merge. Slower CI runs (~5-10 min) but catches regressions immediately. Test infrastructure built once, pays dividends on every subsequent epic. 90% coverage enforces testable architecture. Screenshot tests catch UI regressions that unit tests miss.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:33Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:47Z","closed_at":"2026-02-22T22:39:47Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","ci"]}
{"id":"roots-of-reason-e5z","title":"Add tests for gatherer_component.gd","description":"scripts/prototype/gatherer_component.gd has no direct test file. Create tests/prototype/test_gatherer_component.gd testing: GatherState transitions, replacement resource search, save/load, carry_capacity overflow.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:12:02Z","closed_at":"2026-02-28T14:12:02Z","close_reason":"Completed in PR #187"}
{"id":"roots-of-reason-e65","title":"Epic 11: Naval \u0026 Vehicles","description":"Water tiles, coastlines, dock building, ship types (Fishing, Transport, War Galley, Cannon Ship), embarking/disembarking, later-age land vehicles (Tanks, Artillery).","status":"closed","priority":3,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:11Z","created_by":"Dave Tashner","updated_at":"2026-02-27T13:14:58Z","closed_at":"2026-02-27T13:14:58Z","close_reason":"All 5 children completed — final story e65.5 merged in PR #110","labels":["epic","naval"],"dependencies":[{"issue_id":"roots-of-reason-e65","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T14:44:59Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-e65","depends_on_id":"roots-of-reason-ovr","type":"blocks","created_at":"2026-02-22T14:44:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.1","title":"Water tiles and coastline generation","description":"Water terrain tiles with coastline transitions. Generate rivers and ocean/lakes during map gen. Shore tiles where land meets water. Ships can only move on water tiles. Land units cannot cross water without transport.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:43Z","created_by":"Dave Tashner","updated_at":"2026-02-26T23:25:28Z","closed_at":"2026-02-26T23:25:28Z","close_reason":"Completed in PR #97","labels":["map","naval","story"],"dependencies":[{"issue_id":"roots-of-reason-e65.1","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:43Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.2","title":"Dock building and ship production","description":"Dock: must be placed on shore tile (adjacent to water). Produces ships. Acts as drop-off for fishing boats. Has its own build queue. Requires access to water.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:44Z","created_by":"Dave Tashner","updated_at":"2026-02-26T23:47:17Z","closed_at":"2026-02-26T23:47:17Z","close_reason":"Completed in PR #99","labels":["buildings","naval","story"],"dependencies":[{"issue_id":"roots-of-reason-e65.2","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.3","title":"Ship types: Fishing Boat, Transport, War Galley, Cannon Ship","description":"Fishing Boat (gathers fish), Transport (carries up to 10 land units), War Galley (ranged attack ship, Bronze Age), Cannon Ship (heavy attack ship, Industrial Age). Each with stats and upgrade path.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:45Z","created_by":"Dave Tashner","updated_at":"2026-02-27T00:43:41Z","closed_at":"2026-02-27T00:43:41Z","close_reason":"Completed in PR #101","labels":["naval","ships","story"],"dependencies":[{"issue_id":"roots-of-reason-e65.3","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.4","title":"Embarking and disembarking land units","description":"Land units can board Transport ships at shore. Right-click transport to board, right-click shore to disembark. Units are hidden while aboard. Transport sinks = all units die. Loading/unloading takes time.","status":"closed","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:45Z","created_by":"Dave Tashner","updated_at":"2026-02-27T12:24:48Z","closed_at":"2026-02-27T12:24:48Z","close_reason":"Completed in PR #108","labels":["naval","story","transport"],"dependencies":[{"issue_id":"roots-of-reason-e65.4","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.5","title":"Later-age land vehicles: Tanks and Artillery","description":"Industrial Age+: Tank (heavy armor, fast, anti-infantry), Artillery (extreme range, anti-building, slow, minimum range). Produced at Factory building. These replace cavalry and siege in later ages.","status":"closed","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:46Z","created_by":"Dave Tashner","updated_at":"2026-02-27T13:14:58Z","closed_at":"2026-02-27T13:14:58Z","close_reason":"Completed in PR #110","labels":["story","vehicles"],"dependencies":[{"issue_id":"roots-of-reason-e65.5","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77","title":"Epic 13: UI \u0026 HUD","description":"Resource bar, minimap, unit/building info panel, command panel, in-game menus, main menu and lobby screen.","status":"closed","priority":2,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:12Z","created_by":"Dave Tashner","updated_at":"2026-02-27T02:26:35Z","closed_at":"2026-02-27T02:26:35Z","close_reason":"All 6 children closed","labels":["epic","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77","depends_on_id":"roots-of-reason-317","type":"blocks","created_at":"2026-02-22T14:45:01Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.1","title":"Resource bar (top of screen)","description":"Top bar showing all 5 resources with icons and amounts. Population counter (current/max). Age indicator. Real-time updates. Compact layout that doesn't obstruct gameplay.\n\n## Acceptance Criteria\n- [ ] Fixed HUD panel at top of screen, full viewport width\n- [ ] Displays all 5 resources with icon + amount: Food, Wood, Stone, Gold, Knowledge\n- [ ] Population counter: current/cap (e.g., \"14/20\")\n- [ ] Current age displayed (e.g., \"Bronze Age\")\n- [ ] Updates reactively via ResourceManager signals (not polling)\n- [ ] Numbers animate smoothly when changing (brief count-up/down or flash)\n- [ ] Red flash on resource that was insufficient when action denied\n- [ ] Phase 1: colored squares for resource icons, clean numeric labels\n- [ ] Does not block mouse input to game world below\n- [ ] Scales correctly with viewport stretch mode\n- [ ] Unit tests for formatting (0, large numbers, negative edge cases)\n- [ ] Smoke test: scene loads without errors","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:49Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:18:50Z","closed_at":"2026-02-23T03:18:50Z","close_reason":"Completed in PR #24","labels":["story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.1","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:49Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.2","title":"Minimap (bottom-left)","description":"Minimap showing terrain, fog of war, unit positions (color-coded by player), buildings. Click minimap to pan camera. Show camera viewport rectangle. Right-click minimap to move selected units.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:50Z","created_by":"Dave Tashner","updated_at":"2026-02-26T22:44:44Z","closed_at":"2026-02-26T22:44:44Z","close_reason":"Completed in PR #96","labels":["minimap","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.2","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.3","title":"Unit and building info panel (bottom-center)","description":"Bottom-center panel showing selected unit/building info: portrait, name, HP bar, stats, current action. For buildings: production queue, rally point. For multiple selection: grid of unit icons with HP bars.\n\n## Acceptance Criteria\n- [ ] Panel appears at bottom-center when a unit or building is selected\n- [ ] Unit info shows: portrait (Phase 1: colored shape), name, HP bar, stats (attack, defense, speed)\n- [ ] Building info shows: portrait, name, HP bar, garrison count, production queue\n- [ ] Multi-select shows: group icons, total count, aggregate HP bar\n- [ ] HP bar color-coded: green \u003e 60%, yellow \u003e 30%, red \u003c= 30%\n- [ ] Panel updates in real-time (HP changes during combat visible immediately)\n- [ ] Panel hides when selection is empty\n- [ ] Connects to selection system signals from 317.2\n- [ ] Phase 1: simple Panel container with labels, no custom art\n- [ ] Does not overlap command panel (e77.4) — clear layout boundaries\n- [ ] Smoke test: scene loads without errors","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:51Z","created_by":"Dave Tashner","updated_at":"2026-02-27T02:26:30Z","closed_at":"2026-02-27T02:26:30Z","close_reason":"Status shows DONE, closing","labels":["infopanel","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.3","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.4","title":"Command panel (bottom-right)","description":"Bottom-right grid of command buttons. Context-sensitive: shows available actions for selected unit/building. Build menu for villagers, unit production for military buildings, formation buttons for groups. Hotkey labels on buttons.\n\n## Acceptance Criteria\n- [ ] Grid of command buttons (4x3 or similar) at bottom-right of screen\n- [ ] Commands shown depend on selected unit/building type\n- [ ] Villager commands: Build menu, Repair, Gather (auto from context)\n- [ ] Military unit commands: Attack, Patrol, Stance toggle, Stop, Hold Position\n- [ ] Building commands: Set rally point, unit production buttons, research buttons\n- [ ] Each button has: icon (Phase 1: text label), tooltip, hotkey\n- [ ] Hotkey grid matches spatial layout (Q/W/E/R, A/S/D/F, Z/X/C/V or similar)\n- [ ] Buttons gray out when action unavailable (insufficient resources, tech locked)\n- [ ] Tooltip shows: name, cost, description, hotkey\n- [ ] Command panel updates when selection changes\n- [ ] Connects to command dispatch system from 317.4\n- [ ] Smoke test: scene loads without errors","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:51Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:18:51Z","closed_at":"2026-02-23T03:18:51Z","close_reason":"Completed in PR #26","labels":["commands","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.4","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.5","title":"In-game menus: save, load, settings, quit","description":"Escape key opens pause menu overlay. Options: Resume, Save Game, Load Game, Settings (audio, video, keybinds), Quit to Menu, Quit to Desktop. Settings persist between sessions.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:52Z","created_by":"Dave Tashner","updated_at":"2026-02-26T21:25:44Z","closed_at":"2026-02-26T21:25:44Z","close_reason":"Completed in PR #95","labels":["menus","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.5","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.6","title":"Main menu and game lobby screen","description":"Main menu: Single Player, Settings, Credits, Quit. Single Player lobby: map size, map type, number of opponents, AI difficulty, civilization selection. Start Game button launches game with configured settings.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:53Z","created_by":"Dave Tashner","updated_at":"2026-02-26T20:53:28Z","closed_at":"2026-02-26T20:53:28Z","close_reason":"Completed in PR #94","labels":["mainmenu","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.6","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e8j","title":"ADR-009: River Resource Transport System","description":"Rivers are not just terrain obstacles or naval highways — they are economic infrastructure. A civilization that controls river access gains a significant gathering advantage for nearby mines and quarries.\n\nDECISION\n\n1. RIVER GENERATION\nRivers are generated during map creation as continuous paths of shallow water tiles flowing from high elevation (mountains/hills) to low elevation (ocean/lake). Rivers have FLOW DIRECTION encoded per tile — each river tile knows which direction water flows (toward the river mouth). Rivers branch and merge realistically using a simple hydrology simulation:\n- Start at mountain/hill tiles (watershed sources)\n- Flow downhill following steepest gradient\n- Merge when two rivers meet\n- Terminate at ocean, lake, or map edge\n- River width: 1 tile for streams, 2 tiles for major rivers (wider near mouth)\n- Typical map has 2-4 rivers depending on size\nRivers are a distinct terrain sub-type of water: \"river\" vs \"ocean\" vs \"lake\". River tiles are shallow and crossable by land units at reduced speed (50% movement penalty), unlike ocean which requires ships.\n\n2. RIVER DOCK BUILDING\nA new building: River Dock (1x1 footprint, must be placed on a tile adjacent to a river tile).\n- Cost: 100 Wood (cheap, available from Bronze Age)\n- Build time: 30 seconds\n- HP: 400 (fragile — can be raided)\n- Acts as a resource drop-off point for Food, Wood, Stone, Gold (same as Mill/Mining Camp/Lumber Camp but universal)\n- Additionally acts as a RIVER TRANSPORT ORIGIN: resources deposited here are automatically shipped downstream\n\n3. RIVER TRANSPORT MECHANIC\nWhen a villager deposits resources at a River Dock:\n(a) If there is another River Dock OR Town Center downstream along the same river, the resources are automatically transported to the NEAREST downstream drop-off.\n(b) Transport is visualized as a small barge sprite moving along the river tiles following flow direction.\n(c) Transport speed: 3x villager walking speed (resources arrive at downstream depot much faster than a villager could walk them).\n(d) Transport is NOT instant — the barge physically travels, taking time proportional to river distance.\n(e) Resources are \"in transit\" during transport — they are deducted from the origin dock and added to the player stockpile only when the barge arrives at the downstream depot.\n(f) Barges can be attacked and sunk by enemy units positioned along the river, causing resource loss (the carried resources are destroyed).\n\n4. PROXIMITY BONUS\nVillagers gathering from a resource node within 3 tiles of a River Dock will automatically use the River Dock as their drop-off IF it is closer than their next best drop-off. This is not a special mechanic — it falls out naturally from the \"nearest drop-off\" gathering logic since the River Dock IS a drop-off building.\nThe real advantage is the DOWNSTREAM TRANSPORT: resources deposited at an upstream River Dock flow downstream to your base automatically, meaning your villagers have a very short walk (to the nearby River Dock) instead of a long walk (back to the Town Center).\n\n5. STRATEGIC IMPLICATIONS\n- River Dock placement is a key strategic decision: build them upstream near mines\n- Rivers that flow TOWARD your base are extremely valuable map features\n- Rivers that flow AWAY from your base have no transport benefit (you'd be shipping resources away from your economy)\n- Enemy River Docks are high-value raid targets — destroying them forces villagers to walk the long way\n- Barges on the river are vulnerable to archers or units positioned on the banks\n- Controlling both banks of a river upstream of your enemy denies them this economic advantage\n- Mesopotamia's builder bonus (+15% build speed) makes River Dock spam faster\n- Polynesia's naval bonus could extend to river control (future consideration)\n\n6. FLOW DIRECTION VISUALIZATION\nRiver tiles render with a subtle animated flow direction indicator (small chevrons or ripple animation moving in the flow direction). This communicates to the player which way resources will travel without needing to check a tooltip. The direction should be immediately readable at normal game zoom.\n\n7. DATA MODEL\nRiver tile data (stored per tile in map data):\n- terrain_type: \"river\"\n- flow_direction: Vector2i (e.g., (1, 0) for flowing east)\n- river_id: int (which river system this tile belongs to)\n- river_width: int (1 or 2)\n- is_navigable: bool (true for all river tiles — ships can use rivers)\n\nRiver Dock building data (in data/buildings/river_dock.json):\n- transport_speed_multiplier: 3.0\n- max_barge_capacity: 30 (resources per trip)\n- barge_spawn_interval: 5.0 (seconds between barge dispatches)\n\nCONSEQUENCES\n\n- Rivers become the most strategically important terrain feature after mountains\n- Early Bronze Age river control provides significant economic advantage\n- Creates natural conflict points: the riverbanks near mines\n- Adds a raiding dimension: disrupt enemy economy by sinking barges or destroying docks\n- River placement in map generation must be balanced relative to starting positions\n- The mechanic rewards map reading — experienced players identify good river positions immediately\n- Mesopotamia (builders) benefits from cheap fast River Dock construction\n- Polynesia (naval) could get river-specific bonuses in future balance passes\n- Visual barge movement adds life and activity to the map\n- \"Resources in transit\" creates risk/reward: faster economy but vulnerable to raids","status":"closed","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T20:59:34Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:49Z","closed_at":"2026-02-22T22:39:49Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","map","resources"]}
{"id":"roots-of-reason-eak","title":"Epic: Building Art Pipeline (All Ages)","description":"Generate game-ready sprite art for all 22+ buildings across all ages. Each building needs: idle sprite, construction sequence (3-5 frames), destruction animation, and magenta player-color mask. Source sprites processed through tools/ror process-sprite pipeline. Buildings span Stone Age (House, Farm, Lumber Camp) through Singularity Age (GPU Foundry, AGI Core). Priority order: most-used buildings first (Town Center, Barracks, Farm, Library), then age-progression buildings, then unique civ buildings.","notes":"All sprites must follow ADR-008 sprite scale contract. Canvas sizes: 1x1=128x128, 2x2=256x192, 3x3=384x256, 4x4=512x320, 5x5=640x384. Magenta (#FF00FF) player color mask required on all buildings. Process through tools/ror process-sprite pipeline. Validate with tools/ror validate-assets.","spec_id":"roots-of-reason-3hk","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:55:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:44Z","labels":["art","buildings","sprites"]}
{"id":"roots-of-reason-eak.1","title":"Generate Town Center sprites (idle, construction sequence, destruction)","description":"Generate Town Center (3x3, 384x256 canvas) game-ready sprites: idle, 5-frame construction sequence, 3-frame destruction animation. Central building — should be visually prominent. Magenta player-color mask on banners/flags. Process through sprite pipeline.","acceptance_criteria":"- [ ] Source: assets/sprites/buildings/town_center_01.png\n- [ ] Game-ready: assets/sprites/buildings/placeholder/town_center.png (384x256, 3x3 per ADR-008)\n- [ ] Construction: 5 frames (town_center_construction_01-05.png) — most frames due to importance\n- [ ] Destruction: 3 frames\n- [ ] Magenta mask on banners/flags for player color shader\n- [ ] Visually prominent — largest/most ornate Stone-Bronze age building\n- [ ] ./tools/ror process-sprite and validate-assets pass","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:43Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:23Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.1","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:42Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.10","title":"Generate GPU Foundry sprites (idle, construction, destruction)","description":"Generate GPU Foundry (3x3, 384x256 canvas) sprites: idle (industrial/tech facility with cooling towers), 4-frame construction, destruction. Singularity Age building. Magenta player-color mask.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/gpu_foundry.png (384x256, 3x3)\n- [ ] Construction: 4 frames, Destruction: 3 frames\n- [ ] Industrial/tech facility with cooling towers, server racks visible\n- [ ] Singularity Age palette\n- [ ] Magenta mask\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:49Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:29Z","labels":["art","buildings","singularity","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.10","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:48Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.11","title":"Generate Factory sprites (idle, construction, destruction)","description":"Generate Factory (3x3, 384x256 canvas) sprites: idle (Industrial Age factory with smokestacks), 4-frame construction, destruction. Magenta player-color mask.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/factory.png (384x256, 3x3)\n- [ ] Construction: 4 frames, Destruction: 3 frames\n- [ ] Industrial Age: smokestacks, gears, steam/smoke\n- [ ] Industrial palette: brick red, iron gray, amber per ADR-008\n- [ ] Magenta mask\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:49Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:29Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.11","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:49Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.12","title":"Generate Stone Wall and gate sprites (segments, corners, gate open/closed)","description":"Generate Stone Wall (1x1, 128x128 canvas) sprite variants: straight segment (N-S, E-W), corner pieces (4 orientations), gate open, gate closed. Defensive fortification appearance. Magenta player-color mask on banners.","acceptance_criteria":"- [ ] Stone wall segments: wall_straight_ns.png, wall_straight_ew.png (128x128, 1x1)\n- [ ] Corners: wall_corner_ne.png, wall_corner_se.png, wall_corner_sw.png, wall_corner_nw.png\n- [ ] Gate: wall_gate_open.png, wall_gate_closed.png\n- [ ] All 128x128px per ADR-008 (1x1 footprint)\n- [ ] Magenta mask on banner/flag elements\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:50Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:30Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.12","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:49Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.13","title":"Generate Siege Workshop sprites (idle, construction, destruction)","description":"Generate Siege Workshop (3x3, 384x256 canvas) sprites: idle (workshop with siege equipment visible), 4-frame construction, destruction. Magenta player-color mask.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/siege_workshop.png (384x256, 3x3)\n- [ ] Construction: 4 frames, Destruction: 3 frames\n- [ ] Workshop with siege equipment visible (ram parts, catapult frame)\n- [ ] Magenta mask\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:51Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:30Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.13","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.14","title":"Generate Lumber Camp and Sheep Pen sprites","description":"Generate Lumber Camp (2x2, 256x192 canvas) and Sheep Pen (3x3, 384x256 canvas) sprites: idle, construction, destruction for each. Lumber Camp: logging operation aesthetic. Sheep Pen: fenced animal enclosure with sheep. Magenta player-color masks.","acceptance_criteria":"- [ ] Lumber camp: assets/sprites/buildings/placeholder/lumber_camp.png (256x192, 2x2)\n- [ ] Sheep pen: assets/sprites/buildings/placeholder/sheep_pen.png (384x256, 3x3)\n- [ ] Each: construction 3 frames, destruction 2 frames\n- [ ] Lumber camp: log piles, saw visible. Sheep pen: fenced area with sheep.\n- [ ] Magenta masks on each\n- [ ] validate-assets passes for both","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:51Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:31Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.14","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.15","title":"Generate Aqueduct and River Dock sprites","description":"Generate Aqueduct (3x1 footprint) and River Dock (1x1, 128x128 canvas) sprites: idle, construction for each. Aqueduct: Roman-style stone water channel. River Dock: small wooden pier on riverbank. Magenta player-color masks.","acceptance_criteria":"- [ ] Aqueduct: assets/sprites/buildings/placeholder/aqueduct.png (3x1 footprint, ~384x128)\n- [ ] River dock: assets/sprites/buildings/placeholder/river_dock.png (128x128, 1x1)\n- [ ] Each: construction 3 frames\n- [ ] Aqueduct: Roman stone arched water channel\n- [ ] River dock: small wooden pier, works at river edge\n- [ ] Magenta masks\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:52Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:32Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.15","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.2","title":"Generate Barracks sprites (idle, construction, destruction)","description":"Generate Barracks (3x3, 384x256 canvas) sprites: idle, 4-frame construction sequence, 3-frame destruction. Military training facility appearance. Magenta player-color mask. Existing placeholder needs upgrade to full art.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/barracks.png (384x256, 3x3)\n- [ ] Construction: 4 frames, Destruction: 3 frames\n- [ ] Military facility appearance (weapons racks, training area visible)\n- [ ] Magenta mask on banners\n- [ ] Replaces existing placeholder\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:43Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:24Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.2","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:43Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.3","title":"Generate Farm sprites (idle, growing stages, depleted)","description":"Generate Farm (2x2, 256x192 canvas) sprites: idle/growing (3 stages: seeded, growing, harvestable), depleted state, construction sequence. Agricultural plot with crops. Magenta player-color mask on fence/border.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/farm.png (256x192, 2x2)\n- [ ] 3 growth stages: seeded, growing, harvestable (farm_stage_01-03.png)\n- [ ] Depleted state: farm_depleted.png\n- [ ] Construction: 3 frames\n- [ ] Magenta mask on fence/border\n- [ ] Crop rows clearly visible at game zoom\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:44Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:24Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.3","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.4","title":"Generate Library sprites (idle, construction, destruction)","description":"Generate Library (2x2, 256x192 canvas) sprites: idle (with subtle glow/scroll animation), 4-frame construction sequence, destruction. Academic/scholarly building. Magenta player-color mask.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/library.png (256x192, 2x2)\n- [ ] Construction: 4 frames, Destruction: 3 frames\n- [ ] Academic/scholarly building with scrolls/books visible\n- [ ] Magenta mask\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:25Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.4","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.5","title":"Generate Castle sprites (idle, construction, destruction)","description":"Generate Castle (4x4, 512x320 canvas) sprites: idle (imposing fortress), 6-frame construction sequence, 4-frame destruction. Largest military building. Magenta player-color mask on banners/towers.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/castle.png (512x320, 4x4 per ADR-008)\n- [ ] Construction: 6 frames (large building = more stages)\n- [ ] Destruction: 4 frames\n- [ ] Imposing medieval fortress with towers, walls, gate\n- [ ] Magenta mask on banners, tower flags\n- [ ] Largest military building — visually dominates\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:26Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.5","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.6","title":"Generate Dock sprites (idle, construction, destruction)","description":"Generate Dock (3x3, 384x256 canvas) sprites: idle (wooden pier extending into water), 4-frame construction, destruction. Must visually work at water's edge. Magenta player-color mask.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/dock.png (384x256, 3x3)\n- [ ] Construction: 4 frames, Destruction: 3 frames\n- [ ] Wooden pier extending into water — must work visually at water's edge\n- [ ] Magenta mask on dock structure\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:46Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:26Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.6","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.7","title":"Generate Market sprites (idle, construction, destruction)","description":"Generate Market (3x3, 384x256 canvas) sprites: idle (open market stalls), 4-frame construction, destruction. Trade hub appearance. Magenta player-color mask.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/market.png (384x256, 3x3)\n- [ ] Construction: 4 frames, Destruction: 3 frames\n- [ ] Open-air market stalls with goods visible\n- [ ] Magenta mask on awning/banners\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:47Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:27Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.7","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.8","title":"Generate Wonder sprites (idle, construction stages, completed glow)","description":"Generate Wonder (5x5, 640x384 canvas) sprites: idle completed (with victory glow effect), 8-frame construction sequence (progressive build-up of a grand monument), destruction. Most visually impressive building in the game. Magenta player-color mask.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/wonder.png (640x384, 5x5 per ADR-008)\n- [ ] Construction: 8 frames (grandest building = most construction stages)\n- [ ] Completed idle with subtle glow/shimmer effect\n- [ ] Destruction: 4 frames\n- [ ] Most visually impressive building — monumental scale\n- [ ] Magenta mask on decorative elements\n- [ ] validate-assets passes","status":"open","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:47Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:27Z","labels":["art","buildings","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.8","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eak.9","title":"Generate AGI Core sprites (idle with data streams, construction, activation)","description":"Generate AGI Core (4x4, 512x320 canvas) sprites: idle (futuristic server farm with glowing data streams), 6-frame construction sequence, activation animation (for Singularity victory). Sci-fi aesthetic for Singularity Age. Magenta player-color mask.","acceptance_criteria":"- [ ] Game-ready: assets/sprites/buildings/placeholder/agi_core.png (512x320, 4x4)\n- [ ] Construction: 6 frames\n- [ ] Idle: futuristic server farm with animated data stream glow\n- [ ] Activation: 3 frames (for Singularity victory trigger)\n- [ ] Sci-fi aesthetic: glass, metal, holographic displays, glowing circuits\n- [ ] Age palette: steel blue, white, neon cyan per ADR-008 Singularity palette\n- [ ] Magenta mask on structural panels\n- [ ] validate-assets passes","status":"open","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:48Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:28Z","labels":["art","buildings","singularity","sprites"],"dependencies":[{"issue_id":"roots-of-reason-eak.9","depends_on_id":"roots-of-reason-eak","type":"parent-child","created_at":"2026-03-01T11:57:48Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei","title":"Epic 10: Civilizations","description":"Civilization data model, Mesopotamia (+15% build, Ziggurat, Immortal Guard), Rome (+10% military, Colosseum, Legionnaire), Polynesia (+20% naval, Marae, War Canoe), selection screen.","status":"closed","priority":2,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:10Z","created_by":"Dave Tashner","updated_at":"2026-02-26T20:29:30Z","closed_at":"2026-02-26T20:29:30Z","close_reason":"All 5 stories completed (PRs #88-#93)","labels":["civilizations","epic"],"dependencies":[{"issue_id":"roots-of-reason-eei","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T14:44:58Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-eei","depends_on_id":"roots-of-reason-fxt","type":"blocks","created_at":"2026-02-22T14:44:58Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.1","title":"Civilization data model and bonus system","description":"Create civ data structure: name, description, bonuses (stat multipliers), unique_unit, unique_building, unique_techs, starting_bonuses. Load from JSON data files. Apply bonuses through modifier system.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:40Z","created_by":"Dave Tashner","updated_at":"2026-02-26T13:42:08Z","closed_at":"2026-02-26T13:42:08Z","close_reason":"Completed in PR #88","labels":["civilizations","story"],"dependencies":[{"issue_id":"roots-of-reason-eei.1","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.2","title":"Mesopotamia: Ziggurat, Immortal Guard, builder bonuses","description":"Mesopotamia: +15% building construction speed. Unique building: Ziggurat (replaces Library, +50% Knowledge generation). Unique unit: Immortal Guard (heavy infantry, self-heal). Unique techs: Irrigation (+25% farm output), Code of Laws (+10% all resource income).","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:41Z","created_by":"Dave Tashner","updated_at":"2026-02-26T18:52:28Z","closed_at":"2026-02-26T18:52:28Z","close_reason":"Completed in PR #90","labels":["civilizations","mesopotamia","story"],"dependencies":[{"issue_id":"roots-of-reason-eei.2","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.3","title":"Rome: Colosseum, Legionnaire, military bonuses","description":"Rome: +10% military unit attack and defense. Unique building: Colosseum (morale aura, +5% speed to nearby units). Unique unit: Legionnaire (infantry with shield wall ability, +3 defense when stationary). Unique techs: Roman Roads (+15% unit speed), Testudo (+20% ranged defense).","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:42Z","created_by":"Dave Tashner","updated_at":"2026-02-26T20:04:42Z","closed_at":"2026-02-26T20:04:42Z","close_reason":"Completed in PR #91","labels":["civilizations","rome","story"],"dependencies":[{"issue_id":"roots-of-reason-eei.3","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:41Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.4","title":"Polynesia: Marae, War Canoe, naval bonuses","description":"Polynesia: +20% naval unit speed. Unique building: Marae (culture building, reveals coastline on construction). Unique unit: War Canoe (fast attack ship, can carry 5 units). Unique techs: Wayfinding (+30% naval LOS), Haka (+15% attack for 30s battle cry ability).","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:42Z","created_by":"Dave Tashner","updated_at":"2026-02-26T20:12:30Z","closed_at":"2026-02-26T20:12:30Z","close_reason":"Completed in PR #92","labels":["civilizations","polynesia","story"],"dependencies":[{"issue_id":"roots-of-reason-eei.4","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:42Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.5","title":"Civilization selection screen","description":"Pre-game screen showing 3 civilizations with art, description, bonuses list, unique unit/building preview. Player selects civ before game starts. AI civs can be set or randomized.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:43Z","created_by":"Dave Tashner","updated_at":"2026-02-26T20:29:17Z","closed_at":"2026-02-26T20:29:17Z","close_reason":"Completed in PR #93","labels":["civilizations","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-eei.5","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:42Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-egs","title":"Expand DAG cycle check to cover all 92 techs","description":"test_tech_tree_expansion.gd only checks 13 newest techs for circular prereqs. Add test_no_circular_prereqs_full_tree covering all entries.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T06:39:01Z","closed_at":"2026-02-28T06:39:01Z","close_reason":"Completed in PR #174"}
{"id":"roots-of-reason-eid","title":"Harden CI pipeline — pin SHAs, add validation jobs, secret scanning, pre-push hooks","description":"Comprehensive CI/CD hardening: pin action SHAs for supply-chain security, add data-check and validate-assets CI jobs, add secret scanning, pre-push lint hook, concurrency control, pip caching, .editorconfig, Dependabot for actions, Python tool tests in CI, fix coverage JSON parsing, parallelize independent jobs","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:16:40Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:38:13Z","closed_at":"2026-02-26T01:38:13Z","close_reason":"Completed in PR #62","labels":["ci","quality","security"]}
{"id":"roots-of-reason-eq6","title":"Add villager_woman walk_c animation from spritesheet","description":"Process villager_woman_walk_spritesheet_01.png into 25 walk frames across 5 directions (n, nw, w + mirrors ne, e). Adds walk_c sub-animation chained after walk_a/walk_b for smoother walk cycle.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:36:31Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:38:14Z","closed_at":"2026-03-01T02:38:14Z","close_reason":"Completed in PR #235"}
{"id":"roots-of-reason-esz","title":"Epic: Military Unit Art (All Unit Types)","description":"Generate game-ready sprite art for all military and economic unit types. Each unit needs: idle (8 dir, 2-3 frames), walk (8 dir, 4 frames), attack (8 dir, 3-4 frames), death (8 dir, 2-3 frames). Covers: Infantry, Archer, Cavalry, Siege Ram, Tank, Artillery, Knight, Trebuchet, Trade Cart, Fishing Boat, War Galley, Cannon Ship, Transport Ship, Merchant Ship. Also includes unique civ units: Legionnaire (Rome), Immortal Guard (Mesopotamia), War Canoe (Polynesia), plus units for new civs (Egypt, China, Vikings, Maya).","notes":"All unit sprites must follow ADR-008: 8 directions (N,NE,E,SE,S,SW,W,NW), villager ~48px, infantry ~52-56px, cavalry ~64px. Animation budget: idle 2 frames, walk 4 frames, attack 3-4 frames, death 2-3 frames per direction. Magenta (#FF00FF) mask for player color shader. Naming: {unit}_{anim}_{dir}_{frame}.png","spec_id":"roots-of-reason-3hk","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:55:49Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:44Z","labels":["art","military","sprites","units"]}
{"id":"roots-of-reason-esz.1","title":"Generate Infantry sprites (idle, walk, attack, death — 8 directions)","description":"Generate Infantry unit sprites: idle (8 dir, 2 frames), walk (8 dir, 4 frames), attack/sword swing (8 dir, 3 frames), death (8 dir, 2 frames). Generic melee soldier with sword and shield. Player-color mask on shield/tabard. Isometric 2D style.","acceptance_criteria":"- [ ] Path: assets/sprites/units/infantry/infantry_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs per ADR-002. Idle: 8×2=16, Walk: 8×4=32, Attack: 8×3=24, Death: 8×2=16\n- [ ] ~52-56px tall per ADR-008\n- [ ] Sword + shield melee soldier\n- [ ] Magenta mask on shield/tabard\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:03Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:46Z","labels":["art","military","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.1","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:03Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.10","title":"Generate Transport Ship and Fishing Boat sprites (8 directions)","description":"Generate Transport Ship: idle (8 dir, 2 frames), sail (8 dir, 4 frames), loaded (8 dir variant). Fishing Boat: idle (8 dir, 2 frames), sail (8 dir, 3 frames), fishing (8 dir, 2 frames with net animation). Both need player-color masks.","acceptance_criteria":"- [ ] Transport: assets/sprites/units/transport_ship/transport_ship_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×2, Sail: 8×4, Loaded variant: 8×1\n- [ ] Fishing boat: assets/sprites/units/fishing_boat/fishing_boat_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×2, Sail: 8×3, Fishing/net: 8×2\n- [ ] Both on water, magenta masks on sail/hull\n- [ ] validate-assets passes for both","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:09Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:51Z","labels":["art","naval","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.10","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:09Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.11","title":"Generate Legionnaire (Rome) unique unit sprites — 8 directions all animations","description":"Generate Rome's Legionnaire unique infantry: idle (8 dir, 2 frames), walk (8 dir, 4 frames), attack/gladius thrust (8 dir, 3 frames), shield wall formation (8 dir, 2 frames), death (8 dir, 2 frames). Roman soldier with large scutum shield, gladius, lorica segmentata armor. Player-color mask on shield/cloak.","acceptance_criteria":"- [ ] Path: assets/sprites/units/legionnaire/legionnaire_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×2, Walk: 8×4, Attack/gladius: 8×3, Shield wall: 8×2, Death: 8×2\n- [ ] Roman soldier: large scutum shield, gladius, lorica segmentata armor\n- [ ] Magenta mask on shield front and cloak\n- [ ] Shield wall variant: locked shields, defensive crouch pose\n- [ ] validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:10Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:52Z","labels":["art","rome","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.11","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:09Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.12","title":"Generate Immortal Guard (Mesopotamia) unique unit sprites — 8 directions","description":"Generate Mesopotamia's Immortal Guard: idle (8 dir, 2 frames with subtle heal glow), walk (8 dir, 4 frames), attack/spear thrust (8 dir, 3 frames), death (8 dir, 2 frames). Persian-style armored spearman with ornate shield. Player-color mask on shield/armor.","acceptance_criteria":"- [ ] Path: assets/sprites/units/immortal_guard/immortal_guard_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×2 (subtle heal glow), Walk: 8×4, Attack/spear: 8×3, Death: 8×2\n- [ ] Persian-style: ornate shield, long spear, decorative armor\n- [ ] Heal glow: slight green shimmer on idle frames\n- [ ] Magenta mask on shield/armor\n- [ ] validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:11Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:52Z","labels":["art","mesopotamia","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.12","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.2","title":"Generate Archer sprites (idle, walk, attack/shoot, death — 8 directions)","description":"Generate Archer unit sprites: idle (8 dir, 2 frames), walk (8 dir, 4 frames), attack/draw-and-shoot (8 dir, 4 frames), death (8 dir, 2 frames). Ranged unit with bow. Player-color mask on tunic. Isometric 2D style.","acceptance_criteria":"- [ ] Path: assets/sprites/units/archer/archer_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×2, Walk: 8×4, Attack/draw-shoot: 8×4 (draw, aim, release, recover), Death: 8×2\n- [ ] ~52-56px tall\n- [ ] Bow visible in all states, quiver on back\n- [ ] Magenta mask on tunic\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:04Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:47Z","labels":["art","military","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.2","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:04Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.3","title":"Generate Cavalry sprites (idle, walk/trot, attack/charge, death — 8 directions)","description":"Generate Cavalry unit sprites: idle (8 dir, 2 frames), walk/trot (8 dir, 4 frames), attack/charge (8 dir, 3 frames), death/dismount (8 dir, 3 frames). Mounted warrior on horse. Player-color mask on horse armor/rider. Isometric 2D style.","acceptance_criteria":"- [ ] Path: assets/sprites/units/cavalry/cavalry_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×2, Walk/trot: 8×4, Attack/charge: 8×3, Death: 8×3\n- [ ] ~64px tall (mounted class per ADR-008)\n- [ ] Rider on horse, lance/sword visible\n- [ ] Magenta mask on horse armor/rider tabard\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:05Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:47Z","labels":["art","military","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.3","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:04Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.4","title":"Generate Siege Ram sprites (idle, move, attack/ram, death — 8 directions)","description":"Generate Siege Ram unit sprites: idle (8 dir, 1 frame), move/roll (8 dir, 3 frames), attack/ram-swing (8 dir, 3 frames), destroyed (8 dir, 2 frames). Large covered battering ram on wheels. Player-color mask. Isometric 2D style.","acceptance_criteria":"- [ ] Path: assets/sprites/units/siege_ram/siege_ram_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×1, Move: 8×3, Attack/ram: 8×3, Destroyed: 8×2\n- [ ] Larger than infantry — covered battering ram on wheels\n- [ ] Magenta mask on canopy/frame\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:05Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:48Z","labels":["art","military","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.4","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.5","title":"Generate Tank sprites (idle, move, attack/fire, death — 8 directions)","description":"Generate Tank unit sprites: idle (8 dir, 1 frame), move/drive (8 dir, 3 frames with track animation), attack/turret fire (8 dir, 3 frames with muzzle flash), destroyed (8 dir, 2 frames). Industrial Age armored vehicle. Player-color mask. Isometric 2D style.","acceptance_criteria":"- [ ] Path: assets/sprites/units/tank/tank_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×1, Move: 8×3 (track animation), Fire: 8×3 (muzzle flash), Destroyed: 8×2\n- [ ] Industrial Age armored vehicle, turret visible\n- [ ] Singularity palette elements (steel, mechanical)\n- [ ] Magenta mask on hull\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:06Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:48Z","labels":["art","military","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.5","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:06Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.6","title":"Generate Artillery sprites (idle, move, fire, death — 8 directions)","description":"Generate Artillery unit sprites: idle/deployed (8 dir, 1 frame), move/limbered (8 dir, 3 frames), fire/recoil (8 dir, 3 frames with smoke), destroyed (8 dir, 2 frames). Long-range cannon. Player-color mask.","acceptance_criteria":"- [ ] Path: assets/sprites/units/artillery/artillery_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle/deployed: 8×1, Move/limbered: 8×3, Fire/recoil: 8×3, Destroyed: 8×2\n- [ ] Long cannon on wheeled carriage\n- [ ] Smoke/flash on fire frame\n- [ ] Magenta mask\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:07Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:49Z","labels":["art","military","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.6","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:06Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.7","title":"Generate Trade Cart sprites (idle, move — 8 directions)","description":"Generate Trade Cart unit sprites: idle (8 dir, 1 frame), move (8 dir, 4 frames). Horse-drawn cart with goods. Player-color mask on cart banner. Isometric 2D style.","acceptance_criteria":"- [ ] Path: assets/sprites/units/trade_cart/trade_cart_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×1, Move: 8×4\n- [ ] Horse-drawn cart with trade goods\n- [ ] Magenta mask on cart banner/flag\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:07Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:50Z","labels":["art","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.7","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:07Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.8","title":"Generate War Galley sprites (idle, sail, attack, sinking — 8 directions)","description":"Generate War Galley naval unit sprites: idle/anchored (8 dir, 2 frames with water bob), sail (8 dir, 4 frames), attack/fire arrows (8 dir, 3 frames), sinking (8 dir, 3 frames). Ancient warship with oars and sail. Player-color mask on sail/hull. Isometric 2D on water.","acceptance_criteria":"- [ ] Path: assets/sprites/units/war_galley/war_galley_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×2 (water bob), Sail: 8×4, Attack: 8×3, Sinking: 8×3\n- [ ] Ancient warship with oars and sail\n- [ ] Magenta mask on sail and hull stripe\n- [ ] Isometric on water surface\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:08Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:50Z","labels":["art","naval","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.8","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:08Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-esz.9","title":"Generate Cannon Ship sprites (idle, sail, fire, sinking — 8 directions)","description":"Generate Cannon Ship naval sprites: idle (8 dir, 2 frames), sail (8 dir, 4 frames), fire/broadside (8 dir, 3 frames with cannon smoke), sinking (8 dir, 3 frames). Medieval/Age of Sail warship with cannons. Player-color mask on sail/flags.","acceptance_criteria":"- [ ] Path: assets/sprites/units/cannon_ship/cannon_ship_{anim}_{dir}_{frame}.png\n- [ ] 8 dirs. Idle: 8×2, Sail: 8×4, Fire/broadside: 8×3 (cannon smoke), Sinking: 8×3\n- [ ] Age of Sail warship with visible cannon ports\n- [ ] Magenta mask on sail/flags\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:09Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:12:51Z","labels":["art","naval","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-esz.9","depends_on_id":"roots-of-reason-esz","type":"parent-child","created_at":"2026-03-01T11:58:08Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ezz","title":"Buildings placed during gameplay cannot be selected","description":"on_building_placed() registers with entity_registry and target_detector but not the input handler's _units array, so buildings placed during gameplay cannot be left-click selected or box-selected.","status":"open","priority":1,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:05:36Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:05:36Z"}
{"id":"roots-of-reason-f42","title":"Houses give +10 population with tech-boosted housing","description":"Increase house population_bonus from 5 to 10. Add tech-driven housing bonus system so future techs can increase per-house contribution. Engineering tech adds +5 per house.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T14:28:07Z","created_by":"Dave Tashner","updated_at":"2026-03-01T14:30:11Z","closed_at":"2026-03-01T14:30:11Z","close_reason":"Completed in PR #265","labels":["buildings","population","tech"]}
{"id":"roots-of-reason-fcw","title":"Epic: China Civilization","description":"Add China as a new playable civilization. China is a technology/economy-focused civ with bonuses to research speed and Knowledge generation. Unique building: Academy (replaces Library, +75% Knowledge gen + unlocks extra tech slot). Unique unit: Chu-Ko-Nu (replaces Archer, rapid-fire crossbow with faster attack speed but lower damage per hit). Unique techs: Papermaking (research cost reduction), Gunpowder Mastery (earlier access to gunpowder-era units). Includes all art assets, data JSON files, civ bonus integration, and tests.","notes":"Balance framework: ADR-022 (roots-of-reason-kif). China fills research niche. Anti-dominance: research+economy only. Singularity rush guard: China reaches Singularity victory at most 3 minutes faster than generic civ.","spec_id":"roots-of-reason-kif","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:55:36Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:42Z","labels":["art","china","civilization","data"],"dependencies":[{"issue_id":"roots-of-reason-fcw","depends_on_id":"roots-of-reason-kif","type":"blocks","created_at":"2026-03-01T12:08:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fcw.1","title":"China: civilization data JSON (bonuses, unique unit/building/tech definitions)","description":"Create data/civilizations/china.json with: civ name, description, bonuses (+20% research speed, +10% Knowledge generation). Unique building: Academy (replaces Library, 0.875/s Knowledge, extra research queue slot). Unique unit: Chu-Ko-Nu (replaces Archer, 1.2x attack speed, 0.7x damage per hit). Unique techs: Papermaking (-15% research cost), Gunpowder Mastery (gunpowder techs -1 age requirement). Create corresponding data/ JSON files.","acceptance_criteria":"- [ ] data/civilizations/china.json: name, description, bonuses, unique_building, unique_unit, unique_techs\n- [ ] Passive bonuses: research_speed_multiplier=1.20, knowledge_rate_multiplier=1.10\n- [ ] data/buildings/academy.json: footprint 2x2, replaces library, knowledge_rate=0.875, HP=800\n- [ ] data/units/chu_ko_nu.json: population_cost=1, hp=28, attack=3, defense=0, speed=1.3, range=5, attack_speed=1.2 (vs archer 2.0), bonus_vs_cavalry=1.5\n- [ ] data/tech/papermaking.json: age=iron, cost={gold:100, knowledge:125}, effect=research_cost_multiplier=0.85, exclusive_to=china\n- [ ] data/tech/gunpowder_mastery.json: age=medieval, effect=gunpowder_age_requirement=-1, exclusive_to=china\n- [ ] Chu-Ko-Nu tradeoff: attack 3 (vs archer 5) but attack_speed 1.2 (vs 2.0) — same DPS, faster but weaker hits\n- [ ] All JSON passes data-check validation\n- [ ] ADR-022 anti-dominance: bonuses in research + economy only\n- [ ] Singularity rush check: China Singularity victory at most 3 minutes faster than generic civ (documented in notes)","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:02Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:09Z","labels":["china","civilization","data"],"dependencies":[{"issue_id":"roots-of-reason-fcw.1","depends_on_id":"roots-of-reason-fcw","type":"parent-child","created_at":"2026-03-01T11:57:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fcw.2","title":"China: CivBonusManager integration and tests","description":"Integrate China into CivBonusManager. Apply passive bonuses (research speed, Knowledge gen). Register unique building/unit replacements. Handle Gunpowder Mastery special case (age requirement reduction). Write GdUnit4 tests.","acceptance_criteria":"- [ ] CivBonusManager.apply_bonuses(\"china\") sets research speed multiplier to 1.20\n- [ ] CivBonusManager.apply_bonuses(\"china\") sets knowledge rate multiplier to 1.10\n- [ ] China player's Library replaced by Academy in building_placer\n- [ ] China player's Archer replaced by Chu-Ko-Nu in Barracks production\n- [ ] Papermaking and Gunpowder Mastery appear only for China players\n- [ ] GdUnit4 test: China research speed is 1.20x base (verified via research_speed.gd)\n- [ ] GdUnit4 test: Academy generates 0.875 Knowledge/s\n- [ ] GdUnit4 test: Chu-Ko-Nu attack_speed is 1.2s (vs archer 2.0s)\n- [ ] GdUnit4 test: Chu-Ko-Nu DPS approximately equals Archer DPS (within 10%)\n- [ ] GdUnit4 test: Gunpowder Mastery allows researching Gunpowder in Iron Age for China\n- [ ] No bonus leakage between tests","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:03Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:10Z","labels":["china","civilization","testing"],"dependencies":[{"issue_id":"roots-of-reason-fcw.2","depends_on_id":"roots-of-reason-fcw","type":"parent-child","created_at":"2026-03-01T11:57:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fcw.3","title":"China: Academy unique building sprites (idle, construction, destruction)","description":"Generate Academy building sprites: idle (2x2 footprint, 256x192 canvas), 4-frame construction sequence, 3-frame destruction. Chinese architectural style (curved roofs, red/gold accents). Magenta player-color mask. Process through sprite pipeline.","acceptance_criteria":"- [ ] Source: assets/sprites/buildings/academy_01.png\n- [ ] Game-ready: assets/sprites/buildings/placeholder/academy.png\n- [ ] Canvas: 256x192px (2x2 footprint per ADR-008)\n- [ ] Construction: 4 frames (academy_construction_01-04.png)\n- [ ] Destruction: 3 frames\n- [ ] Magenta mask on roof/banner area\n- [ ] Chinese architectural style: curved upturned roofline, red/gold color palette\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:03Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:10Z","labels":["art","buildings","china"],"dependencies":[{"issue_id":"roots-of-reason-fcw.3","depends_on_id":"roots-of-reason-fcw","type":"parent-child","created_at":"2026-03-01T11:57:03Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fcw.3","depends_on_id":"roots-of-reason-fcw.1","type":"blocks","created_at":"2026-03-01T12:08:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fcw.4","title":"China: Chu-Ko-Nu unit sprites (idle, walk, attack, death — 8 directions)","description":"Generate Chu-Ko-Nu repeating crossbow unit sprites: idle (8 dir, 2 frames), walk (8 dir, 4 frames), attack (8 dir, 4 frames — rapid fire animation), death (8 dir, 2 frames). Chinese military armor style. Player-color mask.","acceptance_criteria":"- [ ] Asset path: assets/sprites/units/chu_ko_nu/chu_ko_nu_{anim}_{dir}_{frame}.png\n- [ ] 8 directions per ADR-002\n- [ ] Idle: 8×2=16, Walk: 8×4=32, Attack: 8×4=32 (rapid-fire needs extra frame), Death: 8×2=16\n- [ ] Unit height: ~52-56px (infantry/archer class per ADR-008)\n- [ ] Repeating crossbow visually distinct from standard Archer bow\n- [ ] Magenta mask on armor/tabard\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:04Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:11Z","labels":["art","china","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-fcw.4","depends_on_id":"roots-of-reason-fcw","type":"parent-child","created_at":"2026-03-01T11:57:03Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fcw.4","depends_on_id":"roots-of-reason-fcw.1","type":"blocks","created_at":"2026-03-01T12:08:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fcw.5","title":"China: villager variant sprites (idle, walk, gather, build — 8 directions)","description":"Generate China-themed villager sprites: idle (8 dir, 2 frames), walk (8 dir, 4 frames), gather (8 dir, 2 frames), build (8 dir, 2 frames). Traditional Chinese peasant clothing. Player-color mask.","acceptance_criteria":"- [ ] Asset path: assets/sprites/units/villager_china/villager_china_{anim}_{dir}_{frame}.png\n- [ ] 8 directions, Idle: 8×2, Walk: 8×4, Gather: 8×2, Build: 8×2\n- [ ] ~48px tall per ADR-008\n- [ ] Traditional Chinese peasant clothing, distinct from default villager\n- [ ] Magenta mask on clothing accent\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:05Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:12Z","labels":["art","china","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-fcw.5","depends_on_id":"roots-of-reason-fcw","type":"parent-child","created_at":"2026-03-01T11:57:04Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fcw.5","depends_on_id":"roots-of-reason-fcw.1","type":"blocks","created_at":"2026-03-01T12:09:00Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fcw.6","title":"China: civ selection UI card with unique unit/building art","description":"Create civ selection card art for China showing: civ icon/banner, Academy illustration, Chu-Ko-Nu illustration, bonus text layout. Integrate into civ_card_builder.gd and civ_selection_screen.gd.","acceptance_criteria":"- [ ] China in civ_selection_screen.gd civ list\n- [ ] Card shows: civ name, +20% research speed bonus, Academy art, Chu-Ko-Nu art\n- [ ] Bonus text matches data/civilizations/china.json\n- [ ] Card layout matches existing civ cards\n- [ ] GdUnit4 test: civ_card_builder produces valid card for \"china\"","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:05Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:12Z","labels":["art","china","ui"],"dependencies":[{"issue_id":"roots-of-reason-fcw.6","depends_on_id":"roots-of-reason-fcw","type":"parent-child","created_at":"2026-03-01T11:57:05Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fcw.6","depends_on_id":"roots-of-reason-fcw.1","type":"blocks","created_at":"2026-03-01T12:09:01Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fcw.6","depends_on_id":"roots-of-reason-fcw.2","type":"blocks","created_at":"2026-03-01T12:09:01Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5","title":"Epic 8: Combat System","description":"Attack-move, auto-targeting, melee vs ranged damage, armor types (rock-paper-scissors), siege mechanics, unit death, victory/defeat conditions.","status":"closed","priority":2,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:09Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:42:58Z","closed_at":"2026-02-26T05:42:58Z","close_reason":"All 8 children completed. Last child fk5.8 (KB VFX) closed in PR #78.","labels":["combat","epic"],"dependencies":[{"issue_id":"roots-of-reason-fk5","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T14:44:56Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.1","title":"Attack-move and auto-targeting","description":"Attack-move command: unit moves to target location, engages any enemy in range along the way. Idle military units auto-target nearby enemies within aggro range. Prioritize: attacking unit \u003e closest enemy.\n\n## Acceptance Criteria\n- [ ] A-click (attack-move): unit moves toward target location, attacks first enemy encountered\n- [ ] Auto-targeting: idle military units automatically engage enemies within their LOS range\n- [ ] Target priority: lowest HP enemy first (configurable priority in JSON)\n- [ ] Units stop to attack, then resume move command after target killed\n- [ ] Patrol command (shift-A-click): unit moves between two points, engaging enemies en route\n- [ ] Units do not auto-attack while under explicit move command (only attack-move)\n- [ ] Stance system: aggressive (auto-engage), defensive (only if attacked), stand ground (no auto)\n- [ ] Default stance per unit type in JSON (military: aggressive, villager: defensive)\n- [ ] Stance serializable for save/load\n- [ ] Unit tests for target priority sorting\n- [ ] Unit tests for stance behavior (engage vs ignore)\n- [ ] Integration test: attack-move through enemy units, verify engagement","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:34Z","created_by":"Dave Tashner","updated_at":"2026-02-23T14:27:53Z","closed_at":"2026-02-23T14:27:53Z","close_reason":"Completed in PR #42","labels":["combat","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.1","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:33Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.2","title":"Melee vs ranged damage resolution","description":"Melee units must be adjacent to attack. Ranged units attack from distance. Damage = attacker.attack - defender.defense (minimum 1). Attack speed varies by unit. Ranged units have projectile travel time.\n\n## Acceptance Criteria\n- [ ] Damage formula: max(1, attacker.attack - defender.defense) per hit\n- [ ] Melee units: attack on contact, attack_speed interval from JSON (e.g., every 1.5s)\n- [ ] Ranged units: attack at range, projectile travels to target (visual only, hit is instant calculation)\n- [ ] Ranged units have minimum range (cannot attack adjacent units)\n- [ ] Rock-paper-scissors bonus: +50% damage for favorable matchup (configurable in JSON)\n- [ ] Buildings take 80% reduced damage from non-siege units (multiplier in JSON)\n- [ ] Unit plays attack animation during combat\n- [ ] Damage numbers float above target (optional, toggle in settings)\n- [ ] Unit death triggers death animation → corpse fade → removal\n- [ ] Combat state serializable (current target, attack cooldown timer)\n- [ ] Unit tests for damage formula with various stat combinations\n- [ ] Unit tests for bonus damage rock-paper-scissors matrix\n- [ ] Unit tests for building damage reduction","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:34Z","created_by":"Dave Tashner","updated_at":"2026-02-25T01:27:04Z","closed_at":"2026-02-25T01:27:04Z","close_reason":"Completed in PR #45","labels":["combat","damage","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.2","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.3","title":"Armor types and damage bonuses (rock-paper-scissors)","description":"Damage type system: Infantry strong vs Archers, Archers strong vs Cavalry, Cavalry strong vs Infantry. Siege strong vs Buildings. Bonus damage multipliers (1.5x). Creates tactical variety.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:35Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:42:22Z","closed_at":"2026-02-26T03:42:22Z","close_reason":"Completed in PR #59 (armor effectiveness matrix and garrison system)","labels":["armor","combat","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.3","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.4","title":"Siege mechanics and building damage","description":"Buildings take 80% reduced damage from non-siege units. Siege units deal full damage to buildings but are slow and weak vs other units. Garrison units inside buildings for protection and arrow fire.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:36Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:42:23Z","closed_at":"2026-02-26T03:42:23Z","close_reason":"Completed across PRs #45, #56, #59 (building damage reduction, damage states, garrison system)","labels":["combat","siege","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.4","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.5","title":"Unit death, corpse cleanup, and kill tracking","description":"Units play death animation and leave corpse. Corpses fade after 30 seconds. Track kills per unit for stats. Free population cap on death. Play death sound effect.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:36Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:28:09Z","closed_at":"2026-02-26T05:28:09Z","close_reason":"Completed in PR #75","labels":["combat","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.5","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:36Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.6","title":"Victory and defeat conditions","description":"Defeat: all Town Centers destroyed. Victory: all enemies defeated, OR Singularity achieved, OR Wonder timer expires. Show victory/defeat screen with option to continue playing or return to menu.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:37Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:28:10Z","closed_at":"2026-02-26T05:28:10Z","close_reason":"Completed in PR #76","labels":["combat","story","victory"],"dependencies":[{"issue_id":"roots-of-reason-fk5.6","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:36Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.7","title":"Town Center destruction triggers tech regression","description":"Wire Town Center destruction events to the tech regression engine.\n\nTrigger logic:\nWhen a Town Center building is destroyed:\n1. Check the destroyer: must be an enemy player (player_id != owner_id AND player_id != -1/Gaia)\n2. Check the building was fully constructed (not a foundation/in-progress)\n3. Check knowledge_burning.enabled is true\n4. Check cooldown: if cooldown_seconds \u003e 0, verify enough time has passed since this player's last tech regression\n5. If all checks pass: call regress_latest_tech(tc_owner_id)\n6. If a tech was lost (non-null return):\n   - Emit signal: knowledge_burned(attacker_id, defender_id, tech_data)\n   - This signal is consumed by the notification system and visual effects\n\nIntegration points:\n- Hook into the building destruction event handler in the combat system\n- The building destruction system already handles HP -\u003e 0 -\u003e destroy. Add a post-destruction check: if building.type == \"town_center\", evaluate tech regression.\n- Must fire AFTER the building is fully destroyed (ruins placed, etc.) but BEFORE the defeat check (so if this was the last TC, the tech loss notification comes before the defeat screen)\n\nEdge case handling:\n- Multiple TCs destroyed within cooldown window: only the first triggers regression (if cooldown \u003e 0)\n- TC destroyed by its own player (demolish): does NOT trigger regression\n- TC destroyed by Gaia (wolf, environmental): does NOT trigger regression\n- Age advancement in progress at the destroyed TC: cancel the advancement, refund resources, but this cancellation does NOT count as a tech regression (the regression is a separate event from the TC kill)\n\nTesting:\n- Unit test: TC destroyed by enemy triggers regression\n- Unit test: TC demolished by self does NOT trigger\n- Unit test: TC destroyed with empty research history causes no regression\n- Unit test: cooldown prevents double-regression\n- Integration test: destroy TC, verify most recent tech is reverted and units lose bonuses\n\nAcceptance criteria:\n- TC destruction by enemy triggers exactly 1 tech regression\n- Self-destruction and Gaia destruction do not trigger\n- Cooldown setting is respected\n- Event fires between building destruction and defeat check\n- All edge cases handled gracefully\n- Signal emitted for UI/notification consumption","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:36Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:00:31Z","closed_at":"2026-02-26T01:00:31Z","close_reason":"Completed in PR #60","labels":["combat","knowledge-burning","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.7","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T16:11:36Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fk5.7","depends_on_id":"roots-of-reason-fxt.6","type":"blocks","created_at":"2026-02-22T16:11:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.8","title":"Knowledge burning: visual effects, notifications, and audio","description":"Implement the dramatic visual and audio feedback when tech regression occurs.\n\nVisual effects at the destroyed TC location:\n- \"Burning scroll\" particle effect: orange/amber paper fragments rising from the TC ruins\n- Particle duration: 3 seconds, rising upward and fading\n- Small golden glow that intensifies then fades at the ruin site\n- Phase 1 placeholder: amber circle expanding from TC position and fading\n\nScreen effects for the affected player:\n- Brief amber/red screen flash (0.3 seconds, 20% opacity overlay)\n- Screen shake: subtle (2px amplitude, 0.5 seconds)\n- These only show for the player who LOST the tech (not the attacker)\n\nNotifications:\n- Defending player: large center-screen notification \"Knowledge Lost: [Tech Name]\" with the tech icon, fades after 4 seconds\n- Attacking player: notification \"Enemy knowledge destroyed: [Tech Name]\" (smaller, in notification feed)\n- All other players: event log entry \"[Player] lost knowledge of [Tech Name]\"\n- Notification color: amber/gold (distinct from red damage notifications and green positive notifications)\n\nAudio:\n- \"Knowledge lost\" sound: a deep resonant chime combined with a paper-burning crackle\n- Plays for the affected player at high priority (interrupts other game sounds briefly)\n- Attacking player hears a softer \"triumph\" variant\n\nTech tree UI reaction:\n- If the tech tree viewer is open, the lost tech un-highlights with a \"burning away\" animation\n- The tech node briefly glows amber, then reverts to its \"available but not researched\" state\n- If the tech tree is closed, the un-highlight happens silently (will show correctly when opened)\n\nMinimap indicator:\n- Brief amber flash at the location of the destroyed TC on the minimap\n- Lasts 2 seconds\n\nChat/event log:\n- Timestamped entry: \"[12:45] Your city was sacked! Lost: Iron Casting (+2 Infantry Attack)\"\n- Include what the tech did so the player understands the impact\n\nAcceptance criteria:\n- Burning scroll particles visible at destroyed TC\n- Screen flash and shake feel impactful but not disorienting\n- All three notification tiers work (defender, attacker, observers)\n- Audio cue is distinctive and immediately recognizable\n- Tech tree UI correctly un-highlights the lost tech\n- Event log entry includes tech name and effect description\n- All visuals use Phase 1 placeholder approach (simple shapes/colors, no art required)","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:37Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:40:05Z","closed_at":"2026-02-26T05:40:05Z","close_reason":"Completed in PR #78","labels":["combat","knowledge-burning","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-fk5.8","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T16:11:36Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fk5.8","depends_on_id":"roots-of-reason-fk5.7","type":"blocks","created_at":"2026-02-22T16:11:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt","title":"Epic 7: Technology Tree","description":"7 Ages progression, age advancement costs, per-age techs, unique civ techs, tech tree UI viewer, Singularity age chain (GPU Foundry → Transformer Lab → AGI Core).","status":"closed","priority":2,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:09Z","created_by":"Dave Tashner","updated_at":"2026-02-26T12:23:39Z","closed_at":"2026-02-26T12:23:39Z","close_reason":"All 12 stories completed. PRs #77-#83.","labels":["epic","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T14:44:55Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.1","title":"Age advancement: 7 ages with resource costs and prerequisites","description":"Advance through 7 ages at Town Center. Each age requires resource cost (escalating) plus prerequisite buildings. Stone→Bronze: 500F. Bronze→Iron: 800F 200G. Escalating through ages. Advancement takes time.\n\n## Acceptance Criteria\n- [ ] 7 ages defined in data/tech/ages.json: Stone, Bronze, Iron, Medieval, Industrial, Information, Singularity\n- [ ] Each age has: resource_cost (dict of resource amounts), prerequisite_buildings (list), research_time\n- [ ] Age advancement researched at Town Center\n- [ ] Research begins when player clicks \"Advance\" and can afford cost\n- [ ] Progress bar shown during advancement research\n- [ ] On completion: age_advanced signal emitted, new buildings/units/techs unlocked\n- [ ] Visual feedback: age name displayed prominently, brief screen effect\n- [ ] Cannot research next age while current advancement is in progress\n- [ ] Age state serializable (current age, advancement progress if in-progress)\n- [ ] All costs and prerequisites data-driven from JSON\n- [ ] Unit tests for prerequisite checking logic\n- [ ] Unit tests for age unlock cascading (what becomes available per age)\n- [ ] Integration test: advance from Stone to Bronze, verify unlocks","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:31Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:06:16Z","closed_at":"2026-02-23T13:06:16Z","close_reason":"Completed in PR #33","labels":["ages","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.1","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:30Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.10","title":"Design: complete tech tree data and documentation","description":"Create the full technology tree design document and all supporting data files. 64 techs across 7 ages with costs, prerequisites, effects, and balance notes.\n\nDeliverables:\n- docs/design/tech_tree.md — full design document with rationale\n- data/tech/tech_tree.json — all 64 techs\n- data/tech/ages.json — 7 ages with costs, prereqs, multipliers\n- data/settings/research.json — acceleration settings\n- data/settings/corruption.json — corruption settings\n- data/settings/pandemics.json — pandemic settings\n- data/settings/pirates.json — pirate settings\n- data/settings/war_survival.json — medical chain settings\n- docs/design/tech_icon_prompt.md — reusable image generation prompt for tech icons\n- ADR-013 through ADR-016 added to AGENTS.md","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:32Z","created_by":"Dave Tashner","updated_at":"2026-02-22T23:31:08Z","closed_at":"2026-02-22T23:31:08Z","close_reason":"Completed in PR #6","labels":["data","design","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.10","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T18:26:31Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11","title":"Tech Tree Historical Expansion — 13 new technologies across all ages","description":"Add historically significant technologies missing from the tech tree to improve plausibility and strategic depth. Adds techs spanning Stone Age (Agriculture) through Singularity Age (Brain-Computer Interface), filling gaps in foundational innovations (Wheel, Agriculture), scientific progression (Astronomy, Optics), governance (Democracy), transportation (Aviation), and energy (Renewable Energy). See ADR-021 for full impact analysis and historical rationale.","status":"closed","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:03:44Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:23Z","closed_at":"2026-02-26T05:32:23Z","close_reason":"All 13 children completed in PR #77","labels":["epic tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-25T19:03:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.1","title":"Agriculture tech (Stone Age) — foundation of civilization","description":"Add Agriculture as a Stone Age tech requiring Stone Tools. Effects: unlock Farm building (currently implicitly available), +food gather rate. This is the most important tech in human history — the Neolithic Revolution enabled permanent settlement, population growth, and surplus that funded all subsequent specialization. Should be prerequisite for Irrigation. Research time ~35s, cost ~80 Food.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:45Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:13Z","closed_at":"2026-02-26T05:32:13Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.1","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.10","title":"Spaceflight tech (Information Age) — crewed space program","description":"Add Spaceflight as an Information Age tech requiring Rocketry. Effects: prestige bonus, +research speed (Apollo drove miniaturization). Alternative path alongside military Guided Missiles branch. The Space Race was one of history's most significant technological achievements. Cost ~600 Gold, 700 Knowledge, research ~85s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:52Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:18Z","closed_at":"2026-02-26T05:32:18Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.10","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.11","title":"Renewable Energy tech (Information Age) — sustainable power","description":"Add Renewable Energy as an Information Age tech requiring Electricity + Chemistry. Effects: +sustainable resource generation, alternative to Nuclear Fission path. For a game where the endgame is AGI, the energy question is critical — training AI models requires enormous power. Cost ~500 Gold, 600 Knowledge, research ~75s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:53Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:19Z","closed_at":"2026-02-26T05:32:19Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.11","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.12","title":"Brain-Computer Interface tech (Singularity Age) — neuroscience path to AGI","description":"Add Brain-Computer Interface as a Singularity Age tech requiring Neural Networks + Antibiotics. Effects: +research speed, alternative Singularity Chain branch. BCI research is a historically emerging parallel path to AGI. Could create an interesting strategic fork: pure software AI (Transformer Architecture) vs neuromorphic approach (BCI). Cost ~1200 Gold, 2000 Knowledge, research ~85s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:54Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:19Z","closed_at":"2026-02-26T05:32:19Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.12","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.13","title":"Trade Routes tech (Medieval/Industrial) — global commerce","description":"Add Trade Routes or Mercantilism as a Medieval-to-Industrial bridge tech requiring Guilds + Compass. Effects: +trade income, unlock trade caravan unit. The Silk Road, maritime trade networks, and global commerce were as transformative as any military tech. Currently trade is underdeveloped in the tree. Cost ~300 Gold, 200 Knowledge, research ~65s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:54Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:20Z","closed_at":"2026-02-26T05:32:20Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.13","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:54Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.2","title":"The Wheel tech (Bronze Age) — transport and machinery foundation","description":"Add The Wheel as a Bronze Age tech requiring Stone Tools. Effects: +movement speed for trade/transport units, prerequisite for later transport techs. Historically (~3500 BCE), the wheel enabled pottery (potter's wheel), transport, and eventually all machinery. Should be ancestral prerequisite for Railroad. Cost ~125 Food, 75 Wood, research ~40s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:46Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:13Z","closed_at":"2026-02-26T05:32:13Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.2","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.3","title":"Road Building tech (Iron Age) — territorial movement bonus","description":"Add Road Building as an Iron Age tech requiring Engineering. Effects: +unit movement speed on owned territory, +trade route income. Roman roads were as strategically important as legions. Should be prerequisite for Railroad (more natural chain: Road Building → Railroad). Cost ~200 Stone, 150 Gold, research ~60s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:46Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:14Z","closed_at":"2026-02-26T05:32:14Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.3","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.4","title":"Astronomy tech (Iron Age) — bridges navigation and science","description":"Add Astronomy as an Iron Age tech requiring Mathematics. Effects: +naval LOS, enables celestial navigation. Should be prerequisite for Compass (instead of just Trireme+Mathematics) and an ancestor of Rocketry. Ancient civilizations navigated by stars for millennia before the compass. Cost ~200 Gold, 150 Knowledge, research ~60s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:47Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:15Z","closed_at":"2026-02-26T05:32:15Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.4","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.5","title":"Mechanical Power tech (Medieval Age) — wind and water mills","description":"Add Mechanical Power as a Medieval Age tech requiring Engineering. Effects: +25% farm processing, +15% wood gather rate. Wind/water mills transformed grain processing and manufacturing centuries before steam. Should be prerequisite for Steam Power (natural chain: Mechanical Power → Steam Power). Cost ~250 Wood, 150 Gold, research ~65s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:47Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:15Z","closed_at":"2026-02-26T05:32:15Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.5","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.6","title":"Optics tech (Medieval Age) — lenses, telescopes, microscopes","description":"Add Optics as a Medieval Age tech requiring Mathematics. Effects: +ranged unit LOS, +10% ranged accuracy. Historically bridges medieval craftsmanship and the scientific revolution. Connects to Semiconductor Fab chain (lithography is optics). Cost ~200 Gold, 150 Knowledge, research ~60s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:48Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:16Z","closed_at":"2026-02-26T05:32:16Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.6","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:48Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.7","title":"Telegraph tech (Industrial Age) — communication revolution","description":"Add Telegraph as its own Industrial Age tech requiring Electricity (instead of being a building unlock). Effects: +diplomacy speed, enables espionage mechanics, prerequisite for Internet. The telegraph (1837) was the 'Victorian Internet' — the first instant long-distance communication. Should be on the path to Internet rather than just a building. Cost ~300 Gold, 200 Knowledge, research ~65s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:51Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:16Z","closed_at":"2026-02-26T05:32:16Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.7","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.8","title":"Aviation tech (Industrial Age) — powered flight","description":"Add Aviation as an Industrial Age tech requiring Steam Power + Ballistics. Effects: unlock air reconnaissance unit, +trade range, +LOS. Powered flight (1903) reshaped warfare, trade, and civilization. Currently a major gap — the tree jumps from Rocketry to Satellites with no aircraft. Should be prerequisite for Rocketry. Cost ~400 Gold, 300 Knowledge, research ~75s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:51Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:17Z","closed_at":"2026-02-26T05:32:17Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.8","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.9","title":"Democracy tech (Industrial Age) — governance depth","description":"Add Democracy as an Industrial Age tech requiring Code of Laws + Printing Press. Effects: -corruption, +happiness/loyalty, +villager efficiency. Currently the governance chain is thin (Code of Laws → Feudalism → Civil Service). Democracy would give non-military strategic paths more depth and enable future diplomatic victory conditions. Cost ~350 Gold, 250 Knowledge, research ~70s.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:52Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:32:18Z","closed_at":"2026-02-26T05:32:18Z","close_reason":"Completed in PR #77","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.9","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.12","title":"Pioneer bonus system — first-to-discover rewards for keystone technologies","description":"Implement a Pioneer Bonus mechanic where the first civilization to research a keystone technology receives a unique one-time bonus. 15 keystone techs across all ages with historically-grounded bonuses. Types: permanent_stat (forever), temporary_buff (timed), instant_effect (one-shot), and follower_discount (later researchers get cheaper cost). Followers who research after the pioneer get a small research time discount (knowledge diffusion). Pioneer bonuses survive Knowledge Burning (you can't un-invent impact). All players notified when a pioneer bonus is claimed. AI personalities should value pioneer bonuses differently. See ADR-021 and tech schema pioneer_bonus field. Keystones: Agriculture, Writing, Bronze Working, Mathematics, Astronomy, Printing Press, Gunpowder, Compass, Steam Power, Electricity, Aviation, Computing Theory, Internet, Transformer Architecture.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:10:14Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:29:54Z","closed_at":"2026-02-26T01:29:54Z","close_reason":"Pioneer bonus system schema and data implemented in PR #61. 11 keystone techs with pioneer bonuses added to tech_tree.json.","labels":["story tech mechanics"],"dependencies":[{"issue_id":"roots-of-reason-fxt.12","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-25T19:10:13Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.2","title":"Per-age technology research","description":"Each age unlocks a set of technologies researchable at various buildings. Techs provide: unit stat bonuses, economic bonuses, building unlocks. Research costs resources and time. Cannot research techs from future ages.\n\n## Acceptance Criteria\n- [ ] Tech tree defined in data/tech/tech_tree.json organized by age\n- [ ] Each tech has: id, name, age, cost, research_time, prerequisites (other techs), effects\n- [ ] Effects are typed: stat_modifier, unlock_unit, unlock_building, economic_bonus, etc.\n- [ ] Research performed at Library building (one tech at a time per Library)\n- [ ] Research queue: max 1 in progress + up to 3 queued per Library (configurable)\n- [ ] Tech effects applied immediately on completion via signal\n- [ ] Tech tree UI shows available/researched/locked techs (Phase 1: simple list)\n- [ ] Researched techs tracked per player for Knowledge Burning system\n- [ ] Cannot research tech if prerequisites not met or age requirement not reached\n- [ ] Research state serializable (researched techs list, in-progress tech, queue)\n- [ ] Unit tests for prerequisite resolution\n- [ ] Unit tests for effect application (stat modifiers, unlocks)\n- [ ] Integration test: research tech → verify effect applied to existing units","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:31Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:20:55Z","closed_at":"2026-02-23T13:20:55Z","close_reason":"Completed in PR #35","labels":["research","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.2","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:31Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.3","title":"Unique technologies per civilization","description":"Each civilization gets 2 unique techs (one in Iron Age, one in Industrial Age). These provide civ-specific bonuses that reinforce their playstyle identity. Researchable at unique buildings or Library.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:32Z","created_by":"Dave Tashner","updated_at":"2026-02-26T12:03:33Z","closed_at":"2026-02-26T12:03:33Z","close_reason":"Completed in PR #81","labels":["civs","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.3","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:31Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.4","title":"Tech tree UI viewer","description":"In-game tech tree viewer showing all ages, techs, and dependencies. Scrollable/pannable tree layout. Color-coded: available (green), researched (gold), locked (gray). Shows cost and effect on hover.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:32Z","created_by":"Dave Tashner","updated_at":"2026-02-26T12:10:27Z","closed_at":"2026-02-26T12:10:27Z","close_reason":"Completed in PR #82","labels":["story","tech","ui"],"dependencies":[{"issue_id":"roots-of-reason-fxt.4","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.5","title":"Singularity Age: GPU Foundry → Transformer Lab → AGI Core","description":"Final age unique chain: build GPU Foundry (Information Age), research Transformer Architecture at Transformer Lab, build AGI Core (massive cost). AGI Core completion triggers Singularity win condition. Each step has high Knowledge cost.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:33Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:42:51Z","closed_at":"2026-02-26T05:42:51Z","close_reason":"Completed in PR #79","labels":["singularity","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.5","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:33Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.6","title":"Tech research history tracking and regression engine","description":"Implement an ordered research history for each player and the engine to revert technologies.\n\nResearch history:\n- Each player maintains an ordered Array of researched tech IDs (chronological order)\n- When a tech is researched, append its ID to the history\n- Age advancements are tracked separately (not in the tech history array) — they are immune to regression\n- History is saved/loaded as part of game state serialization\n\nTech regression engine:\n- Function: regress_latest_tech(player_id: int) -\u003e Dictionary\n  - Pops the last entry from the player's research history\n  - Returns the tech data (for notifications/visuals)\n  - If history is empty, returns null (no tech to lose)\n\n- Function: revert_tech_effects(player_id: int, tech_id: String) -\u003e void\n  - Removes the tech's bonuses from all of the player's units, buildings, and economy\n  - For stat bonuses (e.g., +2 attack): subtract from all current units of affected type\n  - For economic multipliers (e.g., +15% farm output): recalculate all affected production rates\n  - For building unlocks: set the building type as unavailable for new construction (existing buildings remain)\n  - For unit unlocks: set the unit type as unavailable for new production (existing units remain)\n  - Emit signal: tech_regressed(player_id, tech_id, tech_data)\n\n- Function: can_research_tech(player_id: int, tech_id: String) -\u003e bool\n  - Existing function, but must now also return true for previously-researched-then-lost techs\n  - A lost tech becomes available for re-research if prerequisites are still met\n\nTech data model additions:\n- Add to each player state: research_history: Array[String] (ordered tech IDs)\n- Add to tech data: is_researched_by: Dictionary[int, bool] (player_id -\u003e researched)\n- When tech is regressed: is_researched_by[player_id] = false, and remove from history\n\nData file: data/settings/knowledge_burning.json\n{\n  \"enabled\": true,\n  \"trigger\": \"town_center_destroyed\",\n  \"tech_loss_count\": 1,\n  \"protect_age_advancements\": true,\n  \"protect_first_n_techs\": 0,\n  \"re_research_cost_multiplier\": 1.0,\n  \"cooldown_seconds\": 0\n}\n\nAcceptance criteria:\n- Research history correctly tracks order of all tech research per player\n- regress_latest_tech removes the most recent tech and reverts all its effects\n- Unit stat bonuses correctly removed from all existing units\n- Economic bonuses correctly recalculated\n- Building/unit unlocks correctly reverted (existing instances preserved, new production blocked)\n- Lost tech can be re-researched at full cost\n- Age advancements are never regressed\n- Settings from knowledge_burning.json are respected\n- All functions have unit tests with 90%+ coverage","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:35Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:31:57Z","closed_at":"2026-02-23T13:31:57Z","close_reason":"Completed in PR #37","labels":["knowledge-burning","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.6","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T16:11:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.7","title":"Tech regression interaction with Singularity victory path","description":"Define and implement how tech regression interacts with the Singularity win condition chain.\n\nThe Singularity path (GPU Foundry → Transformer Architecture → AGI Core) represents the highest-value techs in the game. Losing them to TC destruction should be devastating but recoverable.\n\nInteractions:\n1. Transformer Architecture is a researched tech — it CAN be lost via regression if it is the most recently researched tech. If lost:\n   - AGI Core cannot be constructed (requires Transformer Architecture)\n   - If AGI Core is currently under construction: construction PAUSES (not cancelled, not destroyed — just paused, resumable after re-research)\n   - Re-research cost: full (extremely expensive in Knowledge)\n   - This can delay a Singularity victory by several minutes of game time\n\n2. GPU Foundry and AGI Core are BUILDINGS, not techs. They are not directly affected by tech regression. However:\n   - If the tech that unlocked GPU Foundry is lost, the existing GPU Foundry remains but you cannot build another\n   - AGI Core depends on Transformer Architecture — if that tech is lost, AGI Core construction pauses\n\n3. Research order strategy:\n   - Savvy players will research Transformer Architecture early in their tech queue, then research other techs after it\n   - This pushes Transformer Architecture deeper in the history stack, making it less likely to be the \"most recent\" tech lost\n   - Players who rush Singularity techs last are more vulnerable to regression\n\n4. Defense escalation in late game:\n   - When a player researches Transformer Architecture, all opponents receive an alert: \"[Player] has researched Transformer Architecture\" (public knowledge event, like Wonder construction)\n   - This signals that the Singularity push has begun, incentivizing others to target that player's TCs\n   - The tech leader must invest heavily in defense to protect their research investment\n   - This creates a natural \"all vs leader\" dynamic in the late game\n\n5. UI indicator for Singularity vulnerability:\n   - When a player has Singularity-chain techs, their TC info panel shows a \"Knowledge at Risk\" warning\n   - Lists which Singularity tech would be lost if this TC falls\n   - Encourages the player to build defenses\n\nData considerations:\n- Tag Singularity-chain techs in tech data: \"singularity_chain\": true\n- These techs trigger the public alert when researched\n- AGI Core construction checks for Transformer Architecture status on every tick (not just on start)\n\nAcceptance criteria:\n- Transformer Architecture can be lost via regression, pausing AGI Core construction\n- AGI Core construction resumes automatically when Transformer Architecture is re-researched\n- Public alert fires when Singularity-chain techs are researched\n- Tech research order creates meaningful strategic depth (research Singularity techs early to protect them)\n- UI shows \"Knowledge at Risk\" warning on TCs when Singularity techs are researched\n- Integration test: destroy TC, lose Transformer Architecture, verify AGI Core pauses, re-research, verify resume","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:38Z","created_by":"Dave Tashner","updated_at":"2026-02-26T12:23:30Z","closed_at":"2026-02-26T12:23:30Z","close_reason":"Completed in PR #83","labels":["knowledge-burning","singularity","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.7","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T16:11:37Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fxt.7","depends_on_id":"roots-of-reason-fxt.5","type":"blocks","created_at":"2026-02-22T16:11:53Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fxt.7","depends_on_id":"roots-of-reason-fxt.6","type":"blocks","created_at":"2026-02-22T16:11:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.8","title":"War research bonus implementation","description":"Implement escalating war research bonus that activates when military units are in combat. Bonus scales by age (5% Stone to 40% Information, 25% Singularity). Lingers 30s after combat ends. Military tech spillovers apply permanent civilian bonuses. Settings in data/settings/research.json.\n\n## Acceptance Criteria\n- [ ] War bonus detected when at least 1 military unit is in combat\n- [ ] Bonus value scales by current age per research.json\n- [ ] 30-second linger timer after last combat ends\n- [ ] Military tech spillovers (e.g. Rifling → Mining +15%) applied permanently on research\n- [ ] War bonus multiplied into research speed formula\n- [ ] Unit tests for war bonus activation, linger, and expiration\n- [ ] Integration test: enter combat → verify research speed increases","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:25:39Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:46:30Z","closed_at":"2026-02-23T13:46:30Z","close_reason":"Completed in PR #39","labels":["combat","research","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.8","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T18:25:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.9","title":"War survival mechanic (medical tech chain)","description":"Implement the medical tech chain's cumulative war survival effects. Pasteurization grants idle HP regen. Vaccines grant +15% max HP to military. Antibiotics grants 25% chance to stabilize at 1 HP instead of dying (60s cooldown). Settings in data/settings/war_survival.json.\n\n## Acceptance Criteria\n- [ ] Pasteurization: +1 HP/s regen when idle 5s+, camp disease immunity\n- [ ] Vaccines: +15% max HP for all military units\n- [ ] Antibiotics: 25% stabilize chance at 1 HP on lethal damage, 60s cooldown per unit\n- [ ] Stabilization shows visual feedback (flash, particle)\n- [ ] Cooldown tracked per unit, serializable\n- [ ] All values data-driven from war_survival.json\n- [ ] Unit tests for each medical tech effect\n- [ ] Unit tests for stabilization chance and cooldown\n- [ ] Integration test: full medical chain → unit survives lethal hit","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:25:46Z","created_by":"Dave Tashner","updated_at":"2026-02-26T05:47:43Z","closed_at":"2026-02-26T05:47:43Z","close_reason":"Completed in PR #80","labels":["combat","medical","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.9","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T18:25:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-gzc","title":"Camera should start centered on player villagers","description":"Camera starts at map center instead of player start position","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:04:59Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:07:47Z","closed_at":"2026-02-28T05:07:47Z","close_reason":"Completed in PR #167"}
{"id":"roots-of-reason-hdn","title":"Decouple CI test job from lint/validate dependency","description":"Test job declares needs: [lint, validate] which hides test results when lint fails. Run lint, validate, and test in parallel so test feedback is always available.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T06:33:30Z","closed_at":"2026-02-28T06:33:30Z","close_reason":"Completed in PR #171"}
{"id":"roots-of-reason-hp1","title":"Fix civ bonus test gather_multiplier leaks","description":"test_civ_bonus_manager.gd restores _active_civs and _civ_cache but not ResourceManager._gather_multipliers and _corruption_rates. Leaks multipliers into subsequent tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T06:40:31Z","closed_at":"2026-02-28T06:40:31Z","close_reason":"Completed in PR #175"}
{"id":"roots-of-reason-i54","title":"Process barracks source sprite and wire up to game","description":"Process barracks_01.png (1536x1024) source sprite to 384x256 game-ready asset (3x3 footprint). Replace placeholder sprite and ensure building is wired into the game scenes.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T21:53:02Z","created_by":"Dave Tashner","updated_at":"2026-02-28T21:58:11Z","closed_at":"2026-02-28T21:58:11Z","close_reason":"Completed in PR #204","labels":["art","buildings"]}
{"id":"roots-of-reason-i6n","title":"Fix tree regen: only after full depletion, not choppable until full health","status":"closed","priority":2,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T00:49:00Z","created_by":"Dave Tashner","updated_at":"2026-03-01T00:51:01Z","closed_at":"2026-03-01T00:51:01Z","close_reason":"Completed in PR #220"}
{"id":"roots-of-reason-i6x","title":"Add round-trip save/load tests for historical_event_manager inner classes","description":"historical_event_manager.gd (705 lines) has 5 inner classes with save/load. Add round-trip tests for PlaguePlayerState, AftermathState, RenaissanceState with populated state.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:23:05Z","closed_at":"2026-02-28T14:23:05Z","close_reason":"Completed in PR #189"}
{"id":"roots-of-reason-ifh","title":"Epic: Debug \u0026 Integration Test Tooling","description":"Build comprehensive debug tools that allow spawning units/buildings on demand, controlling unit behavior (move, attack, gather) via debug commands, and enable fine-grained integration tests. Includes a debug console/overlay for in-game entity manipulation, scriptable test scenarios, and automated gameplay smoke tests that exercise full game loops (build→gather→research→fight→win).","notes":"Architecture: ADR-023 (roots-of-reason-de0). Debug console is an in-game overlay + scriptable test API sharing a DebugCommandRegistry backend. Stripped from release builds. See ADR for full command taxonomy and ScenarioBuilder API.","spec_id":"roots-of-reason-de0","status":"open","priority":1,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:55:28Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:41Z","labels":["debug","dx","testing"],"dependencies":[{"issue_id":"roots-of-reason-ifh","depends_on_id":"roots-of-reason-de0","type":"blocks","created_at":"2026-03-01T12:08:55Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.1","title":"Debug console: spawn units by type at cursor position","description":"Add a debug console overlay (toggle with backtick/tilde key) that accepts commands to spawn any unit type at the cursor position. Commands: 'spawn villager', 'spawn infantry player2', 'spawn cavalry 5' (count). Units spawn with full stats from DataLoader. Essential for manual integration testing without playing through early game.","acceptance_criteria":"- [ ] Backtick key toggles debug console overlay on/off\n- [ ] 'spawn villager' creates a villager at cursor position owned by player 1\n- [ ] 'spawn infantry 2' creates infantry owned by player 2\n- [ ] 'spawn cavalry 5' creates 5 cavalry at cursor\n- [ ] Spawned units load stats from DataLoader (not hardcoded)\n- [ ] Spawned units bypass resource cost and pop cap checks\n- [ ] Invalid unit type prints error in console log\n- [ ] GdUnit4 test: DebugAPI.spawn_unit(\"infantry\", 1, Vector2i(10,10)) returns valid unit node\n- [ ] Console auto-completes unit type names from DataLoader","status":"open","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:39Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:20Z","labels":["debug","dx","testing"],"dependencies":[{"issue_id":"roots-of-reason-ifh.1","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:38Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.10","title":"Combat scenario test suite: all unit matchups","description":"Create a comprehensive test suite that verifies all unit-vs-unit combat matchups. Test rock-paper-scissors invariants (infantry \u003e archer \u003e cavalry \u003e infantry), siege vs building damage multipliers, unique unit advantages, and naval combat. Uses scriptable scenario helper. Output a matchup results table for balance auditing.","acceptance_criteria":"- [ ] Test suite covers all 6 core matchups: infantry vs archer, archer vs cavalry, cavalry vs infantry (both directions)\n- [ ] Each matchup tested with equal-count armies (10v10): favored side wins \u003e70% of runs\n- [ ] Siege Ram vs Building: deals 5x bonus damage, ignores 80% reduction\n- [ ] Artillery vs Building: deals 6x bonus, range 10\n- [ ] Cannon Ship vs coastal Dock: deals 8x bonus\n- [ ] Tank vs Infantry: deals 3x bonus\n- [ ] Each unique unit tested against its counter: Legionnaire vs massed Archers (archers win), Berserker vs Archers (archers win), Chu-Ko-Nu vs Cavalry (chu-ko-nu wins)\n- [ ] Test outputs matchup results table to stdout for balance review\n- [ ] All tests use ScenarioBuilder for setup\n- [ ] No test takes longer than 10 seconds","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:25Z","labels":["balance","combat","testing"],"dependencies":[{"issue_id":"roots-of-reason-ifh.10","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:44Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ifh.10","depends_on_id":"roots-of-reason-ifh.6","type":"blocks","created_at":"2026-03-01T12:09:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.2","title":"Debug console: spawn buildings at cursor position","description":"Extend debug console to spawn buildings. Commands: 'build barracks', 'build town_center player2', 'build wonder'. Buildings spawn fully constructed with correct footprint validation. Supports specifying player owner. Bypasses resource cost checks in debug mode.","acceptance_criteria":"- [ ] 'build barracks' places fully-constructed barracks at cursor position\n- [ ] 'build town_center 2' places TC owned by player 2\n- [ ] Building respects footprint (3x3 barracks occupies 9 cells)\n- [ ] Building registers with EntityRegistry, InputHandler, and SpatialIndex\n- [ ] Building footprint cells marked solid in pathfinding grid\n- [ ] Bypasses resource cost checks in debug mode\n- [ ] Invalid building name prints error in console\n- [ ] GdUnit4 test: DebugAPI.spawn_building(\"barracks\", 1, Vector2i(15,15)) returns valid building\n- [ ] Building immediately functional (can train units, drop off resources)","status":"open","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:40Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:20Z","labels":["debug","dx","testing"],"dependencies":[{"issue_id":"roots-of-reason-ifh.2","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.3","title":"Debug console: direct unit control commands","description":"Add debug commands to directly control units: 'move \u003cunit_id\u003e \u003cx\u003e \u003cy\u003e', 'attack \u003cunit_id\u003e \u003ctarget_id\u003e', 'gather \u003cunit_id\u003e \u003cresource_id\u003e', 'set-hp \u003cunit_id\u003e \u003chp\u003e', 'kill \u003cunit_id\u003e', 'teleport \u003cunit_id\u003e \u003cx\u003e \u003cy\u003e'. Enables precise unit manipulation for reproducing bugs and testing edge cases.","acceptance_criteria":"- [ ] 'move \u003cid\u003e 20 30' issues move command through CommandHandler (not direct position set)\n- [ ] 'attack \u003cid\u003e \u003ctarget_id\u003e' issues attack command, unit engages target\n- [ ] 'gather \u003cid\u003e \u003cresource_id\u003e' issues gather command\n- [ ] 'set-hp \u003cid\u003e 50' sets unit HP (clamped to 0..max_hp)\n- [ ] 'kill \u003cid\u003e' immediately destroys unit, triggers death signals\n- [ ] 'teleport \u003cid\u003e 20 30' instantly moves unit (no pathfinding)\n- [ ] All commands validate entity IDs — error if invalid\n- [ ] GdUnit4 test: DebugAPI.move_unit(unit_id, Vector2i(20,30)) changes unit target\n- [ ] GdUnit4 test: DebugAPI.set_hp(unit_id, 1) sets HP to 1","status":"open","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:40Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:21Z","labels":["debug","dx","testing"],"dependencies":[{"issue_id":"roots-of-reason-ifh.3","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:40Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ifh.3","depends_on_id":"roots-of-reason-ifh.1","type":"blocks","created_at":"2026-03-01T12:09:08Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ifh.3","depends_on_id":"roots-of-reason-ifh.2","type":"blocks","created_at":"2026-03-01T12:09:08Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.4","title":"Debug console: resource and tech manipulation","description":"Add debug commands for economy/tech manipulation: 'give food 1000', 'give all 9999', 'research bronze_working', 'research-all', 'advance-age', 'set-age singularity'. Enables testing late-game scenarios without playing through early game.","acceptance_criteria":"- [ ] 'give food 1000' adds 1000 food to player 1 via ResourceManager\n- [ ] 'give all 9999' sets all 5 resources to 9999 for player 1\n- [ ] 'give gold 500 2' adds 500 gold to player 2\n- [ ] 'research bronze_working' completes tech instantly, triggers all unlock effects\n- [ ] 'research-all' researches every tech in prerequisite order, all effects applied\n- [ ] 'advance-age' advances to next age (pays no cost)\n- [ ] 'set-age singularity' jumps to Singularity Age, all prerequisite techs auto-researched\n- [ ] GdUnit4 test: DebugAPI.give_resources(1, \"food\", 1000) verified via ResourceManager.get_resource()\n- [ ] GdUnit4 test: DebugAPI.research_tech(\"bronze_working\") verified via TechManager.is_researched()","status":"open","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:41Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:21Z","labels":["debug","dx","testing"],"dependencies":[{"issue_id":"roots-of-reason-ifh.4","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.5","title":"Debug console: game state inspection overlay","description":"Add visual debug overlays toggled from debug console: 'show pathfinding' (A* grid costs), 'show los' (line of sight radii), 'show fog' (fog of war state), 'show spatial-index' (spatial hash grid), 'show attack-ranges' (unit attack radii). Overlays render on top of game world as semi-transparent colored cells.","acceptance_criteria":"- [ ] 'show pathfinding' renders AStarGrid2D cell costs as colored overlay (green=low, red=high, black=impassable)\n- [ ] 'show los' renders LOS radii as circles around units/buildings\n- [ ] 'show fog' renders fog of war state (explored/visible/hidden) as colored cells\n- [ ] 'show spatial-index' renders spatial hash grid boundaries\n- [ ] 'show attack-ranges' renders attack range circles for selected units\n- [ ] 'hide \u003coverlay\u003e' removes specific overlay\n- [ ] 'hide all' removes all overlays\n- [ ] Overlays render at 50% opacity on top of game world\n- [ ] Overlays update in real-time as units move and game state changes\n- [ ] Performance: overlays do not drop framerate below 30fps on 200x200 map","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:42Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:22Z","labels":["debug","dx","testing"],"dependencies":[{"issue_id":"roots-of-reason-ifh.5","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:41Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.6","title":"Scriptable integration test scenarios","description":"Create a GDScript test helper that can set up complex game scenarios programmatically: spawn players with specific civs, place buildings, create unit armies, set resource levels, advance to specific ages, and then assert outcomes. Example: test that 10 infantry vs 10 archers results in archer victory (rock-paper-scissors). Build on existing test infrastructure in tests/helpers/.","acceptance_criteria":"- [ ] ScenarioBuilder class in tests/helpers/scenario_builder.gd\n- [ ] set_civ(player_id, civ_name) configures player civilization with bonuses applied\n- [ ] set_age(player_id, age_name) advances player to specified age with all prereq techs\n- [ ] give_resources(player_id, {food=N, wood=N, ...}) sets exact resource amounts\n- [ ] spawn_units(player_id, type, count, position) creates units at location\n- [ ] build(player_id, building_type, position) places fully-constructed building\n- [ ] All methods return self for chaining: scenario.set_civ(1,\"rome\").set_age(1,\"iron\")\n- [ ] GdUnit4 test: 10 infantry vs 10 archers scenario — infantry wins (rock-paper-scissors verified)\n- [ ] GdUnit4 test: medieval Rome vs medieval Mesopotamia — both sides functional\n- [ ] Methods delegate to DebugAPI — no direct state manipulation","status":"open","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:42Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:23Z","labels":["debug","integration","testing"],"dependencies":[{"issue_id":"roots-of-reason-ifh.6","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:42Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ifh.6","depends_on_id":"roots-of-reason-ifh.1","type":"blocks","created_at":"2026-03-01T12:09:09Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ifh.6","depends_on_id":"roots-of-reason-ifh.4","type":"blocks","created_at":"2026-03-01T12:09:09Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.7","title":"Full game loop stress test: Stone to Singularity","description":"Create an automated test that plays a full game from Stone Age to Singularity victory using debug commands to fast-forward. Verify: all 7 age advancements work, tech tree fully researchable, AGI Core buildable, victory detection triggers. Runs headless, completes in \u003c 60 seconds. Catches regressions in the full tech/age pipeline.","acceptance_criteria":"- [ ] Test advances through all 7 ages using DebugAPI\n- [ ] All 77 techs researched in prerequisite order with no errors\n- [ ] GPU Foundry, Transformer Lab, AGI Core buildings placed successfully\n- [ ] Victory condition triggers on AGI Core completion\n- [ ] Test completes in \u003c 60 seconds headless\n- [ ] No push_error() calls during execution (checked via error monitor)\n- [ ] Resource totals remain non-negative throughout\n- [ ] Population cap never exceeded\n- [ ] All EventBus signals fire in correct order (age_advanced, tech_researched, victory)","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:43Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:23Z","labels":["endgame","integration","testing"],"dependencies":[{"issue_id":"roots-of-reason-ifh.7","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:42Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ifh.7","depends_on_id":"roots-of-reason-ifh.6","type":"blocks","created_at":"2026-03-01T12:09:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.8","title":"Debug console: fog of war toggle and map reveal","description":"Add debug commands: 'reveal-map' (disable fog of war entirely), 'fog on/off' (toggle), 'show-ai' (reveal AI player units/buildings). Essential for debugging AI behavior and map generation issues.","acceptance_criteria":"- [ ] 'reveal-map' disables fog of war, all tiles visible for all players\n- [ ] 'fog on' re-enables fog of war from current explored state\n- [ ] 'fog off' disables fog (alias for reveal-map)\n- [ ] 'show-ai' reveals AI player units and buildings through fog\n- [ ] All commands toggle VisibilityManager state\n- [ ] Minimap updates to reflect revealed/hidden state\n- [ ] GdUnit4 test: DebugAPI.reveal_map() makes all cells visible","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:43Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:24Z","labels":["debug","dx"],"dependencies":[{"issue_id":"roots-of-reason-ifh.8","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:43Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ifh.9","title":"Debug: time control and game speed manipulation","description":"Add debug commands for time manipulation: 'speed 0.5/1/2/5/10' (game speed multiplier), 'pause', 'step' (advance one game tick), 'skip 60' (skip N seconds). Enables slow-motion debugging of combat and fast-forward for late-game testing.","acceptance_criteria":"- [ ] 'speed 0.5' sets game to half speed (slow motion)\n- [ ] 'speed 5' and 'speed 10' set fast-forward speeds\n- [ ] 'pause' pauses game loop (units stop, no resource ticking)\n- [ ] 'step' advances exactly one physics frame when paused\n- [ ] 'step 60' advances 60 frames when paused\n- [ ] 'skip 60' fast-forwards 60 seconds of game time\n- [ ] Speed changes apply via Engine.time_scale (not custom time)\n- [ ] UI remains responsive at all speed settings\n- [ ] GdUnit4 test: DebugAPI.set_speed(5.0) verified via Engine.time_scale","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:44Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:24Z","labels":["debug","dx"],"dependencies":[{"issue_id":"roots-of-reason-ifh.9","depends_on_id":"roots-of-reason-ifh","type":"parent-child","created_at":"2026-03-01T11:56:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-iya","title":"[epic] RTS Debug Tooling: economy, combat, pathfinding inspectors","description":"New debug server endpoints and CLI commands for deep RTS game inspection. Covers economy rate tracking, combat event logging, pathfinding visualization, entity state machine history, fog of war inspection, and performance profiling. These tools make balance tuning, bug hunting, and system verification dramatically faster.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T01:32:54Z","created_by":"Dave Tashner","updated_at":"2026-03-01T05:30:06Z","closed_at":"2026-03-01T05:30:06Z","close_reason":"All stories completed: iya.1-2 in earlier PRs, iya.3-6 in PR #253","labels":["debug","tooling"]}
{"id":"roots-of-reason-iya.1","title":"Add /economy endpoint with gather rates, idle counts, and villager allocation","description":"Add a new debug server endpoint GET /economy that returns:\n- Per-resource gather rate (units/sec) over a rolling window (e.g., last 10s)\n- Drop-off events per second\n- Idle villager count and idle duration\n- Resource bottlenecks (which resource is blocking queued items)\n- Villager allocation breakdown (count per resource type + builders)\nAdd corresponding 'ror economy' CLI command that pretty-prints the output.\nTrack gather events in a ring buffer on ResourceManager or a new EconomyTracker.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":120,"created_at":"2026-03-01T01:33:11Z","created_by":"Dave Tashner","updated_at":"2026-03-01T04:09:29Z","closed_at":"2026-03-01T04:09:29Z","close_reason":"Completed in PR #246","labels":["debug","tooling"],"dependencies":[{"issue_id":"roots-of-reason-iya.1","depends_on_id":"roots-of-reason-iya","type":"parent-child","created_at":"2026-02-28T20:33:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-iya.2","title":"Add /combat-log endpoint with damage events and engagement timeline","description":"Add a debug server endpoint GET /combat-log that returns recent combat events:\n- Every damage event: attacker, target, raw damage, armor reduction, final damage, remaining HP\n- Overkill waste (damage dealt to already-dead units)\n- DPS actual vs theoretical\n- Engagement timeline (who attacked whom, when)\nRequires adding a combat event emitter in the damage resolution code (prototype_unit.gd take_damage / attack logic). Store events in a capped ring buffer (last ~200 events). Add 'ror combat-log' CLI command.\nThis is critical for verifying that rock-paper-scissors balance invariants hold in practice.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":120,"created_at":"2026-03-01T01:33:16Z","created_by":"Dave Tashner","updated_at":"2026-03-01T03:54:37Z","closed_at":"2026-03-01T03:54:37Z","close_reason":"Completed in PR #245","labels":["combat","debug","tooling"],"dependencies":[{"issue_id":"roots-of-reason-iya.2","depends_on_id":"roots-of-reason-iya","type":"parent-child","created_at":"2026-02-28T20:33:16Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-iya.3","title":"Add /pathfinding endpoint exposing grid state, active paths, and failed queries","description":"Add a debug server endpoint GET /pathfinding that returns:\n- Pathfinder grid dimensions and solid/passable cell map (as a compact bitmap or list of solid cells)\n- Active paths for selected units (waypoint lists with grid coords)\n- Recent failed pathfinding attempts (no-path-found events with start/end coords)\n- Building footprint overlay (which cells are marked solid and by which building)\nOptionally support an annotated screenshot overlay mode (?overlay=true) that draws the path grid on the viewport.\nAdd 'ror pathfinding' CLI command.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":90,"created_at":"2026-03-01T01:33:21Z","created_by":"Dave Tashner","updated_at":"2026-03-01T05:29:54Z","closed_at":"2026-03-01T05:29:54Z","close_reason":"Completed in PR #253","labels":["debug","pathfinding","tooling"],"dependencies":[{"issue_id":"roots-of-reason-iya.3","depends_on_id":"roots-of-reason-iya","type":"parent-child","created_at":"2026-02-28T20:33:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-iya.4","title":"Add entity state history ring buffer and /entities?verbose=true mode","description":"Add a state transition history ring buffer to prototype_unit.gd (last ~20 transitions per entity). Each entry records: timestamp, old_state, new_state, trigger reason (e.g., target_died, resource_depleted, manual_command).\nExpose via /entities?verbose=true — when verbose flag is set, each entity's serialization includes its transition_history array.\nAlso expose current target info (target node name, target position, why it was chosen).\nThis makes it possible to diagnose stuck-unit bugs by seeing the sequence of state changes rather than just the current snapshot.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":90,"created_at":"2026-03-01T01:33:30Z","created_by":"Dave Tashner","updated_at":"2026-03-01T05:29:54Z","closed_at":"2026-03-01T05:29:54Z","close_reason":"Completed in PR #253","labels":["debug","tooling"],"dependencies":[{"issue_id":"roots-of-reason-iya.4","depends_on_id":"roots-of-reason-iya","type":"parent-child","created_at":"2026-02-28T20:33:29Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-iya.5","title":"Add /perf endpoint with frame times, entity counts, and pathfinding cost","description":"Add a debug server endpoint GET /perf that returns:\n- Frame time stats: average, P95, P99 over a rolling window (last 60 frames)\n- Entity count breakdown by type (units, buildings, resources, projectiles)\n- Pathfinding queries per frame (count + average cost in msec)\n- Orphan node count (nodes queued for deletion)\n- Memory usage if available via OS.get_static_memory_usage()\nAdd 'ror perf' CLI command. Useful for catching performance cliffs at scale (200+ units, large maps).","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":60,"created_at":"2026-03-01T01:33:34Z","created_by":"Dave Tashner","updated_at":"2026-03-01T05:29:55Z","closed_at":"2026-03-01T05:29:55Z","close_reason":"Completed in PR #253","labels":["debug","performance","tooling"],"dependencies":[{"issue_id":"roots-of-reason-iya.5","depends_on_id":"roots-of-reason-iya","type":"parent-child","created_at":"2026-02-28T20:33:33Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-iya.6","title":"Add /fow endpoint exposing per-player visibility grid and LOS sources","description":"Add a debug server endpoint GET /fow?player=0 that returns:\n- Per-player visibility grid (visible / explored-but-dark / unexplored for each cell)\n- LOS source positions and radii (which entities provide vision and how far)\n- Summary stats: % of map explored, % currently visible\nOptionally support screenshot overlay mode showing visibility as a colored grid overlay.\nAdd 'ror fow' CLI command.","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","estimated_minutes":60,"created_at":"2026-03-01T01:33:38Z","created_by":"Dave Tashner","updated_at":"2026-03-01T05:29:55Z","closed_at":"2026-03-01T05:29:55Z","close_reason":"Completed in PR #253","labels":["debug","fog-of-war","tooling"],"dependencies":[{"issue_id":"roots-of-reason-iya.6","depends_on_id":"roots-of-reason-iya","type":"parent-child","created_at":"2026-02-28T20:33:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-j7u","title":"Fix leaked Node instances at game exit","description":"16 Node instances leak on exit - not in scene tree at shutdown","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T22:19:01Z","created_by":"Dave Tashner","updated_at":"2026-02-27T22:28:37Z","closed_at":"2026-02-27T22:28:37Z","close_reason":"Completed in PR #141"}
{"id":"roots-of-reason-jev","title":"Nomadic Start: Villagers Build Initial Town Center","description":"Players and AI start with only villagers and enough resources to build their first Town Center. No pre-built TC at game start. The natural flow becomes: build TC → gather resources → expand.\n\nKey changes:\n- Remove pre-built TC from game bootstrapper (both player and AI)\n- Adjust starting resources to cover TC cost (275 Wood, 100 Stone)\n- Auto-place TC construction site at spawn with villagers assigned to build\n- AI builds TC as first priority in its build order\n- Handle edge cases: no-drop-off gathering, victory manager TC tracking, save/load\n- Generate placeholder sprites for TC, House, and Lumber Camp\n- Integration test for the full nomadic start flow","status":"closed","priority":1,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:18:07Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:36:17Z","closed_at":"2026-02-28T15:36:17Z","close_reason":"All nomadic start code and art complete (PRs #193, #195, #196, #197, #199, #200)","labels":["buildings","nomadic-start","story"]}
{"id":"roots-of-reason-jev.1","title":"Adjust starting resources to cover TC construction","description":"Add player_difficulty to GameManager (save/load/reset), adjust Hard/Expert starting resources to cover TC cost + buffer, pass player_difficulty to init_player, extract _create_town_center helper from duplicated code in game_bootstrapper.gd. Tests for save/load round-trip and starting resources.","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:19:03Z","created_by":"Dave Tashner","updated_at":"2026-02-28T14:51:56Z","closed_at":"2026-02-28T14:51:56Z","close_reason":"Completed in PR #193","labels":["data","resources","story"],"dependencies":[{"issue_id":"roots-of-reason-jev.1","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:19:03Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.10","title":"Update save/load for nomadic start state","description":"Ensure a game saved during the nomadic start phase (before any TC is complete) round-trips correctly through save/load.\n\nScenarios to handle:\n- Save during TC construction (villagers building, progress partial)\n- Save with villagers holding undeposited resources (no drop-off yet)\n\nAcceptance criteria:\n- Game saved during TC construction loads correctly\n- TC construction progress preserved\n- Villager build assignments restored after load\n- Victory manager grace state preserved (no false defeat on load)\n- Villagers holding resources resume waiting/depositing correctly after load","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:20:32Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:28:02Z","closed_at":"2026-02-28T15:28:02Z","close_reason":"Completed in PR #200","labels":["save-load","story"],"dependencies":[{"issue_id":"roots-of-reason-jev.10","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:20:31Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.10","depends_on_id":"roots-of-reason-jev.3","type":"blocks","created_at":"2026-02-28T09:21:00Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.10","depends_on_id":"roots-of-reason-jev.6","type":"blocks","created_at":"2026-02-28T09:21:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.11","title":"Integration test: nomadic start to build TC to gather wood","description":"End-to-end integration test verifying the complete nomadic start flow.\n\nTest sequence:\n1. Game starts — no pre-built TC exists\n2. TC construction site is auto-placed at starting position\n3. Starting resources deducted (275 Wood, 100 Stone)\n4. All 5 starting villagers move to TC site and begin building\n5. TC construction completes (fast-forward game time)\n6. TC registers as drop-off point\n7. Villager is ordered to gather wood from nearby tree\n8. Villager chops tree, carries wood to TC, deposits\n9. Player wood resource increases\n\nAcceptance criteria:\n- Test runs in headless mode via GdUnit4\n- Covers the full flow from game start to first resource deposit\n- Verifies resource deduction on TC placement\n- Verifies TC completion triggers production queue attachment\n- Verifies wood gathering and deposit at completed TC\n- Test completes in reasonable time (\u003c 30s with fast-forward)","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:20:38Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:28:02Z","closed_at":"2026-02-28T15:28:02Z","close_reason":"Completed in PR #200","labels":["integration","story","testing"],"dependencies":[{"issue_id":"roots-of-reason-jev.11","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:20:37Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.11","depends_on_id":"roots-of-reason-jev.3","type":"blocks","created_at":"2026-02-28T09:21:01Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.11","depends_on_id":"roots-of-reason-jev.5","type":"blocks","created_at":"2026-02-28T09:21:01Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.11","depends_on_id":"roots-of-reason-jev.6","type":"blocks","created_at":"2026-02-28T09:21:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.12","title":"Generate Town Center building sprite (Phase 2 art)","description":"Generate AI art for the Town Center building — the most important building in the game. This is the first building players construct and serves as the central hub for resource drop-off and villager production.\n\n## Technical Specs\n\n| Parameter | Value |\n|-----------|-------|\n| Canvas size | 384x256px (3x3 footprint per ADR-008) |\n| Tile base | 128x64 diamond per tile, 3x3 = ~384x192 footprint |\n| Magenta mask | #FF00FF region for player color recoloring (banner/flag) |\n| Naming | `town_center.png` |\n| Output path | `assets/sprites/buildings/placeholder/town_center.png` (replaces procedural placeholder) |\n| Variant | Generate at 1024x768 or higher, downscale to 384x256 |\n\n## Art Generation Prompt\n\n```\nCreate a 2D isometric building sprite for a Town Center in an RTS game (Age of Empires style, Stone Age era).\n\nTECHNICAL REQUIREMENTS:\n- Canvas size 1024x768 pixels (will be downscaled to 384x256)\n- Isometric 3/4 top-down view (~30 degree camera angle, 2:1 diamond ratio)\n- Transparent background (PNG with alpha)\n- Building sits on a 3x3 tile diamond footprint\n- Consistent lighting: top-left light source\n- No drop shadow (handled by the engine)\n- Clean art with defined outlines (visible at small size)\n- Include a magenta (#FF00FF) region on the main banner/flag for player color recoloring\n\nBUILDING DESIGN — STONE AGE TOWN CENTER:\n- Large communal structure — the heart of a primitive settlement\n- Rectangular stone and timber hall with a prominent peaked thatched roof\n- Visible from isometric top-down: mostly roof with walls visible on the south and east faces\n- Roof: thick golden-brown thatch (#B8964A to #8B7235), slightly uneven/organic\n- Walls: rough-cut stone base (#9B9B8B to #787870) with timber frame (#6B5530 to #8B7355)\n- Wooden support beams visible at corners and along walls\n- Open entrance archway on the south-facing wall (dark interior visible)\n- A tall wooden flagpole rises from the roof peak with a magenta (#FF00FF) banner/pennant\n- Small fire pit or brazier near the entrance with a warm orange glow\n- Wooden crates and pottery near the entrance (supplies/drop-off point visual)\n- Flat stone courtyard/platform extending slightly beyond the building footprint\n\nCOLOR PALETTE:\n- Thatch roof: golden-brown (#B8964A, highlight #D4B87A, shadow #8B7235)\n- Stone walls: warm gray (#9B9B8B, highlight #B8B8A8, shadow #787870)\n- Timber frame: medium brown (#8B7355, highlight #A08B6B, shadow #6B5530)\n- Interior shadow: deep brown-black (#2A2218)\n- Flagpole: dark wood (#5C4A3A)\n- Flag/banner: magenta (#FF00FF) — player color mask\n- Fire glow: warm orange (#E8A040, highlight #FFD080)\n- Ground/platform: sandy stone (#C4B896)\n- Crates/pottery: earthy brown and terracotta (#A07850, #C47040)\n\nCOMPOSITION:\n- Building fills roughly 75-80% of the canvas\n- Centered horizontally, positioned so the diamond footprint aligns with a 3x3 iso grid\n- Roof peak at roughly the upper third of the canvas\n- Entrance facing the viewer (south in isometric = toward bottom-right of screen)\n- Flag extends above the roofline as the highest point\n- Small environmental details (crates, pots) near base add visual interest without clutter\n\nSTYLE REFERENCE:\n- Age of Empires 2 Town Center (Stone/Dark Age)\n- Painterly but clean — not pixel art, not photorealistic\n- Warm earth tones, visible at small size, reads clearly as \"important building\"\n```\n\n## Construction State\n\nAlso generate a construction-in-progress variant:\n\n```\nSame building as above, but at 50% construction:\n- Only the stone foundation and lower walls visible (no roof)\n- Wooden scaffolding frames around the walls\n- Scattered building materials: log piles, stone blocks, rope\n- Partial timber frame visible at top where roof will go\n- Same flagpole but shorter, no banner yet\n- Overall impression: \"being built, not finished\"\n```\n\n## Acceptance Criteria\n- Final sprite is 384x256px with transparent background\n- Isometric perspective matches terrain tiles (grass_quad.png, dirt_quad.png)\n- Visually reads as the most important building at game zoom levels\n- Magenta mask region present for player color shader\n- Art style consistent with existing tree/terrain/villager sprites\n- Construction variant clearly reads as \"under construction\"","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:32:54Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:49:36Z","closed_at":"2026-02-28T15:49:36Z","close_reason":"Completed in PR #201","labels":["art","buildings"],"dependencies":[{"issue_id":"roots-of-reason-jev.12","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:32:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.2","title":"Remove pre-built TC from game bootstrapper","description":"Difficulty-gated bootstrapper: Easy gets TC+2 houses, Normal gets TC, Hard/Expert get no TC. Create start_config.json, branch on player_difficulty in setup_demo_entities, add _create_house helper, gate AI TC by ai_difficulty, center camera on villagers when no TC.","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:19:09Z","created_by":"Dave Tashner","updated_at":"2026-02-28T14:57:28Z","closed_at":"2026-02-28T14:57:28Z","close_reason":"Completed in PR #195","labels":["bootstrapper","buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-jev.2","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:19:09Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.2","depends_on_id":"roots-of-reason-jev.1","type":"blocks","created_at":"2026-02-28T09:20:57Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.3","title":"Auto-place TC construction site at spawn","description":"At game start, automatically place a Town Center construction site at the player's starting position. Deduct resources and assign all starting villagers to build it.\n\nThis avoids forcing the player to manually place their first building before learning the UI. The TC site appears immediately with villagers walking toward it.\n\nImplementation:\n- In game_bootstrapper or prototype_main, after spawning villagers:\n  1. Call building_placer to place a TC at the starting position (or create construction site directly)\n  2. Deduct 275 Wood + 100 Stone via ResourceManager.spend()\n  3. Mark footprint cells as solid in pathfinder\n  4. Auto-assign all starting villagers to build the site (reuse game_flow_controller.on_building_placed logic)\n- The TC appears as a semi-transparent construction site (construction_alpha: 0.4) with progress bar\n\nAcceptance criteria:\n- TC construction site appears at game start at the starting position\n- Starting resources are deducted (player starts with 0 Wood, 0 Stone after placement)\n- All 5 starting villagers auto-walk to the site and begin building\n- Construction progress is visible (progress bar, alpha)\n- TC completes and becomes functional (drop-off, production queue, garrison)\n- Pathfinder cells are marked solid for the TC footprint","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:19:50Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:21:39Z","closed_at":"2026-02-28T15:21:39Z","close_reason":"Completed in PR #199","labels":["bootstrapper","buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-jev.3","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:19:50Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.3","depends_on_id":"roots-of-reason-jev.2","type":"blocks","created_at":"2026-02-28T09:20:58Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.4","title":"AI nomadic start — build TC as first priority","description":"Update AI economy to handle starting without a pre-built Town Center. AI should build its TC as the very first action.\n\nCurrent behavior:\n- AI starts with a pre-built TC created by _create_ai_town_center()\n- AI build order assumes TC already exists for unit production\n\nNew behavior:\n- AI starts with only villagers (no TC)\n- AI auto-places TC construction site at its starting position (mirror player logic)\n- All AI starting villagers assigned to build the TC\n- AI build order proceeds normally after TC completes\n- AI cannot train units or execute build orders until TC is finished\n\nImplementation:\n- Reuse the same auto-place logic from story 3 for AI player\n- AI economy tick should detect \"no TC\" state and not attempt production/gathering\n- Once TC completes, normal AI behavior resumes\n\nAcceptance criteria:\n- AI starts without a TC\n- AI places and builds TC as first action\n- AI villagers work on TC construction\n- AI resumes normal economy/military after TC completes\n- AI difficulty multipliers still apply to build speed","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:19:57Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:21:40Z","closed_at":"2026-02-28T15:21:40Z","close_reason":"Completed in PR #199","labels":["ai","buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-jev.4","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:19:57Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.4","depends_on_id":"roots-of-reason-jev.3","type":"blocks","created_at":"2026-02-28T09:20:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.5","title":"Handle no-drop-off gathering edge case","description":"GathererComponent currently assumes a drop-off building exists when transitioning to MOVING_TO_DROP_OFF state. With the nomadic start, there may be no drop-off until the TC is built.\n\nCurrent behavior:\n- When carry capacity is full, gatherer scans for nearest drop-off\n- If no drop-off found, behavior is undefined (potential null reference or hang)\n\nNew behavior:\n- If no drop-off exists when villager's carry is full, villager idles with resources held\n- Periodically re-check for a drop-off (e.g., every 2-3 seconds)\n- Once a drop-off becomes available (TC finishes construction), resume deposit\n- If villager is ordered to gather before TC exists, they gather until full then wait\n\nAcceptance criteria:\n- No crash or hang when gathering without a drop-off building\n- Villager holds resources and waits when no drop-off available\n- Villager auto-deposits once a drop-off building completes\n- Existing gathering behavior unchanged when drop-off exists","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:19:59Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:08:10Z","closed_at":"2026-02-28T15:08:10Z","close_reason":"Completed in PR #197","labels":["gathering","resources","story"],"dependencies":[{"issue_id":"roots-of-reason-jev.5","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:19:58Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.5","depends_on_id":"roots-of-reason-jev.2","type":"blocks","created_at":"2026-02-28T09:20:58Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.6","title":"Update victory manager for nomadic start","description":"Victory manager registers Town Centers during setup_victory() and uses them for conquest victory detection. With no starting TC, this needs adjustment.\n\nCurrent behavior:\n- setup_victory() iterates buildings looking for completed town_centers\n- Conquest victory triggers when all of a player's TCs are destroyed\n- No starting TC means the player could be immediately \"defeated\"\n\nNew behavior:\n- Victory manager does not check conquest conditions until at least one TC has been built per player\n- Under-construction TCs count as \"player has TC intent\" (not defeated yet)\n- Once a player's first TC completes, normal conquest rules apply\n- If a player's TC is destroyed before completion (e.g., enemy rush), they lose\n\nImplementation:\n- Add a grace period or \"has_built_tc\" flag per player\n- construction_complete signal from buildings should register TCs with victory manager\n- Conquest check skips players who haven't completed their first TC yet\n\nAcceptance criteria:\n- No immediate defeat at game start (no TC exists yet)\n- Under-construction TC prevents conquest defeat\n- Completed TC registers with victory manager normally\n- Destroying an enemy's only TC (after completion) triggers conquest victory\n- Save/load preserves the \"has built TC\" state","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:20:04Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:05:50Z","closed_at":"2026-02-28T15:05:50Z","close_reason":"Completed in PR #196","labels":["buildings","story","victory"],"dependencies":[{"issue_id":"roots-of-reason-jev.6","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:20:03Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jev.6","depends_on_id":"roots-of-reason-jev.2","type":"blocks","created_at":"2026-02-28T09:20:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.7","title":"Generate Town Center placeholder sprite","description":"Generate an AI art placeholder sprite for the Town Center building.\n\nSpecifications (per ADR-008 sprite scale contract):\n- Size: 384x256px max (3x3 footprint)\n- Style: Isometric, matches existing placeholder buildings in assets/sprites/buildings/placeholder/\n- Player color: Include magenta (#FF00FF) mask region for runtime shader recoloring\n\nStates to generate:\n- Complete: Main building sprite with flag/banner detail, player color banner\n- Under construction: Semi-transparent wireframe/scaffold version (single frame is fine for now, construction alpha is handled by code)\n\nReference existing placeholders (barracks.png, library.png, etc.) — they are simple colored isometric diamonds with subtle detail lines. TC should be visually larger and more prominent as the central building.\n\nPrompt for AI art generation:\n\"Isometric Town Center building for a 2D RTS game, 384x256px, top-down 2:1 diamond perspective, stone and wood construction, prominent flag or banner, warm earth tones, clean pixel art style, transparent background\"\n\nOutput:\n- assets/sprites/buildings/placeholder/town_center.png\n\nAcceptance criteria:\n- Sprite is 384x256px or smaller\n- Isometric perspective matches existing building sprites\n- Visually distinct as the central/most important building\n- Magenta mask region present for player color\n- PNG with transparent background","status":"closed","priority":2,"issue_type":"task","assignee":"Dave Tashner","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:20:05Z","created_by":"Dave Tashner","updated_at":"2026-02-28T14:30:26Z","closed_at":"2026-02-28T14:30:26Z","close_reason":"Completed in PR #192","labels":["art","buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-jev.7","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:20:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.8","title":"Generate House placeholder sprite","description":"Generate an AI art placeholder sprite for the House building.\n\nSpecifications (per ADR-008 sprite scale contract):\n- Size: 256x192px max (2x2 footprint)\n- Style: Isometric, matches existing placeholder buildings in assets/sprites/buildings/placeholder/\n- Player color: Include magenta (#FF00FF) mask region for runtime shader recoloring\n\nCurrently missing from assets/sprites/buildings/placeholder/ — only barracks, dock, factory, farm, library, market, river_dock, and wonder exist.\n\nPrompt for AI art generation:\n\"Isometric small house building for a 2D RTS game, 256x192px, top-down 2:1 diamond perspective, simple wooden/thatch construction, small door, warm colors, clean pixel art style, transparent background\"\n\nOutput:\n- assets/sprites/buildings/placeholder/house.png\n\nAcceptance criteria:\n- Sprite is 256x192px or smaller\n- Isometric perspective matches existing building sprites\n- Visually reads as a small residential dwelling\n- Magenta mask region present for player color\n- PNG with transparent background","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:20:07Z","created_by":"Dave Tashner","updated_at":"2026-02-28T14:30:26Z","closed_at":"2026-02-28T14:30:26Z","close_reason":"Completed in PR #192","labels":["art","buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-jev.8","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:20:06Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jev.9","title":"Generate Lumber Camp placeholder sprite","description":"Generate an AI art placeholder sprite for the Lumber Camp building (wood drop-off point near forests).\n\nNote: Lumber Camp does not currently exist in data/buildings/. This sprite task is forward-looking — the building data will be created when resource drop-off camps are implemented. For now, generate the art asset.\n\nSpecifications (per ADR-008 sprite scale contract):\n- Size: 128x128px max (1x1 footprint)\n- Style: Isometric, matches existing placeholder buildings in assets/sprites/buildings/placeholder/\n- Player color: Include magenta (#FF00FF) mask region for runtime shader recoloring\n\nPrompt for AI art generation:\n\"Isometric lumber camp building for a 2D RTS game, 128x128px, top-down 2:1 diamond perspective, small wooden structure with log pile and axe, rustic forest camp style, clean pixel art style, transparent background\"\n\nOutput:\n- assets/sprites/buildings/placeholder/lumber_camp.png\n\nAcceptance criteria:\n- Sprite is 128x128px or smaller\n- Isometric perspective matches existing building sprites\n- Visually reads as a wood gathering/storage camp (logs, axe, saw)\n- Magenta mask region present for player color\n- PNG with transparent background","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T14:20:08Z","created_by":"Dave Tashner","updated_at":"2026-02-28T14:30:27Z","closed_at":"2026-02-28T14:30:27Z","close_reason":"Completed in PR #192","labels":["art","buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-jev.9","depends_on_id":"roots-of-reason-jev","type":"parent-child","created_at":"2026-02-28T09:20:07Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jq7","title":"Generate terrain tile art: desert","description":"Generate 4 desert tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nArid cracked desert floor with heat-baked texture. Subtle salt deposits and hairline fractures in the dry earth. Harsh sunlight from the upper-left. Colors: dusty golds (#D4B87A, #C4A86A, #BFA060).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/desert_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:20:59Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:20:59Z","labels":["art"]}
{"id":"roots-of-reason-jup","title":"Epic: Late Game \u0026 Victory Path Polish","description":"Polish and complete the late-game experience and all three victory paths. Includes: full Singularity victory integration test (Stone→AGI Core), Wonder victory countdown with defense mechanics, military conquest final blow detection edge cases, late-game building implementations (Telegraph, Transformer Lab, Nuclear Plant - referenced in tech tree but not implemented), Singularity cinematic polish, Knowledge Burning cascading effects, and endgame pacing balance.","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:07Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:56:07Z","labels":["endgame","gameplay","singularity","victory"]}
{"id":"roots-of-reason-jup.1","title":"Implement Telegraph building (Industrial Age, referenced in tech tree)","description":"Implement Telegraph building referenced by Electricity tech. 2x2 footprint, Industrial Age. Effect: +15% research bonus to owning player. Create data/buildings/telegraph.json, building scene, sprites, and integration tests. Wire up tech unlock correctly.","acceptance_criteria":"- [ ] data/buildings/telegraph.json: footprint 2x2, age=industrial, cost per tech tree\n- [ ] Building unlocked by Electricity tech\n- [ ] Effect: +15% research bonus to owning player (applied via TechManager)\n- [ ] Game-ready sprite: 256x192 canvas, construction 3 frames\n- [ ] Magenta mask\n- [ ] GdUnit4 test: Telegraph built after Electricity → research speed increased by 15%\n- [ ] GdUnit4 test: Telegraph unavailable before Electricity\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:42Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:13Z","labels":["buildings","gameplay","industrial"],"dependencies":[{"issue_id":"roots-of-reason-jup.1","depends_on_id":"roots-of-reason-jup","type":"parent-child","created_at":"2026-03-01T11:59:42Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jup.2","title":"Implement Transformer Lab building (Singularity Age)","description":"Implement Transformer Lab building referenced in Singularity tech chain. 3x3 footprint. Effect: +200% research bonus, part of singularity chain (GPU Foundry → Transformer Lab → AGI Core). Create data/buildings/transformer_lab.json, building scene, sprites, tests.","acceptance_criteria":"- [ ] data/buildings/transformer_lab.json: footprint 3x3, age=singularity\n- [ ] Requires Transformer Architecture tech + GPU Foundry built\n- [ ] Effect: +200% research bonus (singularity chain)\n- [ ] Singularity chain: GPU Foundry → Transformer Lab → AGI Core\n- [ ] Game-ready sprite: 384x256, Singularity palette, construction 5 frames\n- [ ] Magenta mask\n- [ ] GdUnit4 test: Transformer Lab requires GPU Foundry built + Transformer Architecture researched\n- [ ] GdUnit4 test: research bonus applied correctly (stacks with other bonuses)\n- [ ] Public alert fires to all players when Transformer Lab completed","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:43Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:14Z","labels":["buildings","gameplay","singularity"],"dependencies":[{"issue_id":"roots-of-reason-jup.2","depends_on_id":"roots-of-reason-jup","type":"parent-child","created_at":"2026-03-01T11:59:42Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jup.3","title":"Implement Nuclear Plant building (Information Age)","description":"Implement Nuclear Plant building unlocked by Nuclear Fission tech. 3x3 footprint. Effect: massive power generation (reduced building costs or increased production speed). Create data/buildings/nuclear_plant.json, building scene, sprites, tests.","acceptance_criteria":"- [ ] data/buildings/nuclear_plant.json: footprint 3x3, age=information\n- [ ] Requires Nuclear Fission tech\n- [ ] Effect: -20% building cost (massive economic advantage)\n- [ ] Game-ready sprite: 384x256, modern/industrial style, construction 4 frames\n- [ ] Magenta mask\n- [ ] GdUnit4 test: Nuclear Plant built after Nuclear Fission → building costs reduced 20%\n- [ ] GdUnit4 test: cost reduction applies to all subsequent buildings\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:43Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:15Z","labels":["buildings","gameplay","information"],"dependencies":[{"issue_id":"roots-of-reason-jup.3","depends_on_id":"roots-of-reason-jup","type":"parent-child","created_at":"2026-03-01T11:59:43Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jup.4","title":"Full Singularity victory integration test (Stone Age to AGI Core completion)","description":"Create comprehensive integration test that walks through the entire Singularity victory path: start in Stone Age, research all prerequisite techs, build GPU Foundry, research Transformer Architecture, build Transformer Lab, research Alignment Research, build AGI Core, verify victory triggers. Use debug commands to fast-forward. Must catch any broken prerequisite chains.","acceptance_criteria":"- [ ] Test uses ScenarioBuilder to set up game state (depends on ifh.6)\n- [ ] Starts in Stone Age, advances through all 7 ages\n- [ ] Researches ALL prerequisite techs in correct dependency order\n- [ ] Builds GPU Foundry after Parallel Computing researched\n- [ ] Builds Transformer Lab after Transformer Architecture researched\n- [ ] Researches Alignment Research\n- [ ] Builds AGI Core\n- [ ] Victory condition triggers: victory_manager detects Singularity victory\n- [ ] No push_error() calls during execution\n- [ ] Completes in \u003c 60 seconds headless\n- [ ] Prerequisite chain fully validated: any missing prereq causes test failure","status":"open","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:44Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:15Z","labels":["singularity","testing","victory"],"dependencies":[{"issue_id":"roots-of-reason-jup.4","depends_on_id":"roots-of-reason-ifh.6","type":"blocks","created_at":"2026-03-01T12:09:11Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jup.4","depends_on_id":"roots-of-reason-jup","type":"parent-child","created_at":"2026-03-01T11:59:44Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jup.4","depends_on_id":"roots-of-reason-jup.2","type":"blocks","created_at":"2026-03-01T12:09:13Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jup.5","title":"Wonder victory countdown with defense mechanics test","description":"Integration test for Wonder victory: build Wonder, verify 600-second countdown starts, verify countdown pauses if Wonder takes damage below threshold, verify countdown resets if Wonder is destroyed, verify victory triggers on countdown completion. Test with AI attacks during countdown.","acceptance_criteria":"- [ ] Build Wonder → 600-second countdown starts (verified via victory_manager timer)\n- [ ] Countdown visible to all players on HUD\n- [ ] Wonder takes damage → countdown PAUSES if HP \u003c 50%\n- [ ] Wonder HP restored above 50% → countdown RESUMES\n- [ ] Wonder destroyed → countdown RESETS (victory canceled)\n- [ ] Countdown reaches 0 → Wonder victory triggers\n- [ ] GdUnit4 test: Wonder build → countdown starts\n- [ ] GdUnit4 test: damage below threshold pauses countdown\n- [ ] GdUnit4 test: destruction resets countdown\n- [ ] GdUnit4 test: full countdown → victory","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:16Z","labels":["testing","victory","wonder"],"dependencies":[{"issue_id":"roots-of-reason-jup.5","depends_on_id":"roots-of-reason-ifh.6","type":"blocks","created_at":"2026-03-01T12:09:12Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jup.5","depends_on_id":"roots-of-reason-jup","type":"parent-child","created_at":"2026-03-01T11:59:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jup.6","title":"Knowledge Burning cascading effects test","description":"Test Knowledge Burning edge cases: losing Town Center causes loss of most recent tech — verify correct tech is removed, verify effects are rolled back, verify unit upgrades from lost tech are reverted, verify re-researching the lost tech works correctly. Test cascading scenario: lose TC while in Singularity Age.","acceptance_criteria":"- [ ] Destroy TC → most recent tech lost (singularity_regression.gd)\n- [ ] Lost tech: bonuses immediately reverted (unit stats, eco multipliers)\n- [ ] Existing units/buildings from lost unlock remain but no new production\n- [ ] Re-research at full cost with all prereqs still met\n- [ ] Age advancement cannot be lost\n- [ ] Cascade test: lose TC in Singularity Age → most recent Singularity tech lost\n- [ ] If Transformer Architecture lost → AGI Core construction PAUSES\n- [ ] GdUnit4 test: TC destroyed → last tech removed, bonuses reverted\n- [ ] GdUnit4 test: age advancement NOT lost\n- [ ] GdUnit4 test: re-researching lost tech restores bonuses\n- [ ] GdUnit4 test: Transformer Architecture loss pauses AGI Core","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:16Z","labels":["regression","singularity","testing"],"dependencies":[{"issue_id":"roots-of-reason-jup.6","depends_on_id":"roots-of-reason-ifh.6","type":"blocks","created_at":"2026-03-01T12:09:12Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jup.6","depends_on_id":"roots-of-reason-jup","type":"parent-child","created_at":"2026-03-01T11:59:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jup.7","title":"Endgame pacing balance audit: Information → Singularity Age timing","description":"Audit and balance the endgame pacing: time from Information Age entry to Singularity victory should be 15-25 minutes of active gameplay. Review: research time multipliers (2.5x and 5.0x), Knowledge generation rates, Singularity chain tech costs, GPU Foundry/Transformer Lab/AGI Core build times. Adjust if needed. Document findings.","acceptance_criteria":"- [ ] Document expected times: Bronze→Iron, Iron→Medieval, Medieval→Industrial, Industrial→Information, Information→Singularity\n- [ ] Information→Singularity target: 15-25 minutes of active gameplay\n- [ ] Measure actual times with standard play (no debug fast-forward)\n- [ ] If Singularity is too fast: increase AGI Core research time or GPU Foundry/Transformer Lab build times\n- [ ] If Singularity is too slow: decrease Knowledge costs or increase age 6-7 research multipliers\n- [ ] China civ reaches Singularity at most 3 minutes faster than generic (per ADR-022)\n- [ ] Maya civ reaches Singularity Age at most 2 minutes faster\n- [ ] Findings documented in bead notes\n- [ ] Any balance changes applied to data/ JSON files with commit message referencing this bead","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:46Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:17Z","labels":["balance","endgame","pacing"],"dependencies":[{"issue_id":"roots-of-reason-jup.7","depends_on_id":"roots-of-reason-jup","type":"parent-child","created_at":"2026-03-01T11:59:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jup.8","title":"Singularity cinematic VFX polish and camera integration","description":"Polish the Singularity victory cinematic (singularity_cinematic_vfx.gd, 263 lines): smooth camera pan to AGI Core, particle effects escalation, screen flash, transition to victory screen. Ensure it works at all zoom levels and camera positions. Add optional camera shake.","acceptance_criteria":"- [ ] Camera smoothly pans to AGI Core building on victory trigger\n- [ ] Particle effects escalate over 5 seconds (glow → sparks → energy wave)\n- [ ] Screen flash at peak\n- [ ] Camera shake: subtle (0.5s) at moment of \"activation\"\n- [ ] Transition to victory_screen.gd after 8-second cinematic\n- [ ] Works at all zoom levels (camera zooms to AGI Core first)\n- [ ] Works regardless of camera position when victory fires\n- [ ] No visual artifacts at map edge\n- [ ] GdUnit4 test: cinematic completes without errors in headless mode","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:47Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:17Z","labels":["polish","singularity","vfx"],"dependencies":[{"issue_id":"roots-of-reason-jup.8","depends_on_id":"roots-of-reason-jup","type":"parent-child","created_at":"2026-03-01T11:59:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jz4","title":"Fix garrison system: move-first, ungarrison UI, building defense categories","description":"Villagers garrison instantly at any distance (should walk first). No ungarrison command exists for players. Buildings need defense categories: defensive buildings fire arrows, houses just hide villagers. Command panel needs ungarrison button when building selected.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T23:18:43Z","created_by":"Dave Tashner","updated_at":"2026-02-28T23:40:37Z","closed_at":"2026-02-28T23:40:37Z","close_reason":"Completed in PR #213","labels":["buildings","garrison","ui"]}
{"id":"roots-of-reason-jzk","title":"Epic: Maya Civilization","description":"Add Maya as a new playable civilization. Maya is a knowledge/calendar-focused civ with bonuses to Knowledge generation and unique age advancement mechanics. Unique building: Observatory (replaces Library, generates Knowledge + reveals map in radius). Unique unit: Atlatlist (replaces Archer, short-range javelin thrower with bonus vs infantry). Unique techs: Long Count Calendar (age advancement cost -15%), Star Chart (map reveal + LOS bonus). Includes all art assets, data JSON files, civ bonus integration, and tests.","notes":"Balance framework: ADR-022 (roots-of-reason-kif). Maya fills knowledge economy niche. Anti-dominance: research+knowledge only. Age rush guard: Maya reaches Singularity Age at most 2 minutes faster.","spec_id":"roots-of-reason-kif","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:55:40Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:43Z","labels":["art","civilization","data","maya"],"dependencies":[{"issue_id":"roots-of-reason-jzk","depends_on_id":"roots-of-reason-kif","type":"blocks","created_at":"2026-03-01T12:08:55Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jzk.1","title":"Maya: civilization data JSON (bonuses, unique unit/building/tech definitions)","description":"Create data/civilizations/maya.json with: civ name, description, bonuses (+15% Knowledge generation, -15% age advancement cost). Unique building: Observatory (replaces Library, 0.625/s Knowledge + reveals map in 15-tile radius). Unique unit: Atlatlist (replaces Archer, range 3, bonus vs infantry 2.0x, faster move speed). Unique techs: Long Count Calendar (-15% age cost), Star Chart (+25% LOS for all units). Create corresponding data/ JSON files.","acceptance_criteria":"- [ ] data/civilizations/maya.json: name, description, bonuses, unique_building, unique_unit, unique_techs\n- [ ] Passive bonuses: knowledge_rate_multiplier=1.15, age_advancement_cost_multiplier=0.85\n- [ ] data/buildings/observatory.json: footprint 2x2, replaces library, knowledge_rate=0.625, map_reveal_radius=15\n- [ ] data/units/atlatlist.json: population_cost=1, hp=28, attack=6, defense=0, speed=1.4, range=3, bonus_vs_infantry=2.0\n- [ ] data/tech/long_count_calendar.json: age=bronze, effect=age_cost_multiplier=0.85, exclusive_to=maya\n- [ ] data/tech/star_chart.json: age=iron, effect=unit_los_bonus=+25%, exclusive_to=maya\n- [ ] Atlatlist tradeoff: range=3 (vs archer range=5), higher attack (6 vs 5), bonus vs infantry not cavalry\n- [ ] ADR-022 compliance: bonuses in research + knowledge only\n- [ ] Age rush check: Maya reaches Singularity at most 2 minutes faster (documented)\n- [ ] All JSON passes data-check","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:20Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:45Z","labels":["civilization","data","maya"],"dependencies":[{"issue_id":"roots-of-reason-jzk.1","depends_on_id":"roots-of-reason-jzk","type":"parent-child","created_at":"2026-03-01T11:57:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jzk.2","title":"Maya: CivBonusManager integration and tests","description":"Integrate Maya into CivBonusManager. Apply passive bonuses (Knowledge gen, age advancement cost). Register unique building/unit replacements. Handle Observatory map reveal radius mechanic. Write GdUnit4 tests.","acceptance_criteria":"- [ ] CivBonusManager.apply_bonuses(\"maya\") sets knowledge rate to 1.15x\n- [ ] CivBonusManager applies -15% age advancement cost\n- [ ] Maya Library replaced by Observatory\n- [ ] Maya Archer replaced by Atlatlist\n- [ ] Observatory reveals terrain in 15-tile radius (not units, per ADR-022)\n- [ ] GdUnit4 test: Maya age advancement cost = 425 food (500 * 0.85) for Bronze Age\n- [ ] GdUnit4 test: Observatory reveals tiles in radius\n- [ ] GdUnit4 test: Atlatlist bonus vs infantry = 2.0x (attack 12 vs infantry)\n- [ ] GdUnit4 test: Atlatlist loses to cavalry (no cavalry bonus, short range)\n- [ ] GdUnit4 test: Long Count Calendar stacks with Maya passive (-15% * -15% is not -30%, verify correct math)","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:20Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:46Z","labels":["civilization","maya","testing"],"dependencies":[{"issue_id":"roots-of-reason-jzk.2","depends_on_id":"roots-of-reason-jzk","type":"parent-child","created_at":"2026-03-01T11:57:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jzk.3","title":"Maya: Observatory unique building sprites (idle, construction, destruction)","description":"Generate Observatory building sprites: idle (2x2 footprint, 256x192 canvas), 4-frame construction sequence, 3-frame destruction. Mesoamerican stepped pyramid style with observatory dome on top. Magenta player-color mask.","acceptance_criteria":"- [ ] Source: assets/sprites/buildings/observatory_01.png\n- [ ] Game-ready: assets/sprites/buildings/placeholder/observatory.png\n- [ ] Canvas: 256x192px (2x2 per ADR-008)\n- [ ] Construction: 4 frames\n- [ ] Destruction: 3 frames\n- [ ] Mesoamerican stepped pyramid with observatory dome/opening on top\n- [ ] Magenta mask on building face\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:21Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:47Z","labels":["art","buildings","maya"],"dependencies":[{"issue_id":"roots-of-reason-jzk.3","depends_on_id":"roots-of-reason-jzk","type":"parent-child","created_at":"2026-03-01T11:57:21Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jzk.3","depends_on_id":"roots-of-reason-jzk.1","type":"blocks","created_at":"2026-03-01T12:09:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jzk.4","title":"Maya: Atlatlist unit sprites (idle, walk, attack, death — 8 directions)","description":"Generate Atlatlist javelin thrower sprites: idle (8 dir, 2 frames), walk (8 dir, 4 frames), attack/throw (8 dir, 3 frames), death (8 dir, 2 frames). Mesoamerican warrior with atlatl spear-thrower. Player-color mask.","acceptance_criteria":"- [ ] Asset path: assets/sprites/units/atlatlist/atlatlist_{anim}_{dir}_{frame}.png\n- [ ] 8 directions per ADR-002\n- [ ] Idle: 8×2, Walk: 8×4, Attack/throw: 8×3, Death: 8×2\n- [ ] ~52-56px tall per ADR-008\n- [ ] Mesoamerican warrior with atlatl spear-thrower device, feathered headdress\n- [ ] Magenta mask on clothing/armor\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:22Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:47Z","labels":["art","maya","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-jzk.4","depends_on_id":"roots-of-reason-jzk","type":"parent-child","created_at":"2026-03-01T11:57:21Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jzk.4","depends_on_id":"roots-of-reason-jzk.1","type":"blocks","created_at":"2026-03-01T12:09:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jzk.5","title":"Maya: villager variant sprites (idle, walk, gather, build — 8 directions)","description":"Generate Maya-themed villager sprites: idle (8 dir, 2 frames), walk (8 dir, 4 frames), gather (8 dir, 2 frames), build (8 dir, 2 frames). Mesoamerican clothing style. Player-color mask.","acceptance_criteria":"- [ ] Asset path: assets/sprites/units/villager_maya/villager_maya_{anim}_{dir}_{frame}.png\n- [ ] 8 directions, Idle: 8×2, Walk: 8×4, Gather: 8×2, Build: 8×2\n- [ ] ~48px tall per ADR-008\n- [ ] Mesoamerican clothing style, distinct from default\n- [ ] Magenta mask on clothing\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:22Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:48Z","labels":["art","maya","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-jzk.5","depends_on_id":"roots-of-reason-jzk","type":"parent-child","created_at":"2026-03-01T11:57:22Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jzk.5","depends_on_id":"roots-of-reason-jzk.1","type":"blocks","created_at":"2026-03-01T12:09:06Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-jzk.6","title":"Maya: civ selection UI card with unique unit/building art","description":"Create civ selection card art for Maya showing: civ icon/banner, Observatory illustration, Atlatlist illustration, bonus text layout. Integrate into civ_card_builder.gd and civ_selection_screen.gd.","acceptance_criteria":"- [ ] Maya in civ_selection_screen.gd\n- [ ] Card: civ name, bonuses, Observatory art, Atlatlist art\n- [ ] Bonus text matches JSON\n- [ ] Layout matches existing cards\n- [ ] GdUnit4 test: valid card for \"maya\"","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:23Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:48Z","labels":["art","maya","ui"],"dependencies":[{"issue_id":"roots-of-reason-jzk.6","depends_on_id":"roots-of-reason-jzk","type":"parent-child","created_at":"2026-03-01T11:57:23Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jzk.6","depends_on_id":"roots-of-reason-jzk.1","type":"blocks","created_at":"2026-03-01T12:09:06Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-jzk.6","depends_on_id":"roots-of-reason-jzk.2","type":"blocks","created_at":"2026-03-01T12:09:07Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-k6m","title":"Generate terrain tile art: water","description":"Generate 4 water tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nCalm open water with gentle surface ripples and subtle light reflections. Slight transparency showing depth. Soft sunlight from the upper-left. Colors: medium blues (#5B9BD5, #4A8BC5, #6BAAE0).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/water_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:21:01Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:21:01Z","labels":["art"]}
{"id":"roots-of-reason-kif","title":"ADR-022: Civilization Expansion — From 3 to 7 Civilizations","description":"## Context\n\nADR-004 established 3 launch civilizations (Mesopotamia, Rome, Polynesia) with distinct playstyles: builder, military, naval. The game is expanding to 7 civilizations. New additions must maintain the strategic triangle balance, offer genuinely different gameplay, and not create dominant strategies that invalidate existing civs.\n\n## Decision\n\n### Why These 4 Civilizations\n\n**Selection criteria:** Each new civ must (a) fill an unoccupied strategic niche, (b) have rich historical identity for the Stone→Singularity timeline, (c) not duplicate an existing civ's core bonus category.\n\n| New Civ | Niche | Justification |\n|---------|-------|---------------|\n| **Egypt** | Wonder/Monument Builder | Stone gathering + building HP bonuses create a defensive/wonder rush alternative to Mesopotamia's speed-focused building. Egypt trades build speed for durability. |\n| **China** | Research Accelerator | +20% research speed is the only civ directly bonusing the Singularity win condition. High risk/high reward — faster tech but no military/economy bonus. |\n| **Vikings** | Raid/Hybrid | Infantry attack + naval speed creates aggressive early-mid game pressure. Only civ that's strong on both land and water simultaneously. |\n| **Maya** | Knowledge Economy | -15% age advancement cost + Knowledge gen creates the fastest age progression. Weak military identity (short-range unique unit) — trades combat for speed. |\n\n### Balance Framework — 7-Civ Matrix\n\n**Core constraint:** No civ should have \u003e55% win rate vs any other civ in equal-skill matchups.\n\n**Playstyle taxonomy (each civ occupies exactly one primary + one secondary):**\n- Economy: Mesopotamia (primary), Egypt (secondary)\n- Military: Rome (primary), Vikings (secondary)\n- Naval: Polynesia (primary), Vikings (secondary)\n- Research: China (primary), Maya (secondary)\n- Defense: Egypt (primary), Rome (secondary)\n- Aggression: Vikings (primary), Polynesia (secondary)\n\n**Balance levers per civ (tunable in JSON, never hardcoded):**\n- Passive bonus magnitude (e.g., +15% build speed)\n- Unique unit stat delta from base unit (e.g., Berserker HP vs Infantry HP)\n- Unique building economic advantage (e.g., Ziggurat's 0.75/s vs Library's 0.5/s)\n- Unique tech power level and age availability\n\n**Anti-dominance rules:**\n1. No civ gets bonuses in more than 2 categories (e.g., Vikings: military + naval, NOT military + naval + economy)\n2. Every unique unit must lose to at least one standard counter unit (e.g., Berserker still loses to massed Archers)\n3. Research-boosting civs (China, Maya) must not reduce Singularity victory time by more than 20% vs a generic civ at equal play\n4. No unique ability can be strictly better than the base unit it replaces — there must be a tradeoff (e.g., Chu-Ko-Nu: faster fire but lower per-hit damage)\n\n### Unique Ability Safety Analysis\n\n| Ability | Risk | Mitigation |\n|---------|------|------------|\n| Berserker rage (+50% attack at \u003c30% HP) | Could snowball in large battles | Rage is per-unit, not army-wide. At \u003c30% HP, unit dies in 1-2 more hits. Net DPS increase is ~15% averaged over full combat, not 50%. |\n| China +20% research speed | Singularity rush too fast | Research speed bonus is additive with other bonuses, not multiplicative. At Singularity Age (5.0x multiplier), 20% base bonus becomes relatively smaller. Testing target: China Singularity victory at most 3 minutes faster than generic civ. |\n| Maya -15% age cost | Age rushing to unlock late techs early | Cost reduction applies to resource cost only, not prerequisite techs. Still must research all prereqs. Testing target: Maya reaches Singularity Age at most 2 minutes faster. |\n| Observatory map reveal | Free intel eliminates fog advantage | Radius limited to 15 tiles (vs full map). Does not reveal moving units, only terrain. Opponent can still surprise from outside radius. |\n| War Chariot ranged+melee | Overpowered hybrid unit | Lower HP than pure Cavalry, shorter range than Archer. Jack of all trades, master of none. Costs more than either base unit. |\n\n## Consequences\n\n- 7 civs provides enough variety for replayability without ballooning art/test scope beyond feasibility\n- Each civ has a clear strategic identity visible from the selection screen\n- Balance is tunable via JSON — no code changes needed to adjust civ strength\n- Balance audit bead (combat matchup test suite in debug epic) validates anti-dominance rules in CI\n- Future civ additions (post-launch) should follow this same framework and pass the same balance checks","status":"open","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T17:07:44Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:07:44Z","labels":["adr","architecture","balance","civilization"]}
{"id":"roots-of-reason-lfa","title":"Generate wolf attack sprites (8 directions, 3 frames)","description":"Generate wolf_attack_{dir}_{frame}.png for all 8 directions x 3 frames = 24 PNGs. See docs/design/wolf_sprite_prompt.md for prompts and specs.","status":"in_progress","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:42:46Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:42:57Z","labels":["art","sprites","wolf"]}
{"id":"roots-of-reason-lm9","title":"Generate dog idle sprites (8 directions, 2 frames)","description":"Generate dog_idle_{dir}_{frame}.png for all 8 directions x 2 frames = 16 PNGs. Includes magenta collar for player color. See docs/design/wolf_sprite_prompt.md.","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:42:48Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:42:48Z","labels":["art","dog","sprites"]}
{"id":"roots-of-reason-m7p","title":"Epic: UI Polish \u0026 Player Experience","description":"Polish the UI and improve player experience. Includes: first-time player tutorial/tooltips, hotkey remapping UI, settings persistence to disk, in-game unit/building encyclopedia, improved minimap (terrain colors, unit icons), production queue display on selected buildings, unit group assignment (Ctrl+1-9), idle villager finder button, age advancement celebration screen, improved tech tree viewer with search, and notification system polish.","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:03Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:56:03Z","labels":["polish","ui","ux"]}
{"id":"roots-of-reason-m7p.1","title":"First-time player tutorial with guided tooltips","description":"Create a step-by-step tutorial for new players: (1) camera controls, (2) select villager, (3) gather berries, (4) build house, (5) train villager, (6) build barracks, (7) train infantry, (8) research tech, (9) advance age. Use highlight overlays and tooltip arrows pointing to relevant UI elements. Skippable. Saves completion state.","acceptance_criteria":"- [ ] Tutorial triggers on first game start (saved in SettingsManager.tutorial_completed)\n- [ ] 9 guided steps: camera, select villager, gather, build house, train villager, build barracks, train infantry, research tech, advance age\n- [ ] Each step: highlight arrow pointing to target UI element, tooltip text explaining action\n- [ ] Step advances when player completes the action (event-driven, not timer)\n- [ ] Skip button available on every step\n- [ ] Completing or skipping saves state — tutorial never re-triggers\n- [ ] GdUnit4 test: tutorial step 1 highlights camera controls, advances on camera move\n- [ ] Works at all screen resolutions (responsive highlight positioning)","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:20Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:39Z","labels":["tutorial","ui","ux"],"dependencies":[{"issue_id":"roots-of-reason-m7p.1","depends_on_id":"roots-of-reason-m7p","type":"parent-child","created_at":"2026-03-01T11:59:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-m7p.2","title":"Hotkey remapping UI in settings panel","description":"Add hotkey customization to SettingsPanel: display all current keybinds (move camera, select all military, idle villager, etc.), click-to-rebind interface, conflict detection, reset-to-defaults button. Persist custom bindings via SettingsManager.","acceptance_criteria":"- [ ] Hotkey section in settings_panel.gd shows all bindable actions\n- [ ] Actions: move camera (WASD), select all military (Ctrl+A), idle villager (.), build menu (B), etc.\n- [ ] Click on a binding → enters \"press key\" mode → captures next keypress\n- [ ] Conflict detection: warns if key already bound to another action\n- [ ] Reset to defaults button restores original bindings\n- [ ] Bindings persisted via SettingsManager → user://settings.json\n- [ ] GdUnit4 test: rebinding key updates InputMap\n- [ ] GdUnit4 test: conflict detection prevents duplicate bindings","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:21Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:40Z","labels":["hotkeys","settings","ui"],"dependencies":[{"issue_id":"roots-of-reason-m7p.2","depends_on_id":"roots-of-reason-m7p","type":"parent-child","created_at":"2026-03-01T11:59:21Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-m7p.2","depends_on_id":"roots-of-reason-m7p.3","type":"blocks","created_at":"2026-03-01T12:09:17Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-m7p.3","title":"Settings persistence: save/load SettingsManager state to disk","description":"Implement SettingsManager save/load to user://settings.json. Save on change, load on startup. Cover: audio volumes, graphics settings, difficulty, hotkey bindings, tutorial completion state. Handle missing/corrupt files gracefully with defaults.","acceptance_criteria":"- [ ] SettingsManager saves to user://settings.json on any setting change\n- [ ] Loads from user://settings.json on startup (_ready)\n- [ ] Saved fields: audio volumes (master, music, sfx, ambient, ui), graphics settings, difficulty, hotkey bindings, tutorial_completed\n- [ ] Missing file → create with defaults (no crash)\n- [ ] Corrupt JSON → push_warning, use defaults\n- [ ] GdUnit4 test: change volume → save → reload → volume matches\n- [ ] GdUnit4 test: missing file creates defaults\n- [ ] GdUnit4 test: corrupt file recovers gracefully","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:22Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:40Z","labels":["persistence","settings","ui"],"dependencies":[{"issue_id":"roots-of-reason-m7p.3","depends_on_id":"roots-of-reason-m7p","type":"parent-child","created_at":"2026-03-01T11:59:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-m7p.4","title":"Unit group assignment (Ctrl+1-9) and recall (1-9)","description":"Implement control groups: Ctrl+1-9 assigns selected units to group, pressing 1-9 selects that group, double-tap 1-9 centers camera on group. Display group indicators on assigned units. Persist groups during session (not across save/load). Show group badges in command panel.","acceptance_criteria":"- [ ] Ctrl+1 through Ctrl+9 assigns selected units to group number\n- [ ] Pressing 1-9 selects that group (clears previous selection)\n- [ ] Double-tap 1-9 centers camera on group centroid\n- [ ] Group indicator badge (number) displayed above assigned units\n- [ ] Reassigning (Ctrl+N with new selection) replaces previous group\n- [ ] Dead units automatically removed from groups\n- [ ] Groups persist during session but NOT across save/load\n- [ ] Command panel shows group badge when group is selected\n- [ ] GdUnit4 test: assign 3 units to group 1, press 1, all 3 selected\n- [ ] GdUnit4 test: unit death removes from group","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:23Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:41Z","labels":["controls","ui","units"],"dependencies":[{"issue_id":"roots-of-reason-m7p.4","depends_on_id":"roots-of-reason-m7p","type":"parent-child","created_at":"2026-03-01T11:59:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-m7p.5","title":"Idle villager finder button and hotkey","description":"Add 'Find Idle Villager' button to HUD (and hotkey, default: period/dot key). Cycles through idle villagers, centering camera and selecting each one. Show idle villager count badge on button. Helps players identify unproductive workers.","acceptance_criteria":"- [ ] HUD button with idle villager icon + count badge (e.g., \"3\")\n- [ ] Hotkey: period/dot key (configurable via hotkey remapping)\n- [ ] Each press cycles to next idle villager (round-robin)\n- [ ] Centers camera on idle villager and selects them\n- [ ] Badge updates in real-time as villagers become idle/busy\n- [ ] Idle = not gathering, not building, not moving (state == IDLE)\n- [ ] GdUnit4 test: 3 idle villagers → press dot 3 times → each selected once\n- [ ] GdUnit4 test: badge shows correct count after villager starts gathering","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:23Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:42Z","labels":["economy","ui","villager"],"dependencies":[{"issue_id":"roots-of-reason-m7p.5","depends_on_id":"roots-of-reason-m7p","type":"parent-child","created_at":"2026-03-01T11:59:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-m7p.6","title":"Production queue display on selected building info panel","description":"When a building with a production queue is selected, show the queue contents in the info panel: current training unit with progress bar, queued units as icons, cancel button per queued item. Show remaining time estimate. Works for Barracks, Dock, Town Center, Castle, Factory.","acceptance_criteria":"- [ ] Selected building shows production queue in info_panel.gd\n- [ ] Current training unit: icon + name + progress bar (% complete)\n- [ ] Queued units: row of icons (up to queue max)\n- [ ] Right-click or cancel button on queued item: removes from queue, refunds cost\n- [ ] Estimated completion time shown (based on train_time and bonuses)\n- [ ] Queue display updates in real-time\n- [ ] GdUnit4 test: queue 3 infantry, info panel shows 3 icons\n- [ ] GdUnit4 test: cancel queued unit refunds resources","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:24Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:42Z","labels":["buildings","production","ui"],"dependencies":[{"issue_id":"roots-of-reason-m7p.6","depends_on_id":"roots-of-reason-m7p","type":"parent-child","created_at":"2026-03-01T11:59:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-m7p.7","title":"In-game encyclopedia: unit and building stats viewer","description":"Add an in-game encyclopedia accessible from pause menu: browse all units (stats, counters, cost), all buildings (stats, production), all techs (effects, prerequisites), all civs (bonuses, uniques). Data-driven from existing JSON files. Searchable. Shows locked items grayed out.","acceptance_criteria":"- [ ] Accessible from pause menu → \"Encyclopedia\" button\n- [ ] Tabs: Units, Buildings, Technologies, Civilizations\n- [ ] Each entry shows: icon, name, stats, description, cost, prerequisites\n- [ ] Locked items (not yet researched/unlocked) shown grayed out with \"Requires: X\" text\n- [ ] Search bar filters entries by name\n- [ ] Data loaded from existing JSON files (data/units/, data/buildings/, data/tech/, data/civilizations/)\n- [ ] GdUnit4 test: encyclopedia loads all unit entries from DataLoader\n- [ ] GdUnit4 test: search filters entries correctly","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:24Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:43Z","labels":["encyclopedia","reference","ui"],"dependencies":[{"issue_id":"roots-of-reason-m7p.7","depends_on_id":"roots-of-reason-m7p","type":"parent-child","created_at":"2026-03-01T11:59:24Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-m7p.8","title":"Improved minimap with terrain colors and unit dots","description":"Enhance minimap rendering: terrain colors (green=grass, yellow=desert, blue=water, gray=mountain, brown=forest), player-colored dots for units/buildings, fog of war darkening, camera viewport rectangle, click-to-move camera. Current minimap exists but needs visual polish.","acceptance_criteria":"- [ ] Terrain colors: green=grass, dark green=forest, yellow=desert, blue=water, gray=mountain, brown=dirt\n- [ ] Player-colored dots for units (size: 2px) and buildings (size: 4px)\n- [ ] Fog of war: unexplored areas dark, explored but not visible areas dim\n- [ ] Camera viewport drawn as white rectangle\n- [ ] Click on minimap moves camera to that position\n- [ ] Right-click on minimap issues move command to selected units\n- [ ] Updates at 10fps (not every frame) to manage performance\n- [ ] GdUnit4 test: minimap click moves camera","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:25Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:43Z","labels":["minimap","ui"],"dependencies":[{"issue_id":"roots-of-reason-m7p.8","depends_on_id":"roots-of-reason-m7p","type":"parent-child","created_at":"2026-03-01T11:59:25Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-m7p.9","title":"Age advancement celebration screen","description":"When a player advances to a new age, show a brief celebration overlay: age name with dramatic reveal, new unlocks summary (buildings, units, techs now available), civ-specific flavor text. Auto-dismiss after 5 seconds or click to close. Pause game briefly during display.","acceptance_criteria":"- [ ] Triggers on EventBus.age_advanced signal\n- [ ] Shows age name with dramatic text reveal animation\n- [ ] Lists newly unlocked: buildings (icons + names), units, technologies\n- [ ] Civ-specific flavor text from data/civilizations/{civ}.json\n- [ ] Game pauses during display\n- [ ] Auto-dismisses after 5 seconds OR click/keypress to close\n- [ ] GdUnit4 test: age advancement triggers celebration screen\n- [ ] GdUnit4 test: dismissal resumes game","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:26Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:44Z","labels":["ages","celebration","ui"],"dependencies":[{"issue_id":"roots-of-reason-m7p.9","depends_on_id":"roots-of-reason-m7p","type":"parent-child","created_at":"2026-03-01T11:59:25Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-m8j","title":"Generate missing .import files for art assets","description":"New PNGs for terrain variants, tree sprites, etc. lack .import sidecars so Godot load() returns null","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:04:59Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:07:46Z","closed_at":"2026-02-28T05:07:46Z","close_reason":"Completed in PR #167"}
{"id":"roots-of-reason-m8x","title":"Add ror process-sprite command and asset processing docs","description":"Add tools/process_sprite.py for downscaling source building sprites to game-ready assets with magenta mask preservation. Add ror CLI integration, tests, and CLAUDE.md documentation.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T21:47:15Z","created_by":"Dave Tashner","updated_at":"2026-02-28T21:55:06Z","closed_at":"2026-02-28T21:55:06Z","close_reason":"Completed in PR #203","labels":["art","docs","tools"]}
{"id":"roots-of-reason-mgt","title":"Epic 1b: Quality Pipeline \u0026 CI Infrastructure","description":"Build the CI/CD and testing infrastructure that every subsequent epic depends on. This is not optional polish — it is foundational. No gameplay code merges without passing quality gates.\n\nThe pipeline covers: unit tests, integration tests, coverage enforcement, static analysis, headless scene validation, playability smoke tests, screenshot regression, performance budgets, and export verification.\n\nMust be completed alongside or immediately after Epic 1 (Project Foundation), before any gameplay epics begin.","status":"closed","priority":0,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:35Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:46Z","closed_at":"2026-02-22T22:32:46Z","close_reason":"Core quality pipeline complete (lint, test, coverage gate). Remaining tasks deferred.","labels":["ci","epic","quality"],"dependencies":[{"issue_id":"roots-of-reason-mgt","depends_on_id":"roots-of-reason-81x","type":"blocks","created_at":"2026-02-22T14:53:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.1","title":"Integrate GdUnit4 test framework with project","description":"Install and configure GdUnit4 (https://github.com/MikeSchulworking/gdUnit4) as the test framework.\n\nAcceptance criteria:\n- GdUnit4 addon installed in addons/gdUnit4/\n- Test directory structure: tests/ mirroring scripts/ (e.g., tests/autoloads/test_game_manager.gd)\n- Sample test file that passes: test instantiating a Node, asserting a property\n- Can run tests locally via Godot editor and via CLI (godot --headless --script)\n- Test runner outputs JUnit XML for CI consumption\n- Document test conventions in CONTRIBUTING.md (naming, file layout, assertion style)","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:35Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:50:59Z","closed_at":"2026-02-22T21:50:59Z","close_reason":"Completed in PR #1","labels":["ci","story","testing"],"dependencies":[{"issue_id":"roots-of-reason-mgt.1","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.10","title":"Performance benchmark suite with regression detection","description":"Create automated performance benchmarks that detect regressions in CI. Scenarios: (1) Map rendering: 128x128 map, measure frame time with camera pan. (2) Unit pathfinding: 50 units simultaneously, measure completion time. (3) Combat: 100 units in melee, measure frame time. (4) Economy: 50 villagers gathering, measure per-frame cost. (5) Scene load time. Results saved as JSON artifacts. Compare against previous main branch run. Fail PR if any benchmark regresses more than 15%. Budget targets: map render \u003c16ms (60fps), 100 units \u003c16ms, scene load \u003c3s. Framework created now, scenarios added as systems are built.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:34Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:42Z","closed_at":"2026-02-22T22:32:42Z","close_reason":"Deferred — not blocking core game loop","labels":["ci","performance","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.10","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.2","title":"Set up GitHub Actions CI with Godot headless runner","description":"Create .github/workflows/ci.yml that runs on every push and PR.\n\nPipeline stages (in order):\n1. Checkout + cache Godot binary\n2. Import project (godot --headless --import)\n3. Run gdlint (static analysis)\n4. Run gdformat --check (formatting)\n5. Run GdUnit4 tests with coverage\n6. Export builds (macOS + Windows)\n7. Upload build artifacts\n\nUse official Godot Linux headless binary. Pin exact Godot version (e.g., 4.3-stable).\nCache .godot/imported/ for faster reimports.\nFail fast on lint/format, don't waste time on tests if code is malformatted.\n\nAcceptance criteria:\n- CI passes on clean main branch\n- CI fails when a test fails\n- CI fails when lint/format fails\n- Build artifacts downloadable from Actions UI","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:36Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:51:00Z","closed_at":"2026-02-22T21:51:00Z","close_reason":"Completed in PR #1","labels":["ci","github-actions","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.2","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.3","title":"Export validation — verify builds launch without crash","description":"CI builds macOS and Windows exports and verifies they run.\n\nRequirements:\n- Export macOS build (.app bundle or .zip)\n- Export Windows build (.exe + .pck)\n- For each platform: launch exported binary in headless mode, verify it starts without crash\n- Validate that exported builds contain all expected resources (no missing .import files)\n- Upload passing builds as GitHub Actions artifacts (downloadable)\n- Use matrix strategy: one job per platform\n- macOS: runs on macos-latest runner\n- Windows: runs on windows-latest runner (or Linux + Wine for cost savings)\n\nAcceptance criteria:\n- Both platform builds exported successfully\n- Both pass headless launch smoke test\n- Artifacts available for download from CI run","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:36Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:40Z","closed_at":"2026-02-22T22:32:40Z","close_reason":"Deferred — not blocking core game loop","labels":["ci","export","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.3","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:36Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.4","title":"PR quality gate — required checks and branch protection","description":"Configure GitHub branch protection and required status checks.\n\nRequirements:\n- Branch protection on main: require PR, require CI pass, require 1 approval (or auto-approve for solo dev)\n- Required status checks: lint, format, tests, coverage threshold, export builds\n- No direct push to main\n- PR template (.github/pull_request_template.md) with checklist:\n  [ ] Tests added/updated for changes\n  [ ] Coverage threshold met\n  [ ] No lint warnings\n  [ ] Playability tests pass\n  [ ] Screenshots updated (if UI changed)\n- Auto-label PRs based on path (e.g., scripts/combat/ → 'combat' label)\n- Status checks must pass before merge button is enabled\n\nThis is the enforcement layer that makes all other CI work meaningful.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:37Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:51:06Z","closed_at":"2026-02-22T21:51:06Z","close_reason":"Completed in PR #1 — branch protection + required checks wired","labels":["branch-protection","ci","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.4","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:37Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.4","depends_on_id":"roots-of-reason-mgt.2","type":"blocks","created_at":"2026-02-22T14:53:40Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.4","depends_on_id":"roots-of-reason-mgt.5","type":"blocks","created_at":"2026-02-22T14:58:40Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.4","depends_on_id":"roots-of-reason-mgt.6","type":"blocks","created_at":"2026-02-22T14:58:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.5","title":"Enforce code coverage threshold at 80% in CI","description":"Configure GdUnit4 coverage reporting and enforce minimum thresholds. GdUnit4 generates coverage data for all scripts in scripts/ and autoloads/. Coverage report output as Cobertura XML or similar CI-parseable format. GitHub Actions step fails PR if below 90% line coverage. Coverage summary posted as PR comment. Exclude test files, addons/, and generated code from coverage calculation. Coverage badge in README. The 90% threshold applies to new/changed files AND overall project coverage.","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:56Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:29:48Z","closed_at":"2026-02-22T22:29:48Z","close_reason":"Completed in PR #4","labels":["ci","coverage","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.5","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:55Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.5","depends_on_id":"roots-of-reason-mgt.1","type":"blocks","created_at":"2026-02-22T14:58:38Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.6","title":"Configure gdtoolkit for linting and formatting","description":"Install and configure gdtoolkit (gdlint + gdformat) for static analysis. Create .gdlintrc config file with project conventions (max line length, naming rules). Create .gdformatrc for auto-formatting. gdlint runs in CI and blocks PRs with warnings. gdformat --check runs in CI and blocks unformatted code. Zero warnings policy: no suppressions without code comment explaining why. gdtoolkit is pip-installable.","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:02Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:51:01Z","closed_at":"2026-02-22T21:51:01Z","close_reason":"Completed in PR #1","labels":["ci","lint","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.6","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.7","title":"Headless scene smoke tests — validate all scenes load","description":"Create a test harness that instantiates every .tscn scene file in headless mode and verifies no errors. Script discovers all .tscn files in scenes/. For each scene: instantiate, add to tree, wait one frame, verify no errors in log. Catches: missing dependencies, broken node references, invalid resource paths, script errors. Runs as part of CI test suite. New scenes automatically included. This is the cheapest high-value test.","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:09Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:51:02Z","closed_at":"2026-02-22T21:51:02Z","close_reason":"Completed in PR #1","labels":["ci","smoke-test","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.7","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:09Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.7","depends_on_id":"roots-of-reason-mgt.1","type":"blocks","created_at":"2026-02-22T14:58:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.8","title":"Playability integration test framework","description":"Build a framework for automated gameplay scenario tests that run headless. Support: loading a test map (small, deterministic, no procedural gen), spawning entities at known positions, simulating player actions (select, move, gather, build, attack), advancing game time (simulate N ticks), asserting game state (unit position, resource count, building HP), deterministic replay (seeded RNG). Initial scenarios: (1) Villager gathers wood: spawn villager + tree, command gather, advance time, assert wood \u003e 0. (2) Building construction: spawn villager, place building, advance time, assert building complete. Each subsequent epic adds integration tests for its mechanics. Framework runs in CI, tests complete in under 30 seconds.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:18Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:41Z","closed_at":"2026-02-22T22:32:41Z","close_reason":"Deferred — not blocking core game loop","labels":["ci","integration-test","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.8","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:17Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.8","depends_on_id":"roots-of-reason-mgt.1","type":"blocks","created_at":"2026-02-22T14:58:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.9","title":"Screenshot regression testing for UI scenes","description":"Capture screenshots of UI scenes in CI and compare against committed baselines. Godot headless renders specified scenes to PNG at fixed resolution (1920x1080). Scenes: main menu, in-game HUD (with mock data), tech tree viewer, civ selection. Compare against baseline images in tests/baselines/ using pixel-diff (ImageMagick or similar). Threshold: \u003e1% pixel difference flags PR for visual review. New baselines committed via PR. Diff images uploaded as CI artifacts. Catches: accidental UI layout breaks, font/theme changes, control sizing issues. Framework created now, baselines added as UI is built.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:26Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:41Z","closed_at":"2026-02-22T22:32:41Z","close_reason":"Deferred — not blocking core game loop","labels":["ci","story","visual-regression"],"dependencies":[{"issue_id":"roots-of-reason-mgt.9","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:26Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n1o","title":"Auto-explore unit command (E key)","status":"closed","priority":2,"issue_type":"feature","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T14:35:46Z","created_by":"Dave Tashner","updated_at":"2026-03-01T14:41:31Z","closed_at":"2026-03-01T14:41:31Z","close_reason":"Completed in PR #266"}
{"id":"roots-of-reason-n2n","title":"Fix GameUtils._autoload_cache test isolation leak","description":"Static _autoload_cache dict leaks across tests. clear_autoload_cache exists but never called in test after_test hooks. Add cleanup calls.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T06:40:30Z","closed_at":"2026-02-28T06:40:30Z","close_reason":"Completed in PR #175"}
{"id":"roots-of-reason-n32","title":"Plan combat depth — armor types and damage modifiers","description":"Current damage formula (attack - defense, min 1) is functional but won't create meaningful unit composition decisions beyond rock-paper-scissors. Plan deeper combat math.\n\nAcceptance Criteria:\n- [ ] Evaluate armor type system (e.g., pierce/melee/siege armor vs pierce/melee/siege attack)\n- [ ] Evaluate bonus damage system (e.g., spearmen +8 vs cavalry)\n- [ ] Draft updated damage formula supporting type multipliers\n- [ ] Ensure formula remains data-driven (all multipliers in JSON)\n- [ ] Document in ADR or design doc with worked examples\n- [ ] Compare 3+ engagement scenarios under old vs new formula\n- [ ] No implementation — planning and design document only","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:58:32Z","created_by":"Dave Tashner","updated_at":"2026-02-26T23:36:56Z","closed_at":"2026-02-26T23:36:56Z","close_reason":"Completed in PR #98","labels":["combat","design","planning","task"],"dependencies":[{"issue_id":"roots-of-reason-n32","depends_on_id":"roots-of-reason-fk5","type":"blocks","created_at":"2026-02-22T17:58:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n4x","title":"Epic: Terrain \u0026 Environment Art","description":"Complete the terrain tile art pipeline for all biome types and transitions. Includes: base terrain tiles (grass, dirt, sand, desert, stone, water variants), biome transition tiles, elevation tiles, resource object sprites (trees, berry bushes, gold/stone mines), and environmental props. Each terrain type needs quad tiles with variant coherence for seamless tiling. Also includes forest floor tiles, river tiles, shore blending tiles, and canyon/mountain variants.","notes":"Tile geometry: 128x64px diamond tiles (2:1 ratio) per ADR-002/ADR-008. Unit sprites ~64-80px tall for resources. Color palettes per age per ADR-008. Naming: {terrain}_{variant}_{index}.png. Validate with tools/ror validate-assets.","spec_id":"roots-of-reason-3hk","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:55:53Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:45Z","labels":["art","environment","terrain","tiles"]}
{"id":"roots-of-reason-n4x.1","title":"Generate grass terrain tile variants (4+ variants for seamless tiling)","description":"Generate grass base terrain tile variants: at least 4 quad-tile variants with subtle variation (slightly different grass patterns, occasional flowers, bare patches) for seamless random tiling. Isometric 2D style matching existing tiles.","acceptance_criteria":"- [ ] 4+ grass quad-tile variants at 128x64px (ADR-002 tile geometry)\n- [ ] Subtle variation: slightly different grass patterns, occasional flowers, bare patches\n- [ ] Seamless tiling: any variant placed adjacent to any other variant looks natural\n- [ ] Asset naming: assets/tiles/terrain/grass_quad_01.png through _04.png per ADR-008\n- [ ] Stone/Bronze age palette: earthy greens per ADR-008 color palettes\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:21Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:13Z","labels":["art","terrain","tiles"],"dependencies":[{"issue_id":"roots-of-reason-n4x.1","depends_on_id":"roots-of-reason-n4x","type":"parent-child","created_at":"2026-03-01T11:58:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n4x.2","title":"Generate desert and sand terrain tile variants","description":"Generate desert and sand terrain tiles: 3+ desert variants (cracked earth, dunes, flat sand) and 3+ sand variants (beach sand, coastal, rocky sand). Quad tiles for seamless tiling. Isometric 2D style.","acceptance_criteria":"- [ ] 3+ desert variants: cracked earth, flat dunes, rocky sand (128x64px each)\n- [ ] 3+ sand variants: beach sand, coastal wet sand, rocky sand\n- [ ] Naming: desert_quad_01-03.png, sand_quad_01-03.png\n- [ ] Seamless tiling within each type\n- [ ] Warm palette: yellows, ochres, tans\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:21Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:14Z","labels":["art","terrain","tiles"],"dependencies":[{"issue_id":"roots-of-reason-n4x.2","depends_on_id":"roots-of-reason-n4x","type":"parent-child","created_at":"2026-03-01T11:58:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n4x.3","title":"Generate water terrain tile variants (shallow, deep, river, shore)","description":"Generate water tile variants: shallow water (3 variants), deep water (3 variants), river flow (directional tiles for 4+ flow directions), shore/coastline transition tiles (blending water to land). Animated water surface optional for v2.","acceptance_criteria":"- [ ] Shallow water: 3 variants (128x64px each) — translucent, ground visible underneath\n- [ ] Deep water: 3 variants — opaque dark blue\n- [ ] River: 4 directional flow tiles (N→S, E→W, and bends)\n- [ ] Shore/coastline: transition tiles blending water↔land (8 orientations including corners)\n- [ ] Naming: water_shallow_quad_01-03, water_deep_quad_01-03, river_flow_{dir}_01, shore_{orientation}_01\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:22Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:14Z","labels":["art","terrain","tiles"],"dependencies":[{"issue_id":"roots-of-reason-n4x.3","depends_on_id":"roots-of-reason-n4x","type":"parent-child","created_at":"2026-03-01T11:58:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n4x.4","title":"Generate forest floor and dense forest tiles","description":"Generate forest terrain tiles: forest floor (leaf litter, fallen branches, 3 variants), dense forest canopy (overhead view, 3 variants), forest edge transition tiles (blending forest to grass). Match existing tree resource sprites.","acceptance_criteria":"- [ ] Forest floor: 3 variants (128x64px) — leaf litter, fallen branches, dappled shadow\n- [ ] Dense forest canopy: 3 variants — overhead view of treetops\n- [ ] Forest edge: transition tiles forest↔grass (4 orientations: N, E, S, W edges)\n- [ ] Must visually match existing tree resource sprites in assets/sprites/resources/tree/\n- [ ] Naming: forest_floor_quad_01-03, forest_canopy_quad_01-03, forest_edge_{dir}_01\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:22Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:15Z","labels":["art","terrain","tiles"],"dependencies":[{"issue_id":"roots-of-reason-n4x.4","depends_on_id":"roots-of-reason-n4x","type":"parent-child","created_at":"2026-03-01T11:58:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n4x.5","title":"Generate mountain and elevation terrain tiles","description":"Generate mountain/elevation tiles: mountain peak (impassable, 3 variants), hill/elevation (climbable with movement penalty, 3 variants), cliff edge transitions (4 orientations), canyon tiles. Isometric height variation.","acceptance_criteria":"- [ ] Mountain peak: 3 variants (128x64px) — impassable terrain, rocky/snow-capped\n- [ ] Hill/elevation: 3 variants — climbable with movement penalty\n- [ ] Cliff edge: 4 orientation tiles (N, E, S, W facing cliffs)\n- [ ] Canyon: 2 variants (already have canyon_quad.png, add variant)\n- [ ] Elevation step: 32px vertical offset per level per ADR-008\n- [ ] Naming: mountain_quad_01-03, hill_quad_01-03, cliff_{dir}_01, canyon_quad_01-02\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:23Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:15Z","labels":["art","terrain","tiles"],"dependencies":[{"issue_id":"roots-of-reason-n4x.5","depends_on_id":"roots-of-reason-n4x","type":"parent-child","created_at":"2026-03-01T11:58:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n4x.6","title":"Generate biome transition tiles (grass↔desert, grass↔forest, land↔water)","description":"Generate transition tiles between biomes: grass-to-desert gradient (4 orientations), grass-to-forest edge (4 orientations), land-to-water shoreline (8 orientations including corners). Must blend seamlessly with adjacent base tiles.","acceptance_criteria":"- [ ] Grass↔desert transition: 4 gradient tiles (N, E, S, W facing)\n- [ ] Grass↔forest transition: 4 gradient tiles\n- [ ] Land↔water shoreline: 8 tiles (N, NE, E, SE, S, SW, W, NW including corners)\n- [ ] Each transition tile blends seamlessly with adjacent base tiles\n- [ ] Naming: transition_{from}_{to}_{orientation}.png\n- [ ] validate-assets passes\n- [ ] TileMap autotiling rules updated to use transition tiles","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:24Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:16Z","labels":["art","terrain","tiles"],"dependencies":[{"issue_id":"roots-of-reason-n4x.6","depends_on_id":"roots-of-reason-n4x","type":"parent-child","created_at":"2026-03-01T11:58:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n4x.7","title":"Generate resource node sprites (berry bush stages, gold mine, stone mine)","description":"Generate resource node sprites: berry bush (3 stages: full, half, depleted), gold mine (full, depleted), stone mine (full, depleted), fish deposit (animated shimmer). Isometric 2D style, clearly readable at game zoom levels.","acceptance_criteria":"- [ ] Berry bush: 3 stages (full/red, half/yellow-red, depleted/bare branches) — ~64px tall per ADR-008\n- [ ] Gold mine: full (glittering) and depleted (dark hole) — ~64-80px tall\n- [ ] Stone mine: full (grey boulders) and depleted (rubble) — ~64-80px tall\n- [ ] Fish deposit: animated shimmer (2 frames) — on water tile\n- [ ] Naming: berry_bush_{stage}.png, gold_mine_{stage}.png, stone_mine_{stage}.png, fish_deposit_{frame}.png\n- [ ] validate-assets passes","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:24Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:16Z","labels":["art","resources","sprites"],"dependencies":[{"issue_id":"roots-of-reason-n4x.7","depends_on_id":"roots-of-reason-n4x","type":"parent-child","created_at":"2026-03-01T11:58:24Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n4x.8","title":"Generate tree sprites (multiple species: oak, pine, palm, dead)","description":"Generate tree resource sprite variants: oak/deciduous (3 variants), pine/conifer (3 variants), palm tree (for desert/coastal biome, 2 variants), dead/winter tree (2 variants), tree stump (after harvest). Each needs full quad-tile size. Isometric 2D style.","acceptance_criteria":"- [ ] Oak/deciduous: 3 variants, ~64-80px tall per ADR-008, single tile footprint\n- [ ] Pine/conifer: 3 variants, same scale\n- [ ] Palm tree: 2 variants (for desert/coastal biome)\n- [ ] Dead/winter tree: 2 variants (leafless)\n- [ ] Tree stump: 1 variant (post-harvest state)\n- [ ] Naming: tree_oak_01-03.png, tree_pine_01-03.png, tree_palm_01-02.png, tree_dead_01-02.png, tree_stump.png\n- [ ] validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:25Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:17Z","labels":["art","resources","sprites","trees"],"dependencies":[{"issue_id":"roots-of-reason-n4x.8","depends_on_id":"roots-of-reason-n4x","type":"parent-child","created_at":"2026-03-01T11:58:25Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n4x.9","title":"Generate environmental props (ruins, bones, flowers, rocks)","description":"Generate small environmental decoration sprites: ancient ruins/columns (3 variants), animal bones/skulls (2 variants), wildflower patches (3 variants), scattered rocks (3 variants), campfire remnants. Non-interactive decorations for map variety.","acceptance_criteria":"- [ ] Ancient ruins/columns: 3 variants, non-interactive map decoration\n- [ ] Animal bones/skulls: 2 variants\n- [ ] Wildflower patches: 3 variants\n- [ ] Scattered rocks: 3 variants\n- [ ] All \u003c 64px, single tile, no collision/footprint\n- [ ] Naming: prop_{type}_{variant}.png\n- [ ] validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:26Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:13:18Z","labels":["art","environment","sprites"],"dependencies":[{"issue_id":"roots-of-reason-n4x.9","depends_on_id":"roots-of-reason-n4x","type":"parent-child","created_at":"2026-03-01T11:58:25Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nea","title":"Fog of war should not cover own buildings/units with \u003e0 health","description":"Player's own buildings and units with \u003e0 HP should never be obscured by fog of war. Currently fog may cover friendly entities, which is incorrect -- fog should only hide unexplored or enemy-controlled areas. Acceptance criteria: (1) All buildings belonging to the player with hp \u003e 0 are always visible (no fog overlay). (2) All units belonging to the player with hp \u003e 0 are always visible (no fog overlay). (3) Fog still correctly hides enemy units/buildings outside vision range. (4) Fog still correctly covers unexplored terrain.","status":"closed","priority":2,"issue_type":"bug","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T03:25:36Z","created_by":"Dave Tashner","updated_at":"2026-03-01T03:32:09Z","closed_at":"2026-03-01T03:32:09Z","close_reason":"Completed in PR #242"}
{"id":"roots-of-reason-nqq","title":"Epic 12: Win Conditions \u0026 Endgame","description":"Conquest (destroy Town Centers), Singularity (build AGI Core), Wonder Victory (build + defend Wonder), AGI cinematic, post-game stats.","status":"closed","priority":3,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:12Z","created_by":"Dave Tashner","updated_at":"2026-02-27T12:53:44Z","closed_at":"2026-02-27T12:53:44Z","close_reason":"All 5 children completed: nqq.1 (conquest), nqq.2 (singularity), nqq.3 (wonder), nqq.4 (AGI cinematic), nqq.5 (post-game stats)","labels":["endgame","epic"],"dependencies":[{"issue_id":"roots-of-reason-nqq","depends_on_id":"roots-of-reason-fk5","type":"blocks","created_at":"2026-02-22T14:45:00Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-nqq","depends_on_id":"roots-of-reason-fxt","type":"blocks","created_at":"2026-02-22T14:45:00Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.1","title":"Conquest victory: destroy all enemy Town Centers","description":"Player wins when all enemy Town Centers are destroyed. Defeat triggered when your last Town Center falls. Allow rebuilding TC from villagers if any survive. Check victory conditions periodically.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:46Z","created_by":"Dave Tashner","updated_at":"2026-02-26T23:40:30Z","closed_at":"2026-02-26T23:40:30Z","close_reason":"Already implemented in victory_manager.gd as part of fk5.6 (PR #76). Conquest victory: TC registration, defeat check with 5s rebuild delay, military victory on all enemies defeated.","labels":["conquest","endgame","story"],"dependencies":[{"issue_id":"roots-of-reason-nqq.1","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.2","title":"Singularity victory: build AGI Core","description":"First player to complete AGI Core building wins Singularity victory. Requires: Information Age, GPU Foundry built, Transformer Architecture researched, massive resource cost (10000 Knowledge + other resources). Building takes 10 minutes game time.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:47Z","created_by":"Dave Tashner","updated_at":"2026-02-27T01:16:23Z","closed_at":"2026-02-27T01:16:23Z","close_reason":"Completed in PR #103","labels":["endgame","singularity","story"],"dependencies":[{"issue_id":"roots-of-reason-nqq.2","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.3","title":"Wonder victory: build and defend Wonder","description":"Build Wonder (expensive, available from Medieval Age). Once complete, 10-minute countdown timer starts. If Wonder survives countdown, player wins. Other players alerted. Destroying Wonder cancels countdown.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:48Z","created_by":"Dave Tashner","updated_at":"2026-02-27T01:16:24Z","closed_at":"2026-02-27T01:16:24Z","close_reason":"Completed in PR #103","labels":["endgame","story","wonder"],"dependencies":[{"issue_id":"roots-of-reason-nqq.3","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.4","title":"AGI Singularity cinematic event sequence","description":"When AGI Core completes: dramatic visual effect expanding from building, screen flash, all units on map pause, text overlay describing the singularity event. Transition to victory screen with unique singularity messaging.","status":"closed","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:48Z","created_by":"Dave Tashner","updated_at":"2026-02-27T00:52:58Z","closed_at":"2026-02-27T00:52:58Z","close_reason":"Completed in PR #100","labels":["cinematic","endgame","story"],"dependencies":[{"issue_id":"roots-of-reason-nqq.4","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:48Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.5","title":"Post-game statistics screen","description":"After game ends, show stats: resources gathered, units produced, units killed, buildings built/destroyed, technologies researched, time in each age. Graphs over time. Compare all players side by side.","status":"closed","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:49Z","created_by":"Dave Tashner","updated_at":"2026-02-27T12:47:47Z","closed_at":"2026-02-27T12:47:47Z","close_reason":"Completed in PR #109","labels":["endgame","stats","story"],"dependencies":[{"issue_id":"roots-of-reason-nqq.5","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:48Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-oec","title":"Epic: Audio System","description":"Implement the audio system from scratch. No audio infrastructure currently exists. Includes: AudioManager autoload singleton, background music per age (7 tracks), combat music trigger, ambient environment sounds (birds, water, wind), UI click/hover SFX, unit acknowledgment voices (selection, move, attack, gather), building construction/completion SFX, tech research completion chime, victory/defeat fanfares, volume controls integration with SettingsManager.","status":"open","priority":3,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:00Z","created_by":"Dave Tashner","updated_at":"2026-03-01T16:56:00Z","labels":["audio","music","sfx"]}
{"id":"roots-of-reason-oec.1","title":"AudioManager autoload singleton with bus routing","description":"Create AudioManager autoload singleton. Responsibilities: manage audio buses (Master, Music, SFX, Ambient, UI), play/stop/fade music tracks, play positional SFX, volume control integration with SettingsManager. Register in project.godot. Support concurrent audio streams.","acceptance_criteria":"- [ ] AudioManager registered as autoload in project.godot\n- [ ] Audio buses configured: Master, Music, SFX, Ambient, UI\n- [ ] play_music(track_name) plays on Music bus with crossfade\n- [ ] play_sfx(sound_name, position) plays positional SFX on SFX bus\n- [ ] play_ui_sound(sound_name) plays non-positional on UI bus\n- [ ] set_volume(bus, value) adjusts bus volume (0.0-1.0)\n- [ ] Volume changes sync with SettingsManager\n- [ ] Supports up to 8 concurrent SFX streams\n- [ ] GdUnit4 test: AudioManager.play_music() changes current track\n- [ ] GdUnit4 test: AudioManager.set_volume(\"Music\", 0.5) persists\n- [ ] Save/load: volume settings serialize and restore correctly","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:58Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:05Z","labels":["audio","infrastructure"],"dependencies":[{"issue_id":"roots-of-reason-oec.1","depends_on_id":"roots-of-reason-oec","type":"parent-child","created_at":"2026-03-01T11:58:57Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-oec.2","title":"Background music tracks per age (7 age-appropriate themes)","description":"Source or generate background music for each age: Stone Age (tribal drums, flute), Bronze Age (ancient civilization), Iron Age (martial), Medieval (orchestral), Industrial (mechanical rhythms), Information Age (electronic), Singularity (synthwave/ambient). Crossfade between tracks on age advancement. Loop seamlessly.","acceptance_criteria":"- [ ] 7 music tracks (one per age): OGG/MP3 format, 2-4 minutes each, looping\n- [ ] Stone Age: tribal percussion, wooden flute\n- [ ] Bronze/Iron Age: ancient strings, ceremonial drums\n- [ ] Medieval: orchestral, choir\n- [ ] Industrial: mechanical rhythms, brass\n- [ ] Information: electronic, synth pads\n- [ ] Singularity: ambient synthwave, ethereal\n- [ ] Crossfade (2s) on age advancement via EventBus.age_advanced signal\n- [ ] Music loops seamlessly (no audible gap)\n- [ ] Assets in: assets/audio/music/age_{index}.ogg","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:58Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:06Z","labels":["audio","music"],"dependencies":[{"issue_id":"roots-of-reason-oec.2","depends_on_id":"roots-of-reason-oec","type":"parent-child","created_at":"2026-03-01T11:58:58Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-oec.2","depends_on_id":"roots-of-reason-oec.1","type":"blocks","created_at":"2026-03-01T12:09:14Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-oec.3","title":"Combat music trigger and dynamic mixing","description":"Implement combat music system: when player units engage in combat, crossfade from ambient/age music to combat music track. Fade back to ambient after 10s of no combat. Support intensity levels (skirmish vs major battle based on unit count). Hook into EventBus combat signals.","acceptance_criteria":"- [ ] Combat music triggers when player units enter combat (EventBus.combat_started or equivalent)\n- [ ] 2s crossfade from ambient to combat track\n- [ ] Combat music sustains while any player unit is in combat\n- [ ] Fades back to age music after 10s of no combat\n- [ ] Intensity levels: skirmish (\u003c5 units fighting) uses calm combat track, battle (5+ units) uses intense track\n- [ ] Does not re-trigger if already playing combat music\n- [ ] GdUnit4 test: combat signal triggers combat music\n- [ ] GdUnit4 test: 10s timeout restores ambient music","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:58:59Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:06Z","labels":["audio","combat","music"],"dependencies":[{"issue_id":"roots-of-reason-oec.3","depends_on_id":"roots-of-reason-oec","type":"parent-child","created_at":"2026-03-01T11:58:58Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-oec.3","depends_on_id":"roots-of-reason-oec.1","type":"blocks","created_at":"2026-03-01T12:09:15Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-oec.4","title":"Unit acknowledgment SFX (selection, move, attack, gather)","description":"Add unit response sounds: click-to-select confirmation, move command acknowledgment, attack command acknowledgment, gather command acknowledgment. Different sound sets for: villager, infantry, archer, cavalry, naval units. Positional audio based on unit location.","acceptance_criteria":"- [ ] Unit selection: click sound when unit selected\n- [ ] Move command: unit-type-specific acknowledgment (villager voice vs military voice)\n- [ ] Attack command: aggressive acknowledgment sound\n- [ ] Gather command: tool/work sound\n- [ ] Positional audio: sounds play from unit's map position, volume scales with distance\n- [ ] Different sound sets for: villager, infantry, archer, cavalry, naval\n- [ ] Assets in: assets/audio/sfx/units/{unit_type}_{action}.ogg\n- [ ] GdUnit4 test: selecting unit triggers selection SFX","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:00Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:07Z","labels":["audio","sfx","units"],"dependencies":[{"issue_id":"roots-of-reason-oec.4","depends_on_id":"roots-of-reason-oec","type":"parent-child","created_at":"2026-03-01T11:58:59Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-oec.4","depends_on_id":"roots-of-reason-oec.1","type":"blocks","created_at":"2026-03-01T12:09:15Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-oec.5","title":"Building and construction SFX (build, complete, destroy)","description":"Add building sound effects: construction hammering/sawing (looping during build), construction complete chime, building destroyed crash, garrison enter/exit, production complete notification. Each building type can have unique idle ambient sound (market chatter, barracks drilling).","acceptance_criteria":"- [ ] Construction: looping hammer/sawing SFX during build (stops on completion)\n- [ ] Completion: chime/notification sound\n- [ ] Destruction: crash/collapse sound\n- [ ] Garrison: door open/close sound\n- [ ] Production complete: unit-ready notification\n- [ ] Positional audio from building location\n- [ ] Assets in: assets/audio/sfx/buildings/{action}.ogg\n- [ ] GdUnit4 test: building construction plays looping SFX","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:00Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:08Z","labels":["audio","buildings","sfx"],"dependencies":[{"issue_id":"roots-of-reason-oec.5","depends_on_id":"roots-of-reason-oec","type":"parent-child","created_at":"2026-03-01T11:59:00Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-oec.5","depends_on_id":"roots-of-reason-oec.1","type":"blocks","created_at":"2026-03-01T12:09:16Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-oec.6","title":"UI interaction SFX (clicks, hovers, notifications)","description":"Add UI sound effects: button click, button hover, panel open/close, tech research complete fanfare, age advancement celebration, victory fanfare, defeat sound, notification ping, resource depleted warning. Integrate with all UI panels.","acceptance_criteria":"- [ ] Button click: short, crisp click\n- [ ] Button hover: subtle highlight sound\n- [ ] Panel open/close: whoosh/slide sound\n- [ ] Tech complete: fanfare jingle\n- [ ] Age advancement: celebration sound (longer, more dramatic)\n- [ ] Victory: triumphant fanfare\n- [ ] Defeat: somber sound\n- [ ] Resource depleted warning: alert ping\n- [ ] Non-positional (UI bus)\n- [ ] Assets in: assets/audio/sfx/ui/{action}.ogg","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:01Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:08Z","labels":["audio","sfx","ui"],"dependencies":[{"issue_id":"roots-of-reason-oec.6","depends_on_id":"roots-of-reason-oec","type":"parent-child","created_at":"2026-03-01T11:59:00Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-oec.6","depends_on_id":"roots-of-reason-oec.1","type":"blocks","created_at":"2026-03-01T12:09:16Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-oec.7","title":"Ambient environment sounds (biome-based)","description":"Add ambient environmental audio: forest (birds, rustling leaves), water (waves, flowing river), desert (wind), combat zone (distant clashing). Mix based on camera position over biome types. Subtle background layer under music.","acceptance_criteria":"- [ ] Forest: bird calls, rustling leaves (plays when camera over forest tiles)\n- [ ] Water: waves/flowing river (when camera over water)\n- [ ] Desert: wind (when camera over desert)\n- [ ] Ambient volume scales based on camera position over biome percentage\n- [ ] Mixes underneath music at lower volume\n- [ ] Crossfades smoothly as camera pans between biomes\n- [ ] Assets in: assets/audio/ambient/{biome}.ogg\n- [ ] GdUnit4 test: camera over water plays water ambient","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:59:02Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:14:09Z","labels":["ambient","audio","environment"],"dependencies":[{"issue_id":"roots-of-reason-oec.7","depends_on_id":"roots-of-reason-oec","type":"parent-child","created_at":"2026-03-01T11:59:01Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-oec.7","depends_on_id":"roots-of-reason-oec.1","type":"blocks","created_at":"2026-03-01T12:09:17Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-onu","title":"Fix villager auto-drop-off pathfinding to buildings","description":"move_to() silently rejects solid cells (buildings mark their footprint cells as solid). When gatherer tries to auto-walk to TC for drop-off, the move is rejected and the villager stays stuck at the resource with full carry capacity. Fix: when target cell is solid, find nearest passable neighbor cell instead.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T00:30:10Z","created_by":"Dave Tashner","updated_at":"2026-03-01T00:35:18Z","closed_at":"2026-03-01T00:35:18Z","close_reason":"Completed in PR #219"}
{"id":"roots-of-reason-ovr","title":"Epic 3: Procedural Map Generation","description":"Isometric tilemap with terrain types, Perlin noise generation, resource node placement, starting locations, fog of war.","status":"closed","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:06Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:54:56Z","closed_at":"2026-02-25T03:54:56Z","close_reason":"All children closed","labels":["epic","map"],"dependencies":[{"issue_id":"roots-of-reason-ovr","depends_on_id":"roots-of-reason-317","type":"blocks","created_at":"2026-02-22T14:44:53Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ovr","depends_on_id":"roots-of-reason-be7","type":"blocks","created_at":"2026-02-22T15:06:31Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.1","title":"Isometric tilemap with terrain types","description":"Create TileMap with terrain types: grass, forest, desert, water, mountain. Each terrain type has movement cost and resource availability. Use Godot TileMap with isometric mode.\n\nAcceptance Criteria:\n- [ ] TileMap node using 128x64px isometric diamond tiles (2:1 ratio)\n- [ ] Terrain types: grass, dirt, sand, water, forest, stone, mountain\n- [ ] Each terrain type has distinct visual tile (Phase 1: colored diamonds)\n- [ ] Terrain data stored in TileMap custom data layers (type, movement_cost, buildable)\n- [ ] Terrain properties loaded from data/settings/terrain.json\n- [ ] Water and mountain tiles marked impassable\n- [ ] Forest tiles provide LOS obstruction\n- [ ] Autotiling configured for terrain transitions (e.g., grass-to-water edges)\n- [ ] Map size configurable (small: 128x128, medium: 200x200, large: 256x256)\n- [ ] Tilemap state serializable for save/load\n- [ ] Unit tests for terrain property lookups\n- [ ] Smoke test: tilemap scene loads without errors","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:18Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:42:43Z","closed_at":"2026-02-23T03:42:43Z","close_reason":"Completed in PR #27","labels":["map","story","tilemap"],"dependencies":[{"issue_id":"roots-of-reason-ovr.1","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:18Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.2","title":"Perlin noise terrain generation","description":"Use FastNoiseLite (Godot built-in) to generate terrain. Multiple noise layers for elevation, moisture, temperature. Map these to terrain types. Configurable map size (small/medium/large).\n\nAcceptance Criteria:\n- [ ] Procedural map generation using FastNoiseLite (Godot built-in)\n- [ ] Noise layers: elevation (terrain type), moisture (forest distribution), resource richness\n- [ ] Elevation thresholds determine terrain: water \u003c 0.3, sand \u003c 0.4, grass \u003c 0.7, stone \u003c 0.85, mountain \u003e= 0.85\n- [ ] Thresholds configurable in data/settings/map_generation.json\n- [ ] Seed-based generation (same seed = same map)\n- [ ] Seed stored for save/load reproducibility\n- [ ] Generated maps have at least 2 landmasses connected by land bridges or shallows\n- [ ] Map edges are water (island-style) to provide natural bounds\n- [ ] Generation completes in \u003c 2 seconds for large (256x256) maps\n- [ ] Unit tests for threshold-to-terrain mapping\n- [ ] Integration test: generate map with known seed, verify terrain distribution","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:19Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:58:46Z","closed_at":"2026-02-23T13:58:46Z","close_reason":"Completed in PR #40","labels":["generation","map","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.2","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.3","title":"Resource node placement on map","description":"Place resource nodes during map gen: gold mines (mountains), stone quarries (hills), forests (wood), berry bushes/deer (food), fish (water). Ensure fair distribution relative to starting positions.\n\nAcceptance Criteria:\n- [ ] Resource nodes: Berry Bush (Food), Tree (Wood), Stone Mine (Stone), Gold Mine (Gold)\n- [ ] Placement uses noise-based distribution (not purely random)\n- [ ] Trees cluster near forest terrain, stone/gold near mountains, berries near grass\n- [ ] Minimum spacing between same-type resource clusters (configurable in JSON)\n- [ ] Each resource node has a finite yield amount (loaded from JSON)\n- [ ] Resource nodes are visible on map as distinct sprites (Phase 1: colored shapes)\n- [ ] Starting positions guaranteed to have balanced nearby resources\n- [ ] Resource node state serializable (remaining yield, position)\n- [ ] Resource placement density configurable per map size in JSON\n- [ ] Unit tests for placement algorithm (minimum spacing, terrain affinity)\n- [ ] Integration test: generate map and verify resource balance near spawn points","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:20Z","created_by":"Dave Tashner","updated_at":"2026-02-23T14:27:52Z","closed_at":"2026-02-23T14:27:52Z","close_reason":"Completed in PR #43","labels":["map","resources","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.3","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.4","title":"Starting location selection with fairness","description":"Select starting locations for each player: ensure minimum distance apart, balanced resource access, no water-locked starts. Place initial Town Center and starting villagers at selected locations.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:20Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:20:34Z","closed_at":"2026-02-25T03:20:34Z","close_reason":"Completed in PR #51","labels":["map","spawns","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.4","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.5","title":"Fog of war and exploration","description":"Three visibility states: unexplored (black), explored but not visible (dimmed), visible (full). Units reveal area based on line-of-sight stat. Previously explored areas show terrain but not enemy units.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:21Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:54:48Z","closed_at":"2026-02-25T03:54:48Z","close_reason":"Completed in PR #54","labels":["fog","map","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.5","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.6","title":"River generation with flow direction and hydrology","description":"Generate rivers during procedural map creation. Rivers flow from high elevation to low elevation with encoded flow direction per tile.\n\nGeneration algorithm:\n1. After terrain elevation is generated, identify watershed sources: tiles at local elevation maxima (mountains, large hills) with elevation \u003e threshold\n2. For each source, trace a path downhill following steepest gradient neighbor\n3. When two paths meet the same tile, merge into one river (wider)\n4. Terminate when reaching ocean, lake, or map edge\n5. Assign flow_direction (Vector2i) to each river tile pointing downstream\n6. Assign river_id to group tiles belonging to the same river system\n7. Set river_width: 1 tile for headwaters/streams, 2 tiles for rivers after a merge or after N tiles from source\n\nRiver tile data model:\n- terrain_type: 'river' (distinct from 'ocean' and 'lake')\n- flow_direction: Vector2i — one of 8 directions (N, NE, E, SE, S, SW, W, NW)\n- river_id: int — which river system\n- river_width: 1 or 2\n\nGeneration constraints:\n- Each map (small/medium/large) should have 2-4 rivers\n- Rivers should not start or end within 8 tiles of a player starting position (avoid giving one player an unfair river advantage at spawn)\n- At least 1 river should pass within 10 tiles of each starting position (everyone gets river access)\n- Rivers must be continuous — no gaps in the tile path\n- Rivers should not run perfectly straight — add slight noise to the path for natural appearance\n- Rivers can flow through forest (clearing a 1-tile path) but not through mountains\n\nMovement rules for river tiles:\n- Land units CAN cross river tiles at 50% movement speed (fording)\n- Naval units CAN traverse river tiles (rivers are navigable)\n- Buildings CANNOT be placed on river tiles (but River Dock can be placed adjacent)\n\nVisualization:\n- River tiles use a distinct blue shade (#4A90C4) different from ocean (#2E5B8A) and lake (#5B9BD5)\n- Subtle animated flow indicator: small chevrons or ripples moving in flow_direction\n- 2-wide rivers render as a wider water channel\n\nAdd river tiles to the procedural tile generator (Phase 1 placeholder: light blue diamond with arrow indicating flow direction).\n\nAcceptance criteria:\n- Generated maps contain 2-4 rivers with visible flow direction\n- Rivers flow continuously from source to terminus\n- Flow direction is consistent and always points downstream\n- River tiles are traversable by land (slowly) and naval units\n- Starting positions have balanced river access\n- River data (flow_direction, river_id) accessible to other systems","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:20Z","created_by":"Dave Tashner","updated_at":"2026-02-25T13:53:19Z","closed_at":"2026-02-25T13:53:19Z","close_reason":"Already completed in PR #28","labels":["map","river","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.6","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T16:01:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.7","title":"Balance river access in starting location selection","description":"Extend the starting location fairness algorithm to account for river access.\n\nWhen selecting starting locations, the existing fairness system ensures balanced resource access and minimum distance. Add river access as a fairness dimension:\n\nScoring criteria for starting locations:\n- River proximity: distance from starting position to nearest river tile (lower = better)\n- River direction: does the nearest river flow TOWARD the starting position? (flow toward = high value, flow away = low value)\n- River resource access: how many resource nodes (gold, stone) are within 5 tiles of the river AND within 15 tiles of the starting position? (more = better)\n\nFairness constraint: the river access score variance across all starting positions must be below a threshold. If one player has a river flowing toward their base past 3 gold mines, other players should have comparable river advantages.\n\nIf perfect fairness is not achievable with the generated map, the generator should retry river generation (up to 3 attempts) or adjust river paths slightly to improve balance.\n\nEdge cases:\n- Island/archipelago maps: rivers may not exist on small islands. Skip river fairness for water-heavy maps.\n- Desert-heavy maps: fewer rivers. Relax fairness thresholds when total river count is low.\n- If a map has no rivers (rare), skip this entirely.\n\nAcceptance criteria:\n- Starting locations have comparable river access scores\n- River direction relative to start position is factored into fairness\n- Resource nodes near rivers are counted in fairness assessment\n- Generator retries or adjusts if river balance is too unfair\n- Works correctly on all map sizes and types","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:21Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:54:49Z","closed_at":"2026-02-25T03:54:49Z","close_reason":"Completed in PR #52","labels":["balance","map","river","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.7","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T16:01:21Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ovr.7","depends_on_id":"roots-of-reason-ovr.6","type":"blocks","created_at":"2026-02-22T16:01:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.8","title":"Wolf pack spawning during map generation","description":"Spawn wolf packs as neutral Gaia fauna during procedural map generation.\n\nSpawn rules:\n- 3-5 wolf packs per map (scale with map size: 3 for small, 4 for medium, 5 for large)\n- Each pack contains 2-3 wolves\n- Spawn near forest terrain (within 3 tiles of forest)\n- Minimum 12 tiles from any player starting position (wolves shouldn't rush players at game start)\n- Minimum 8 tiles between wolf pack spawn points (spread them across the map)\n- At least 1 wolf pack should be roughly equidistant between pairs of players (contested wolves)\n- Wolves do NOT spawn on water, mountain, or desert tiles — forests and grassland near forests only\n\nWolf entity initial state:\n- Owner: Gaia (neutral faction, player_id = -1)\n- Behavior: patrol (wander within 8-tile radius of spawn point)\n- Aggro: hostile to lone villagers within 3 tiles\n- Domestication_progress: 0.0 (float, 0.0 to 1.0)\n- Fed_by: null (player_id of last player to feed)\n\nAdd wolves to the fauna data model alongside deer:\ndata/fauna/wolf.json:\n{\n  \"name\": \"Wolf\",\n  \"hp\": 30,\n  \"attack\": 8,\n  \"defense\": 0,\n  \"speed\": 2.0,\n  \"los\": 5,\n  \"aggro_radius\": 3,\n  \"flee_threshold\": 3,\n  \"food_on_kill\": 50,\n  \"domestication_cost_per_feed\": 25,\n  \"feeds_required\": 3,\n  \"domestication_decay_rate\": 0.1,\n  \"domestication_decay_interval\": 60\n}\n\nPlaceholder sprite: gray circle with pointed ears (triangle on top), slightly larger than villager placeholder. Distinct from deer (brown) and dogs (lighter gray with collar indicator).\n\nAcceptance criteria:\n- Maps generate with 3-5 wolf packs in appropriate locations\n- Wolves visible and distinct from other fauna\n- Wolf packs spread across map, not clustered\n- Starting positions safe from immediate wolf aggro\n- At least one pack in a contestable position between players","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:05:57Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:54:49Z","closed_at":"2026-02-25T03:54:49Z","close_reason":"Completed in PR #53","labels":["fauna","map","story","wolves"],"dependencies":[{"issue_id":"roots-of-reason-ovr.8","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T16:05:56Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-oxk","title":"Add canyon terrain type","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T00:21:54Z","created_by":"Dave Tashner","updated_at":"2026-02-28T00:27:00Z","closed_at":"2026-02-28T00:27:00Z","close_reason":"Completed in PR #147","labels":["art","gameplay"]}
{"id":"roots-of-reason-oxn","title":"Generate terrain tile art: stone","description":"Generate 4 stone tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nExposed rocky terrain with flat stone slabs and natural fissures. Lichen patches and mineral variation in the surface. Sunlight from the upper-left casting subtle shadows in the crevices. Colors: cool grays (#808080, #707070, #909090).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/stone_*.png","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:21:14Z","created_by":"Dave Tashner","updated_at":"2026-02-28T00:19:01Z","closed_at":"2026-02-28T00:19:01Z","close_reason":"Completed in PR #146","labels":["art"]}
{"id":"roots-of-reason-p3e","title":"Generate terrain tile art: sand","description":"Generate 4 sand tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nFine sandy terrain with gentle wind-swept ripple patterns. Occasional tiny pebbles half-buried in the surface. Bright warm sunlight from the upper-left. Colors: warm tans (#D2B48C, #E0C99A, #BFA07A).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/sand_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:20:56Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:20:56Z","labels":["art"]}
{"id":"roots-of-reason-pd8","title":"Epic: Vikings Civilization","description":"Add Vikings as a new playable civilization. Vikings are a raiding/naval hybrid civ with bonuses to naval speed and infantry attack. Unique building: Longhouse (replaces House, provides +12 pop instead of +10 and heals garrisoned units). Unique unit: Berserker (replaces Infantry, high attack + self-damage rage ability that increases attack as HP drops). Unique techs: Longship Navigation (+40% naval speed), Berserkergang (rage ability unlocked). Includes all art assets, data JSON files, civ bonus integration, and tests.","notes":"Balance framework: ADR-022 (roots-of-reason-kif). Vikings fill raid/hybrid niche. Anti-dominance: military+naval only. Berserker rage safety: at \u003c30% HP, 1-2 hits from death, net DPS increase ~15% averaged over full combat.","spec_id":"roots-of-reason-kif","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:55:37Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:43Z","labels":["art","civilization","data","vikings"],"dependencies":[{"issue_id":"roots-of-reason-pd8","depends_on_id":"roots-of-reason-kif","type":"blocks","created_at":"2026-03-01T12:08:54Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-pd8.1","title":"Vikings: civilization data JSON (bonuses, unique unit/building/tech definitions)","description":"Create data/civilizations/vikings.json with: civ name, description, bonuses (+15% naval speed, +10% infantry attack). Unique building: Longhouse (replaces House, +12 pop, heals garrisoned units 0.5/s). Unique unit: Berserker (replaces Infantry, rage ability: +50% attack when below 30% HP). Unique techs: Longship Navigation (+40% naval speed), Berserkergang (unlocks rage). Create corresponding data/ JSON files.","acceptance_criteria":"- [ ] data/civilizations/vikings.json: name, description, bonuses, unique_building, unique_unit, unique_techs\n- [ ] Passive bonuses: naval_speed_multiplier=1.15, infantry_attack_multiplier=1.10\n- [ ] data/buildings/longhouse.json: footprint 2x2, replaces house, population_bonus=12, garrison_heal_rate=0.5\n- [ ] data/units/berserker.json: population_cost=1, hp=40, attack=6, defense=0, speed=1.3, rage_threshold=0.3, rage_attack_bonus=0.50\n- [ ] data/tech/longship_navigation.json: age=bronze, effect=naval_speed+0.40, exclusive_to=vikings\n- [ ] data/tech/berserkergang.json: age=iron, effect=unlock_rage_ability, exclusive_to=vikings\n- [ ] Berserker tradeoff: defense=0 (vs infantry defense=1), rage only activates below 30% HP (1-2 hits from death)\n- [ ] ADR-022 compliance: bonuses in military + naval (exactly 2 categories)\n- [ ] All JSON passes data-check validation","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:11Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:28Z","labels":["civilization","data","vikings"],"dependencies":[{"issue_id":"roots-of-reason-pd8.1","depends_on_id":"roots-of-reason-pd8","type":"parent-child","created_at":"2026-03-01T11:57:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-pd8.2","title":"Vikings: CivBonusManager integration and tests","description":"Integrate Vikings into CivBonusManager. Apply passive bonuses (naval speed, infantry attack). Register unique building/unit replacements. Handle Berserker rage ability (HP threshold trigger for attack buff). Handle Longhouse garrison healing. Write GdUnit4 tests.","acceptance_criteria":"- [ ] CivBonusManager.apply_bonuses(\"vikings\") sets naval speed to 1.15x, infantry attack to 1.10x\n- [ ] Vikings House replaced by Longhouse (+12 pop vs +10)\n- [ ] Vikings Infantry replaced by Berserker in Barracks\n- [ ] Garrison healing: Berserker garrisoned in Longhouse heals 0.5 HP/s\n- [ ] Rage ability: below 30% HP, Berserker attack increases by 50% (requires Berserkergang tech)\n- [ ] Rage does NOT activate without Berserkergang researched\n- [ ] GdUnit4 test: Vikings infantry attack = 6.6 (6 * 1.10)\n- [ ] GdUnit4 test: Berserker at 10 HP (25% of 40) has attack = 9.9 (6.6 * 1.5)\n- [ ] GdUnit4 test: Berserker at 20 HP (50% of 40) has normal attack = 6.6\n- [ ] GdUnit4 test: Longhouse provides +12 pop cap\n- [ ] GdUnit4 test: Berserker loses to massed archers (ADR-022 counter check)","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:12Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:28Z","labels":["civilization","testing","vikings"],"dependencies":[{"issue_id":"roots-of-reason-pd8.2","depends_on_id":"roots-of-reason-pd8","type":"parent-child","created_at":"2026-03-01T11:57:11Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-pd8.3","title":"Vikings: Longhouse unique building sprites (idle, construction, destruction)","description":"Generate Longhouse building sprites: idle (2x2 footprint, 256x192 canvas), 4-frame construction sequence, 3-frame destruction. Norse/Scandinavian timber architecture with turf roof. Magenta player-color mask.","acceptance_criteria":"- [ ] Source: assets/sprites/buildings/longhouse_01.png\n- [ ] Game-ready: assets/sprites/buildings/placeholder/longhouse.png\n- [ ] Canvas: 256x192px (2x2 footprint per ADR-008)\n- [ ] Construction: 4 frames\n- [ ] Destruction: 3 frames\n- [ ] Norse timber architecture with turf/sod roof, long rectangular shape\n- [ ] Magenta mask on door/banner area\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:12Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:29Z","labels":["art","buildings","vikings"],"dependencies":[{"issue_id":"roots-of-reason-pd8.3","depends_on_id":"roots-of-reason-pd8","type":"parent-child","created_at":"2026-03-01T11:57:12Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-pd8.3","depends_on_id":"roots-of-reason-pd8.1","type":"blocks","created_at":"2026-03-01T12:09:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-pd8.4","title":"Vikings: Berserker unit sprites (idle, walk, attack, rage, death — 8 directions)","description":"Generate Berserker unit sprites: idle (8 dir, 2 frames), walk (8 dir, 4 frames), attack (8 dir, 3 frames), rage attack (8 dir, 3 frames — glowing/red tint variant for low HP), death (8 dir, 2 frames). Norse warrior with axe/shield. Player-color mask.","acceptance_criteria":"- [ ] Asset path: assets/sprites/units/berserker/berserker_{anim}_{dir}_{frame}.png\n- [ ] 8 directions per ADR-002\n- [ ] Idle: 8×2, Walk: 8×4, Attack: 8×3, Rage attack: 8×3 (red-tinted variant), Death: 8×2\n- [ ] Total: 16+32+24+24+16 = 112 frames\n- [ ] ~52-56px tall (infantry class per ADR-008)\n- [ ] Norse warrior: axe, round shield, fur/leather armor\n- [ ] Rage variant: same poses with red glow/tint overlay\n- [ ] Magenta mask on shield/chest\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:13Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:29Z","labels":["art","sprites","units","vikings"],"dependencies":[{"issue_id":"roots-of-reason-pd8.4","depends_on_id":"roots-of-reason-pd8","type":"parent-child","created_at":"2026-03-01T11:57:12Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-pd8.4","depends_on_id":"roots-of-reason-pd8.1","type":"blocks","created_at":"2026-03-01T12:09:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-pd8.5","title":"Vikings: villager variant sprites (idle, walk, gather, build — 8 directions)","description":"Generate Vikings-themed villager sprites: idle (8 dir, 2 frames), walk (8 dir, 4 frames), gather (8 dir, 2 frames), build (8 dir, 2 frames). Norse peasant clothing, fur-trimmed. Player-color mask.","acceptance_criteria":"- [ ] Asset path: assets/sprites/units/villager_vikings/villager_vikings_{anim}_{dir}_{frame}.png\n- [ ] 8 directions, Idle: 8×2, Walk: 8×4, Gather: 8×2, Build: 8×2\n- [ ] ~48px tall per ADR-008\n- [ ] Norse peasant: fur-trimmed tunic, distinct from default villager\n- [ ] Magenta mask on clothing\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:14Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:30Z","labels":["art","sprites","units","vikings"],"dependencies":[{"issue_id":"roots-of-reason-pd8.5","depends_on_id":"roots-of-reason-pd8","type":"parent-child","created_at":"2026-03-01T11:57:13Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-pd8.5","depends_on_id":"roots-of-reason-pd8.1","type":"blocks","created_at":"2026-03-01T12:09:03Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-pd8.6","title":"Vikings: civ selection UI card with unique unit/building art","description":"Create civ selection card art for Vikings showing: civ icon/banner, Longhouse illustration, Berserker illustration, bonus text layout. Integrate into civ_card_builder.gd and civ_selection_screen.gd.","acceptance_criteria":"- [ ] Vikings in civ_selection_screen.gd\n- [ ] Card shows: civ name, +15% naval/+10% infantry bonuses, Longhouse art, Berserker art\n- [ ] Bonus text matches data/civilizations/vikings.json\n- [ ] Layout matches existing cards\n- [ ] GdUnit4 test: civ_card_builder produces valid card for \"vikings\"","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:57:14Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:11:30Z","labels":["art","ui","vikings"],"dependencies":[{"issue_id":"roots-of-reason-pd8.6","depends_on_id":"roots-of-reason-pd8","type":"parent-child","created_at":"2026-03-01T11:57:14Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-pd8.6","depends_on_id":"roots-of-reason-pd8.1","type":"blocks","created_at":"2026-03-01T12:09:03Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-pd8.6","depends_on_id":"roots-of-reason-pd8.2","type":"blocks","created_at":"2026-03-01T12:09:04Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-q7z","title":"Epic: Pirate Spawning System","description":"Gaia-controlled hostile naval units that spawn after any player researches Compass. Pirates patrol deep ocean, attack soft naval targets, and carry gold bounties. Creates risk/reward tension for ocean navigation.\n\nKey mechanics:\n- Spawn every 90s from ocean edges, max 8 active\n- Carry 30-120 Gold bounty scaling by age\n- Target fishing boats, trade barges, transport ships\n- Avoid military vessels and garrisoned docks\n- Spawn rate decreases in later ages\n- Settings in data/settings/pirates.json","status":"closed","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:25:58Z","created_by":"Dave Tashner","updated_at":"2026-02-27T02:42:19Z","closed_at":"2026-02-27T02:42:19Z","close_reason":"All 2 children closed (PRs #102, #106)","labels":["epic","gaia","naval"]}
{"id":"roots-of-reason-q7z.1","title":"Pirate ship spawning and patrol AI","description":"Implement Gaia pirate ship spawning triggered by Compass research. Pirates spawn every 90s from deep ocean edges, patrol randomly, target soft naval targets, avoid warships. Max 8 active. Spawn rate decreases in later ages. Settings in data/settings/pirates.json.\n\n## Acceptance Criteria\n- [ ] Spawning begins when any player researches Compass\n- [ ] Spawn interval and max count from settings\n- [ ] Pirates spawn at deep ocean edge tiles\n- [ ] Random ocean waypoint patrol behavior\n- [ ] Pirates target fishing boats, trade barges, transport ships\n- [ ] Pirates avoid war galleys, warships, garrisoned docks\n- [ ] Spawn rate scales by age (1.0x Medieval to 0.2x Singularity)\n- [ ] Pirate stats (HP, attack, defense, speed, range, LOS) from settings\n- [ ] Unit tests for spawn logic and targeting\n- [ ] Integration test: research Compass → pirates begin spawning","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:22Z","created_by":"Dave Tashner","updated_at":"2026-02-27T01:23:32Z","closed_at":"2026-02-27T01:23:32Z","close_reason":"Completed in PR #102","labels":["gaia","naval","pirates","story"],"dependencies":[{"issue_id":"roots-of-reason-q7z.1","depends_on_id":"roots-of-reason-q7z","type":"parent-child","created_at":"2026-02-22T18:26:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-q7z.2","title":"Pirate bounty system: gold drops on kill","description":"Pirates carry gold bounties that drop on death. Bounty range 30-120 Gold, scaled by age. Killing player receives bounty immediately. Bounty amount visible on pirate selection.\n\n## Acceptance Criteria\n- [ ] Each pirate assigned random bounty on spawn (min_gold to max_gold)\n- [ ] Bounty scaled by age multiplier from settings\n- [ ] Gold awarded to killing player on pirate death\n- [ ] Bounty amount shown in pirate info panel when selected\n- [ ] Gold drop visual effect at pirate death location\n- [ ] Unit tests for bounty calculation and scaling\n- [ ] Integration test: kill pirate → verify gold awarded","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:23Z","created_by":"Dave Tashner","updated_at":"2026-02-27T02:41:49Z","closed_at":"2026-02-27T02:41:49Z","close_reason":"Completed in PR #106","labels":["bounty","economy","pirates","story"],"dependencies":[{"issue_id":"roots-of-reason-q7z.2","depends_on_id":"roots-of-reason-q7z","type":"parent-child","created_at":"2026-02-22T18:26:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-qg0","title":"Generate terrain tile art: mountain","description":"Generate 4 mountain tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nSteep rocky mountain terrain viewed from above. Jagged rock faces with deep crevasses and snow dusting on the highest edges. Dramatic sunlight from the upper-left. Colors: dark slate (#404050, #303040, #505060).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/mountain_*.png","status":"closed","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:21:16Z","created_by":"Dave Tashner","updated_at":"2026-02-28T00:19:02Z","closed_at":"2026-02-28T00:19:02Z","close_reason":"Completed in PR #146","labels":["art"]}
{"id":"roots-of-reason-r26","title":"Add tests for AI subcomponents","description":"ai_resource_allocator.gd, ai_military_strategy.gd, ai_military_tactics.gd, ai_build_planner.gd have no test files. Create one test per component, prioritizing ai_resource_allocator and ai_military_strategy.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T14:09:34Z","closed_at":"2026-02-28T14:09:34Z","close_reason":"Completed in PR #185"}
{"id":"roots-of-reason-r2z","title":"ADR-002: Visual Style — 2D Isometric","description":"Tile-based map with isometric sprites using 2:1 diamond tiles (128x64px). Classic AoE aesthetic, sprite-based units and buildings. Well-supported by Godot TileMap.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:02Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:43Z","closed_at":"2026-02-22T22:39:43Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-rb4","title":"Epic: Egypt Civilization","description":"Add Egypt as a new playable civilization. Egypt is a wonder/monument-focused civ with bonuses to building construction and stone gathering. Unique building: Pyramid (replaces Library, generates Knowledge + provides defense). Unique unit: War Chariot (replaces Cavalry, ranged + melee hybrid). Unique techs: Hieroglyphics (research bonus), Nile Flooding (farm output bonus). Includes all art assets (unit sprites 8-dir, building sprites, UI cards), data JSON files, civ bonus integration, and tests.","notes":"Balance framework: ADR-022 (roots-of-reason-kif). Egypt fills wonder/defense niche. Anti-dominance: bonuses in economy+defense only. War Chariot tradeoff: lower HP than Cavalry, range 3 (jack-of-all-trades, master of none).","spec_id":"roots-of-reason-kif","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:55:33Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:15:41Z","labels":["art","civilization","data","egypt"],"dependencies":[{"issue_id":"roots-of-reason-rb4","depends_on_id":"roots-of-reason-kif","type":"blocks","created_at":"2026-03-01T12:08:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-rb4.1","title":"Egypt: civilization data JSON (bonuses, unique unit/building/tech definitions)","description":"Create data/civilizations/egypt.json with: civ name, description, bonuses (+15% stone gathering, +10% building HP), unique building (Pyramid), unique unit (War Chariot), unique techs (Hieroglyphics, Nile Flooding). Also create data/buildings/pyramid.json, data/units/war_chariot.json, and tech entries in data/tech/.","acceptance_criteria":"- [ ] data/civilizations/egypt.json exists with: name, description, bonuses, unique_building, unique_unit, unique_techs\n- [ ] Passive bonuses: stone_gather_rate_multiplier=1.15, building_hp_multiplier=1.10\n- [ ] data/buildings/pyramid.json: footprint 3x3, replaces library, knowledge_rate=0.625, defense=2, HP=1000\n- [ ] data/units/war_chariot.json: population_cost=2, hp=45, attack=7, defense=1, speed=2.0, range=3, bonus_vs_infantry=1.5\n- [ ] data/tech/hieroglyphics.json: age=iron, cost={gold:100, knowledge:150}, effect=research_bonus+0.10, exclusive_to=egypt\n- [ ] data/tech/nile_flooding.json: age=bronze, cost={food:150, wood:100}, effect=farm_food_rate+0.20, exclusive_to=egypt\n- [ ] All JSON files pass data-check schema validation (./tools/ror data-check)\n- [ ] War Chariot has explicit tradeoff vs base Cavalry: lower HP (45 vs 50), range 3 but melee damage lower\n- [ ] ADR-022 anti-dominance rules satisfied: bonuses in exactly 2 categories (economy + defense)","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:53Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:52Z","labels":["civilization","data","egypt"],"dependencies":[{"issue_id":"roots-of-reason-rb4.1","depends_on_id":"roots-of-reason-rb4","type":"parent-child","created_at":"2026-03-01T11:56:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-rb4.2","title":"Egypt: CivBonusManager integration and tests","description":"Integrate Egypt into CivBonusManager. Apply passive bonuses (stone gather rate, building HP). Register unique building/unit replacements. Write GdUnit4 tests verifying: bonus application, unique unit stat correctness, unique building Knowledge gen, unique tech effects.","acceptance_criteria":"- [ ] CivBonusManager.apply_bonuses(\"egypt\") sets stone gather multiplier to 1.15\n- [ ] CivBonusManager.apply_bonuses(\"egypt\") sets building HP multiplier to 1.10\n- [ ] Egypt player's Library is replaced by Pyramid in production UI and building_placer\n- [ ] Egypt player's Cavalry is replaced by War Chariot in Barracks production\n- [ ] Hieroglyphics and Nile Flooding techs appear only for Egypt players in tech tree\n- [ ] GdUnit4 test: Egypt villager gathers stone at 0.4025/s (0.35 * 1.15)\n- [ ] GdUnit4 test: Egypt house has 605 HP (550 * 1.10)\n- [ ] GdUnit4 test: Pyramid generates 0.625 Knowledge/s\n- [ ] GdUnit4 test: War Chariot can attack at range 3 AND in melee\n- [ ] GdUnit4 test: non-Egypt player cannot research Hieroglyphics\n- [ ] No bonus leakage between tests (multipliers reset in after())","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:54Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:53Z","labels":["civilization","egypt","testing"],"dependencies":[{"issue_id":"roots-of-reason-rb4.2","depends_on_id":"roots-of-reason-rb4","type":"parent-child","created_at":"2026-03-01T11:56:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-rb4.3","title":"Egypt: Pyramid unique building sprites (idle, construction, destruction)","description":"Generate Pyramid building sprites: idle (3x3 footprint, 384x256 canvas), 4-frame construction sequence, 3-frame destruction sequence. Isometric 2D style matching existing buildings. Include magenta player-color mask. Process through tools/ror process-sprite pipeline.","acceptance_criteria":"- [ ] Source sprite: assets/sprites/buildings/pyramid_01.png (high-res)\n- [ ] Game-ready sprite: assets/sprites/buildings/placeholder/pyramid.png\n- [ ] Canvas size: 384x256px (3x3 footprint per ADR-008)\n- [ ] Construction sequence: 4 frames (pyramid_construction_01.png through _04.png)\n- [ ] Destruction: 3 frames (pyramid_destruction_01.png through _03.png)\n- [ ] Magenta (#FF00FF) player-color mask visible on pyramid face/banner area\n- [ ] ./tools/ror process-sprite runs without error\n- [ ] ./tools/ror validate-assets passes for all pyramid sprites\n- [ ] Isometric perspective consistent with existing buildings (same camera angle)\n- [ ] Egyptian architectural style: stepped pyramid or smooth-sided with gold cap","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:54Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:53Z","labels":["art","buildings","egypt"],"dependencies":[{"issue_id":"roots-of-reason-rb4.3","depends_on_id":"roots-of-reason-rb4","type":"parent-child","created_at":"2026-03-01T11:56:54Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-rb4.3","depends_on_id":"roots-of-reason-rb4.1","type":"blocks","created_at":"2026-03-01T12:08:56Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-rb4.4","title":"Egypt: War Chariot unit sprites (idle, walk, attack, death — 8 directions)","description":"Generate War Chariot sprites: idle (8 dir, 2 frames), walk (8 dir, 4 frames), attack (8 dir, 3 frames), death (8 dir, 2 frames). Isometric 2D style, chariot with horse and rider. Include player-color mask on chariot body.","acceptance_criteria":"- [ ] Asset naming: assets/sprites/units/war_chariot/war_chariot_{animation}_{direction}_{frame}.png\n- [ ] Directions: n, ne, e, se, s, sw, w, nw (8 total per ADR-002)\n- [ ] Idle: 8 dirs × 2 frames = 16 files\n- [ ] Walk: 8 dirs × 4 frames = 32 files (horse + chariot movement)\n- [ ] Attack: 8 dirs × 3 frames = 24 files (rider throws javelin or swings)\n- [ ] Death: 8 dirs × 2 frames = 16 files (chariot crashes)\n- [ ] Unit height: ~64px tall (cavalry-class per ADR-008 sprite scale contract)\n- [ ] Magenta (#FF00FF) mask on chariot body for player color shader\n- [ ] ./tools/ror validate-assets passes for all war_chariot sprites\n- [ ] Visual reads clearly as \"chariot with horse\" at 100% game zoom","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:55Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:54Z","labels":["art","egypt","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-rb4.4","depends_on_id":"roots-of-reason-rb4","type":"parent-child","created_at":"2026-03-01T11:56:54Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-rb4.4","depends_on_id":"roots-of-reason-rb4.1","type":"blocks","created_at":"2026-03-01T12:08:56Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-rb4.5","title":"Egypt: villager variant sprites (idle, walk, gather, build — 8 directions)","description":"Generate Egypt-themed villager sprites distinct from default villager: idle (8 dir, 2 frames), walk (8 dir, 4 frames), gather (8 dir, 2 frames), build (8 dir, 2 frames). Egyptian clothing/headwear style. Include player-color mask.","acceptance_criteria":"- [ ] Asset naming: assets/sprites/units/villager_egypt/villager_egypt_{animation}_{direction}_{frame}.png\n- [ ] Directions: 8 (n, ne, e, se, s, sw, w, nw)\n- [ ] Idle: 8 dirs × 2 frames = 16 files\n- [ ] Walk: 8 dirs × 4 frames = 32 files\n- [ ] Gather: 8 dirs × 2 frames = 16 files\n- [ ] Build: 8 dirs × 2 frames = 16 files\n- [ ] Unit height: ~48px tall (villager-class per ADR-008)\n- [ ] Egyptian clothing: white linen, headcloth/nemes, distinct from default villager\n- [ ] Magenta (#FF00FF) mask on clothing accent for player color shader\n- [ ] ./tools/ror validate-assets passes","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:56Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:54Z","labels":["art","egypt","sprites","units"],"dependencies":[{"issue_id":"roots-of-reason-rb4.5","depends_on_id":"roots-of-reason-rb4","type":"parent-child","created_at":"2026-03-01T11:56:55Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-rb4.5","depends_on_id":"roots-of-reason-rb4.1","type":"blocks","created_at":"2026-03-01T12:08:57Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-rb4.6","title":"Egypt: civ selection UI card with unique unit/building art","description":"Create civ selection card art for Egypt showing: civ icon/banner, Pyramid illustration, War Chariot illustration, bonus text layout. Integrate into civ_card_builder.gd and civ_selection_screen.gd.","acceptance_criteria":"- [ ] Egypt appears in civ_selection_screen.gd civ list\n- [ ] civ_card_builder.gd renders Egypt card with: civ name, bonus text, Pyramid art, War Chariot art\n- [ ] Bonus text matches data/civilizations/egypt.json exactly\n- [ ] Unique building and unit illustrations are legible at card size\n- [ ] Card layout matches existing Mesopotamia/Rome/Polynesia cards\n- [ ] Selecting Egypt in lobby sets player civ to \"egypt\" in GameManager\n- [ ] GdUnit4 test: civ_card_builder produces valid card node for \"egypt\"","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T16:56:56Z","created_by":"Dave Tashner","updated_at":"2026-03-01T17:10:55Z","labels":["art","egypt","ui"],"dependencies":[{"issue_id":"roots-of-reason-rb4.6","depends_on_id":"roots-of-reason-rb4","type":"parent-child","created_at":"2026-03-01T11:56:56Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-rb4.6","depends_on_id":"roots-of-reason-rb4.1","type":"blocks","created_at":"2026-03-01T12:08:58Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-rb4.6","depends_on_id":"roots-of-reason-rb4.2","type":"blocks","created_at":"2026-03-01T12:08:58Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-rvl","title":"ADR-003: Single-player First","description":"AI opponents via state machines and behavior trees. No networking code in initial release. Multiplayer deferred to post-MVP.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:03Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:44Z","closed_at":"2026-02-22T22:39:44Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-tcj","title":"Deduplicate MOVE_SPEED constant","description":"MOVE_SPEED = 105.0 hardcoded in both prototype_unit.gd and formation_manager.gd. Define single constant and reference from both files.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T06:40:31Z","closed_at":"2026-02-28T06:40:31Z","close_reason":"Completed in PR #175"}
{"id":"roots-of-reason-tlc","title":"Speed up test runner: --changed flag and --jobs parallel sharding","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T01:44:12Z","created_by":"Dave Tashner","updated_at":"2026-02-28T02:26:45Z","closed_at":"2026-02-28T02:26:45Z","close_reason":"Completed in PR #152"}
{"id":"roots-of-reason-u7n","title":"Trees render over fog of war","description":"Resource nodes use position.y as z_index, placing them above the fog layer","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:14:14Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:16:38Z","closed_at":"2026-02-28T05:16:38Z","close_reason":"Completed in PR #168"}
{"id":"roots-of-reason-ugb","title":"Generate wolf walk sprites (8 directions, 4 frames)","description":"Generate wolf_walk_{dir}_{frame}.png for all 8 directions x 4 frames = 32 PNGs. See docs/design/wolf_sprite_prompt.md for prompts and specs.","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:42:45Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:42:45Z","labels":["art","sprites","wolf"]}
{"id":"roots-of-reason-ul8","title":"Generate terrain tile art: river","description":"Generate 4 river tile variants at 1024x1024 using image generation.\n\nPrompt:\n\nIsometric diamond tile for a 2D RTS game. The tile is a perfect diamond (rhombus) shape with a 2:1 width-to-height ratio, viewed from a top-down isometric camera angle (approximately 30 degrees from horizontal). Pixel art style with clean edges. Transparent background outside the diamond. No objects, units, or structures — terrain surface only. The tile should seamlessly connect with identical copies of itself on all four edges.\n\nFlowing river water with gentle current lines and small eddies. Slightly murky with visible flow direction (upper-left to lower-right). Sunlight from the upper-left creating sparkle highlights. Colors: river blues (#4A90C4, #3A80B4, #5AA0D0).\n\nOutput: 4 variants at 1024x1024, downscale to 128x64 for final asset. Save to assets/tiles/terrain/river_*.png","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-27T23:21:10Z","created_by":"Dave Tashner","updated_at":"2026-02-27T23:21:10Z","labels":["art"]}
{"id":"roots-of-reason-una","title":"ADR-001: Game Engine — Godot 4","description":"GDScript as primary language, C# for hot paths later. Godot 4 chosen for: open source, cross-platform (Mac + Windows), no licensing fees, strong 2D support, active community.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:02Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:42Z","closed_at":"2026-02-22T22:39:42Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-v4w","title":"Generate dog walk sprites (8 directions, 4 frames)","description":"Generate dog_walk_{dir}_{frame}.png for all 8 directions x 4 frames = 32 PNGs. Includes magenta collar for player color. See docs/design/wolf_sprite_prompt.md.","status":"open","priority":3,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T05:42:49Z","created_by":"Dave Tashner","updated_at":"2026-02-28T05:42:49Z","labels":["art","dog","sprites"]}
{"id":"roots-of-reason-v78","title":"Animation Verification Tooling","description":"Tools for visually inspecting and verifying unit sprite animations without manual gameplay. Two tools: (1) sprite-sheet: offline contact sheet generator, (2) animate: live filmstrip capture via debug server.","status":"closed","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T04:20:30Z","created_by":"Dave Tashner","updated_at":"2026-03-01T04:30:05Z","closed_at":"2026-03-01T04:30:05Z","close_reason":"Completed in PR #247","labels":["animation","art","tools"]}
{"id":"roots-of-reason-v78.1","title":"Add ror sprite-sheet command — offline animation contact sheet generator","description":"Python tool that reads manifest.json + individual PNG files to composite all frames of a given animation/direction into a tiled contact sheet image. No running game required. Supports: single direction, all directions, all animations. Outputs to tests/screenshots/sprite-sheets/.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T04:20:36Z","created_by":"Dave Tashner","updated_at":"2026-03-01T04:30:04Z","closed_at":"2026-03-01T04:30:04Z","close_reason":"Completed in PR #247","labels":["art","tools"],"dependencies":[{"issue_id":"roots-of-reason-v78.1","depends_on_id":"roots-of-reason-v78","type":"parent-child","created_at":"2026-02-28T23:20:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-v78.2","title":"Add ror animate command — live filmstrip capture via debug server","description":"Shell tool that uses the debug server to spawn a unit, issue move commands in each direction, and capture timed screenshots at frame-duration intervals. Produces a filmstrip PNG showing the full animation cycle as rendered in-game. Requires running game with --debug-server.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T04:20:41Z","created_by":"Dave Tashner","updated_at":"2026-03-01T04:30:04Z","closed_at":"2026-03-01T04:30:04Z","close_reason":"Completed in PR #247","labels":["art","tools"],"dependencies":[{"issue_id":"roots-of-reason-v78.2","depends_on_id":"roots-of-reason-v78","type":"parent-child","created_at":"2026-02-28T23:20:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-v9p","title":"Raise CI coverage threshold from 18% to 85%","description":"CI workflow at .github/workflows/ci.yml uses `--threshold 18` but CLAUDE.md states 90% target. Raise to 85 to catch coverage regressions.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-28T06:06:08Z","updated_at":"2026-02-28T13:50:50Z","closed_at":"2026-02-28T13:50:50Z","close_reason":"Completed in PR #172"}
{"id":"roots-of-reason-ve9","title":"Progressive tech tree disclosure + opponent intel","description":"Add visibility tiers (visible/shadowed/hidden) to tech tree viewer based on research progress. Add espionage tech for opponent research intel.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T12:58:27Z","created_by":"Dave Tashner","updated_at":"2026-02-26T13:17:20Z","closed_at":"2026-02-26T13:17:20Z","close_reason":"Completed in PR #87"}
{"id":"roots-of-reason-vh6","title":"Process Lumber Camp source sprite to game-ready asset","description":"Process the AI-generated lumber_camp_01.png (1536x1024) source sprite into a game-ready asset. Downscale to 2x2 building dimensions (256x192), place in the correct output directory, and create the lumber_camp.json data file.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T15:47:47Z","created_by":"Dave Tashner","updated_at":"2026-02-28T15:52:43Z","closed_at":"2026-02-28T15:52:43Z","close_reason":"Completed in PR #202","labels":["art","buildings"]}
{"id":"roots-of-reason-wza","title":"Add conventional commit format enforcement to CI","description":"No enforcement of conventional commit format (feat:/fix:/test:) on PR titles. Add commitlint as optional warning-only CI step.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-03-01T04:45:46Z","closed_at":"2026-03-01T04:45:46Z","close_reason":"Completed in PR #249"}
{"id":"roots-of-reason-xly","title":"Shore tile orientation smoothing and variant coherence","description":"Shore tiles display waves facing inconsistent directions. Add orientation smoothing pass and segment-based variant selection so adjacent shore tiles use consistent wave direction and sprite variant.","status":"in_progress","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T14:06:44Z","created_by":"Dave Tashner","updated_at":"2026-03-01T14:06:49Z","labels":["coastline","map","visual"]}
{"id":"roots-of-reason-xp5","title":"Add tests for direction_utils.gd and game_utils.gd","description":"DirectionUtils boundary conditions (8 sectors, zero vector) and GameUtils autoload cache (hit/miss/stale) are untested. Create test files for both.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T06:55:20Z","closed_at":"2026-02-28T06:55:20Z","close_reason":"Completed in PR #179"}
{"id":"roots-of-reason-ylw","title":"QA \u0026 Test Quality Improvements","description":"Comprehensive audit findings from QA review. Addresses coverage gaps, test quality, CI pipeline improvements, code quality, data integrity, and game system test isolation issues.","status":"in_progress","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-28T06:04:45Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:36:24Z"}
{"id":"roots-of-reason-ylw.10","title":"Add save/load tests for historical_event_vfx.gd and pandemic_vfx.gd","description":"Both historical_event_vfx.gd and pandemic_vfx.gd implement save_state/load_state but have zero test coverage. Low complexity but easy wins for coverage and save/load integrity. Related to existing bead i6x (which covers historical_event_manager inner classes).\n\nTests needed for each:\n- save_state returns expected keys\n- load_state round-trip preserves all fields\n- Edge case: load_state with empty/partial data\n\nAcceptance criteria:\n- Both VFX scripts have save/load round-trip tests\n- Tests handle missing/partial save data gracefully","status":"closed","priority":3,"issue_type":"feature","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:35:32Z","created_by":"Dave Tashner","updated_at":"2026-03-01T04:48:09Z","closed_at":"2026-03-01T04:48:09Z","close_reason":"Completed in PR #250","labels":["coverage"],"dependencies":[{"issue_id":"roots-of-reason-ylw.10","depends_on_id":"roots-of-reason-ylw","type":"parent-child","created_at":"2026-02-28T21:35:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ylw.3","title":"Create shared test helpers module (unit/resource/mock factories)","description":"Create tests/helpers/ with canonical factories and mocks to eliminate duplication across 8+ test files.\n\nFiles to create:\n- tests/helpers/unit_factory.gd — _create_unit(), _create_villager() with standard defaults\n- tests/helpers/resource_factory.gd — _create_resource_node(), _create_drop_off()\n- tests/helpers/mock_map.gd — canonical MockMap with find_nearest_hostile stub\n- tests/helpers/mock_pathfinder.gd — canonical MockPathfinder\n- tests/helpers/assertion_helpers.gd — assert_food(player, amount), assert_resource() wrappers\n\nMigrate the 3 most-duplicated patterns first (unit creation, resource node, drop-off). Update existing tests in test_villager_gathering.gd, test_mid_action_save_load.gd, test_nomadic_save_load.gd to use shared helpers. Update /gdtest skill template to import from helpers.\n\nAcceptance criteria:\n- No more than one canonical definition of each mock/factory\n- Existing tests pass unchanged after migration\n- New test authoring requires zero copy-paste of factory boilerplate","status":"closed","priority":1,"issue_type":"feature","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:35:03Z","created_by":"Dave Tashner","updated_at":"2026-03-01T02:50:08Z","closed_at":"2026-03-01T02:50:08Z","close_reason":"Completed in PR #236","labels":["test-infra","velocity"],"dependencies":[{"issue_id":"roots-of-reason-ylw.3","depends_on_id":"roots-of-reason-ylw","type":"parent-child","created_at":"2026-02-28T21:35:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ylw.4","title":"Add test suite for heal_feed_component.gd","description":"heal_feed_component.gd has a real state machine (wolf feeding flow), save/load with pending target resolution, and was extracted from prototype_unit.gd. Zero tests despite meaningful complexity. A bug here silently breaks wolf domestication saves.\n\nTests needed:\n- Wolf feeding state machine transitions (idle -\u003e feeding -\u003e complete)\n- Feed target assignment and clearing\n- save_state/load_state round-trip with pending feed target name\n- resolve_target after load (links pending name back to node)\n- Edge cases: target freed before feed completes, invalid target name in save data\n- Integration with heal behavior\n\nAcceptance criteria:\n- Full state machine coverage\n- Save/load round-trip passes with pending target\n- Edge cases for freed/invalid targets covered","status":"closed","priority":2,"issue_type":"feature","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:35:06Z","created_by":"Dave Tashner","updated_at":"2026-03-01T03:00:08Z","closed_at":"2026-03-01T03:00:08Z","close_reason":"Completed in PR #238","labels":["correctness","coverage"],"dependencies":[{"issue_id":"roots-of-reason-ylw.4","depends_on_id":"roots-of-reason-ylw","type":"parent-child","created_at":"2026-02-28T21:35:06Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ylw.5","title":"Add save/load round-trip tests for war_survival.gd","description":"war_survival.gd has save_state that serializes _unit_cooldowns dict with integer keys. load_state handles the JSON string-\u003eint key cast, but there is no round-trip test to verify it. This is exactly the class of bug the JSON numerics gotcha in CLAUDE.md warns about.\n\nTests needed:\n- test_save_load_unit_cooldowns_round_trip — save with active cooldowns, load, verify keys are ints and values match\n- test_save_load_empty_cooldowns — round-trip with no active cooldowns\n- test_save_load_multiple_cooldowns — verify multiple entries survive serialization\n\nAcceptance criteria:\n- Integer keys survive JSON round-trip (not silently cast to strings)\n- Empty state round-trips cleanly\n- Existing 12 war_survival tests continue to pass","status":"closed","priority":2,"issue_type":"feature","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:35:09Z","created_by":"Dave Tashner","updated_at":"2026-03-01T03:04:06Z","closed_at":"2026-03-01T03:04:06Z","close_reason":"Completed in PR #239","labels":["correctness","coverage"],"dependencies":[{"issue_id":"roots-of-reason-ylw.5","depends_on_id":"roots-of-reason-ylw","type":"parent-child","created_at":"2026-02-28T21:35:08Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ylw.6","title":"Replace private field access anti-pattern in tests","description":"At least 3 test files directly access ResourceManager._stockpiles and ResourceManager._corruption_rates for setup/cleanup. If these internal fields are renamed, tests silently pass with wrong state.\n\nTasks:\n1. Audit all test files for direct access to _-prefixed fields on singletons\n2. Replace with public API calls (init_player, add_resource, reset)\n3. If no suitable public reset API exists, add a test-friendly reset() method\n4. Verify all tests still pass after migration\n\nAcceptance criteria:\n- Zero direct _-prefixed field access on singletons in test files\n- All tests pass\n- Any new reset() methods are documented","status":"closed","priority":2,"issue_type":"feature","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:35:11Z","created_by":"Dave Tashner","updated_at":"2026-03-01T03:21:33Z","closed_at":"2026-03-01T03:21:33Z","close_reason":"Completed in PR #241","labels":["maintainability","test-quality"],"dependencies":[{"issue_id":"roots-of-reason-ylw.6","depends_on_id":"roots-of-reason-ylw","type":"parent-child","created_at":"2026-02-28T21:35:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ylw.7","title":"Add save/load tests for base_fauna_ai.gd","description":"base_fauna_ai.gd contains shared save/load logic inherited by all fauna (wolf, dog, pirate). Currently only subclass behaviors are tested; the base class save/load is untested directly. A change to the base class save format could silently break all fauna saves.\n\nTests needed:\n- Base class save_state/load_state round-trip (movement state, scan timer, patrol position)\n- Verify subclass save data is preserved through base class load\n- Edge cases: null patrol position, zero scan timer\n\nAcceptance criteria:\n- Base fauna save/load tested independently of subclasses\n- Round-trip preserves movement state, scan timer, patrol position","status":"closed","priority":3,"issue_type":"feature","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:35:16Z","created_by":"Dave Tashner","updated_at":"2026-03-01T05:09:29Z","closed_at":"2026-03-01T05:09:29Z","close_reason":"Completed in PR #251","labels":["coverage"],"dependencies":[{"issue_id":"roots-of-reason-ylw.7","depends_on_id":"roots-of-reason-ylw","type":"parent-child","created_at":"2026-02-28T21:35:15Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ylw.8","title":"Rename CI coverage metric to clarify it measures file existence, not line coverage","description":"ror coverage checks whether a test FILE exists for each script, not line or branch coverage. The name 'coverage' is misleading. Related to existing bead 4hg (which may be closed).\n\nTasks:\n1. Rename the ror subcommand or add clarifying output (e.g., 'Script test file coverage: 77%')\n2. Update ror coverage --help to explain what it measures\n3. Update CLAUDE.md quality gates section if needed\n4. Consider adding a note about the difference to CI output\n\nAcceptance criteria:\n- Developer running ror coverage understands it measures file existence\n- No confusion with line/branch coverage metrics","status":"closed","priority":3,"issue_type":"chore","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:35:21Z","created_by":"Dave Tashner","updated_at":"2026-03-01T04:50:39Z","closed_at":"2026-03-01T04:50:39Z","close_reason":"Completed in PR #252","labels":["ci","clarity"],"dependencies":[{"issue_id":"roots-of-reason-ylw.8","depends_on_id":"roots-of-reason-ylw","type":"parent-child","created_at":"2026-02-28T21:35:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ylw.9","title":"Add full game loop integration smoke test","description":"Beyond the existing scene smoke test (loads every .tscn), add an integration test that actually runs the game loop. This catches crashes, NaN propagation, and cross-system interaction bugs that file-loading alone cannot detect.\n\nTest design:\n1. Boot prototype_main.tscn programmatically\n2. Advance 30 seconds of game time via direct _process() calls\n3. Assert no NaN values in resource stockpiles\n4. Assert no orphaned nodes or error logs\n5. Save full game state\n6. Load game state\n7. Advance 30 more seconds\n8. Assert game is still in a valid state (no crashes, resources non-negative, unit counts stable)\n\nAcceptance criteria:\n- Single test file, runs in \u003c10s headless\n- Catches crashes and NaN propagation in the main game loop\n- Save/load mid-run is stable","status":"closed","priority":3,"issue_type":"feature","owner":"davetashner@users.noreply.github.com","created_at":"2026-03-01T02:35:28Z","created_by":"Dave Tashner","updated_at":"2026-03-01T06:07:01Z","closed_at":"2026-03-01T06:07:01Z","close_reason":"Completed in PR #255","labels":["coverage","integration"],"dependencies":[{"issue_id":"roots-of-reason-ylw.9","depends_on_id":"roots-of-reason-ylw","type":"parent-child","created_at":"2026-02-28T21:35:28Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-yw6","title":"Add RPS triangle data-driven test","description":"test_combat_resolver.gd uses inline stats but never validates real JSON unit data produces correct rock-paper-scissors ordering. Add test loading infantry/archer/cavalry from DataLoader and asserting correct win/loss margins.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-28T06:06:09Z","updated_at":"2026-02-28T06:50:15Z","closed_at":"2026-02-28T06:50:15Z","close_reason":"Completed in PR #178"}
