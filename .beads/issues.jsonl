{"id":"roots-of-reason-02j","title":"ADR-021: Tech Tree Historical Expansion — Impact Analysis","description":"Decision record evaluating the addition of 13 historically significant technologies to the tech tree. Covers impact on balance, prerequisite chains, research pacing, AI personalities, Knowledge Burning, and the Singularity Chain.","status":"closed","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:05:00Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:29:55Z","closed_at":"2026-02-26T01:29:55Z","close_reason":"ADR-021 written and merged in PR #61. Tech tree historical expansion impact analysis complete.","labels":["adr architecture tech history"]}
{"id":"roots-of-reason-1oo","title":"Epic: Developer Toolbox (ror CLI + Claude Skills)","description":"A unified developer toolbox for Roots of Reason: a `ror` CLI for common dev tasks (test, lint, scaffolding, validation) and Claude Code skills for AI-assisted workflows (test generation, ADR creation, sprint planning). Build incrementally — each tool/skill gets its own PR.","status":"closed","priority":1,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:17Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:01:53Z","closed_at":"2026-02-23T03:01:53Z","close_reason":"All 13 child tasks completed across PRs #16-#23","labels":["dx","tools"]}
{"id":"roots-of-reason-1oo.1","title":"ror test — local headless test runner","description":"Wrapper to run GdUnit4 tests locally via headless Godot. Supports: ror test (all), ror test tests/autoloads/ (subset). Calls godot --headless with the GdUnit4 runtest script. Should print colorized pass/fail summary.","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:22Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:13:21Z","closed_at":"2026-02-22T22:13:21Z","close_reason":"Completed in PR #3","labels":["cli","testing","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.1","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.10","title":"/adr skill — create or update architecture decision records","description":"Claude Code skill: interactive ADR creation flow. Asks for topic, generates the decision record, appends to AGENTS.md under the ADR section, creates a beads decision issue. Can also update existing ADRs.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:59Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:37Z","closed_at":"2026-02-23T02:48:37Z","close_reason":"Completed in PR #17","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.10","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.11","title":"/epic skill — plan and create an epic with stories","description":"Claude Code skill: takes a feature description, breaks it into stories with dependencies, creates beads epic + child task issues, sets up blocker relationships. Generates the dependency tree.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:00:00Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:38Z","closed_at":"2026-02-23T02:48:38Z","close_reason":"Completed in PR #17","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.11","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.12","title":"/preflight skill — pre-merge quality check","description":"Claude Code skill: runs lint, format check, tests, checks CI status on current branch, verifies beads issues are linked in commit messages, confirms no secrets staged. One-stop pre-merge gate.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:00:00Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:38Z","closed_at":"2026-02-23T02:48:38Z","close_reason":"Completed in PR #18","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.12","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T17:00:00Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.13","title":"/sprint skill — suggest next tasks from backlog","description":"Claude Code skill: reads the beads backlog, identifies unblocked P0/P1 work, considers dependency order and epic progress, suggests the next 3-5 tasks with context on why each is ready and what it unblocks.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:00:01Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:39Z","closed_at":"2026-02-23T02:48:39Z","close_reason":"Completed in PR #18","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.13","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T17:00:00Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.2","title":"ror lint — one-command lint and format check","description":"Wraps gdlint scripts/ tests/ \u0026\u0026 gdformat --check scripts/ tests/. Supports --fix mode to auto-format. Ensures gdtoolkit venv is available (auto-creates if missing).","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:38Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:13:22Z","closed_at":"2026-02-22T22:13:22Z","close_reason":"Completed in PR #3","labels":["cli","quality","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.2","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.3","title":"ror new-test — test file scaffolder","description":"Scaffolds a GdUnit4 test file for a given script. Reads the source, creates test file in mirror tests/ directory, generates test stubs for each public function. Usage: ror new-test scripts/autoloads/resource_manager.gd","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:39Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:36Z","closed_at":"2026-02-23T02:48:36Z","close_reason":"Completed in PR #19","labels":["cli","testing","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.3","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:38Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.4","title":"ror coverage — coverage report wrapper","description":"Coverage report wrapper for local dev. Shows which scripts are below the CI threshold. Depends on mgt.5 (coverage enforcement) landing first.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:39Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:30:05Z","closed_at":"2026-02-22T22:30:05Z","close_reason":"Completed in PR #4","labels":["cli","testing","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.4","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.5","title":"ror gen-sprites — procedural art generator orchestrator","description":"One command to regenerate all Phase 1 placeholder art: tiles, units, buildings. Orchestrates the individual Python generators in tools/. Usage: ror gen-sprites (all), ror gen-sprites tiles, etc.","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:40Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:48:36Z","closed_at":"2026-02-23T02:48:36Z","close_reason":"Completed in PR #20","labels":["art","cli","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.5","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.6","title":"ror validate-assets — CI-ready asset validator","description":"Validates all sprites against ADR-008 conventions: dimensions match entity type, naming is snake_case, frame counts match animation budget, magenta mask regions present for player-colored sprites.\n\n## Acceptance Criteria\n- [ ] CLI command: ror validate-assets (or ror va shorthand)\n- [ ] Validates all sprites in assets/ against rules in tools/asset_config.json\n- [ ] Checks: file naming convention (snake_case), dimensions match sprite scale contract\n- [ ] Checks: required animation frames present (idle/walk/attack/death per unit)\n- [ ] Checks: player color mask region present (#FF00FF) where required\n- [ ] Reports errors with file path + expected vs actual values\n- [ ] Exit code 0 on pass, 1 on failure (CI-compatible)\n- [ ] Runs in \u003c 10 seconds for full asset directory\n- [ ] Unit tests for each validation rule","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:40Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:01:44Z","closed_at":"2026-02-23T03:01:44Z","close_reason":"Completed in PR #22","labels":["art","cli","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.6","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.7","title":"ror scene-tree — print scene node tree without editor","description":"Parses a .tscn file and prints its node tree structure. Useful for debugging scene composition without opening the editor. Usage: ror scene-tree scenes/prototype/prototype_main.tscn\n\n## Acceptance Criteria\n- [ ] CLI command: ror scene-tree \u003cscene_path\u003e (e.g., ror scene-tree scenes/game/main.tscn)\n- [ ] Prints indented node tree of the .tscn file without launching Godot editor\n- [ ] Shows: node name, node type, attached script path\n- [ ] Supports --depth flag to limit tree depth\n- [ ] Parses .tscn text format directly (no Godot runtime needed)\n- [ ] Handles inherited scenes (shows base scene reference)\n- [ ] Exit code 0 on success, 1 on invalid path or parse error\n- [ ] Unit tests for .tscn parsing","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:41Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:01:44Z","closed_at":"2026-02-23T03:01:44Z","close_reason":"Completed in PR #21","labels":["cli","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.7","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.8","title":"ror data-check — JSON data schema validator","description":"Validates all JSON files in data/ against expected schemas: unit stats have required fields (hp, attack, defense, speed), building costs are positive integers, tech tree references are valid, etc.\n\n## Acceptance Criteria\n- [ ] CLI command: ror data-check validates all JSON files in data/ against schemas\n- [ ] Schemas defined in data/schemas/ (one per data type: units, buildings, tech, etc.)\n- [ ] Checks: required fields present, types correct, enum values valid\n- [ ] Checks: cross-references valid (e.g., prerequisite_building IDs exist in buildings data)\n- [ ] Reports all errors (not just first) with file path + field + issue description\n- [ ] Exit code 0 on pass, 1 on failure (CI-compatible)\n- [ ] New data types require a schema before data files are added\n- [ ] Unit tests for each validation rule","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:42Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:01:45Z","closed_at":"2026-02-23T03:01:45Z","close_reason":"Completed in PR #23","labels":["cli","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.8","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:41Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-1oo.9","title":"/gdtest skill — generate GdUnit4 test suite for a script","description":"Claude Code skill: reads a GDScript file, generates a full GdUnit4 test suite following project conventions (extends GdUnitTestSuite, test_ prefix, assert_vector/assert_int/etc., mirror directory structure). Invoked as /gdtest \u003cpath\u003e.","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:59:58Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:13:22Z","closed_at":"2026-02-22T22:13:22Z","close_reason":"Completed in PR #3","labels":["skill","tools"],"dependencies":[{"issue_id":"roots-of-reason-1oo.9","depends_on_id":"roots-of-reason-1oo","type":"parent-child","created_at":"2026-02-22T16:59:58Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj","title":"Epic 6: Unit System","description":"Unit stats (HP, attack, defense, speed, range, LOS), unit types (Villager, Infantry, Archer, Cavalry, Siege, Naval), production queues, upgrades, formations.","status":"open","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:08Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:08Z","labels":["epic","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj","depends_on_id":"roots-of-reason-7y5","type":"blocks","created_at":"2026-02-22T14:44:55Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.1","title":"Unit stats: HP, attack, defense, speed, range, LOS","description":"Define unit stat model: HP (hit points), Attack (base damage), Defense (damage reduction), Speed (tiles/sec), Range (attack range in tiles), LOS (line of sight radius). Stats loaded from data files.\n\n## Acceptance Criteria\n- [ ] Unit stat schema: hp, attack, defense, speed, range, line_of_sight, armor_type, attack_type\n- [ ] All unit stats defined in data/units/*.json per unit type\n- [ ] Stats loaded via DataLoader.get_unit_stats(unit_id)\n- [ ] Stats can be modified by age upgrades (base_stat + upgrade_bonus pattern)\n- [ ] Stat modifiers from civ bonuses applied at load time\n- [ ] Runtime stat access via unit.get_stat(stat_name) method\n- [ ] Stats serializable for save/load (base + current with modifiers)\n- [ ] Unit tests for stat loading, modifier stacking, and civ bonus application\n- [ ] Validation: all unit JSON files checked for required fields at load time","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:28Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:31:58Z","closed_at":"2026-02-23T13:31:58Z","close_reason":"Completed in PR #36","labels":["stats","story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.1","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:27Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.2","title":"Unit types: Villager, Infantry, Archer, Cavalry, Siege, Naval","description":"Implement unit categories: Villager (gathers, builds), Infantry (melee, slow, armored), Archer (ranged, fragile), Cavalry (fast melee, bonus vs archers), Siege (slow, anti-building), Naval (water-only). Each with base stats.\n\n## Acceptance Criteria\n- [ ] 6 base unit categories defined in data/units/\n- [ ] Villager: gathers resources, builds, repairs, low combat stats\n- [ ] Infantry: melee, medium HP/attack, bonus vs Archers\n- [ ] Archer: ranged, low HP, bonus vs Cavalry, minimum range (can't fire point-blank)\n- [ ] Cavalry: fast, high attack, bonus vs Infantry, weak to Archers\n- [ ] Siege: slow, high building damage (ignores 80% building reduction), fragile vs units\n- [ ] Naval: water-only movement, ranged attack, transports land units\n- [ ] Each unit type has Phase 1 placeholder sprite (colored circle with letter: V, I, A, C, S, N)\n- [ ] Unit type determines available commands (e.g., only Villagers can gather/build)\n- [ ] All stats per unit type data-driven from JSON\n- [ ] Civ-specific unique units inherit from base type with stat overrides\n- [ ] Unit tests for type-specific command availability\n- [ ] Unit tests for bonus damage application (rock-paper-scissors)","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:28Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:46:29Z","closed_at":"2026-02-23T13:46:29Z","close_reason":"Completed in PR #38","labels":["story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.2","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:28Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.3","title":"Unit production from buildings with queue","description":"Buildings produce units: select building, click unit icon, unit added to queue. Queue shows up to 5 units. Production takes time and costs resources (deducted on queue). Units spawn at rally point.\n\n## Acceptance Criteria\n- [ ] Buildings that produce units have a production queue (max 5 items, configurable in JSON)\n- [ ] Queue displays in building info panel when building is selected\n- [ ] Each unit has a train_time and cost defined in JSON\n- [ ] Training begins when building is idle and queue is non-empty\n- [ ] Progress bar shown for current training unit\n- [ ] Trained unit spawns at rally point (default: building entrance, relocatable by right-click)\n- [ ] Training paused if population cap reached (resumes when cap freed)\n- [ ] Right-click queue item to cancel (refunds full cost)\n- [ ] Shift+click to queue 5 of same unit at once\n- [ ] Queue state serializable for save/load\n- [ ] Unit tests for queue operations (add, remove, cancel, refund)\n- [ ] Unit tests for pop cap pause/resume logic\n- [ ] Integration test: queue 3 infantry → verify 3 units spawn sequentially","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:29Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:58:45Z","closed_at":"2026-02-23T13:58:45Z","close_reason":"Completed in PR #41","labels":["production","story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.3","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:28Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.4","title":"Unit upgrades via tech tree","description":"Tech tree unlocks unit upgrades: +attack, +defense, +range, +speed. Upgrades apply globally to all existing and future units of that type. Research at specific buildings (Blacksmith, Library, etc.).","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:29Z","created_by":"Dave Tashner","updated_at":"2026-02-25T13:25:10Z","closed_at":"2026-02-25T13:25:10Z","close_reason":"Completed in PR #57","labels":["story","units","upgrades"],"dependencies":[{"issue_id":"roots-of-reason-2hj.4","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:29Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.5","title":"Formation movement","description":"Basic formation support: line, box, staggered. Selected group maintains formation shape when moving. Units adjust speed to stay in formation. Default formation is staggered.","status":"open","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:30Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:30Z","labels":["formations","story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.5","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T14:44:30Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.6","title":"Wolf fauna AI: patrol, aggro, and flee behavior","description":"Implement wolf AI behavior as a Gaia fauna unit.\n\nWolf behavior states (simple state machine):\n\nPATROL (default):\n- Wander randomly within 8-tile radius of spawn point\n- Pick a random tile in radius, walk to it, idle 3-5 seconds, pick another\n- If a lone villager enters aggro_radius (3 tiles): transition to ATTACK\n- If 3+ military units enter 5-tile radius: transition to FLEE\n- Wolves in the same pack stay loosely grouped (pack cohesion: try to stay within 4 tiles of packmates)\n\nATTACK:\n- Target the nearest villager within aggro radius\n- Chase at speed 2.0 (faster than villager at 1.5)\n- Attack with 8 damage on contact\n- If target dies or moves beyond 6 tiles: return to PATROL\n- If 2+ military units approach within 4 tiles: transition to FLEE\n- Pack behavior: if one wolf attacks, nearby packmates also aggro the same target\n\nFLEE:\n- Run away from the threat (opposite direction) at speed 2.0\n- Flee for 5 seconds or until 10 tiles from threat, then return to PATROL\n- Flee toward the pack's spawn point (run home)\n\nBEING_FED:\n- Entered when a villager uses the Feed command (see domestication story)\n- Wolf stops moving, plays eating animation (or idle facing the villager)\n- Cannot be aggro'd while being fed\n- After feeding completes, return to PATROL (with updated domestication progress)\n- If villager is killed during feeding: return to PATROL immediately\n\nDOMESTICATED:\n- Terminal state — wolf transforms into Dog unit (see dog story)\n- Remove wolf from Gaia faction, create Dog unit for the feeding player\n\nWolf death:\n- When killed: drop 50 Food as a harvestable food source (like hunting a deer)\n- Death animation, corpse fades\n- Pack members do NOT avenge — they flee when a packmate is killed\n\nAcceptance criteria:\n- Wolves patrol naturally around spawn point in loose packs\n- Wolves aggro lone villagers and chase them\n- Wolves flee from military groups\n- Pack behavior: aggro spreads to packmates, flee when packmate dies\n- Smooth state transitions with no flickering between states\n- Being_fed state correctly pauses aggro","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:05:57Z","created_by":"Dave Tashner","updated_at":"2026-02-25T13:49:32Z","closed_at":"2026-02-25T13:49:32Z","close_reason":"Completed in PR #58","labels":["fauna","story","units","wolves"],"dependencies":[{"issue_id":"roots-of-reason-2hj.6","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T16:05:57Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-2hj.6","depends_on_id":"roots-of-reason-ovr.8","type":"blocks","created_at":"2026-02-22T16:06:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2hj.7","title":"Dog companion unit with hunting, alert, and town visibility behaviors","description":"Implement the Dog as a player-owned companion unit created through wolf domestication.\n\nDog stats:\n- HP: 25\n- Attack: 5\n- Defense: 0\n- Speed: 2.5 (fastest non-cavalry land unit)\n- LOS: 6 (excellent for scouting)\n- Population cost: 0 (does not count toward pop cap)\n- Not trainable at any building — only obtained through wolf domestication\n\nDog behavior AI (semi-autonomous, player can override with move commands):\n\nTOWN_PATROL (default when idle near Town Center):\n- If within 10 tiles of a friendly Town Center and no player commands pending\n- Wander between buildings in the town (pick random building within 8 tiles, walk to it, idle 2-3s, repeat)\n- Provides passive LOS bonus: all buildings within 8 tiles of TC gain +2 LOS\n- Bonus stacks up to 2 dogs (max +4 LOS from dog patrol)\n- Track which dogs are in town patrol range and recalculate LOS bonus when dogs move in/out\n\nHUNT_ASSIST (when near hunting villagers):\n- If within 5 tiles of a villager actively hunting (gathering from deer/boar) and no player commands pending\n- Follow the hunting villager at 3-tile distance\n- When villager targets prey, dog runs ahead toward the prey\n- Hunting gather rate for that villager: +25%\n- Deer flee radius reduced from 6 to 3 tiles when dog is within 5 tiles of prey\n- Visual: dog runs alongside villager, small bark animation when prey is targeted\n- If the villager stops hunting, return to TOWN_PATROL or IDLE\n\nDANGER_ALERT:\n- Passive ability, always active regardless of current behavior\n- Alert radius: 10 tiles (wider than LOS — the dog senses threats beyond sight)\n- When an enemy military unit enters alert radius:\n  - Dog plays bark animation + audio cue\n  - Minimap ping at dog's location\n  - All friendly units within 8 tiles of the dog gain +10% speed for 5 seconds\n  - Alert cooldown: 15 seconds (no spam alerts)\n- After alerting: transition to FLEE\n\nFLEE:\n- Dog runs toward nearest friendly Town Center or military unit at full speed (2.5)\n- Dogs NEVER fight — they always flee from enemy units\n- If cornered (no path to safety): cower in place\n\nFOLLOW (player command):\n- Player right-clicks a villager or unit: dog follows that unit at 3-tile distance\n- Useful for scouting or manually assigning to a hunting party\n- Override behavior until new command or unit dies\n\nGARRISON:\n- Dogs can be garrisoned inside Town Center for protection during raids\n- Garrisoned dogs still contribute to town LOS bonus (they're still in the town)\n- Ungarrison to resume patrol\n\nData file: data/units/dog.json\n{\n  \"name\": \"Dog\",\n  \"hp\": 25,\n  \"attack\": 5,\n  \"defense\": 0,\n  \"speed\": 2.5,\n  \"los\": 6,\n  \"population_cost\": 0,\n  \"alert_radius\": 10,\n  \"alert_speed_bonus\": 0.10,\n  \"alert_speed_duration\": 5.0,\n  \"alert_cooldown\": 15.0,\n  \"hunt_gather_bonus\": 0.25,\n  \"hunt_assist_radius\": 5,\n  \"town_patrol_radius\": 10,\n  \"town_los_bonus\": 2,\n  \"max_town_los_stacks\": 2,\n  \"flee_speed\": 2.5\n}\n\nPlaceholder sprite: lighter gray circle (smaller than wolf) with small collar indicator (colored line = player color). Direction triangle like other units.\n\nAcceptance criteria:\n- Dogs patrol town and provide measurable LOS bonus (+2 per dog, max +4)\n- Dogs follow hunting villagers and increase gather rate by 25%\n- Deer flee less when dogs are nearby\n- Dogs bark and alert when enemies approach (audio + visual + minimap ping)\n- Alert speed boost applies to nearby friendly units\n- Dogs flee from combat and can be garrisoned\n- Dogs cost 0 population\n- Player can command dogs to move/follow","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:05:58Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:37:50Z","closed_at":"2026-02-26T03:37:50Z","close_reason":"Completed in PR #66","labels":["dogs","fauna","story","units"],"dependencies":[{"issue_id":"roots-of-reason-2hj.7","depends_on_id":"roots-of-reason-2hj","type":"parent-child","created_at":"2026-02-22T16:05:57Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-2hj.7","depends_on_id":"roots-of-reason-7wg.9","type":"blocks","created_at":"2026-02-22T16:06:11Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-2rx","title":"ADR-010: Wolf Domestication — Early Game Companion Mechanic","description":"In the Stone and Bronze Ages, players can domesticate wolves into dogs by feeding them. Dogs provide hunting, scouting, and early warning benefits. This is one of the first meaningful decisions a player makes — spending scarce early food on a wolf is a gamble that pays off over time.\n\nDECISION\n\n1. WOLVES AS GAIA FAUNA\nWolves spawn during map generation as neutral (Gaia-owned) fauna, similar to deer. They roam in small packs of 2-3 near forests and away from starting positions.\n- Spawn count: 3-5 wolf packs per map (6-15 individual wolves)\n- Behavior: wolves patrol a small territory (8-tile radius from spawn), wander randomly\n- Wolves are HOSTILE to villagers who get too close (aggro radius: 3 tiles). They attack with 8 damage, 30 HP, speed 2.0 (faster than villagers). A lone villager will die to a wolf pack.\n- Wolves flee from groups of 3+ military units\n- Wolves can be killed for 50 Food (huntable like deer, but they fight back)\n\nSo the player has a choice: HUNT the wolves for quick food, or FEED them to domesticate.\n\n2. FEEDING / DOMESTICATION PROCESS\nTo domesticate a wolf, a villager must carry food to it using a new \"Feed\" command:\n(a) Select villager, right-click wolf while holding a modifier key (Shift+right-click) or use a \"Feed\" button in the command panel\n(b) Villager walks toward the wolf carrying food from the nearest stockpile (costs 25 Food per feeding)\n(c) Villager plays a \"feeding\" animation at 2-tile distance (doesn't get close enough to trigger aggro)\n(d) Wolf enters a \"being fed\" state — stops patrolling, plays eating animation\n(e) After feeding, the wolf's domestication progress increases by 33%\n(f) Three feedings (75 Food total) fully domesticates the wolf → it transforms into a Dog unit owned by the player\n(g) Domestication progress decays slowly if not fed within 60 seconds (10% per minute) — you need to commit, not just feed once and forget\n(h) If another player feeds the same wolf, progress resets to that player (contested domestication)\n\n3. DOG UNIT\nOnce domesticated, the wolf becomes a Dog — a non-trainable companion unit:\n- HP: 25 (fragile, not a combat unit)\n- Attack: 5 (light, can help finish off wounded units)\n- Defense: 0\n- Speed: 2.5 (very fast — faster than all land units except cavalry)\n- LOS: 6 (excellent scouting range, higher than any Stone Age unit)\n- Population cost: 0 (dogs don't count toward pop cap — they're companions, not trained soldiers)\n- Cannot be produced at any building — only obtained through domestication\n- Lifespan: unlimited (they don't die of old age)\n\n4. DOG BEHAVIORS AND BONUSES\n\n(a) HUNTING ASSIST\nDogs automatically follow villagers who are hunting (gathering from deer/boar). When a dog is within 5 tiles of a hunting villager:\n- Hunting gather rate increased by 25% (dogs help chase and corner prey)\n- Deer do not flee as far when a dog is nearby (reduced flee radius from 6 tiles to 3)\n- Visual: dog runs alongside the villager during hunting, barks at prey\n\n(b) DANGER ALERT\nDogs detect approaching enemy units earlier than other units:\n- Dog alert radius: 10 tiles (wider than its LOS of 6 — the dog \"senses\" threats it can't see)\n- When an enemy unit enters the alert radius, the dog barks (audio cue + visual bark icon)\n- A minimap ping appears at the dog's location\n- All friendly units within 8 tiles of the alerting dog receive a brief speed boost (+10% for 5 seconds) — adrenaline response to the warning\n- Alert triggers once per enemy group approach, not per-frame (cooldown: 15 seconds)\n\n(c) TOWN VISIBILITY BONUS\nWhen at least one dog is within 10 tiles of a Town Center:\n- All buildings within 8 tiles of the Town Center gain +2 LOS (dogs patrol the settlement, extending sight)\n- This bonus stacks up to 2 dogs (max +4 LOS from dogs)\n- Visual: dogs occasionally wander between buildings in the town (patrol animation)\n- The bonus is passive — no micromanagement needed, just keep dogs alive near your TC\n\n(d) DOG BEHAVIOR AI\nDogs are semi-autonomous — the player can issue move commands, but dogs also have AI:\n- If idle near Town Center: wander between buildings (town patrol)\n- If idle near hunting villagers: follow and assist\n- If enemy detected: bark alert, then flee toward nearest friendly military unit or Town Center\n- Dogs never attack-move or stand ground — they always flee from combat\n- Can be garrisoned inside Town Center for protection during raids\n\n5. LIMITATIONS AND COUNTERPLAY\n- Dogs are fragile (25 HP) — a few archer shots kill them. Protecting dogs during raids matters.\n- 75 Food in Stone Age is expensive (roughly 2 villagers worth). Domesticating multiple wolves is a significant investment.\n- Only 3-5 packs on the map means dogs are a LIMITED RESOURCE — competitive scouting to find and feed wolves before opponents\n- Wolves near the center of the map are contested — feeding them is risky if enemies are nearby\n- Dogs become less impactful in later ages as military units have higher LOS and better scouting. They remain useful for hunting bonus and alert.\n- If all dogs die, the player has no way to get more (unless the map has undomesticated wolves remaining)\n\n6. CIV INTERACTIONS\n- Mesopotamia: no specific wolf/dog bonus\n- Rome: potential future unique tech \"War Dogs\" — dogs gain +10 HP and +3 attack, become light combat units\n- Polynesia: no specific wolf/dog bonus (dogs historically important in Polynesian culture — could add a bonus later)\n\n7. AGE RESTRICTIONS\n- Wolf feeding is available from Stone Age (the very start of the game)\n- Dogs remain useful through all ages but have diminishing relative value\n- No tech required to feed wolves — it's a discovered mechanic (tooltip on wolf hover explains it)\n\nCONSEQUENCES\n- Creates an interesting Stone Age decision: spend 75 food on a wolf or train another villager?\n- Rewards map exploration (finding wolf packs before opponents)\n- Adds life to the early game — wolves roaming, dogs patrolling towns\n- Hunting becomes more engaging with dog assist\n- Early warning system rewards players who invest in dogs\n- Dogs become an emotional attachment for players (protecting them matters)\n- Limited supply creates scarcity and competition\n- Simple mechanic with deep strategic implications","status":"closed","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:04:39Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:49Z","closed_at":"2026-02-22T22:39:49Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","resources","units"]}
{"id":"roots-of-reason-2xv","title":"Define playable milestones","description":"The backlog is prioritized (P0/P1/P2) but lacks milestone groupings that define playable vertical slices. Needed to prevent scope creep and provide development cadence.\n\nAcceptance Criteria:\n- [ ] Milestone 1 defined: \"First Playable\" — camera + map + villager + gathering + Town Center\n- [ ] Milestone 2 defined: \"Combat Loop\" — units + buildings + basic combat + win condition\n- [ ] Milestone 3 defined: \"Full Game Loop\" — tech tree + ages + all victory conditions + AI\n- [ ] Milestone 4 defined: \"Content Complete\" — 3 civs + all buildings/units + balanced data\n- [ ] Each milestone lists specific beads issue IDs that must be closed\n- [ ] Milestones documented in a MILESTONES.md or equivalent\n- [ ] bd tags or labels used to associate issues with milestones","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:58:21Z","created_by":"Dave Tashner","updated_at":"2026-02-23T00:07:08Z","closed_at":"2026-02-23T00:07:08Z","close_reason":"Completed in PR #7","labels":["milestones","planning","task"]}
{"id":"roots-of-reason-317","title":"Epic 2: Core Game Loop","description":"Isometric camera, unit selection, movement with pathfinding, right-click commands, game clock and speed controls.","status":"closed","priority":0,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:06Z","created_by":"Dave Tashner","updated_at":"2026-02-23T01:29:27Z","closed_at":"2026-02-23T01:29:27Z","close_reason":"All 5 children completed: camera (PR #8), selection (PR #9), pathfinding (PR #10), right-click commands (PR #12), game clock (PR #11)","labels":["core","epic"],"dependencies":[{"issue_id":"roots-of-reason-317","depends_on_id":"roots-of-reason-81x","type":"blocks","created_at":"2026-02-22T14:44:53Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-317","depends_on_id":"roots-of-reason-be7","type":"blocks","created_at":"2026-02-22T15:06:30Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-317","depends_on_id":"roots-of-reason-mgt","type":"blocks","created_at":"2026-02-22T14:53:38Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.1","title":"Isometric camera with pan, zoom, edge-scroll","description":"Implement Camera2D with: WASD/arrow key panning, mouse wheel zoom (min/max limits), edge-of-screen scrolling, middle-mouse drag pan. Camera should work with isometric coordinate system.\n\nAcceptance Criteria:\n- [ ] Camera2D node centered on the isometric map\n- [ ] WASD/arrow key panning at configurable speed (data/settings/camera.json)\n- [ ] Edge-scroll when cursor within 20px of viewport edge (configurable threshold)\n- [ ] Mouse wheel zoom with min/max bounds (e.g., 0.5x to 2.0x)\n- [ ] Middle-mouse-drag panning as alternative input\n- [ ] Camera position clamped to map bounds (no scrolling into void)\n- [ ] Zoom centers on mouse cursor position, not screen center\n- [ ] All speed/threshold/bounds values loaded from JSON, never hardcoded\n- [ ] Camera state serializable (position, zoom) for save/load\n- [ ] Smooth interpolation on all movement (no jittery snapping)\n- [ ] Unit tests for clamp logic and zoom math\n- [ ] Works at 1920x1080 and scales with viewport stretch mode","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:15Z","created_by":"Dave Tashner","updated_at":"2026-02-23T00:23:54Z","closed_at":"2026-02-23T00:23:54Z","close_reason":"Completed in PR #8","labels":["camera","core","story"],"dependencies":[{"issue_id":"roots-of-reason-317.1","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:15Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.2","title":"Unit selection: click, box-select, control groups","description":"Left-click to select single unit, click-drag for box selection, Shift+click to add/remove from selection, Ctrl+number to set control group, number key to recall group. Selection highlight/indicator on units.\n\nAcceptance Criteria:\n- [ ] Left-click selects a single unit (deselects previous)\n- [ ] Left-click on empty ground deselects all\n- [ ] Click-drag draws a selection rectangle, selects all owned units within\n- [ ] Selection rectangle renders visually (semi-transparent green or team color)\n- [ ] Shift+click adds/removes individual unit from selection\n- [ ] Ctrl+[0-9] assigns selection to control group\n- [ ] [0-9] recalls control group (double-tap centers camera on group)\n- [ ] Selected units show visual indicator (circle, highlight, or outline)\n- [ ] Cannot select enemy units (click on enemy shows info only)\n- [ ] Selection state serializable for save/load\n- [ ] Maximum selection size: 40 units (configurable in JSON)\n- [ ] Unit tests for box-select geometry (isometric coordinate conversion)\n- [ ] Unit tests for control group assign/recall logic","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:16Z","created_by":"Dave Tashner","updated_at":"2026-02-23T00:42:24Z","closed_at":"2026-02-23T00:42:24Z","close_reason":"Completed in PR #9","labels":["core","selection","story"],"dependencies":[{"issue_id":"roots-of-reason-317.2","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:15Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.3","title":"Unit movement with A* pathfinding on isometric grid","description":"Implement A* pathfinding on isometric tile grid. Right-click to move selected units. Handle terrain obstacles, unit collision avoidance. Use Godot's AStarGrid2D or custom implementation suited to iso grid.\n\nAcceptance Criteria:\n- [ ] Right-click on ground issues move command to selected units\n- [ ] A* pathfinding on isometric tile grid using Godot's AStar2D or AStarGrid2D\n- [ ] Terrain types affect movement cost (e.g., road=0.5, grass=1.0, forest=1.5, river=2.0)\n- [ ] Movement costs loaded from data/settings/terrain.json\n- [ ] Units navigate around impassable tiles (water, cliffs, buildings)\n- [ ] Group movement: units move in formation, not single-file through one path\n- [ ] Move command shows click feedback (ground marker or ping animation)\n- [ ] Unit plays walk animation while moving, idle animation when stopped\n- [ ] Unit faces movement direction (8-direction sprite facing)\n- [ ] Path recalculates if obstacle appears mid-move (building placed, etc.)\n- [ ] Movement speed per unit type loaded from JSON unit stats\n- [ ] Unit position serializable for save/load\n- [ ] Unit tests for A* path computation on known grid layouts\n- [ ] Unit tests for terrain cost lookups\n- [ ] Integration test: unit moves from A to B avoiding obstacles","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:17Z","created_by":"Dave Tashner","updated_at":"2026-02-23T00:54:43Z","closed_at":"2026-02-23T00:54:43Z","close_reason":"Completed in PR #10","labels":["core","pathfinding","story"],"dependencies":[{"issue_id":"roots-of-reason-317.3","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:16Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.4","title":"Right-click context commands","description":"Right-click context-sensitive commands: move to empty ground, attack enemy unit, gather from resource node, build/repair building. Show appropriate cursor for each action.\n\nAcceptance Criteria:\n- [ ] Right-click on enemy unit/building → attack command\n- [ ] Right-click on resource node (with villager selected) → gather command\n- [ ] Right-click on own building (with unit selected) → garrison command\n- [ ] Right-click on ground → move command (handled by 317.3)\n- [ ] Cursor changes to indicate command type (sword for attack, pickaxe for gather, etc.)\n- [ ] Context determined by: selected unit type + clicked target type\n- [ ] Command dispatch via signal (e.g., command_issued(unit, command_type, target))\n- [ ] Invalid commands ignored with audio/visual feedback (error beep, cursor shake)\n- [ ] Right-click command table configurable per unit type in JSON\n- [ ] Unit tests for command resolution logic (unit type + target → command type)","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:17Z","created_by":"Dave Tashner","updated_at":"2026-02-23T01:28:15Z","closed_at":"2026-02-23T01:28:15Z","close_reason":"Completed in PR #12","labels":["commands","core","story"],"dependencies":[{"issue_id":"roots-of-reason-317.4","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:17Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-317.5","title":"Game clock and pause/speed controls","description":"Game timer with pause (Space), normal speed, fast (2x), very fast (3x). Display game time in HUD. All game logic should use game delta time, not real time.\n\nAcceptance Criteria:\n- [ ] Game clock tracks elapsed time in game-seconds (not wall-clock)\n- [ ] Pause/unpause with spacebar (configurable keybind)\n- [ ] Speed controls: 1x (normal), 1.5x, 2x, 3x (configurable in JSON)\n- [ ] Speed control via +/- keys and UI buttons\n- [ ] Game clock displayed in HUD (MM:SS format)\n- [ ] All game systems use game clock delta, not Engine.delta (respects pause/speed)\n- [ ] Pausing freezes all unit movement, gathering, construction, and combat\n- [ ] UI remains interactive while paused (can issue commands, queue actions)\n- [ ] Game clock value serializable for save/load\n- [ ] Unit tests for clock tick math at different speed multipliers\n- [ ] Visual indicator for current speed (1x/2x/3x shown in HUD)","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:18Z","created_by":"Dave Tashner","updated_at":"2026-02-23T01:10:21Z","closed_at":"2026-02-23T01:10:21Z","close_reason":"Completed in PR #11","labels":["clock","core","story"],"dependencies":[{"issue_id":"roots-of-reason-317.5","depends_on_id":"roots-of-reason-317","type":"parent-child","created_at":"2026-02-22T14:44:17Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-3hk","title":"ADR-008: Art Pipeline — Isometric Asset Production Strategy","description":"Defines the visual production pipeline for all game assets: tiles, units, buildings, UI elements, effects. This is the single highest-risk bottleneck for a solo/small team building an isometric RTS.\n\nDECISION\n\n1. Tile geometry: 128x64px diamond tiles (2:1 ratio). Elevation step: 32px vertical offset per level (half tile height). 3 usable elevation levels.\n\n2. Sprite scale contract:\n   - Villager: ~48px tall (standing), fits within one tile footprint\n   - Infantry/military: ~52-56px tall\n   - Cavalry/mounted: ~64px tall\n   - Buildings (1x1): 128x128px max\n   - Buildings (2x2): 256x192px max\n   - Buildings (3x3): 384x256px max\n   - Trees/resources: ~64-80px tall, single tile footprint\n\n3. Animation budget per unit type (AUTHORING cost, not output count):\n   - Idle: 4 keyframes (rendered to 32 output frames via 8 cameras)\n   - Walk: 8 keyframes (rendered to 64 output frames)\n   - Attack: 6 keyframes (rendered to 48 output frames)\n   - Death: 6 keyframes (rendered to 6 output frames, 1 direction mirrored)\n   - Gather (villager, per resource): 6 keyframes x 4 types (rendered to 96 output frames each)\n   - Military unit authoring cost: ~24 keyframes -\u003e ~150 output frames (6x multiplication via render rig)\n   - Villager authoring cost: ~48 keyframes -\u003e ~230 output frames\n   The 3D render pipeline eliminates per-direction manual work entirely.\n\n4. Art production method: THREE-PHASE AUTOMATED PIPELINE.\n\n   Phase 1 (prototype) — FULLY PROCEDURAL, ZERO MANUAL ART:\n   A Python/GDScript generator creates all placeholder sprites programmatically.\n   Colored geometric shapes: diamonds for tiles, circles for units, rectangles for buildings.\n   Script generates all directions, animation frames, player color variants.\n   Output committed to repo OR generated at build time.\n   Game is playable within hours of project creation.\n\n   Phase 2 (alpha) — BLENDER 3D-TO-2D RENDER PIPELINE:\n   This is the core production method, modeled after how Age of Empires was actually made.\n   (a) Model unit/building once in Blender (low-poly, stylized)\n   (b) Rig with standard humanoid skeleton (units) or no rig (buildings)\n   (c) Animate once — walk cycle, attack, idle, death. ONE direction only.\n   (d) Isometric render rig: 8 cameras at 45-degree intervals, all at iso angle (30 deg from horizontal), orthographic projection, consistent lighting\n   (e) Blender script batch-renders all animations from all 8 cameras automatically\n   (f) Pipeline script packs rendered PNGs into spritesheets, generates Godot SpriteFrames resources\n   (g) Player color variants: render with neutral base, apply team color via shader at runtime (NOT re-rendering per player)\n   One animation authored = 8 directions output. One model = all player colors via shader.\n\n   Phase 3 (polish) — TEXTURE REFINEMENT:\n   AI-generated textures applied to 3D models, re-rendered through same pipeline.\n   Hand-touch-up on final spritesheets in Aseprite for hero units and unique buildings.\n   Pipeline stays the same — only the model/texture quality improves.\n\n5. Player color system: Runtime shader recoloring, NOT baked sprites.\n   Units and buildings rendered with a designated \"team color\" mask region.\n   A Godot shader swaps the mask color to the player's color at runtime.\n   This means ONE set of sprites serves all players — no per-player sprite variants needed.\n   Player colors: Blue (#2E86DE), Red (#E74C3C), Teal (#1ABC9C), Orange (#F39C12).\n\n6. Color palettes per age cluster:\n   - Stone/Bronze: earthy browns, muted greens, terracotta\n   - Iron/Medieval: deeper greens, grays, stone blues\n   - Industrial: brick reds, iron grays, smoke, amber\n   - Information/Singularity: steel blues, white, neon accents, holographic\n\n7. Tileset production:\n   - 5 base terrains, ~15-20 variants each via Godot TileMap terrain autotiling\n   - Terrain tiles: procedurally generated for Phase 1, Blender-rendered for Phase 2\n   - Total: ~120 tiles minimum viable (80-100 terrain + 20 mountain + 12 elevation)\n\n8. Asset file organization:\n   - assets/sprites/units/{unit_name}/ — spritesheet per unit (shared across players via shader)\n   - assets/sprites/buildings/{building_name}/ — spritesheet per building\n   - assets/tiles/terrain/ — tileset textures\n   - assets/ui/ — UI elements, icons, fonts\n   - assets/effects/ — particle textures, projectiles\n   - blender/ — source .blend files, render rig template, batch export scripts\n   - tools/ — procedural generator, spritesheet packer, CI validation scripts\n\n9. Automation toolchain (all scripted, all CI-validated):\n   - tools/generate_placeholders.py — generates Phase 1 geometric sprites\n   - tools/spritesheet_packer.py — packs rendered PNGs into spritesheets + Godot resources\n   - blender/render_rig.blend — template scene with 8 cameras, lighting, render settings\n   - blender/batch_render.py — Blender script: render all animations for a model from all cameras\n   - CI step: validate sprite dimensions match scale contract, frame counts match budget\n\nCONSEQUENCES\n\n- Phase 1 is FULLY AUTOMATED — zero manual art, game playable immediately\n- Phase 2 authoring cost: ~24 keyframes per military unit (not 150 hand-drawn frames)\n- 3D pipeline gives 6-8x frame multiplication — 8 directions for the cost of 1\n- Player colors handled by shader — no per-player sprite duplication\n- Same pipeline serves all 3 phases — only input quality improves\n- Blender is free, scriptable, and has excellent isometric rendering support\n- CI validates sprite consistency — wrong dimensions caught before merge\n- Total authoring cost for 6 unit types: ~200 keyframes (not 1050 hand-drawn frames)","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:04:37Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:48Z","closed_at":"2026-02-22T22:39:48Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","art"]}
{"id":"roots-of-reason-636","title":"Epic 9: AI Opponent System","description":"AI opponents are the entire opposing experience in a single-player RTS. This epic covers difficulty tiers, economic simulation, military decision-making, personality types, and integration with unique mechanics like Knowledge Burning and Singularity victory.","status":"open","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:10Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:56:46Z","labels":["ai","epic"],"dependencies":[{"issue_id":"roots-of-reason-636","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T17:56:57Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-636","depends_on_id":"roots-of-reason-fk5","type":"blocks","created_at":"2026-02-22T14:44:57Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-636","depends_on_id":"roots-of-reason-fxt","type":"blocks","created_at":"2026-02-22T14:44:56Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.1","title":"AI personality types — Builder, Rusher, Boomer, Turtle","description":"Distinct AI personalities that create varied opponent experiences.\n\nAcceptance Criteria:\n- [ ] 4 personality types defined in data/ai/personalities.json\n- [ ] Builder: prioritizes economy and age advancement, attacks late\n- [ ] Rusher: early military pressure, sacrifices economy\n- [ ] Boomer: fast expansion to multiple TCs, greedy economy\n- [ ] Turtle: walls and defensive buildings, strong late-game army\n- [ ] Personality modifies build order selection and military thresholds\n- [ ] Each personality has a name and flavor text for game setup screen\n- [ ] Personality selection per AI slot in game setup (or random)\n- [ ] All personality parameters data-driven from JSON","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:37Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:57:26Z","labels":["ai","story"],"dependencies":[{"issue_id":"roots-of-reason-636.1","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.2","title":"AI economic simulation — resource gathering and build order","description":"AI manages villager allocation, resource gathering priorities, and building construction order.\n\nAcceptance Criteria:\n- [ ] AI assigns villagers to resources based on current needs and age goals\n- [ ] Build order templates loaded from data/ai/build_orders.json per difficulty\n- [ ] AI rebalances economy when resource stockpile is imbalanced (\u003e2x ratio)\n- [ ] AI advances ages when prerequisites met and resources available\n- [ ] AI builds houses proactively to avoid population cap stalls\n- [ ] Economic decisions run on configurable tick interval (not every frame)\n- [ ] All economic thresholds and ratios data-driven from JSON\n- [ ] Unit tests for villager allocation logic\n- [ ] Integration test: AI reaches Bronze Age within expected time range","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:38Z","created_by":"Dave Tashner","updated_at":"2026-02-25T01:56:15Z","closed_at":"2026-02-25T01:56:15Z","close_reason":"Completed in PR #46","labels":["ai","economy","story"],"dependencies":[{"issue_id":"roots-of-reason-636.2","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.3","title":"AI military decision-making — army composition and attack timing","description":"AI builds military units, forms armies, and decides when/where to attack.\n\nAcceptance Criteria:\n- [ ] AI builds counter-units based on scouted enemy composition (rock-paper-scissors)\n- [ ] Army threshold before attacking loaded from JSON per difficulty\n- [ ] AI targets weakest enemy expansion or undefended resource lines\n- [ ] AI retreats damaged units below configurable HP threshold\n- [ ] AI garrisons units in buildings when outnumbered\n- [ ] Attack timing varies by difficulty (Easy: late, Expert: aggressive timing attacks)\n- [ ] All army thresholds, composition ratios data-driven from JSON\n- [ ] Unit tests for target prioritization logic","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:39Z","created_by":"Dave Tashner","updated_at":"2026-02-25T02:23:54Z","closed_at":"2026-02-25T02:23:54Z","close_reason":"Completed in PR #48","labels":["ai","military","story"],"dependencies":[{"issue_id":"roots-of-reason-636.3","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:38Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.4","title":"AI tech progression and age advancement","description":"AI researches technologies and advances ages. Economic AI prioritizes age advancement. Aggressive AI prioritizes military upgrades. AI follows a predefined tech order per personality per age.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:39Z","created_by":"Dave Tashner","updated_at":"2026-02-25T02:42:38Z","closed_at":"2026-02-25T02:42:38Z","close_reason":"Completed in PR #49","labels":["ai","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-636.4","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.5","title":"AI difficulty tiers — Easy, Normal, Hard, Expert","description":"Four difficulty tiers controlling AI economic bonus, reaction speed, and strategic sophistication.\n\nAcceptance Criteria:\n- [ ] Difficulty enum in data/settings/ai_difficulty.json with 4 tiers\n- [ ] Easy: 0.7x gather rate, 2s reaction delay, no rush strategies\n- [ ] Normal: 1.0x gather rate, 1s reaction delay, basic build orders\n- [ ] Hard: 1.2x gather rate, 0.5s reaction delay, adaptive strategies\n- [ ] Expert: 1.5x gather rate, 0s reaction delay, full strategic AI\n- [ ] All bonus multipliers data-driven from JSON, never hardcoded\n- [ ] Difficulty selection in game setup screen\n- [ ] Tests cover each tier's parameter loading","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:40Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:00:55Z","closed_at":"2026-02-25T03:00:55Z","close_reason":"Completed in PR #50","labels":["ai","difficulty","story"],"dependencies":[{"issue_id":"roots-of-reason-636.5","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T14:44:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.6","title":"AI: factor tech regression risk into Town Center defense priority","description":"Adjust AI behavior to account for the Knowledge Burning mechanic.\n\nAI defensive adjustments:\n- AI assigns a \"tech vulnerability score\" to each of its Town Centers based on:\n  - Number of researched techs (more techs = more to lose = higher priority to defend)\n  - Proximity to enemy units/bases (closer = more vulnerable)\n  - Current military presence near the TC (more defenders = less vulnerable)\n- AI allocates more military units to defend TCs with high vulnerability scores\n- The defensive allocation increases in later ages (more techs at stake)\n- Aggressive AI personality still raids more, but maintains a minimum TC garrison proportional to tech count\n\nAI offensive adjustments:\n- AI recognizes enemy TCs as high-value targets (not just for territory, but for tech regression)\n- When AI has military advantage, it may prioritize TC snipes over unit kills\n- If the enemy is ahead in tech, AI increases priority of TC raids as a catch-up mechanism\n- Aggressive AI explicitly targets tech-leading opponents' TCs\n\nAI forward TC decision:\n- AI evaluates risk/reward of building forward TCs:\n  - Benefit: map control, shorter unit reinforcement path\n  - Risk: if destroyed, lose a tech\n  - Decision weight: build forward TCs only when military advantage is clear, or when the forward position has natural defenses (hills, river, chokepoint)\n- Economic AI personality avoids forward TCs (risk-averse)\n- Aggressive AI personality builds forward TCs more freely\n\nAI response to own tech loss:\n- When AI loses a tech from TC destruction:\n  - Increase overall military production priority for 2 minutes (defensive reaction)\n  - Re-research the lost tech as soon as resources allow (high priority)\n  - If the lost TC was forward: do not rebuild it in the same exposed location\n\nAcceptance criteria:\n- AI garrisons TCs proportional to tech count\n- AI targets enemy TCs when ahead militarily\n- AI avoids building forward TCs when tech regression risk is high\n- AI re-researches lost techs promptly\n- Different AI personalities (aggressive/economic/balanced) handle the mechanic differently\n- AI does not over-prioritize TC defense to the point of never attacking","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:37Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:11:37Z","labels":["ai","knowledge-burning","story"],"dependencies":[{"issue_id":"roots-of-reason-636.6","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T16:11:37Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-636.6","depends_on_id":"roots-of-reason-fk5.7","type":"blocks","created_at":"2026-02-22T16:11:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-636.7","title":"AI Singularity awareness — race and disruption strategy","description":"AI understands the Singularity victory condition and reacts to enemy progress toward it.\n\nAcceptance Criteria:\n- [ ] AI monitors enemy tech research alerts (Singularity techs are public)\n- [ ] AI increases military aggression when enemy researches Singularity-tier techs\n- [ ] AI pursues Singularity victory path on Hard/Expert if ahead in tech\n- [ ] AI prioritizes destroying enemy GPU Foundry / Transformer Lab / AGI Core\n- [ ] Response urgency scales with enemy progress through the Singularity chain\n- [ ] All thresholds and priorities data-driven from JSON\n- [ ] Unit tests for Singularity threat assessment logic","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:57:36Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:57:36Z","labels":["ai","singularity","story"],"dependencies":[{"issue_id":"roots-of-reason-636.7","depends_on_id":"roots-of-reason-636","type":"parent-child","created_at":"2026-02-22T17:57:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cm","title":"Epic: Pandemic \u0026 Corruption Event System","description":"Two early-game friction mechanics: corruption (persistent scaling drain on resources with empire size) and pandemics (random events reducing productivity and killing villagers). Both mitigated and eventually eliminated by specific techs. All settings data-driven from JSON.\n\nKey mechanics:\n- Corruption: active ages 1-4, scales with building count above 8, caps at 30%, countered by Code of Laws/Banking/Civil Service\n- Pandemics: active ages 0-3, random check every 2 min, countered by Herbalism/Sanitation/Vaccines\n- Settings in data/settings/corruption.json and data/settings/pandemics.json","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:25:53Z","created_by":"Dave Tashner","updated_at":"2026-02-22T23:25:53Z","labels":["economy","epic","events"]}
{"id":"roots-of-reason-6cm.1","title":"Corruption system: resource drain scaling with empire size","description":"Implement corruption mechanic that reduces resource income based on building count. Active ages 1-4. Starts above 8 buildings at 1.5%/building, caps at 30%. Affected: food, wood, stone, gold (not Knowledge). Countered by Code of Laws (-30%), Banking (-25%), Civil Service (eliminates). Settings in data/settings/corruption.json.\n\n## Acceptance Criteria\n- [ ] Corruption rate calculated per tick based on building count and threshold\n- [ ] Rate capped at max_corruption (30%)\n- [ ] Tech reductions applied cumulatively\n- [ ] Civil Service sets corruption to 0 permanently\n- [ ] Knowledge resource immune to corruption\n- [ ] Only active in configured ages\n- [ ] UI indicator shows current corruption rate\n- [ ] Unit tests for rate calculation with various building counts\n- [ ] Unit tests for tech reduction stacking","status":"done","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:13Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:47:42Z","labels":["corruption","economy","story"],"dependencies":[{"issue_id":"roots-of-reason-6cm.1","depends_on_id":"roots-of-reason-6cm","type":"parent-child","created_at":"2026-02-22T18:26:12Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cm.2","title":"Pandemic event system: random disease outbreaks","description":"Implement pandemic random events based on population density. Active ages 0-3. Checked every 2 min, base 5% chance (+2% per villager above 15). Effects: -30% work rate, 5% villager death chance, 45s duration. Mitigated by Herbalism (-25%), Sanitation (-50%), Vaccines (immunity). Visual: green particle cloud. Audio: plague bell toll. Settings in data/settings/pandemics.json.\n\n## Acceptance Criteria\n- [ ] Timer-based check every 120 game seconds\n- [ ] Probability scales with population above density threshold\n- [ ] Work rate penalty applied to all villagers during pandemic\n- [ ] Death chance rolled per villager per pandemic tick\n- [ ] Tech mitigations reduce severity and probability\n- [ ] Vaccines grant full immunity\n- [ ] Green particle cloud VFX over Town Center during pandemic\n- [ ] Plague bell toll audio on pandemic start\n- [ ] Only active in configured ages\n- [ ] Unit tests for probability calculation\n- [ ] Unit tests for mitigation stacking","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:13Z","created_by":"Dave Tashner","updated_at":"2026-02-22T23:26:13Z","labels":["events","pandemic","story"],"dependencies":[{"issue_id":"roots-of-reason-6cm.2","depends_on_id":"roots-of-reason-6cm","type":"parent-child","created_at":"2026-02-22T18:26:13Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6cm.3","title":"Historical events system: Black Plague and Renaissance","description":"Implement named historical events that fire based on age/tech milestones. Black Plague is a guaranteed mega-pandemic in Medieval Age (-50% work rate, 15% death chance, 90s). Renaissance is a per-player golden age triggered by Printing Press + Banking + Guilds (+35% research, +50% Knowledge, 3 min). Phoenix interaction: Renaissance within 120s of plague gives 1.5x bonuses. Settings in data/settings/historical_events.json.\n\n## Acceptance Criteria\n- [ ] Black Plague fires once per game in Medieval Age (random delay 180-360s into age)\n- [ ] Black Plague affects all players simultaneously\n- [ ] Black Plague effects: -50% work rate, 15% villager death chance, -75% trade income, 90s duration\n- [ ] Medical tech mitigations reduce Black Plague severity (Herbalism, Sanitation, Vaccines=immune)\n- [ ] Post-plague aftermath bonuses: +15% work rate, +20% research speed for 120s\n- [ ] Renaissance triggers per-player when Printing Press + Banking + Guilds all researched\n- [ ] Renaissance effects: +35% research, +50% Knowledge gen, +20% gold, 180s duration\n- [ ] Bonus effects for 3+ Libraries and 2+ Markets during Renaissance\n- [ ] Phoenix interaction: Renaissance within 120s of plague survival → 1.5x multiplier\n- [ ] Visual effects: dark fog (plague), golden glow (renaissance)\n- [ ] Audio: death knells (plague), fanfare (renaissance)\n- [ ] Announcement text for both events\n- [ ] Unit tests for trigger conditions, effect application, mitigation stacking\n- [ ] Integration test: advance to Medieval → plague fires → research 3 techs → renaissance triggers","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:29:20Z","created_by":"Dave Tashner","updated_at":"2026-02-22T23:29:20Z","labels":["events","historical","story"],"dependencies":[{"issue_id":"roots-of-reason-6cm.3","depends_on_id":"roots-of-reason-6cm","type":"parent-child","created_at":"2026-02-22T18:29:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-6j9","title":"ADR-011: Knowledge Burning — Tech Regression on City Destruction","description":"When an enemy army destroys a Town Center, the defending civilization loses its most recently researched technology. This represents the burning of libraries, the scattering of scholars, and the destruction of institutional knowledge that historically accompanied the sack of cities.\n\nThis mechanic creates high stakes for base defense, meaningful punishment for over-expansion, and dramatic comeback moments when an attacker cripples a tech leader.\n\nDECISION\n\n1. TRIGGER CONDITION: TOWN CENTER DESTRUCTION\nTech regression triggers ONLY when a Town Center is destroyed by an enemy. Specifically:\n- The destroyed TC must have been fully constructed (not a foundation)\n- The destroyer must be an enemy player (not self-destruction or Gaia)\n- Triggers EVERY time a TC is destroyed, not just the last one\n- If a player has multiple TCs and loses one, they still lose a tech\n- Rationale: each TC represents a center of learning. Losing ANY city is catastrophic to knowledge.\n\nThis makes forward Town Centers (aggressive expansions) risky — they're not just map control, they're tech insurance liabilities.\n\n2. WHICH TECH IS LOST\nThe most recently researched technology is reverted. Rules:\n(a) The tech research history is tracked as an ordered list (first researched → most recent)\n(b) On TC destruction, pop the most recent tech from the list — it becomes un-researched\n(c) Age advancements CANNOT be lost — only individual techs within ages. Losing a tech doesn't de-age you. Rationale: once a civilization has undergone an age transition, the foundational knowledge is too distributed to be lost from one city burning.\n(d) If the player has no researched techs (only age advancements), no tech is lost\n(e) Unique civ techs CAN be lost (they're regular techs, just civ-specific)\n(f) The Singularity chain techs (Transformer Architecture, etc.) CAN be lost — this is intentionally devastating. It means defending your base in the late game is critical for the Singularity victory path.\n\n3. EFFECTS OF LOSING A TECH\nWhen a tech is reverted:\n(a) The bonus from that tech is immediately removed from all units/buildings/economy\n(b) Unit stat upgrades revert: if you lose \"+2 Infantry Attack\", all infantry immediately lose 2 attack\n(c) Economic bonuses revert: if you lose \"+15% farm output\", farms immediately produce less\n(d) Building unlocks: if the lost tech unlocked a building type, existing buildings of that type REMAIN but you cannot build new ones until re-researched\n(e) Unit unlocks: if the lost tech unlocked a unit type, existing units REMAIN but you cannot produce new ones until re-researched\n(f) In-progress research at other buildings is NOT affected (you don't lose partially-researched techs)\n\n4. RE-RESEARCHING LOST TECH\nLost techs can be re-researched:\n- Full resource cost (no discount — the knowledge is truly lost)\n- Requires the same prerequisites as original research (building + age)\n- Can be researched at any surviving building of the appropriate type\n- The tech is added back to the end of the research history (it becomes the \"most recent\" again)\n\n5. KNOWLEDGE BURNING VISUAL AND NOTIFICATION\nWhen a TC is destroyed and tech is lost:\n(a) Dramatic visual: a \"burning scroll\" particle effect rises from the destroyed TC\n(b) Screen flash for the affected player (brief amber/red overlay)\n(c) Large notification: \"City destroyed! Lost technology: [Tech Name]\"\n(d) For the attacking player: \"Enemy city sacked! They lost: [Tech Name]\"\n(e) Game-wide notification (all players): \"[Player] lost knowledge of [Tech Name]\"\n(f) The tech tree UI shows the lost tech reverting (un-highlighting animation)\n(g) Audio: a distinctive \"knowledge lost\" chime/crash sound\n\n6. STRATEGIC IMPLICATIONS\n\nBase defense:\n- Protecting Town Centers is now critical beyond just avoiding defeat\n- Walls and garrisons around TCs become more valuable\n- Players must balance aggressive expansion with TC defense\n\nForward bases:\n- Building a forward TC for map control is a calculated risk — if it falls, you lose tech\n- This creates a meaningful downside to aggressive expansion that doesn't exist in most RTS games\n- \"Should I build a forward TC?\" becomes a strategic question with real consequences\n\nRaiding strategy:\n- Targeting enemy TCs becomes a dual-purpose tactic: deny territory AND regress their tech\n- A surgical TC snipe can be more valuable than killing 20 units\n- Siege units gain strategic importance beyond just building damage\n\nSingularity defense:\n- In the late game, a player pursuing Singularity victory has the most to lose from TC destruction\n- Losing the Transformer Architecture tech forces a costly re-research\n- This makes the Singularity path high-risk/high-reward: you need an advanced tech tree AND you need to defend it\n- Other players are incentivized to target the tech leader's TCs\n\nComeback mechanic:\n- A player who falls behind militarily but leads in tech can be pulled back by TC raids\n- Creates natural rubber-banding without artificial handicaps\n- A successful defense of your TCs under pressure is genuinely rewarding\n\n7. EDGE CASES AND LIMITS\n- Maximum 1 tech lost per TC destruction (not cascading)\n- If multiple TCs are destroyed in rapid succession (\u003c5 seconds apart), each triggers a separate tech loss\n- If the lost tech was a prerequisite for another researched tech: the dependent tech is NOT lost (only the most recent one). The prerequisite chain is not recursively unwound.\n- During an age advancement in progress at the destroyed TC: the age advancement is cancelled and resources refunded (but no tech is lost from the cancellation — the trigger is TC destruction, not research cancellation)\n- AI players also lose tech when their TCs are destroyed (no AI immunity)\n\n8. BALANCE TUNING\nThe severity can be tuned via data:\n- data/settings/knowledge_burning.json:\n  {\n    \"enabled\": true,\n    \"trigger\": \"town_center_destroyed\",\n    \"tech_loss_count\": 1,\n    \"protect_age_advancements\": true,\n    \"protect_first_n_techs\": 0,\n    \"re_research_cost_multiplier\": 1.0,\n    \"cooldown_seconds\": 0\n  }\n- protect_first_n_techs: could be set to 2-3 to protect the earliest techs (gentler for new players)\n- re_research_cost_multiplier: could be 0.5 for half-price re-research (less punishing)\n- cooldown_seconds: could prevent multiple tech losses within N seconds (prevents total wipeout from a coordinated TC rush)\n\nCONSEQUENCES\n- Town Centers become the highest-value targets in the game\n- Every TC construction is a strategic decision (expansion vs risk)\n- The tech tree has genuine stakes — progress is not permanent\n- Late-game Singularity pushes require serious military defense\n- Creates natural comeback mechanics through targeted raids\n- Adds emotional weight to city destruction (players will FEEL the loss)\n- AI must factor TC defense into its strategy\n- The mechanic is easy to explain but creates deep strategic ripples","status":"closed","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:09:23Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:50Z","closed_at":"2026-02-22T22:39:50Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","combat","tech"]}
{"id":"roots-of-reason-6u4","title":"ADR-006: Project Structure","description":"Godot 4 project layout: scenes/ (by feature), scripts/ (GDScript), assets/ (art, audio, fonts), autoloads/ (singletons: GameManager, ResourceManager), data/ (JSON: tech trees, unit stats, civ data).","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:05Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:46Z","closed_at":"2026-02-22T22:39:46Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-7cc","title":"Project foundation fixes: .gitignore, CLAUDE.md, close ADR issues","status":"closed","priority":0,"issue_type":"chore","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:40:12Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:42:13Z","closed_at":"2026-02-22T22:42:13Z","close_reason":"Completed in PR #5","labels":["dx","housekeeping"]}
{"id":"roots-of-reason-7wg","title":"Epic 4: Resource System","description":"5 core resources (Food, Wood, Stone, Gold, Knowledge), villager gathering, resource depletion/regeneration, resource UI, trade mechanics.","status":"open","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:07Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:07Z","labels":["epic","resources"],"dependencies":[{"issue_id":"roots-of-reason-7wg","depends_on_id":"roots-of-reason-ovr","type":"blocks","created_at":"2026-02-22T14:44:54Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.1","title":"Define 5 core resources: Food, Wood, Stone, Gold, Knowledge","description":"Create resource data model with 5 types: Food, Wood, Stone, Gold, Knowledge. Each player has a stockpile. Resources are integers. Knowledge is a unique resource earned from Libraries and research.\n\nAcceptance Criteria:\n- [ ] Resource enum/constants: FOOD, WOOD, STONE, GOLD, KNOWLEDGE\n- [ ] Resource configuration in data/resources/resource_config.json\n- [ ] Each resource has: id, display_name, icon_path, color, starting_amount\n- [ ] Starting amounts per resource defined per difficulty in JSON\n- [ ] Knowledge is NOT gathered from map — generated by buildings (Library, Ziggurat) and research\n- [ ] ResourceManager autoload tracks current stockpile per resource per player\n- [ ] ResourceManager emits signals: resource_changed(player_id, resource_type, old_amount, new_amount)\n- [ ] ResourceManager.can_afford(player_id, cost: Dictionary) -\u003e bool\n- [ ] ResourceManager.spend(player_id, cost: Dictionary) -\u003e bool (returns false if insufficient)\n- [ ] All amounts stored as integers (no floating-point resource bugs)\n- [ ] Resource state serializable for save/load\n- [ ] Unit tests for can_afford, spend, and signal emission","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:21Z","created_by":"Dave Tashner","updated_at":"2026-02-23T17:17:45Z","closed_at":"2026-02-23T17:17:45Z","close_reason":"Completed in PR #44","labels":["resources","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.1","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.2","title":"Villager gathering mechanics","description":"Villagers: right-click resource node to gather. Walk to node, harvest animation (timed), carry resources back to nearest drop-off (Town Center, Mill, Mining Camp, Lumber Camp). Carry capacity limit. Repeat cycle.\n\nAcceptance Criteria:\n- [ ] Villager right-clicks resource node → walks to it → gathers → returns to drop-off\n- [ ] Gather rate per resource type loaded from data/units/villager.json\n- [ ] Villager carries limited amount per trip (carry capacity in JSON)\n- [ ] Villager auto-returns to nearest drop-off building (Town Center, Mining Camp, Lumber Camp, Mill)\n- [ ] Villager deposits carried resources, then auto-returns to same resource node\n- [ ] Gathering depletes resource node; node disappears when yield reaches 0\n- [ ] Villager auto-finds nearest same-type resource when current node depleted\n- [ ] Gather animation plays while collecting (Phase 1: simple timer + particle)\n- [ ] Multiple villagers can gather from same node simultaneously\n- [ ] Gathering state serializable (current node, carried amount, trip state)\n- [ ] Unit tests for gather rate math and carry capacity logic\n- [ ] Integration test: villager gathers 100 food from berry bush to Town Center","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:22Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:18:15Z","closed_at":"2026-02-23T02:18:15Z","close_reason":"Completed in PR #15","labels":["gathering","resources","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.2","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.3","title":"Resource depletion and regeneration","description":"Resource nodes have finite amounts that deplete with gathering. Trees regrow slowly. Berry bushes deplete permanently. Gold/stone mines deplete permanently. Fish deplete slowly. Show remaining amount on hover.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:23Z","created_by":"Dave Tashner","updated_at":"2026-02-25T04:17:26Z","closed_at":"2026-02-25T04:17:26Z","close_reason":"Completed in PR #55","labels":["resources","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.3","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.4","title":"Resource UI display (top bar)","description":"Top-of-screen resource bar showing: Food, Wood, Stone, Gold, Knowledge amounts. Also show population (current/cap). Update in real-time. Icons for each resource type.\n\nAcceptance Criteria:\n- [ ] HUD bar at top of screen showing all 5 resource amounts\n- [ ] Each resource shows: icon + current amount (e.g., 🌾 450)\n- [ ] Amount updates in real-time as resources change\n- [ ] Connects to ResourceManager.resource_changed signal\n- [ ] Insufficient resources flash red when player attempts unaffordable action\n- [ ] Population counter shown alongside resources (e.g., 14/20 with house icon)\n- [ ] Layout scales with viewport width (no clipping at 1920x1080)\n- [ ] Resource bar does not intercept mouse events for game world below\n- [ ] Phase 1: colored rectangles for icons, numeric labels for amounts\n- [ ] Unit tests for display formatting (large numbers, zero values)\n- [ ] Smoke test: UI scene loads without errors","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:23Z","created_by":"Dave Tashner","updated_at":"2026-02-23T17:19:29Z","closed_at":"2026-02-23T17:19:29Z","close_reason":"Already implemented: resource_bar.gd and test_resource_bar.gd cover all acceptance criteria","labels":["resources","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-7wg.4","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.5","title":"Trade and market mechanics","description":"Market building allows converting between resources at exchange rates. Trade carts between own markets and allied/neutral markets for gold income. Rates fluctuate based on supply/demand. Available from Bronze Age.","status":"open","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:24Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:24Z","labels":["resources","story","trade"],"dependencies":[{"issue_id":"roots-of-reason-7wg.5","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T14:44:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.6","title":"River resource transport system with barges","description":"Implement the river transport system: resources deposited at upstream River Docks are automatically shipped downstream via barges.\n\nCore transport logic:\n1. When a villager deposits resources at a River Dock, check for a valid downstream route:\n   - Trace river tiles following flow_direction from the dock's adjacent river tile\n   - Look for the nearest downstream building that is a valid drop-off (another River Dock owned by same player, or a Town Center within 2 tiles of the river)\n   - If found, initiate a barge shipment\n   - If no downstream depot exists, resources just stay in the player stockpile as normal (the River Dock still functions as a regular drop-off)\n\n2. Barge entity:\n   - Visual: small sprite moving along river tiles following flow_direction\n   - Speed: 3x base villager movement speed (configurable via river_dock.json transport_speed_multiplier)\n   - Capacity: 30 resources per trip (configurable via max_barge_capacity)\n   - Dispatch interval: every 5 seconds, if resources are waiting at the dock (configurable via barge_spawn_interval)\n   - Batching: barge carries up to capacity of mixed resource types deposited since last dispatch\n\n3. Resource flow accounting:\n   - When barge departs: resources are already in player stockpile (deposited by villager at dock)\n   - The barge is purely visual + vulnerability — resources are not \"held\" by the barge for accounting purposes\n   - HOWEVER: if the barge is destroyed, the carried resource amount is DEDUCTED from the player stockpile\n   - This creates risk: fast transport but vulnerable to raiding\n   - Display \"in transit\" amount in resource UI as a secondary indicator\n\n4. Barge destruction:\n   - Barges have 15 HP and 0 defense (very fragile)\n   - Any unit can attack a barge (melee units must be adjacent to river, ranged can shoot from bank)\n   - When destroyed: carried resources are lost (deducted from player stockpile), small splash visual\n   - Destroyed barges do not respawn automatically — the dock simply dispatches a new one on its next cycle\n\n5. Pathfinding for barges:\n   - Barges follow river tiles via flow_direction — no pathfinding needed, just follow the chain\n   - At river merges (two rivers join), barge continues downstream on the merged river\n   - If the downstream river is blocked (enemy building on bank? destroyed bridge?), barge queues at the blockage\n\n6. Multiple docks on same river:\n   - Each dock independently dispatches barges to the nearest downstream depot\n   - A chain of docks acts like a relay: Dock A ships to Dock B, Dock B ships to Town Center\n   - Each hop is a separate barge\n\nData file: data/buildings/river_dock.json\n{\n  \"transport_speed_multiplier\": 3.0,\n  \"max_barge_capacity\": 30,\n  \"barge_spawn_interval\": 5.0,\n  \"barge_hp\": 15\n}\n\nAcceptance criteria:\n- Resources deposited at upstream River Dock are visibly transported downstream\n- Barges follow river flow direction correctly\n- Barges arrive at nearest downstream drop-off and resources remain in stockpile\n- Barges can be attacked and destroyed, causing resource loss\n- Multiple docks on the same river chain correctly\n- Transport speed is noticeably faster than villager walking\n- System handles edge cases: dock destroyed mid-transit, no downstream depot, river with no docks","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:20Z","created_by":"Dave Tashner","updated_at":"2026-02-23T12:54:37Z","closed_at":"2026-02-23T12:54:37Z","close_reason":"Completed in PR #31","labels":["resources","river","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.6","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T16:01:20Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.6","depends_on_id":"roots-of-reason-7y5.6","type":"blocks","created_at":"2026-02-22T16:01:36Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.6","depends_on_id":"roots-of-reason-ovr.6","type":"blocks","created_at":"2026-02-22T16:01:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.7","title":"Barge entity: visual, movement, and combat vulnerability","description":"Implement the barge as a visible, attackable entity that moves along rivers carrying resources.\n\nBarge entity:\n- Node type: extends the base unit entity (CharacterBody2D or Area2D)\n- NOT player-controllable — moves automatically following river flow_direction\n- Sprite: small boat/raft placeholder (Phase 1: brown rectangle on water)\n- Size: roughly half a tile width\n- Movement: follows river tiles sequentially, moving from tile center to tile center along flow_direction\n- Speed: transport_speed_multiplier * base_villager_speed (default 3x)\n- Shows small resource icons above the barge indicating what it carries\n\nCombat properties:\n- HP: 15 (very fragile — 1-2 hits from most units)\n- Defense: 0\n- Targetable by any unit (melee must be adjacent to river tile, ranged can attack from bank)\n- Does NOT fight back\n- When destroyed: splash particle effect, resource icons scatter and fade\n- Resource loss: on destruction, the carried resource amounts are deducted from the owning player's stockpile\n- The player receives a notification: \"Barge destroyed! Lost: 20 Gold, 10 Stone\"\n\nVisual feedback:\n- Barge has a small wake/ripple trail behind it\n- Carries a tiny player-color flag (team color shader applies)\n- When taking damage: flash red\n- Resource load shown as small stacked icons on the barge sprite\n- Empty barges are not spawned — only dispatched when resources are queued\n\nLifecycle:\n1. Spawned at River Dock when dispatch timer fires and resources are queued\n2. Resources loaded (up to barge_capacity)\n3. Barge moves along river tiles following flow_direction chain\n4. On reaching destination drop-off: barge fades out, no resource change needed (resources already in stockpile)\n5. On destruction: resources deducted, barge removed, dock can dispatch a new one next cycle\n\nBarge pooling: for performance, reuse barge nodes rather than creating/destroying (max ~20 barges on screen at once expected).\n\nAcceptance criteria:\n- Barges visually move along river following flow direction\n- Barges display carried resource types\n- Barges can be selected (for info) but not commanded\n- Enemy units can attack and destroy barges\n- Resource deduction occurs on barge destruction with player notification\n- Player color visible on barges\n- Smooth movement along curved river paths\n- No performance issues with up to 20 simultaneous barges","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:22Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:01:22Z","labels":["combat","resources","river","story"],"dependencies":[{"issue_id":"roots-of-reason-7wg.7","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T16:01:22Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.7","depends_on_id":"roots-of-reason-7wg.6","type":"blocks","created_at":"2026-02-22T16:01:36Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.8","title":"River transport UI: in-transit indicators and dock info panel","description":"Add UI elements that communicate river transport status to the player.\n\nResource bar additions:\n- Next to each resource amount in the top bar, show a small arrow icon with the \"in transit\" amount when barges are active\n- Format: \"Gold: 450 (+30 in transit)\" or a small barge icon with the number\n- In-transit amount updates in real-time as barges depart and arrive (or are destroyed)\n- Only shown when in-transit amount \u003e 0\n\nRiver Dock selection panel:\nWhen a River Dock is selected, the bottom-center info panel shows:\n- Building portrait, name, HP bar\n- \"Drop-off: All resources\" label\n- \"Downstream: Town Center (12 tiles)\" — name and distance of downstream destination\n- \"Queued: 15 Gold, 8 Stone\" — resources waiting for next barge\n- \"In Transit: 2 barges\" — number of active barges from this dock\n- \"Next dispatch: 3s\" — countdown to next barge departure\n- If no downstream destination: \"No downstream depot — resources stay here\" warning in yellow\n\nMinimap indicators:\n- River Docks shown as small square dots on minimap (player colored)\n- Active barges shown as moving dots along rivers (player colored, smaller than units)\n\nNotification events:\n- \"Barge arrived at Town Center with 30 Gold\" — brief notification on delivery\n- \"Barge destroyed! Lost 20 Gold, 10 Stone\" — warning notification on destruction (red)\n- \"River Dock destroyed!\" — alert notification (red, higher priority)\n\nRiver overlay (toggle with hotkey, e.g., R):\n- When active, highlights all river tiles with flow direction arrows\n- Colors rivers by: green = flows toward your base, red = flows away, yellow = perpendicular\n- Helps player read the map for River Dock placement decisions\n- Shows potential dock placement spots as glowing indicators on valid tiles\n\nAcceptance criteria:\n- In-transit resources visible in top resource bar\n- River Dock info panel shows transport status when selected\n- Barges visible on minimap\n- Notifications fire for barge arrival and destruction\n- River overlay toggle works and correctly shows flow direction relative to player base","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:23Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:01:23Z","labels":["resources","river","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-7wg.8","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T16:01:22Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.8","depends_on_id":"roots-of-reason-7wg.6","type":"blocks","created_at":"2026-02-22T16:01:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7wg.9","title":"Wolf feeding command and domestication process","description":"Implement the Feed command that allows villagers to domesticate wolves.\n\nFeed command:\n- Available when: a villager is selected and the cursor is over a wolf\n- Activation: Shift+right-click on wolf, or \"Feed\" button in command panel (only visible when hovering/targeting a wolf)\n- Cursor changes to a food/hand icon when hovering a wolf with a villager selected\n- Cost: 25 Food per feeding, deducted from stockpile when villager begins walking to wolf\n\nFeeding process:\n1. Villager checks if player has 25 Food — if not, error sound + \"Not enough food\" message\n2. 25 Food deducted from player stockpile\n3. Villager walks toward wolf, stopping at 2-tile distance (outside aggro radius of 3)\n4. Villager plays feeding animation (extend arm) for 5 seconds\n5. Wolf enters BEING_FED state, plays eating animation\n6. After 5 seconds: wolf.domestication_progress += 0.33\n7. wolf.fed_by = player_id (track who is domesticating this wolf)\n8. If domestication_progress \u003e= 1.0: wolf transforms into Dog for this player\n9. If domestication_progress \u003c 1.0: wolf returns to PATROL, villager returns to previous task\n\nDomestication progress:\n- 3 feedings required (each adds 33.3%, stored as float 0.0 to 1.0)\n- Progress decays at 10% per minute if not fed (decay_interval: 60 seconds)\n- Progress displayed as a small bar above the wolf when hovered\n- If a different player feeds the wolf: progress resets and fed_by changes to the new player (contested domestication)\n\nWolf-to-Dog transformation:\n- At progress \u003e= 1.0, remove the wolf entity from Gaia\n- Spawn a Dog entity at the same position, owned by the feeding player\n- Small transformation visual: sparkle/glow effect, wolf sprite morphs to dog sprite\n- Notification: \"Wolf domesticated! You gained a Dog companion.\"\n- Packmates of the domesticated wolf do NOT automatically become friendly — they remain wild\n\nTooltip on wolf hover (for any player):\n- \"Wolf — Wild fauna\"\n- \"Can be domesticated by feeding (Shift+Right Click with villager)\"\n- \"Cost: 25 Food per feeding (3 feedings required)\"\n- Domestication bar showing current progress and owner\n- \"Can be hunted for 50 Food\"\n\nEdge cases:\n- Villager killed while feeding: feeding interrupted, food already spent (lost), wolf returns to PATROL\n- Wolf killed while being fed: feeding interrupted, food already spent, wolf drops 50 Food corpse\n- Two villagers feeding same wolf simultaneously: only one feed counts per 5-second window\n- Wolf attacked by another player while being fed: feeding interrupted, wolf enters FLEE\n\nAcceptance criteria:\n- Feed command visible and usable with villager selected + wolf targeted\n- 25 Food deducted per feeding\n- Domestication progress bar visible on wolf\n- 3 feedings transforms wolf to player-owned dog\n- Progress decays over time if not maintained\n- Contested domestication resets progress to new player\n- Tooltip explains the mechanic to new players\n- Transformation has visual/audio feedback","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:05:59Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:09:37Z","closed_at":"2026-02-26T03:09:37Z","close_reason":"Completed in PR #65","labels":["resources","story","units","wolves"],"dependencies":[{"issue_id":"roots-of-reason-7wg.9","depends_on_id":"roots-of-reason-2hj.6","type":"blocks","created_at":"2026-02-22T16:06:11Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.9","depends_on_id":"roots-of-reason-7wg","type":"parent-child","created_at":"2026-02-22T16:05:58Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7wg.9","depends_on_id":"roots-of-reason-ovr.8","type":"blocks","created_at":"2026-02-22T16:06:10Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5","title":"Epic 5: Building System","description":"Building placement with ghost preview, construction process, core buildings (Town Center, House, Farm, Barracks, etc.), HP/destruction, population cap.","status":"closed","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:07Z","created_by":"Dave Tashner","updated_at":"2026-02-25T04:38:01Z","closed_at":"2026-02-25T04:38:01Z","close_reason":"All 6 stories completed. Last story (7y5.4) merged in PR #56.","labels":["buildings","epic"],"dependencies":[{"issue_id":"roots-of-reason-7y5","depends_on_id":"roots-of-reason-7wg","type":"blocks","created_at":"2026-02-22T14:44:54Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.1","title":"Building placement with ghost preview","description":"Select building from build menu, show translucent ghost on cursor following isometric grid. Green = valid placement, red = invalid (blocked by terrain, other buildings, or resources). Click to place.\n\nAcceptance Criteria:\n- [ ] Player selects building from command panel → enters placement mode\n- [ ] Ghost preview follows mouse cursor snapped to isometric grid\n- [ ] Ghost shows green tint when placement is valid, red when invalid\n- [ ] Invalid placement: overlapping existing building, on water, on resource node, on unit\n- [ ] Building footprint size loaded from data/buildings/ JSON (1x1, 2x2, 3x3)\n- [ ] Left-click confirms placement → deducts resource cost → creates construction site\n- [ ] Right-click or Escape cancels placement mode\n- [ ] Placement blocked if player cannot afford building cost\n- [ ] Ghost preview shows building footprint on grid (highlighted tiles)\n- [ ] Placement events emitted via signal for other systems to react\n- [ ] Unit tests for grid-snapping math and validity checks\n- [ ] Unit tests for footprint overlap detection","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:25Z","created_by":"Dave Tashner","updated_at":"2026-02-23T01:45:12Z","closed_at":"2026-02-23T01:45:12Z","close_reason":"Completed in PR #13","labels":["buildings","placement","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.1","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:24Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.2","title":"Construction process with villager builders","description":"After placement, building appears as foundation. Villager walks to site and builds over time (progress bar). Multiple villagers speed up construction. Building not functional until complete.\n\nAcceptance Criteria:\n- [ ] Construction site placed → villager tasked to build → walks to site → constructs\n- [ ] Build time per building loaded from data/buildings/ JSON\n- [ ] Multiple villagers can build same construction site (additive build rate)\n- [ ] Construction progress bar shown above construction site (0% to 100%)\n- [ ] Building HP increases proportionally with construction progress\n- [ ] Incomplete buildings can be attacked and destroyed\n- [ ] Construction site shows scaffolding/partial sprite (Phase 1: translucent version)\n- [ ] When complete: construction site replaced with finished building, builder goes idle\n- [ ] Villager auto-assigned to build nearest unfinished construction site if idle\n- [ ] Construction state serializable (progress %, assigned builders, building type)\n- [ ] Unit tests for build rate math (1 villager vs 3 villagers)\n- [ ] Integration test: place building → assign villager → building completes","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:25Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:01:57Z","closed_at":"2026-02-23T02:01:57Z","close_reason":"Completed in PR #14","labels":["buildings","construction","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.2","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:25Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.3","title":"Core buildings: Town Center, House, Farm, Barracks, Dock, Market, Library, Wonder","description":"Implement core building types with stats: Town Center (villager production, drop-off, pop+5), House (pop+5), Farm (food source), Barracks (military units), Dock (ships), Market (trade), Library (research/knowledge), Wonder (win condition). Each has cost, build time, HP.\n\nAcceptance Criteria:\n- [ ] 8 building types defined in data/buildings/*.json with: cost, build_time, hp, footprint, age_requirement\n- [ ] Town Center: trains villagers, resource drop-off, supports 5 population, garrison capacity 15\n- [ ] House: +5 population capacity, no other function\n- [ ] Farm: infinite slow food source (villager works farm, not a node), food rate in JSON\n- [ ] Barracks: trains Infantry, Archer, Cavalry (unit roster per age in JSON)\n- [ ] Dock: trains naval units, naval repair, water resource drop-off\n- [ ] Market: resource trading (buy/sell at fluctuating rates per JSON)\n- [ ] Library: generates Knowledge per second (rate in JSON), required for tech research\n- [ ] Wonder: triggers Wonder victory countdown (10 min), extremely expensive\n- [ ] Each building has Phase 1 placeholder sprite (colored rectangle with label)\n- [ ] All stats and costs data-driven from JSON — zero hardcoded values\n- [ ] Building data loaded via DataLoader.get_building_data()\n- [ ] Unit tests for building data loading and validation","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:26Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:06:15Z","closed_at":"2026-02-23T13:06:15Z","close_reason":"Completed in PR #32","labels":["buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.3","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:25Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.4","title":"Building HP, destruction, and ruins","description":"Buildings have HP. Take damage from attacks. Show damage states (intact, damaged, critical). When destroyed, leave ruins tile that can be built over. Destroyed buildings free population cap.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:26Z","created_by":"Dave Tashner","updated_at":"2026-02-25T04:37:43Z","closed_at":"2026-02-25T04:37:43Z","close_reason":"Completed in PR #56","labels":["buildings","combat","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.4","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:26Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.5","title":"Population cap tied to houses","description":"Each House adds +5 population cap. Town Center adds +5. Maximum population cap of 200. Cannot produce units when at cap. Display current/max in resource bar.\n\nAcceptance Criteria:\n- [ ] Each House provides +5 population capacity (value in JSON)\n- [ ] Town Center provides +5 population capacity (value in JSON)\n- [ ] Population cap = sum of all completed housing buildings' capacity\n- [ ] Current population = count of all living units (villagers + military)\n- [ ] Cannot train new units when current population \u003e= population cap\n- [ ] \"Need more houses\" warning when population is within 2 of cap\n- [ ] Training queue paused (not cancelled) when pop cap reached mid-queue\n- [ ] Destroying a House reduces cap — if now over cap, existing units remain but no new training\n- [ ] Population displayed in resource bar as \"current/cap\" (e.g., 14/20)\n- [ ] Population state serializable for save/load\n- [ ] Unit tests for cap calculation, over-cap edge cases\n- [ ] Integration test: build house → train villager → verify cap respected","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:27Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:20:54Z","closed_at":"2026-02-23T13:20:54Z","close_reason":"Completed in PR #34","labels":["buildings","population","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.5","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T14:44:26Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-7y5.6","title":"River Dock building: placement, drop-off, and transport origin","description":"Implement the River Dock as a new building type that enables river resource transport.\n\nBuilding specification:\n- Name: River Dock\n- Footprint: 1x1 tile\n- Placement constraint: must be placed on a land tile that is adjacent (8-directional) to at least one river tile. Placement ghost shows red if no adjacent river.\n- Cost: 100 Wood\n- Build time: 30 seconds\n- HP: 400 (fragile compared to other buildings — intentionally raidable)\n- Age required: Bronze Age (age 1) — available early\n- Population bonus: 0\n\nDrop-off functionality:\n- Acts as a universal resource drop-off: accepts Food, Wood, Stone, and Gold\n- Villagers gathering nearby resources will pathfind to the River Dock if it is their nearest drop-off\n- Identical drop-off logic to Town Center / Mill / Mining Camp / Lumber Camp — the River Dock is simply another entry in the drop-off building list\n\nTransport origin functionality:\n- When resources are deposited, check if a downstream route exists (delegate to river transport system)\n- If yes, queue resources for barge dispatch\n- Visual indicator on the dock: small resource pile icon when resources are queued for shipping\n- Visual indicator: barge departing animation when dispatch occurs\n\nBarge spawning:\n- The dock spawns barge entities when it has queued resources and the dispatch timer fires\n- Barge sprite departs from the dock position and moves onto the adjacent river tile\n- Dock tracks: resources_queued (Dictionary of resource_type -\u003e amount), last_dispatch_time\n\nUI integration:\n- When River Dock is selected, info panel shows:\n  - Building HP\n  - Resources queued for transport\n  - Downstream destination (name and distance in tiles)\n  - Barges in transit count\n- Build menu: appears under villager build options alongside Mill, Mining Camp, Lumber Camp\n- Tooltip: \"Drop-off building that ships resources downstream via river. Build near mines upstream of your base.\"\n\nPlacement preview:\n- Ghost shows valid (green) only on land tiles adjacent to river\n- When valid, draw a subtle highlight on the adjacent river tile showing which river the dock connects to\n- Draw a small arrow on the river tile showing flow direction (which way resources will travel)\n\nData file: data/buildings/river_dock.json (extends existing building data format)\n{\n  \"name\": \"River Dock\",\n  \"hp\": 400,\n  \"footprint\": [1, 1],\n  \"build_time\": 30,\n  \"build_cost\": { \"wood\": 100 },\n  \"population_bonus\": 0,\n  \"is_drop_off\": true,\n  \"drop_off_types\": [\"food\", \"wood\", \"stone\", \"gold\"],\n  \"age_required\": 1,\n  \"placement_constraint\": \"adjacent_to_river\",\n  \"transport_speed_multiplier\": 3.0,\n  \"max_barge_capacity\": 30,\n  \"barge_spawn_interval\": 5.0,\n  \"barge_hp\": 15\n}\n\nAcceptance criteria:\n- River Dock can only be placed adjacent to river tiles (enforced in placement validation)\n- Functions as universal resource drop-off\n- Villagers pathfind to River Dock when it is nearest drop-off\n- Shows downstream destination info when selected\n- Barge spawning integrates with river transport system\n- Available from Bronze Age\n- Placeholder sprite generated by building sprite generator","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:21Z","created_by":"Dave Tashner","updated_at":"2026-02-23T12:32:57Z","closed_at":"2026-02-23T12:32:57Z","close_reason":"Completed in PR #29","labels":["buildings","river","story"],"dependencies":[{"issue_id":"roots-of-reason-7y5.6","depends_on_id":"roots-of-reason-7y5","type":"parent-child","created_at":"2026-02-22T16:01:20Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-7y5.6","depends_on_id":"roots-of-reason-ovr.6","type":"blocks","created_at":"2026-02-22T16:01:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-81x","title":"Epic 1: Project Foundation","description":"Set up Godot 4 project with folder structure, export presets, CI pipeline, and placeholder asset pipeline.","status":"closed","priority":0,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:05Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:20:31Z","closed_at":"2026-02-22T21:20:31Z","close_reason":"All 4 stories complete. Project foundation established with Godot 4 project, export presets, CI pipeline, and placeholder assets.","labels":["epic","foundation"]}
{"id":"roots-of-reason-81x.1","title":"Set up Godot 4 project with folder structure","description":"Initialize Godot 4.x project. Create directory structure: scenes/, scripts/, assets/, autoloads/, data/. Configure project.godot with window settings for isometric view.","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:13Z","created_by":"Dave Tashner","updated_at":"2026-02-22T20:53:31Z","closed_at":"2026-02-22T20:53:31Z","close_reason":"Godot 4.6 project initialized with folder structure, autoloads, and sample data","labels":["foundation","story"],"dependencies":[{"issue_id":"roots-of-reason-81x.1","depends_on_id":"roots-of-reason-81x","type":"parent-child","created_at":"2026-02-22T14:44:12Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-81x.2","title":"Configure export presets for macOS and Windows","description":"Set up Godot export templates for macOS (.dmg/.app) and Windows (.exe). Test export builds run on both platforms.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:13Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:20:21Z","closed_at":"2026-02-22T21:20:21Z","close_reason":"Export presets for macOS and Windows configured in commit 3d3d4a2. Branch protection and repo settings also configured.","labels":["foundation","story"],"dependencies":[{"issue_id":"roots-of-reason-81x.2","depends_on_id":"roots-of-reason-81x","type":"parent-child","created_at":"2026-02-22T14:44:13Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-81x.3","title":"Set up CI build pipeline with GitHub Actions","description":"Create GitHub Actions workflow that builds Godot project for macOS and Windows on push. Use official Godot Docker image or headless export.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:14Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:53:34Z","closed_at":"2026-02-22T19:53:34Z","close_reason":"Superseded by dedicated Quality Pipeline epic with comprehensive CI stories","labels":["ci","foundation","story"],"dependencies":[{"issue_id":"roots-of-reason-81x.3","depends_on_id":"roots-of-reason-81x","type":"parent-child","created_at":"2026-02-22T14:44:14Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-81x.4","title":"Create placeholder asset pipeline","description":"Create placeholder sprites for terrain tiles (128x64 iso), basic unit sprite, basic building sprite. Set up tileset resource. Establish asset naming conventions.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:15Z","created_by":"Dave Tashner","updated_at":"2026-02-22T20:04:41Z","closed_at":"2026-02-22T20:04:41Z","close_reason":"Superseded by expanded art pipeline stories under dedicated epic","labels":["assets","foundation","story"],"dependencies":[{"issue_id":"roots-of-reason-81x.4","depends_on_id":"roots-of-reason-81x","type":"parent-child","created_at":"2026-02-22T14:44:14Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-84e","title":"Define DataLoader contract and API","description":"DataLoader autoload is referenced in coding standards but lacks a defined contract. Must be specified before gameplay systems begin consuming it.\n\nAcceptance Criteria:\n- [ ] DataLoader.get_unit_stats(unit_id: String) -\u003e Dictionary — returns stat dict or null\n- [ ] DataLoader.get_building_data(building_id: String) -\u003e Dictionary\n- [ ] DataLoader.get_tech_data(tech_id: String) -\u003e Dictionary\n- [ ] DataLoader.get_civ_data(civ_id: String) -\u003e Dictionary\n- [ ] DataLoader.get_resource_config() -\u003e Dictionary\n- [ ] DataLoader.get_setting(path: String) -\u003e Variant — for settings JSONs\n- [ ] All methods return null (not crash) for missing keys, with push_warning()\n- [ ] Data cached on first load, cache invalidated only on explicit reload()\n- [ ] JSON schema documented in data/schemas/ for each data type\n- [ ] Unit tests for all public methods including missing key behavior\n- [ ] Integration test: load actual JSON files from data/ and verify structure","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:57:53Z","created_by":"Dave Tashner","updated_at":"2026-02-23T02:29:39Z","closed_at":"2026-02-23T02:29:39Z","close_reason":"Completed in PR #16","labels":["api","foundation","task"],"dependencies":[{"issue_id":"roots-of-reason-84e","depends_on_id":"roots-of-reason-317","type":"blocks","created_at":"2026-02-22T17:57:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-9r1","title":"Establish error handling conventions (ADR-012)","description":"No project-wide error handling conventions exist. Agents will invent patterns independently unless standardized.\n\nAcceptance Criteria:\n- [ ] ADR-012 added to AGENTS.md covering error handling patterns\n- [ ] Define pattern for recoverable errors (push_warning + fallback value)\n- [ ] Define pattern for unrecoverable errors (push_error + assert in debug)\n- [ ] Define pattern for data validation (validate at load time, trust at runtime)\n- [ ] Define pattern for missing data files (graceful degradation vs hard fail)\n- [ ] Define signal-based error propagation for gameplay events (e.g., path_not_found)\n- [ ] Define logging conventions (what to log, when, severity levels)\n- [ ] At least 2 code examples (WRONG/RIGHT style matching existing ADR format)\n- [ ] Existing autoloads (GameManager, ResourceManager, DataLoader) updated to follow conventions","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:58:09Z","created_by":"Dave Tashner","updated_at":"2026-02-23T12:54:36Z","closed_at":"2026-02-23T12:54:36Z","close_reason":"Completed in PR #30","labels":["adr","architecture","conventions","task"],"dependencies":[{"issue_id":"roots-of-reason-9r1","depends_on_id":"roots-of-reason-317","type":"blocks","created_at":"2026-02-22T17:58:09Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-b8w","title":"Per-system architecture documentation","description":"AGENTS.md covers ADRs (what to build) but not system architecture (how systems connect). As the codebase grows past ~30 scripts, agents need architectural context.\n\nAcceptance Criteria:\n- [ ] Create docs/architecture/ directory\n- [ ] Document autoload signal flow (which autoloads emit/receive what signals)\n- [ ] Document scene tree conventions (expected node structure for units, buildings, maps)\n- [ ] Document state machine pattern (if used for unit AI, building states, etc.)\n- [ ] Each doc includes a box-drawing diagram of system relationships\n- [ ] Docs updated as each epic is completed (not all upfront)\n- [ ] Referenced from AGENTS.md with a pointer to docs/architecture/","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:58:44Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:58:44Z","labels":["architecture","docs","task"]}
{"id":"roots-of-reason-be7","title":"Epic 1c: Art Pipeline \u0026 Visual Foundation","description":"Establish the complete art production pipeline before gameplay epics begin. Lock in tile geometry, sprite scale, animation budgets, color palettes, and production method. Produce the Phase 1 geometric placeholder tileset so map generation and gameplay can be developed and tested immediately. Build alongside Epic 1 and 1b — art decisions cannot wait until after CI is done.","status":"closed","priority":0,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:17Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:32Z","closed_at":"2026-02-22T22:34:32Z","close_reason":"Deferred — art pipeline not blocking Core Game Loop, will revisit later","labels":["art","epic","foundation"]}
{"id":"roots-of-reason-be7.1","title":"Procedural tileset generator — Phase 1 terrain tiles","description":"Create a Python script (tools/generate_tiles.py) that procedurally generates the entire Phase 1 placeholder tileset. Zero manual drawing.\n\nThe script generates 128x64px isometric diamond tiles using PIL/Pillow:\n- Grass: green fill (#4A7C4A) with 1px darker border\n- Forest floor: dark green (#3D5A3D) with small triangle shapes suggesting trees\n- Desert: tan fill (#D4B87A) with subtle dot pattern\n- Shallow water: light blue (#5B9BD5) with wavy line pattern\n- Deep water: dark blue (#2E5B8A) with darker wavy lines\n- Mountain: gray (#8C8C8C) with triangle peaks\n- Elevation ramp: gradient from low to high color\n\nFor terrain autotiling, generate transition variants:\n- Use Godot 4 TileMap terrain peering bit system\n- For each terrain pair, generate edge tiles by splitting the diamond into regions and filling each with the appropriate terrain color\n- Generate: center, 4 cardinal edges, 4 corners, 4 inner corners = 13 variants per terrain type\n- Total output: ~65-80 tile PNGs\n\nAlso generate resource node sprites (32x32 on tile):\n- Gold: yellow circle with G label\n- Stone: gray hexagon with S label\n- Wood: brown rectangle (tree trunk)\n- Berry bush: red dots cluster\n- Fish: blue fish shape on water\n- Deer: brown triangle\n\nScript outputs:\n- Individual PNGs to assets/tiles/terrain/\n- A Godot .tres TileSet resource file configured with terrain sets and peering bits\n- A manifest JSON listing all generated tiles with metadata\n\nScript is idempotent — running it again overwrites with identical output.\nAdd to CI: regenerate and diff to ensure committed tiles match generator output.\n\nAcceptance criteria:\n- python3 tools/generate_tiles.py runs without dependencies beyond Pillow\n- Generates 60+ tile PNGs that load correctly in Godot TileMap\n- Terrain autotiling produces smooth transitions in editor\n- All 5 terrain types + resources visually distinct at game zoom\n- CI validates generated output matches committed assets","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:18Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:25Z","closed_at":"2026-02-22T22:34:25Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","story","tiles"],"dependencies":[{"issue_id":"roots-of-reason-be7.1","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:17Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.1","depends_on_id":"roots-of-reason-be7.4","type":"blocks","created_at":"2026-02-22T15:21:06Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.1","depends_on_id":"roots-of-reason-be7.5","type":"blocks","created_at":"2026-02-22T15:21:04Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.10","title":"Build automated spritesheet packer with Godot resource generation","description":"Create a Python script (tools/spritesheet_packer.py) that takes rendered individual frame PNGs and produces packed spritesheets plus Godot SpriteFrames resources.\n\nInput: directory of PNGs following naming convention {animation}_{direction}_{frame}.png, plus manifest.json from the render script.\n\nOutput per unit/building:\n1. Packed spritesheet PNG — all frames arranged in a grid (rows = animations, columns = frames). Tightly packed with no wasted space. Power-of-2 texture dimensions preferred but not required.\n2. Spritesheet metadata JSON — frame positions, sizes, animation names, frame durations.\n3. Godot SpriteFrames .tres resource file — directly importable by Godot, with:\n   - Named animations: idle_n, idle_ne, idle_e, idle_se, idle_s, idle_sw, idle_w, idle_nw, walk_n, walk_ne, ..., attack_n, ..., death\n   - Frame references pointing to atlas regions in the spritesheet\n   - Animation FPS (configurable, default 10fps for idle, 12fps for walk, 15fps for attack)\n   - Loop flag per animation (idle/walk loop, attack/death don't loop)\n\nPacking algorithm:\n- Simple grid packing (all frames same bounding box, padded to largest frame)\n- Trim transparent pixels per frame before packing (store offset for reconstruction)\n- Output both trimmed spritesheet and a padding-info JSON for Godot to reconstruct positions\n\nCLI: python3 tools/spritesheet_packer.py --input renders/infantry/ --output assets/sprites/units/infantry/ --name infantry --fps-idle 10 --fps-walk 12 --fps-attack 15\n\nBatch mode: python3 tools/spritesheet_packer.py --batch renders/ --output assets/sprites/ (processes all subdirectories)\n\nAcceptance criteria:\n- Packs frames into spritesheet with zero visual artifacts\n- Generated .tres file loads in Godot editor with correct animations\n- Animation preview in editor plays correctly at specified FPS\n- Batch mode processes all units/buildings in one command\n- Transparent pixel trimming reduces spritesheet size by at least 30% vs naive packing\n- Script completes in under 10 seconds for a full unit (all animations)","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:20:46Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:27Z","closed_at":"2026-02-22T22:34:27Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","story","tools"],"dependencies":[{"issue_id":"roots-of-reason-be7.10","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:20:46Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.10","depends_on_id":"roots-of-reason-be7.1","type":"blocks","created_at":"2026-02-22T15:21:00Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.10","depends_on_id":"roots-of-reason-be7.2","type":"blocks","created_at":"2026-02-22T15:21:01Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.10","depends_on_id":"roots-of-reason-be7.3","type":"blocks","created_at":"2026-02-22T15:21:01Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.11","title":"Implement team color shader for runtime player color recoloring","description":"Create a Godot shader that replaces a designated mask color with the player's team color at runtime. This eliminates the need to render separate sprite variants per player.\n\nApproach:\n- All unit and building sprites are rendered with magenta (#FF00FF) as the team-color region\n- A fragment shader detects pixels matching the mask color (with tolerance for anti-aliasing)\n- Replaces mask pixels with the player's assigned color, preserving luminance/shading\n- Shader uniform: team_color (Color) — set per-unit based on owning player\n- Shader uniform: mask_tolerance (float, default 0.1) — how close to magenta counts as mask\n\nShader must handle:\n- Anti-aliased edges: mask region borders will have blended pixels. Use smooth interpolation between original and team color based on proximity to mask color.\n- Shading preservation: a dark magenta pixel should become a dark version of the team color, not flat team color. Preserve the luminance channel.\n- Multiple mask regions: some units may have primary (body) and secondary (banner/shield) team color regions. Support 2 mask colors: magenta (#FF00FF) for primary, cyan (#00FFFF) for secondary.\n\nImplementation:\n- Create shader file: assets/shaders/team_color.gdshader\n- Create ShaderMaterial resource: assets/shaders/team_color_material.tres\n- Helper script: scripts/utils/team_color.gd with:\n  - apply_team_color(sprite: Sprite2D, player_color: Color)\n  - Static player color definitions matching ADR-008\n\nTest the shader with:\n- Phase 1 geometric sprites (magenta regions)\n- Verify all 4 player colors look correct\n- Verify shading gradients are preserved\n- Verify performance: shader should add negligible cost per sprite\n\nAcceptance criteria:\n- Shader correctly recolors magenta mask to any team color\n- Shading/luminance preserved (dark mask pixels become dark team color)\n- Anti-aliased edges look clean (no magenta fringing)\n- Works with both Sprite2D and AnimatedSprite2D\n- Performance: no measurable frame time increase with 100 recolored sprites\n- Unit test verifying team_color.gd helper applies shader correctly","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:20:47Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:20Z","closed_at":"2026-02-22T22:34:20Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","shader","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.11","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:20:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.12","title":"Add CI validation for sprite dimensions, frame counts, and naming","description":"Create a validation script (tools/validate_sprites.py) that runs in CI to enforce sprite consistency rules from ADR-008.\n\nValidations:\n1. Dimension check: verify all sprites match the scale contract\n   - Villager sprites: bounding box \u003c= 64x64px (with ~48px content height)\n   - Infantry: bounding box \u003c= 72x72px\n   - Cavalry: bounding box \u003c= 80x80px\n   - Building 1x1: bounding box \u003c= 128x128px\n   - Building 2x2: bounding box \u003c= 256x192px\n   - Building 3x3: bounding box \u003c= 384x256px\n\n2. Frame count check: verify each unit has the expected number of frames\n   - Read manifest.json for each unit\n   - Verify all 8 directions present for directional animations\n   - Verify frame counts match animation definitions\n   - Flag missing or extra frames\n\n3. Naming convention check: verify all files follow asset naming rules\n   - snake_case, lowercase\n   - Match pattern: {name}_{animation}_{direction}_{frame}.png\n   - No spaces, no uppercase, no special characters\n\n4. Team color mask check: verify magenta (#FF00FF) pixels exist in team-color regions\n   - Sample center pixels of units/buildings\n   - Warn if no magenta mask found (unit won't recolor)\n\n5. Transparency check: verify all sprites have transparent backgrounds (alpha channel)\n\n6. Spritesheet integrity: verify packed spritesheets match their metadata JSON\n   - Frame positions don't overlap\n   - All declared frames exist in the sheet\n   - Sheet dimensions match metadata\n\n7. Regeneration check (Phase 1 only): regenerate procedural sprites and diff against committed\n   - If committed sprites don't match generator output, fail CI\n   - Ensures no one hand-edits generated files\n\nOutput: structured report (JSON + human-readable summary). Exit code 0 if all pass, 1 if any fail.\n\nAdd to GitHub Actions CI workflow as a step after tests but before export.\n\nAcceptance criteria:\n- Catches dimension violations\n- Catches missing frames or directions\n- Catches naming convention violations\n- Catches missing team color mask\n- Clean output format with actionable error messages\n- Runs in under 5 seconds for the full asset set\n- Integrated into CI pipeline","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:20:48Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:27Z","closed_at":"2026-02-22T22:34:27Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","ci","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.12","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:20:47Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.12","depends_on_id":"roots-of-reason-be7.10","type":"blocks","created_at":"2026-02-22T15:21:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.13","title":"Create end-to-end asset pipeline orchestrator script","description":"Create a master orchestrator script (tools/asset_pipeline.py) that runs the full asset production pipeline in one command.\n\nUsage:\n  python3 tools/asset_pipeline.py --phase 1                    # Generate all Phase 1 procedural assets\n  python3 tools/asset_pipeline.py --phase 2 --model infantry   # Render one model through Blender pipeline\n  python3 tools/asset_pipeline.py --phase 2 --all              # Render all models\n  python3 tools/asset_pipeline.py --validate                   # Run validation only\n  python3 tools/asset_pipeline.py --pack                       # Re-pack all spritesheets from renders\n\nPhase 1 pipeline (fully automated):\n1. Run generate_tiles.py -\u003e terrain tileset\n2. Run generate_unit_sprites.py -\u003e unit placeholders\n3. Run generate_building_sprites.py -\u003e building placeholders\n4. Run spritesheet_packer.py --batch -\u003e pack all into spritesheets\n5. Run validate_sprites.py -\u003e verify everything\n6. Report: total assets generated, total file size, any warnings\n\nPhase 2 pipeline (per model):\n1. Find .blend file for the model in blender/models/\n2. Run Blender headless with batch_render.py -\u003e individual PNGs\n3. Run spritesheet_packer.py -\u003e pack into spritesheets + Godot resources\n4. Run validate_sprites.py -\u003e verify dimensions and frame counts\n5. Report: frames rendered, spritesheet size, validation results\n\nPipeline configuration via tools/asset_config.json:\n- List of all units with type, scale preset, animations, FPS values\n- List of all buildings with type, footprint, states\n- Validation thresholds and dimension limits\n- Output directory mappings\n\nThe config file is the single source of truth for what assets exist and their properties.\n\nMakefile/justfile targets for convenience:\n  make assets-phase1    # Generate Phase 1\n  make assets-validate  # Validate all\n  make assets-pack      # Re-pack spritesheets\n  make assets-clean     # Remove all generated assets\n\nAcceptance criteria:\n- Single command generates entire Phase 1 asset set from scratch\n- Phase 2 pipeline renders a model through Blender and produces game-ready sprites\n- Validation runs automatically after generation\n- Config file is the single source of truth — adding a new unit means adding a JSON entry\n- Pipeline completes Phase 1 in under 30 seconds\n- Pipeline completes Phase 2 for one model in under 2 minutes","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:20:48Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:28Z","closed_at":"2026-02-22T22:34:28Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","story","tools"],"dependencies":[{"issue_id":"roots-of-reason-be7.13","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:20:48Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.13","depends_on_id":"roots-of-reason-be7.10","type":"blocks","created_at":"2026-02-22T15:21:03Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.13","depends_on_id":"roots-of-reason-be7.12","type":"blocks","created_at":"2026-02-22T15:21:04Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.13","depends_on_id":"roots-of-reason-be7.9","type":"blocks","created_at":"2026-02-22T15:21:03Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.2","title":"Procedural unit sprite generator — Phase 1 placeholder units","description":"Create a Python script (tools/generate_unit_sprites.py) that procedurally generates all Phase 1 placeholder unit sprites. Zero manual drawing.\n\nThe script generates sprites using PIL/Pillow for each unit type:\n\nUnit definitions (shape, base size):\n- Villager: circle, 24px diameter, carry-bag indicator when gathering\n- Infantry: circle with flat bottom (shield), 26px\n- Archer: circle with line extending outward (bow), 26px\n- Cavalry: horizontal oval, 32x20px\n- Siege: rectangle, 28x20px\n- Naval: wide diamond, 36x16px\n\nFor each unit, generate:\n- 8 directional variants (N, NE, E, SE, S, SW, W, NW) — same shape with rotated direction arrow/indicator\n- Idle animation: 2 frames (subtle size pulse) x 8 dirs = 16 frames\n- Walk animation: 4 frames (bouncing motion via vertical offset) x 8 dirs = 32 frames\n- Attack animation: 3 frames (flash + extend) x 8 dirs = 24 frames\n- Death animation: 4 frames (shrink + fade) x 1 dir = 4 frames\n- Total per unit: ~76 frames (simplified from 150 — Phase 1 uses fewer frames)\n\nPlayer color: render with NEUTRAL color (magenta #FF00FF) as the team-color mask region.\nThe runtime shader will replace this with actual player color.\nAlso generate a preview set with Player 1 blue for visual testing.\n\nSelection indicator: separate green circle outline sprite.\nHealth bar: separate sprite (green/yellow/red segments).\n\nOutput:\n- Individual PNGs organized per unit: assets/sprites/units/placeholder/{unit_name}/\n- Packed spritesheets per unit (one PNG + JSON frame data)\n- Godot SpriteFrames .tres resource per unit with named animations\n- Manifest JSON listing all units, frame counts, dimensions\n\nAcceptance criteria:\n- python3 tools/generate_unit_sprites.py generates all 6 unit types\n- Each unit visually distinct from others at game zoom\n- Direction arrow makes facing obvious\n- Magenta team-color region clearly defined for shader swap\n- SpriteFrames resources load and preview correctly in Godot editor\n- CI validates output matches committed sprites","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:18Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:26Z","closed_at":"2026-02-22T22:34:26Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","story","units"],"dependencies":[{"issue_id":"roots-of-reason-be7.2","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:18Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.2","depends_on_id":"roots-of-reason-be7.4","type":"blocks","created_at":"2026-02-22T15:21:06Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.2","depends_on_id":"roots-of-reason-be7.5","type":"blocks","created_at":"2026-02-22T15:21:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.3","title":"Procedural building sprite generator — Phase 1 placeholder buildings","description":"Create a Python script (tools/generate_building_sprites.py) that procedurally generates all Phase 1 placeholder building sprites. Zero manual drawing.\n\nBuilding definitions (shape, footprint, icon):\n- Town Center (3x3): large rectangle 384x256, flag icon, player color banner\n- House (1x1): small square 128x128, door shape\n- Farm (2x2): green rectangle 256x192 with grid lines\n- Barracks (2x2): rectangle 256x192, crossed swords icon\n- Dock (2x1): rectangle 256x128 extending over water\n- Market (2x2): rectangle 256x192, coin circle icon\n- Library (2x2): rectangle 256x192, book icon\n- Wonder (4x4): large distinctive octagon 512x320\n- Mill (1x1): rectangle 128x128, wheat icon\n- Mining Camp (1x1): rectangle 128x128, pickaxe icon\n- Lumber Camp (1x1): rectangle 128x128, axe icon\n- GPU Foundry (2x2): rectangle 256x192, chip icon (Information Age)\n- Transformer Lab (2x2): rectangle 256x192, neural net icon (Singularity)\n- AGI Core (3x3): glowing rectangle 384x256, brain icon (Singularity)\n\nFor each building generate:\n- Complete state: solid fill with icon and player color banner (magenta mask)\n- Construction stages: 4 frames (25/50/75/100% fill from bottom up, wireframe outline)\n- Damaged overlay: red tint at \u003c50% HP (separate overlay sprite)\n- Ruins: gray desaturated outline (post-destruction)\n- Ghost preview: semi-transparent green and red variants for placement\n\nOutput:\n- PNGs to assets/sprites/buildings/placeholder/{building_name}/\n- Packed spritesheets + Godot SpriteFrames resources\n- Manifest JSON with building metadata (footprint, icon, states)\n\nAcceptance criteria:\n- All 14 building types generated and visually distinct\n- Footprints match tile grid exactly (verify pixel dimensions)\n- Construction progression is visually clear\n- Player color mask (magenta) present on all buildings\n- CI validates output","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:19Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:26Z","closed_at":"2026-02-22T22:34:26Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","buildings","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.3","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:19Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.3","depends_on_id":"roots-of-reason-be7.4","type":"blocks","created_at":"2026-02-22T15:21:07Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.3","depends_on_id":"roots-of-reason-be7.5","type":"blocks","created_at":"2026-02-22T15:21:05Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.4","title":"Establish asset directory structure and naming conventions","description":"Create the asset directory tree and document naming conventions before any assets are committed.\n\nDirectory structure:\n- assets/sprites/units/placeholder/ — Phase 1 geometric units\n- assets/sprites/units/{civ}/ — Per-civ unit art (future phases)\n- assets/sprites/buildings/placeholder/ — Phase 1 geometric buildings\n- assets/sprites/buildings/{civ}/ — Per-civ buildings (future phases)\n- assets/tiles/terrain/ — Tileset textures\n- assets/tiles/elevation/ — Elevation and cliff tiles\n- assets/tiles/transitions/ — Terrain transition tiles\n- assets/ui/icons/ — Resource icons, button icons\n- assets/ui/panels/ — HUD panel backgrounds\n- assets/ui/fonts/ — Game fonts\n- assets/effects/ — Particle textures, projectiles\n- assets/portraits/ — Unit/building portrait art for info panel\n\nNaming convention (document in assets/README.md):\n- All snake_case, lowercase\n- Units: {unit_name}_{animation}_{direction}_{frame}.png (e.g., villager_walk_se_03.png)\n- Spritesheets: {unit_name}_{animation}_sheet.png (packed)\n- Buildings: {building_name}_{state}.png (e.g., town_center_complete.png, barracks_construction_02.png)\n- Tiles: {terrain}_{variant}_{index}.png (e.g., grass_center_01.png, grass_edge_n_01.png)\n- UI: {element}_{state}.png (e.g., button_normal.png, button_pressed.png)\n\nAlso create:\n- assets/.gdignore for any source files (Aseprite .ase) that shouldn't be imported\n- Godot import presets: pixel art (no filtering, no mipmaps) as default for all sprites\n- Document sprite scale contract from ADR-008 in assets/README.md\n\nAcceptance criteria:\n- All directories created\n- README.md documents conventions with examples\n- Godot import defaults configured for pixel art\n- One sample asset in each directory category (can be 1x1 pixel placeholder)","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:20Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:17Z","closed_at":"2026-02-22T22:34:17Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","conventions","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.4","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.5","title":"Define color palettes and player colors","description":"Create and document the color palette system for the entire game.\n\nAge cluster palettes (each is a set of 8-12 colors):\n- Stone/Bronze Age: earthy browns (#8B7355), muted greens (#6B8E4E), terracotta (#C75B39), clay (#D4A574), bone white (#F5F0E1)\n- Iron/Medieval Age: deeper greens (#3D6B3D), stone gray (#8C8C8C), steel blue (#4682B4), burgundy (#722F37), gold accent (#DAA520)\n- Industrial Age: brick red (#A0522D), iron gray (#696969), smoke (#B0B0B0), amber (#FFBF00), coal black (#2C2C2C)\n- Information/Singularity Age: steel blue (#4169E1), clean white (#F0F0F0), neon cyan (#00CED1), holographic purple (#9370DB), circuit green (#00FF41)\n\nPlayer colors (high contrast, colorblind-considered):\n- Player 1: Blue (#2E86DE)\n- Player 2: Red (#E74C3C)\n- Player 3: Teal (#1ABC9C)\n- Player 4: Orange (#F39C12)\n- Gaia/neutral: Gray (#95A5A6)\n\nTerrain colors:\n- Grass: #4A7C4A (base), #3D6B3D (shadow)\n- Desert: #D4B87A (base), #C4A86A (shadow)\n- Water shallow: #5B9BD5 (base), #4A8AC4 (shadow)\n- Water deep: #2E5B8A (base), #1D4A79 (shadow)\n- Forest floor: #3D5A3D (base), #2C492C (shadow)\n- Mountain: #8C8C8C (base), #6B6B6B (shadow)\n\nCreate:\n- Palette reference image (PNG swatch sheet) committed to assets/reference/\n- Godot theme resource with player colors defined\n- Document palette usage rules in assets/README.md\n\nAcceptance criteria:\n- All palettes defined with hex values\n- Swatch reference image in repo\n- Player colors pass WCAG AA contrast against all terrain types\n- Palettes feel distinct per age cluster","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:20Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:17Z","closed_at":"2026-02-22T22:34:17Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","palette","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.5","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.6","title":"Create Phase 1 placeholder UI assets and icons","description":"Create minimal UI assets so HUD development can proceed without final art.\n\nResource icons (32x32px each, simple geometric):\n- Food: red apple circle\n- Wood: brown log rectangle\n- Stone: gray rock triangle\n- Gold: yellow coin circle\n- Knowledge: blue book square\n- Population: white person silhouette\n\nHUD panel backgrounds:\n- Bottom panel: dark semi-transparent rectangle (#1A1A1A at 80% opacity)\n- Minimap frame: dark border rectangle\n- Resource bar: dark strip with slight gradient\n- Tooltip background: dark with 1px border\n\nButton states (64x32px):\n- Normal: dark gray with slight bevel\n- Hover: slightly lighter\n- Pressed: slightly darker, 1px inset\n- Disabled: desaturated\n\nCursor sprites:\n- Default: standard arrow\n- Move: boot/arrow pointing down\n- Attack: sword/crosshair\n- Gather: hand/pick\n- Build: hammer\n- Invalid: red X\n\nFont selection:\n- Choose 1 primary font for UI (readable at small sizes, free license)\n- Choose 1 header/title font (more stylized, free license)\n- Import as Godot FontFile resources with fallback chain\n\nAcceptance criteria:\n- All resource icons distinguishable at 32x32\n- HUD panels render cleanly at 1920x1080 and 1280x720\n- Cursor states are visually distinct\n- Fonts render clearly at 12px, 16px, and 24px sizes","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:21Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:18Z","closed_at":"2026-02-22T22:34:18Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-be7.6","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.7","title":"Build throwaway isometric feel prototype","description":"Build a quick throwaway prototype (separate scene, not production code) to validate the isometric feel before building real systems. This is a time-boxed spike — max 1 day of effort.\n\nPrototype must answer these questions:\n1. Does 128x64 tile size feel right at target zoom? Can you see enough of the map?\n2. Does the camera pan/zoom feel responsive? What are good min/max zoom limits?\n3. Is a villager at ~48px tall visible and selectable without squinting?\n4. Does unit movement speed feel right? How many tiles per second is good?\n5. Can you visually distinguish 3-4 different terrain types at game zoom?\n6. Does the isometric click-to-world coordinate conversion feel accurate?\n\nBuild:\n- Hand-place a 20x20 isometric tilemap with 3-4 terrain types using placeholder tiles\n- Add a Camera2D with pan (WASD) and zoom (scroll wheel)\n- Place 5-10 unit placeholders (colored circles)\n- Click to select, right-click to move (basic, no pathfinding — just lerp to position)\n- Isometric screen-to-world coordinate conversion for click targeting\n\nDocument findings in a short writeup:\n- What tile size / zoom range felt good\n- What unit speed felt good (tiles per second)\n- Any surprises about iso coordinate math\n- Screenshots at min zoom, default zoom, max zoom\n\nThis prototype is explicitly throwaway — it does NOT need tests, lint, or coverage. It informs ADR decisions before real implementation begins.\n\nAcceptance criteria:\n- Can pan and zoom around a 20x20 iso map\n- Can click to select and right-click to move a unit\n- Findings documented with specific numbers (zoom range, speed, etc.)\n- Prototype clearly marked as throwaway (separate directory or branch)","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:06:21Z","created_by":"Dave Tashner","updated_at":"2026-02-22T20:53:32Z","closed_at":"2026-02-22T20:53:32Z","close_reason":"Isometric prototype built with camera, selection, movement, and procedural map","labels":["art","prototype","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.7","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:06:21Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.8","title":"Build Blender isometric render rig with 8-camera setup","description":"Create a Blender template scene (blender/render_rig.blend) that automates rendering 3D models into isometric 2D sprites from 8 directions.\n\nRender rig specification:\n- 8 orthographic cameras arranged at 45-degree intervals around the origin\n- Camera naming: cam_n, cam_ne, cam_e, cam_se, cam_s, cam_sw, cam_w, cam_nw\n- All cameras at isometric angle: 30 degrees from horizontal (atan(1/sqrt(2)) = 35.264 degrees technically, but 30 is the standard iso approximation — test both, pick what matches 128x64 tiles)\n- Orthographic projection with scale calibrated so a standing humanoid renders at ~48px tall (villager scale) in the output\n- Consistent 3-point lighting: key light (warm, upper-left), fill light (cool, lower-right), rim light (behind, subtle)\n- Transparent background (RGBA PNG output)\n- Render resolution: 256x256px per frame (2x target size for downscale quality, final sprites are 128x128 max bounding box)\n- Output format: PNG with alpha, 8-bit color\n\nCamera calibration process:\n- Place a reference cube at origin matching 1-tile footprint\n- Render from all 8 cameras\n- Verify the cube renders as a proper 128x64 isometric diamond when downscaled\n- Save camera transforms as constants in the batch render script\n\nInclude in the .blend file:\n- Empty at origin as the model placement target\n- Reference cube (hidden by default) for scale calibration\n- Collection structure: Cameras, Lights, Model (empty, user places their model here)\n- World settings: transparent background\n\nDocument in blender/README.md:\n- How to import a model and place it in the rig\n- How to adjust scale for different unit sizes (villager vs cavalry vs building)\n- Camera angle rationale and how it maps to tile geometry\n\nAcceptance criteria:\n- Render rig produces correct isometric angle matching 128x64 tile geometry\n- All 8 directions render with consistent lighting and framing\n- Transparent background on all output\n- Reference cube renders as proper iso diamond\n- A test model (Blender default monkey/suzanne) renders correctly from all 8 cameras","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:19:32Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:18Z","closed_at":"2026-02-22T22:34:18Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","blender","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.8","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:19:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-be7.9","title":"Create Blender batch render script for automated sprite export","description":"Create a Blender Python script (blender/batch_render.py) that automates rendering all animations of a model from all 8 cameras.\n\nUsage: blender --background render_rig.blend --python batch_render.py -- --model infantry --animations idle,walk,attack,death --output-dir ./renders/infantry/\n\nThe script:\n1. Loads the render rig scene\n2. Imports or links the specified model into the Model collection\n3. For each animation in the model's action list (or specified via CLI):\n   a. Set the animation as active\n   b. Determine frame range from action\n   c. For each camera (8 directions):\n      - Set active camera\n      - For each frame in the animation:\n        - Set frame\n        - Render to PNG: {output_dir}/{animation}_{direction}_{frame:02d}.png\n4. Generate a manifest.json listing all rendered files with metadata:\n   - animation name, direction, frame index, file path, dimensions\n\nScale presets (passed via CLI --scale):\n- villager: ortho scale calibrated for ~48px tall output\n- infantry: ~52px tall\n- cavalry: ~64px tall\n- building_1x1: ~128px wide\n- building_2x2: ~256px wide\n- building_3x3: ~384px wide\n\nCLI arguments:\n- --model: name for output organization\n- --blend-file: path to .blend file with the model (if not in render rig)\n- --animations: comma-separated animation names (or 'all')\n- --scale: preset name or custom ortho scale value\n- --output-dir: where to write PNGs\n- --directions: override which cameras to use (default: all 8)\n- --resolution: override render resolution (default: 256x256)\n- --downscale: final sprite size after downscale (default: 128x128 bounding box)\n\nThe script handles downscaling from render resolution to final sprite size using high-quality Lanczos resampling (via Pillow post-process or Blender compositor).\n\nAcceptance criteria:\n- Script runs headless: blender --background --python batch_render.py\n- Renders all animations from all 8 cameras without manual intervention\n- Output file naming matches asset convention exactly\n- Manifest JSON is complete and accurate\n- Renders complete in under 60 seconds for a simple model with 3 animations\n- Script is idempotent — same input produces identical output","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T20:19:33Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:34:19Z","closed_at":"2026-02-22T22:34:19Z","close_reason":"Deferred — unblocking Core Game Loop","labels":["art","automation","blender","story"],"dependencies":[{"issue_id":"roots-of-reason-be7.9","depends_on_id":"roots-of-reason-be7","type":"parent-child","created_at":"2026-02-22T15:19:32Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-be7.9","depends_on_id":"roots-of-reason-be7.8","type":"blocks","created_at":"2026-02-22T15:21:00Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-bkg","title":"ADR-004: Historical Civilizations","description":"Three civilizations: Mesopotamia (builders, +15% build speed), Rome (military, +10% military stats), Polynesia (naval, +20% naval speed). Each with unique units, buildings, and techs.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:03Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:44Z","closed_at":"2026-02-22T22:39:44Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-bqo","title":"ADR-005: Age Progression System","description":"Seven ages: Stone → Bronze → Iron → Medieval → Industrial → Information → Singularity. Each unlocks buildings, units, techs. Advancing requires resources + prerequisite buildings. Singularity endgame: GPU Foundry → Transformer Lab → AGI Core.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:04Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:45Z","closed_at":"2026-02-22T22:39:45Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-e2s","title":"ADR-007: Quality Pipeline — Test-Driven Game Development","description":"Every system in Roots of Reason must be testable and tested before merge. The CI pipeline is a first-class game system that enforces quality gates on every PR.\n\nDecisions: (1) GdUnit4 as the unit/integration test framework (GDScript-native, JUnit XML output, CI-friendly). (2) Minimum 90% line coverage on all gameplay scripts (autoloads/, scripts/). Coverage enforced in CI — PRs that drop below threshold are blocked. (3) Static analysis via gdtoolkit (gdlint + gdformat) — zero warnings policy. (4) Headless scene smoke tests — every scene must load without errors in headless mode. (5) Playability integration tests — automated scenarios that simulate real gameplay headless and assert game state correctness. (6) Screenshot regression testing — capture UI screenshots in CI and compare against baselines. (7) Performance budgets — frame time benchmarks for key scenarios, CI fails if benchmarks regress beyond 15%. (8) Export validation — CI builds macOS and Windows exports and verifies they launch.\n\nConsequences: High confidence in every merge. Slower CI runs (~5-10 min) but catches regressions immediately. Test infrastructure built once, pays dividends on every subsequent epic. 90% coverage enforces testable architecture. Screenshot tests catch UI regressions that unit tests miss.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:33Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:47Z","closed_at":"2026-02-22T22:39:47Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","ci"]}
{"id":"roots-of-reason-e65","title":"Epic 11: Naval \u0026 Vehicles","description":"Water tiles, coastlines, dock building, ship types (Fishing, Transport, War Galley, Cannon Ship), embarking/disembarking, later-age land vehicles (Tanks, Artillery).","status":"open","priority":3,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:11Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:11Z","labels":["epic","naval"],"dependencies":[{"issue_id":"roots-of-reason-e65","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T14:44:59Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-e65","depends_on_id":"roots-of-reason-ovr","type":"blocks","created_at":"2026-02-22T14:44:59Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.1","title":"Water tiles and coastline generation","description":"Water terrain tiles with coastline transitions. Generate rivers and ocean/lakes during map gen. Shore tiles where land meets water. Ships can only move on water tiles. Land units cannot cross water without transport.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:43Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:43Z","labels":["map","naval","story"],"dependencies":[{"issue_id":"roots-of-reason-e65.1","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:43Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.2","title":"Dock building and ship production","description":"Dock: must be placed on shore tile (adjacent to water). Produces ships. Acts as drop-off for fishing boats. Has its own build queue. Requires access to water.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:44Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:44Z","labels":["buildings","naval","story"],"dependencies":[{"issue_id":"roots-of-reason-e65.2","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.3","title":"Ship types: Fishing Boat, Transport, War Galley, Cannon Ship","description":"Fishing Boat (gathers fish), Transport (carries up to 10 land units), War Galley (ranged attack ship, Bronze Age), Cannon Ship (heavy attack ship, Industrial Age). Each with stats and upgrade path.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:45Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:45Z","labels":["naval","ships","story"],"dependencies":[{"issue_id":"roots-of-reason-e65.3","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.4","title":"Embarking and disembarking land units","description":"Land units can board Transport ships at shore. Right-click transport to board, right-click shore to disembark. Units are hidden while aboard. Transport sinks = all units die. Loading/unloading takes time.","status":"open","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:45Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:45Z","labels":["naval","story","transport"],"dependencies":[{"issue_id":"roots-of-reason-e65.4","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e65.5","title":"Later-age land vehicles: Tanks and Artillery","description":"Industrial Age+: Tank (heavy armor, fast, anti-infantry), Artillery (extreme range, anti-building, slow, minimum range). Produced at Factory building. These replace cavalry and siege in later ages.","status":"open","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:46Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:46Z","labels":["story","vehicles"],"dependencies":[{"issue_id":"roots-of-reason-e65.5","depends_on_id":"roots-of-reason-e65","type":"parent-child","created_at":"2026-02-22T14:44:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77","title":"Epic 13: UI \u0026 HUD","description":"Resource bar, minimap, unit/building info panel, command panel, in-game menus, main menu and lobby screen.","status":"open","priority":2,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:12Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:12Z","labels":["epic","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77","depends_on_id":"roots-of-reason-317","type":"blocks","created_at":"2026-02-22T14:45:01Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.1","title":"Resource bar (top of screen)","description":"Top bar showing all 5 resources with icons and amounts. Population counter (current/max). Age indicator. Real-time updates. Compact layout that doesn't obstruct gameplay.\n\n## Acceptance Criteria\n- [ ] Fixed HUD panel at top of screen, full viewport width\n- [ ] Displays all 5 resources with icon + amount: Food, Wood, Stone, Gold, Knowledge\n- [ ] Population counter: current/cap (e.g., \"14/20\")\n- [ ] Current age displayed (e.g., \"Bronze Age\")\n- [ ] Updates reactively via ResourceManager signals (not polling)\n- [ ] Numbers animate smoothly when changing (brief count-up/down or flash)\n- [ ] Red flash on resource that was insufficient when action denied\n- [ ] Phase 1: colored squares for resource icons, clean numeric labels\n- [ ] Does not block mouse input to game world below\n- [ ] Scales correctly with viewport stretch mode\n- [ ] Unit tests for formatting (0, large numbers, negative edge cases)\n- [ ] Smoke test: scene loads without errors","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:49Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:18:50Z","closed_at":"2026-02-23T03:18:50Z","close_reason":"Completed in PR #24","labels":["story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.1","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:49Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.2","title":"Minimap (bottom-left)","description":"Minimap showing terrain, fog of war, unit positions (color-coded by player), buildings. Click minimap to pan camera. Show camera viewport rectangle. Right-click minimap to move selected units.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:50Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:50Z","labels":["minimap","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.2","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.3","title":"Unit and building info panel (bottom-center)","description":"Bottom-center panel showing selected unit/building info: portrait, name, HP bar, stats, current action. For buildings: production queue, rally point. For multiple selection: grid of unit icons with HP bars.\n\n## Acceptance Criteria\n- [ ] Panel appears at bottom-center when a unit or building is selected\n- [ ] Unit info shows: portrait (Phase 1: colored shape), name, HP bar, stats (attack, defense, speed)\n- [ ] Building info shows: portrait, name, HP bar, garrison count, production queue\n- [ ] Multi-select shows: group icons, total count, aggregate HP bar\n- [ ] HP bar color-coded: green \u003e 60%, yellow \u003e 30%, red \u003c= 30%\n- [ ] Panel updates in real-time (HP changes during combat visible immediately)\n- [ ] Panel hides when selection is empty\n- [ ] Connects to selection system signals from 317.2\n- [ ] Phase 1: simple Panel container with labels, no custom art\n- [ ] Does not overlap command panel (e77.4) — clear layout boundaries\n- [ ] Smoke test: scene loads without errors","status":"done","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:51Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:09:36Z","labels":["infopanel","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.3","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.4","title":"Command panel (bottom-right)","description":"Bottom-right grid of command buttons. Context-sensitive: shows available actions for selected unit/building. Build menu for villagers, unit production for military buildings, formation buttons for groups. Hotkey labels on buttons.\n\n## Acceptance Criteria\n- [ ] Grid of command buttons (4x3 or similar) at bottom-right of screen\n- [ ] Commands shown depend on selected unit/building type\n- [ ] Villager commands: Build menu, Repair, Gather (auto from context)\n- [ ] Military unit commands: Attack, Patrol, Stance toggle, Stop, Hold Position\n- [ ] Building commands: Set rally point, unit production buttons, research buttons\n- [ ] Each button has: icon (Phase 1: text label), tooltip, hotkey\n- [ ] Hotkey grid matches spatial layout (Q/W/E/R, A/S/D/F, Z/X/C/V or similar)\n- [ ] Buttons gray out when action unavailable (insufficient resources, tech locked)\n- [ ] Tooltip shows: name, cost, description, hotkey\n- [ ] Command panel updates when selection changes\n- [ ] Connects to command dispatch system from 317.4\n- [ ] Smoke test: scene loads without errors","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:51Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:18:51Z","closed_at":"2026-02-23T03:18:51Z","close_reason":"Completed in PR #26","labels":["commands","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.4","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.5","title":"In-game menus: save, load, settings, quit","description":"Escape key opens pause menu overlay. Options: Resume, Save Game, Load Game, Settings (audio, video, keybinds), Quit to Menu, Quit to Desktop. Settings persist between sessions.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:52Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:52Z","labels":["menus","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.5","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e77.6","title":"Main menu and game lobby screen","description":"Main menu: Single Player, Settings, Credits, Quit. Single Player lobby: map size, map type, number of opponents, AI difficulty, civilization selection. Start Game button launches game with configured settings.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:53Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:53Z","labels":["mainmenu","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-e77.6","depends_on_id":"roots-of-reason-e77","type":"parent-child","created_at":"2026-02-22T14:44:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-e8j","title":"ADR-009: River Resource Transport System","description":"Rivers are not just terrain obstacles or naval highways — they are economic infrastructure. A civilization that controls river access gains a significant gathering advantage for nearby mines and quarries.\n\nDECISION\n\n1. RIVER GENERATION\nRivers are generated during map creation as continuous paths of shallow water tiles flowing from high elevation (mountains/hills) to low elevation (ocean/lake). Rivers have FLOW DIRECTION encoded per tile — each river tile knows which direction water flows (toward the river mouth). Rivers branch and merge realistically using a simple hydrology simulation:\n- Start at mountain/hill tiles (watershed sources)\n- Flow downhill following steepest gradient\n- Merge when two rivers meet\n- Terminate at ocean, lake, or map edge\n- River width: 1 tile for streams, 2 tiles for major rivers (wider near mouth)\n- Typical map has 2-4 rivers depending on size\nRivers are a distinct terrain sub-type of water: \"river\" vs \"ocean\" vs \"lake\". River tiles are shallow and crossable by land units at reduced speed (50% movement penalty), unlike ocean which requires ships.\n\n2. RIVER DOCK BUILDING\nA new building: River Dock (1x1 footprint, must be placed on a tile adjacent to a river tile).\n- Cost: 100 Wood (cheap, available from Bronze Age)\n- Build time: 30 seconds\n- HP: 400 (fragile — can be raided)\n- Acts as a resource drop-off point for Food, Wood, Stone, Gold (same as Mill/Mining Camp/Lumber Camp but universal)\n- Additionally acts as a RIVER TRANSPORT ORIGIN: resources deposited here are automatically shipped downstream\n\n3. RIVER TRANSPORT MECHANIC\nWhen a villager deposits resources at a River Dock:\n(a) If there is another River Dock OR Town Center downstream along the same river, the resources are automatically transported to the NEAREST downstream drop-off.\n(b) Transport is visualized as a small barge sprite moving along the river tiles following flow direction.\n(c) Transport speed: 3x villager walking speed (resources arrive at downstream depot much faster than a villager could walk them).\n(d) Transport is NOT instant — the barge physically travels, taking time proportional to river distance.\n(e) Resources are \"in transit\" during transport — they are deducted from the origin dock and added to the player stockpile only when the barge arrives at the downstream depot.\n(f) Barges can be attacked and sunk by enemy units positioned along the river, causing resource loss (the carried resources are destroyed).\n\n4. PROXIMITY BONUS\nVillagers gathering from a resource node within 3 tiles of a River Dock will automatically use the River Dock as their drop-off IF it is closer than their next best drop-off. This is not a special mechanic — it falls out naturally from the \"nearest drop-off\" gathering logic since the River Dock IS a drop-off building.\nThe real advantage is the DOWNSTREAM TRANSPORT: resources deposited at an upstream River Dock flow downstream to your base automatically, meaning your villagers have a very short walk (to the nearby River Dock) instead of a long walk (back to the Town Center).\n\n5. STRATEGIC IMPLICATIONS\n- River Dock placement is a key strategic decision: build them upstream near mines\n- Rivers that flow TOWARD your base are extremely valuable map features\n- Rivers that flow AWAY from your base have no transport benefit (you'd be shipping resources away from your economy)\n- Enemy River Docks are high-value raid targets — destroying them forces villagers to walk the long way\n- Barges on the river are vulnerable to archers or units positioned on the banks\n- Controlling both banks of a river upstream of your enemy denies them this economic advantage\n- Mesopotamia's builder bonus (+15% build speed) makes River Dock spam faster\n- Polynesia's naval bonus could extend to river control (future consideration)\n\n6. FLOW DIRECTION VISUALIZATION\nRiver tiles render with a subtle animated flow direction indicator (small chevrons or ripple animation moving in the flow direction). This communicates to the player which way resources will travel without needing to check a tooltip. The direction should be immediately readable at normal game zoom.\n\n7. DATA MODEL\nRiver tile data (stored per tile in map data):\n- terrain_type: \"river\"\n- flow_direction: Vector2i (e.g., (1, 0) for flowing east)\n- river_id: int (which river system this tile belongs to)\n- river_width: int (1 or 2)\n- is_navigable: bool (true for all river tiles — ships can use rivers)\n\nRiver Dock building data (in data/buildings/river_dock.json):\n- transport_speed_multiplier: 3.0\n- max_barge_capacity: 30 (resources per trip)\n- barge_spawn_interval: 5.0 (seconds between barge dispatches)\n\nCONSEQUENCES\n\n- Rivers become the most strategically important terrain feature after mountains\n- Early Bronze Age river control provides significant economic advantage\n- Creates natural conflict points: the riverbanks near mines\n- Adds a raiding dimension: disrupt enemy economy by sinking barges or destroying docks\n- River placement in map generation must be balanced relative to starting positions\n- The mechanic rewards map reading — experienced players identify good river positions immediately\n- Mesopotamia (builders) benefits from cheap fast River Dock construction\n- Polynesia (naval) could get river-specific bonuses in future balance passes\n- Visual barge movement adds life and activity to the map\n- \"Resources in transit\" creates risk/reward: faster economy but vulnerable to raids","status":"closed","priority":1,"issue_type":"decision","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T20:59:34Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:49Z","closed_at":"2026-02-22T22:39:49Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture","map","resources"]}
{"id":"roots-of-reason-eei","title":"Epic 10: Civilizations","description":"Civilization data model, Mesopotamia (+15% build, Ziggurat, Immortal Guard), Rome (+10% military, Colosseum, Legionnaire), Polynesia (+20% naval, Marae, War Canoe), selection screen.","status":"open","priority":2,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:10Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:10Z","labels":["civilizations","epic"],"dependencies":[{"issue_id":"roots-of-reason-eei","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T14:44:58Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-eei","depends_on_id":"roots-of-reason-fxt","type":"blocks","created_at":"2026-02-22T14:44:58Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.1","title":"Civilization data model and bonus system","description":"Create civ data structure: name, description, bonuses (stat multipliers), unique_unit, unique_building, unique_techs, starting_bonuses. Load from JSON data files. Apply bonuses through modifier system.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:40Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:40Z","labels":["civilizations","story"],"dependencies":[{"issue_id":"roots-of-reason-eei.1","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.2","title":"Mesopotamia: Ziggurat, Immortal Guard, builder bonuses","description":"Mesopotamia: +15% building construction speed. Unique building: Ziggurat (replaces Library, +50% Knowledge generation). Unique unit: Immortal Guard (heavy infantry, self-heal). Unique techs: Irrigation (+25% farm output), Code of Laws (+10% all resource income).","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:41Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:41Z","labels":["civilizations","mesopotamia","story"],"dependencies":[{"issue_id":"roots-of-reason-eei.2","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.3","title":"Rome: Colosseum, Legionnaire, military bonuses","description":"Rome: +10% military unit attack and defense. Unique building: Colosseum (morale aura, +5% speed to nearby units). Unique unit: Legionnaire (infantry with shield wall ability, +3 defense when stationary). Unique techs: Roman Roads (+15% unit speed), Testudo (+20% ranged defense).","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:42Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:42Z","labels":["civilizations","rome","story"],"dependencies":[{"issue_id":"roots-of-reason-eei.3","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:41Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.4","title":"Polynesia: Marae, War Canoe, naval bonuses","description":"Polynesia: +20% naval unit speed. Unique building: Marae (culture building, reveals coastline on construction). Unique unit: War Canoe (fast attack ship, can carry 5 units). Unique techs: Wayfinding (+30% naval LOS), Haka (+15% attack for 30s battle cry ability).","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:42Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:42Z","labels":["civilizations","polynesia","story"],"dependencies":[{"issue_id":"roots-of-reason-eei.4","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:42Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eei.5","title":"Civilization selection screen","description":"Pre-game screen showing 3 civilizations with art, description, bonuses list, unique unit/building preview. Player selects civ before game starts. AI civs can be set or randomized.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:43Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:43Z","labels":["civilizations","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-eei.5","depends_on_id":"roots-of-reason-eei","type":"parent-child","created_at":"2026-02-22T14:44:42Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-eid","title":"Harden CI pipeline — pin SHAs, add validation jobs, secret scanning, pre-push hooks","description":"Comprehensive CI/CD hardening: pin action SHAs for supply-chain security, add data-check and validate-assets CI jobs, add secret scanning, pre-push lint hook, concurrency control, pip caching, .editorconfig, Dependabot for actions, Python tool tests in CI, fix coverage JSON parsing, parallelize independent jobs","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:16:40Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:38:13Z","closed_at":"2026-02-26T01:38:13Z","close_reason":"Completed in PR #62","labels":["ci","quality","security"]}
{"id":"roots-of-reason-fk5","title":"Epic 8: Combat System","description":"Attack-move, auto-targeting, melee vs ranged damage, armor types (rock-paper-scissors), siege mechanics, unit death, victory/defeat conditions.","status":"open","priority":2,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:09Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:09Z","labels":["combat","epic"],"dependencies":[{"issue_id":"roots-of-reason-fk5","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T14:44:56Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.1","title":"Attack-move and auto-targeting","description":"Attack-move command: unit moves to target location, engages any enemy in range along the way. Idle military units auto-target nearby enemies within aggro range. Prioritize: attacking unit \u003e closest enemy.\n\n## Acceptance Criteria\n- [ ] A-click (attack-move): unit moves toward target location, attacks first enemy encountered\n- [ ] Auto-targeting: idle military units automatically engage enemies within their LOS range\n- [ ] Target priority: lowest HP enemy first (configurable priority in JSON)\n- [ ] Units stop to attack, then resume move command after target killed\n- [ ] Patrol command (shift-A-click): unit moves between two points, engaging enemies en route\n- [ ] Units do not auto-attack while under explicit move command (only attack-move)\n- [ ] Stance system: aggressive (auto-engage), defensive (only if attacked), stand ground (no auto)\n- [ ] Default stance per unit type in JSON (military: aggressive, villager: defensive)\n- [ ] Stance serializable for save/load\n- [ ] Unit tests for target priority sorting\n- [ ] Unit tests for stance behavior (engage vs ignore)\n- [ ] Integration test: attack-move through enemy units, verify engagement","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:34Z","created_by":"Dave Tashner","updated_at":"2026-02-23T14:27:53Z","closed_at":"2026-02-23T14:27:53Z","close_reason":"Completed in PR #42","labels":["combat","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.1","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:33Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.2","title":"Melee vs ranged damage resolution","description":"Melee units must be adjacent to attack. Ranged units attack from distance. Damage = attacker.attack - defender.defense (minimum 1). Attack speed varies by unit. Ranged units have projectile travel time.\n\n## Acceptance Criteria\n- [ ] Damage formula: max(1, attacker.attack - defender.defense) per hit\n- [ ] Melee units: attack on contact, attack_speed interval from JSON (e.g., every 1.5s)\n- [ ] Ranged units: attack at range, projectile travels to target (visual only, hit is instant calculation)\n- [ ] Ranged units have minimum range (cannot attack adjacent units)\n- [ ] Rock-paper-scissors bonus: +50% damage for favorable matchup (configurable in JSON)\n- [ ] Buildings take 80% reduced damage from non-siege units (multiplier in JSON)\n- [ ] Unit plays attack animation during combat\n- [ ] Damage numbers float above target (optional, toggle in settings)\n- [ ] Unit death triggers death animation → corpse fade → removal\n- [ ] Combat state serializable (current target, attack cooldown timer)\n- [ ] Unit tests for damage formula with various stat combinations\n- [ ] Unit tests for bonus damage rock-paper-scissors matrix\n- [ ] Unit tests for building damage reduction","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:34Z","created_by":"Dave Tashner","updated_at":"2026-02-25T01:27:04Z","closed_at":"2026-02-25T01:27:04Z","close_reason":"Completed in PR #45","labels":["combat","damage","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.2","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.3","title":"Armor types and damage bonuses (rock-paper-scissors)","description":"Damage type system: Infantry strong vs Archers, Archers strong vs Cavalry, Cavalry strong vs Infantry. Siege strong vs Buildings. Bonus damage multipliers (1.5x). Creates tactical variety.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:35Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:42:22Z","closed_at":"2026-02-26T03:42:22Z","close_reason":"Completed in PR #59 (armor effectiveness matrix and garrison system)","labels":["armor","combat","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.3","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.4","title":"Siege mechanics and building damage","description":"Buildings take 80% reduced damage from non-siege units. Siege units deal full damage to buildings but are slow and weak vs other units. Garrison units inside buildings for protection and arrow fire.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:36Z","created_by":"Dave Tashner","updated_at":"2026-02-26T03:42:23Z","closed_at":"2026-02-26T03:42:23Z","close_reason":"Completed across PRs #45, #56, #59 (building damage reduction, damage states, garrison system)","labels":["combat","siege","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.4","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.5","title":"Unit death, corpse cleanup, and kill tracking","description":"Units play death animation and leave corpse. Corpses fade after 30 seconds. Track kills per unit for stats. Free population cap on death. Play death sound effect.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:36Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:36Z","labels":["combat","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.5","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:36Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.6","title":"Victory and defeat conditions","description":"Defeat: all Town Centers destroyed. Victory: all enemies defeated, OR Singularity achieved, OR Wonder timer expires. Show victory/defeat screen with option to continue playing or return to menu.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:37Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:37Z","labels":["combat","story","victory"],"dependencies":[{"issue_id":"roots-of-reason-fk5.6","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T14:44:36Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.7","title":"Town Center destruction triggers tech regression","description":"Wire Town Center destruction events to the tech regression engine.\n\nTrigger logic:\nWhen a Town Center building is destroyed:\n1. Check the destroyer: must be an enemy player (player_id != owner_id AND player_id != -1/Gaia)\n2. Check the building was fully constructed (not a foundation/in-progress)\n3. Check knowledge_burning.enabled is true\n4. Check cooldown: if cooldown_seconds \u003e 0, verify enough time has passed since this player's last tech regression\n5. If all checks pass: call regress_latest_tech(tc_owner_id)\n6. If a tech was lost (non-null return):\n   - Emit signal: knowledge_burned(attacker_id, defender_id, tech_data)\n   - This signal is consumed by the notification system and visual effects\n\nIntegration points:\n- Hook into the building destruction event handler in the combat system\n- The building destruction system already handles HP -\u003e 0 -\u003e destroy. Add a post-destruction check: if building.type == \"town_center\", evaluate tech regression.\n- Must fire AFTER the building is fully destroyed (ruins placed, etc.) but BEFORE the defeat check (so if this was the last TC, the tech loss notification comes before the defeat screen)\n\nEdge case handling:\n- Multiple TCs destroyed within cooldown window: only the first triggers regression (if cooldown \u003e 0)\n- TC destroyed by its own player (demolish): does NOT trigger regression\n- TC destroyed by Gaia (wolf, environmental): does NOT trigger regression\n- Age advancement in progress at the destroyed TC: cancel the advancement, refund resources, but this cancellation does NOT count as a tech regression (the regression is a separate event from the TC kill)\n\nTesting:\n- Unit test: TC destroyed by enemy triggers regression\n- Unit test: TC demolished by self does NOT trigger\n- Unit test: TC destroyed with empty research history causes no regression\n- Unit test: cooldown prevents double-regression\n- Integration test: destroy TC, verify most recent tech is reverted and units lose bonuses\n\nAcceptance criteria:\n- TC destruction by enemy triggers exactly 1 tech regression\n- Self-destruction and Gaia destruction do not trigger\n- Cooldown setting is respected\n- Event fires between building destruction and defeat check\n- All edge cases handled gracefully\n- Signal emitted for UI/notification consumption","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:36Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:00:31Z","closed_at":"2026-02-26T01:00:31Z","close_reason":"Completed in PR #60","labels":["combat","knowledge-burning","story"],"dependencies":[{"issue_id":"roots-of-reason-fk5.7","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T16:11:36Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fk5.7","depends_on_id":"roots-of-reason-fxt.6","type":"blocks","created_at":"2026-02-22T16:11:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fk5.8","title":"Knowledge burning: visual effects, notifications, and audio","description":"Implement the dramatic visual and audio feedback when tech regression occurs.\n\nVisual effects at the destroyed TC location:\n- \"Burning scroll\" particle effect: orange/amber paper fragments rising from the TC ruins\n- Particle duration: 3 seconds, rising upward and fading\n- Small golden glow that intensifies then fades at the ruin site\n- Phase 1 placeholder: amber circle expanding from TC position and fading\n\nScreen effects for the affected player:\n- Brief amber/red screen flash (0.3 seconds, 20% opacity overlay)\n- Screen shake: subtle (2px amplitude, 0.5 seconds)\n- These only show for the player who LOST the tech (not the attacker)\n\nNotifications:\n- Defending player: large center-screen notification \"Knowledge Lost: [Tech Name]\" with the tech icon, fades after 4 seconds\n- Attacking player: notification \"Enemy knowledge destroyed: [Tech Name]\" (smaller, in notification feed)\n- All other players: event log entry \"[Player] lost knowledge of [Tech Name]\"\n- Notification color: amber/gold (distinct from red damage notifications and green positive notifications)\n\nAudio:\n- \"Knowledge lost\" sound: a deep resonant chime combined with a paper-burning crackle\n- Plays for the affected player at high priority (interrupts other game sounds briefly)\n- Attacking player hears a softer \"triumph\" variant\n\nTech tree UI reaction:\n- If the tech tree viewer is open, the lost tech un-highlights with a \"burning away\" animation\n- The tech node briefly glows amber, then reverts to its \"available but not researched\" state\n- If the tech tree is closed, the un-highlight happens silently (will show correctly when opened)\n\nMinimap indicator:\n- Brief amber flash at the location of the destroyed TC on the minimap\n- Lasts 2 seconds\n\nChat/event log:\n- Timestamped entry: \"[12:45] Your city was sacked! Lost: Iron Casting (+2 Infantry Attack)\"\n- Include what the tech did so the player understands the impact\n\nAcceptance criteria:\n- Burning scroll particles visible at destroyed TC\n- Screen flash and shake feel impactful but not disorienting\n- All three notification tiers work (defender, attacker, observers)\n- Audio cue is distinctive and immediately recognizable\n- Tech tree UI correctly un-highlights the lost tech\n- Event log entry includes tech name and effect description\n- All visuals use Phase 1 placeholder approach (simple shapes/colors, no art required)","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:37Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:11:37Z","labels":["combat","knowledge-burning","story","ui"],"dependencies":[{"issue_id":"roots-of-reason-fk5.8","depends_on_id":"roots-of-reason-fk5","type":"parent-child","created_at":"2026-02-22T16:11:36Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fk5.8","depends_on_id":"roots-of-reason-fk5.7","type":"blocks","created_at":"2026-02-22T16:11:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt","title":"Epic 7: Technology Tree","description":"7 Ages progression, age advancement costs, per-age techs, unique civ techs, tech tree UI viewer, Singularity age chain (GPU Foundry → Transformer Lab → AGI Core).","status":"open","priority":2,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:09Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:09Z","labels":["epic","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt","depends_on_id":"roots-of-reason-2hj","type":"blocks","created_at":"2026-02-22T14:44:55Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.1","title":"Age advancement: 7 ages with resource costs and prerequisites","description":"Advance through 7 ages at Town Center. Each age requires resource cost (escalating) plus prerequisite buildings. Stone→Bronze: 500F. Bronze→Iron: 800F 200G. Escalating through ages. Advancement takes time.\n\n## Acceptance Criteria\n- [ ] 7 ages defined in data/tech/ages.json: Stone, Bronze, Iron, Medieval, Industrial, Information, Singularity\n- [ ] Each age has: resource_cost (dict of resource amounts), prerequisite_buildings (list), research_time\n- [ ] Age advancement researched at Town Center\n- [ ] Research begins when player clicks \"Advance\" and can afford cost\n- [ ] Progress bar shown during advancement research\n- [ ] On completion: age_advanced signal emitted, new buildings/units/techs unlocked\n- [ ] Visual feedback: age name displayed prominently, brief screen effect\n- [ ] Cannot research next age while current advancement is in progress\n- [ ] Age state serializable (current age, advancement progress if in-progress)\n- [ ] All costs and prerequisites data-driven from JSON\n- [ ] Unit tests for prerequisite checking logic\n- [ ] Unit tests for age unlock cascading (what becomes available per age)\n- [ ] Integration test: advance from Stone to Bronze, verify unlocks","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:31Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:06:16Z","closed_at":"2026-02-23T13:06:16Z","close_reason":"Completed in PR #33","labels":["ages","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.1","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:30Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.10","title":"Design: complete tech tree data and documentation","description":"Create the full technology tree design document and all supporting data files. 64 techs across 7 ages with costs, prerequisites, effects, and balance notes.\n\nDeliverables:\n- docs/design/tech_tree.md — full design document with rationale\n- data/tech/tech_tree.json — all 64 techs\n- data/tech/ages.json — 7 ages with costs, prereqs, multipliers\n- data/settings/research.json — acceleration settings\n- data/settings/corruption.json — corruption settings\n- data/settings/pandemics.json — pandemic settings\n- data/settings/pirates.json — pirate settings\n- data/settings/war_survival.json — medical chain settings\n- docs/design/tech_icon_prompt.md — reusable image generation prompt for tech icons\n- ADR-013 through ADR-016 added to AGENTS.md","status":"closed","priority":0,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:32Z","created_by":"Dave Tashner","updated_at":"2026-02-22T23:31:08Z","closed_at":"2026-02-22T23:31:08Z","close_reason":"Completed in PR #6","labels":["data","design","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.10","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T18:26:31Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11","title":"Tech Tree Historical Expansion — 13 new technologies across all ages","description":"Add historically significant technologies missing from the tech tree to improve plausibility and strategic depth. Adds techs spanning Stone Age (Agriculture) through Singularity Age (Brain-Computer Interface), filling gaps in foundational innovations (Wheel, Agriculture), scientific progression (Astronomy, Optics), governance (Democracy), transportation (Aviation), and energy (Renewable Energy). See ADR-021 for full impact analysis and historical rationale.","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:03:44Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:03:44Z","labels":["epic tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-25T19:03:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.1","title":"Agriculture tech (Stone Age) — foundation of civilization","description":"Add Agriculture as a Stone Age tech requiring Stone Tools. Effects: unlock Farm building (currently implicitly available), +food gather rate. This is the most important tech in human history — the Neolithic Revolution enabled permanent settlement, population growth, and surplus that funded all subsequent specialization. Should be prerequisite for Irrigation. Research time ~35s, cost ~80 Food.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:45Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:45Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.1","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:44Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.10","title":"Spaceflight tech (Information Age) — crewed space program","description":"Add Spaceflight as an Information Age tech requiring Rocketry. Effects: prestige bonus, +research speed (Apollo drove miniaturization). Alternative path alongside military Guided Missiles branch. The Space Race was one of history's most significant technological achievements. Cost ~600 Gold, 700 Knowledge, research ~85s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:52Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:52Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.10","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:52Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.11","title":"Renewable Energy tech (Information Age) — sustainable power","description":"Add Renewable Energy as an Information Age tech requiring Electricity + Chemistry. Effects: +sustainable resource generation, alternative to Nuclear Fission path. For a game where the endgame is AGI, the energy question is critical — training AI models requires enormous power. Cost ~500 Gold, 600 Knowledge, research ~75s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:53Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:53Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.11","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.12","title":"Brain-Computer Interface tech (Singularity Age) — neuroscience path to AGI","description":"Add Brain-Computer Interface as a Singularity Age tech requiring Neural Networks + Antibiotics. Effects: +research speed, alternative Singularity Chain branch. BCI research is a historically emerging parallel path to AGI. Could create an interesting strategic fork: pure software AI (Transformer Architecture) vs neuromorphic approach (BCI). Cost ~1200 Gold, 2000 Knowledge, research ~85s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:54Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:54Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.12","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:53Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.13","title":"Trade Routes tech (Medieval/Industrial) — global commerce","description":"Add Trade Routes or Mercantilism as a Medieval-to-Industrial bridge tech requiring Guilds + Compass. Effects: +trade income, unlock trade caravan unit. The Silk Road, maritime trade networks, and global commerce were as transformative as any military tech. Currently trade is underdeveloped in the tree. Cost ~300 Gold, 200 Knowledge, research ~65s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:54Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:54Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.13","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:54Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.2","title":"The Wheel tech (Bronze Age) — transport and machinery foundation","description":"Add The Wheel as a Bronze Age tech requiring Stone Tools. Effects: +movement speed for trade/transport units, prerequisite for later transport techs. Historically (~3500 BCE), the wheel enabled pottery (potter's wheel), transport, and eventually all machinery. Should be ancestral prerequisite for Railroad. Cost ~125 Food, 75 Wood, research ~40s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:46Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:46Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.2","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.3","title":"Road Building tech (Iron Age) — territorial movement bonus","description":"Add Road Building as an Iron Age tech requiring Engineering. Effects: +unit movement speed on owned territory, +trade route income. Roman roads were as strategically important as legions. Should be prerequisite for Railroad (more natural chain: Road Building → Railroad). Cost ~200 Stone, 150 Gold, research ~60s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:46Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:46Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.3","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.4","title":"Astronomy tech (Iron Age) — bridges navigation and science","description":"Add Astronomy as an Iron Age tech requiring Mathematics. Effects: +naval LOS, enables celestial navigation. Should be prerequisite for Compass (instead of just Trireme+Mathematics) and an ancestor of Rocketry. Ancient civilizations navigated by stars for millennia before the compass. Cost ~200 Gold, 150 Knowledge, research ~60s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:47Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:47Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.4","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.5","title":"Mechanical Power tech (Medieval Age) — wind and water mills","description":"Add Mechanical Power as a Medieval Age tech requiring Engineering. Effects: +25% farm processing, +15% wood gather rate. Wind/water mills transformed grain processing and manufacturing centuries before steam. Should be prerequisite for Steam Power (natural chain: Mechanical Power → Steam Power). Cost ~250 Wood, 150 Gold, research ~65s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:47Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:47Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.5","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.6","title":"Optics tech (Medieval Age) — lenses, telescopes, microscopes","description":"Add Optics as a Medieval Age tech requiring Mathematics. Effects: +ranged unit LOS, +10% ranged accuracy. Historically bridges medieval craftsmanship and the scientific revolution. Connects to Semiconductor Fab chain (lithography is optics). Cost ~200 Gold, 150 Knowledge, research ~60s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:48Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:48Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.6","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:48Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.7","title":"Telegraph tech (Industrial Age) — communication revolution","description":"Add Telegraph as its own Industrial Age tech requiring Electricity (instead of being a building unlock). Effects: +diplomacy speed, enables espionage mechanics, prerequisite for Internet. The telegraph (1837) was the 'Victorian Internet' — the first instant long-distance communication. Should be on the path to Internet rather than just a building. Cost ~300 Gold, 200 Knowledge, research ~65s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:51Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:51Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.7","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:50Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.8","title":"Aviation tech (Industrial Age) — powered flight","description":"Add Aviation as an Industrial Age tech requiring Steam Power + Ballistics. Effects: unlock air reconnaissance unit, +trade range, +LOS. Powered flight (1903) reshaped warfare, trade, and civilization. Currently a major gap — the tree jumps from Rocketry to Satellites with no aircraft. Should be prerequisite for Rocketry. Cost ~400 Gold, 300 Knowledge, research ~75s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:51Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:51Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.8","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.11.9","title":"Democracy tech (Industrial Age) — governance depth","description":"Add Democracy as an Industrial Age tech requiring Code of Laws + Printing Press. Effects: -corruption, +happiness/loyalty, +villager efficiency. Currently the governance chain is thin (Code of Laws → Feudalism → Civil Service). Democracy would give non-military strategic paths more depth and enable future diplomatic victory conditions. Cost ~350 Gold, 250 Knowledge, research ~70s.","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:04:52Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:04:52Z","labels":["story tech history"],"dependencies":[{"issue_id":"roots-of-reason-fxt.11.9","depends_on_id":"roots-of-reason-fxt.11","type":"parent-child","created_at":"2026-02-25T19:04:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.12","title":"Pioneer bonus system — first-to-discover rewards for keystone technologies","description":"Implement a Pioneer Bonus mechanic where the first civilization to research a keystone technology receives a unique one-time bonus. 15 keystone techs across all ages with historically-grounded bonuses. Types: permanent_stat (forever), temporary_buff (timed), instant_effect (one-shot), and follower_discount (later researchers get cheaper cost). Followers who research after the pioneer get a small research time discount (knowledge diffusion). Pioneer bonuses survive Knowledge Burning (you can't un-invent impact). All players notified when a pioneer bonus is claimed. AI personalities should value pioneer bonuses differently. See ADR-021 and tech schema pioneer_bonus field. Keystones: Agriculture, Writing, Bronze Working, Mathematics, Astronomy, Printing Press, Gunpowder, Compass, Steam Power, Electricity, Aviation, Computing Theory, Internet, Transformer Architecture.","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-26T01:10:14Z","created_by":"Dave Tashner","updated_at":"2026-02-26T01:29:54Z","closed_at":"2026-02-26T01:29:54Z","close_reason":"Pioneer bonus system schema and data implemented in PR #61. 11 keystone techs with pioneer bonuses added to tech_tree.json.","labels":["story tech mechanics"],"dependencies":[{"issue_id":"roots-of-reason-fxt.12","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-25T19:10:13Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.2","title":"Per-age technology research","description":"Each age unlocks a set of technologies researchable at various buildings. Techs provide: unit stat bonuses, economic bonuses, building unlocks. Research costs resources and time. Cannot research techs from future ages.\n\n## Acceptance Criteria\n- [ ] Tech tree defined in data/tech/tech_tree.json organized by age\n- [ ] Each tech has: id, name, age, cost, research_time, prerequisites (other techs), effects\n- [ ] Effects are typed: stat_modifier, unlock_unit, unlock_building, economic_bonus, etc.\n- [ ] Research performed at Library building (one tech at a time per Library)\n- [ ] Research queue: max 1 in progress + up to 3 queued per Library (configurable)\n- [ ] Tech effects applied immediately on completion via signal\n- [ ] Tech tree UI shows available/researched/locked techs (Phase 1: simple list)\n- [ ] Researched techs tracked per player for Knowledge Burning system\n- [ ] Cannot research tech if prerequisites not met or age requirement not reached\n- [ ] Research state serializable (researched techs list, in-progress tech, queue)\n- [ ] Unit tests for prerequisite resolution\n- [ ] Unit tests for effect application (stat modifiers, unlocks)\n- [ ] Integration test: research tech → verify effect applied to existing units","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:31Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:20:55Z","closed_at":"2026-02-23T13:20:55Z","close_reason":"Completed in PR #35","labels":["research","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.2","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:31Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.3","title":"Unique technologies per civilization","description":"Each civilization gets 2 unique techs (one in Iron Age, one in Industrial Age). These provide civ-specific bonuses that reinforce their playstyle identity. Researchable at unique buildings or Library.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:32Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:32Z","labels":["civs","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.3","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:31Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.4","title":"Tech tree UI viewer","description":"In-game tech tree viewer showing all ages, techs, and dependencies. Scrollable/pannable tree layout. Color-coded: available (green), researched (gold), locked (gray). Shows cost and effect on hover.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:32Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:32Z","labels":["story","tech","ui"],"dependencies":[{"issue_id":"roots-of-reason-fxt.4","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.5","title":"Singularity Age: GPU Foundry → Transformer Lab → AGI Core","description":"Final age unique chain: build GPU Foundry (Information Age), research Transformer Architecture at Transformer Lab, build AGI Core (massive cost). AGI Core completion triggers Singularity win condition. Each step has high Knowledge cost.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:33Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:33Z","labels":["singularity","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.5","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T14:44:33Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.6","title":"Tech research history tracking and regression engine","description":"Implement an ordered research history for each player and the engine to revert technologies.\n\nResearch history:\n- Each player maintains an ordered Array of researched tech IDs (chronological order)\n- When a tech is researched, append its ID to the history\n- Age advancements are tracked separately (not in the tech history array) — they are immune to regression\n- History is saved/loaded as part of game state serialization\n\nTech regression engine:\n- Function: regress_latest_tech(player_id: int) -\u003e Dictionary\n  - Pops the last entry from the player's research history\n  - Returns the tech data (for notifications/visuals)\n  - If history is empty, returns null (no tech to lose)\n\n- Function: revert_tech_effects(player_id: int, tech_id: String) -\u003e void\n  - Removes the tech's bonuses from all of the player's units, buildings, and economy\n  - For stat bonuses (e.g., +2 attack): subtract from all current units of affected type\n  - For economic multipliers (e.g., +15% farm output): recalculate all affected production rates\n  - For building unlocks: set the building type as unavailable for new construction (existing buildings remain)\n  - For unit unlocks: set the unit type as unavailable for new production (existing units remain)\n  - Emit signal: tech_regressed(player_id, tech_id, tech_data)\n\n- Function: can_research_tech(player_id: int, tech_id: String) -\u003e bool\n  - Existing function, but must now also return true for previously-researched-then-lost techs\n  - A lost tech becomes available for re-research if prerequisites are still met\n\nTech data model additions:\n- Add to each player state: research_history: Array[String] (ordered tech IDs)\n- Add to tech data: is_researched_by: Dictionary[int, bool] (player_id -\u003e researched)\n- When tech is regressed: is_researched_by[player_id] = false, and remove from history\n\nData file: data/settings/knowledge_burning.json\n{\n  \"enabled\": true,\n  \"trigger\": \"town_center_destroyed\",\n  \"tech_loss_count\": 1,\n  \"protect_age_advancements\": true,\n  \"protect_first_n_techs\": 0,\n  \"re_research_cost_multiplier\": 1.0,\n  \"cooldown_seconds\": 0\n}\n\nAcceptance criteria:\n- Research history correctly tracks order of all tech research per player\n- regress_latest_tech removes the most recent tech and reverts all its effects\n- Unit stat bonuses correctly removed from all existing units\n- Economic bonuses correctly recalculated\n- Building/unit unlocks correctly reverted (existing instances preserved, new production blocked)\n- Lost tech can be re-researched at full cost\n- Age advancements are never regressed\n- Settings from knowledge_burning.json are respected\n- All functions have unit tests with 90%+ coverage","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:35Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:31:57Z","closed_at":"2026-02-23T13:31:57Z","close_reason":"Completed in PR #37","labels":["knowledge-burning","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.6","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T16:11:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.7","title":"Tech regression interaction with Singularity victory path","description":"Define and implement how tech regression interacts with the Singularity win condition chain.\n\nThe Singularity path (GPU Foundry → Transformer Architecture → AGI Core) represents the highest-value techs in the game. Losing them to TC destruction should be devastating but recoverable.\n\nInteractions:\n1. Transformer Architecture is a researched tech — it CAN be lost via regression if it is the most recently researched tech. If lost:\n   - AGI Core cannot be constructed (requires Transformer Architecture)\n   - If AGI Core is currently under construction: construction PAUSES (not cancelled, not destroyed — just paused, resumable after re-research)\n   - Re-research cost: full (extremely expensive in Knowledge)\n   - This can delay a Singularity victory by several minutes of game time\n\n2. GPU Foundry and AGI Core are BUILDINGS, not techs. They are not directly affected by tech regression. However:\n   - If the tech that unlocked GPU Foundry is lost, the existing GPU Foundry remains but you cannot build another\n   - AGI Core depends on Transformer Architecture — if that tech is lost, AGI Core construction pauses\n\n3. Research order strategy:\n   - Savvy players will research Transformer Architecture early in their tech queue, then research other techs after it\n   - This pushes Transformer Architecture deeper in the history stack, making it less likely to be the \"most recent\" tech lost\n   - Players who rush Singularity techs last are more vulnerable to regression\n\n4. Defense escalation in late game:\n   - When a player researches Transformer Architecture, all opponents receive an alert: \"[Player] has researched Transformer Architecture\" (public knowledge event, like Wonder construction)\n   - This signals that the Singularity push has begun, incentivizing others to target that player's TCs\n   - The tech leader must invest heavily in defense to protect their research investment\n   - This creates a natural \"all vs leader\" dynamic in the late game\n\n5. UI indicator for Singularity vulnerability:\n   - When a player has Singularity-chain techs, their TC info panel shows a \"Knowledge at Risk\" warning\n   - Lists which Singularity tech would be lost if this TC falls\n   - Encourages the player to build defenses\n\nData considerations:\n- Tag Singularity-chain techs in tech data: \"singularity_chain\": true\n- These techs trigger the public alert when researched\n- AGI Core construction checks for Transformer Architecture status on every tick (not just on start)\n\nAcceptance criteria:\n- Transformer Architecture can be lost via regression, pausing AGI Core construction\n- AGI Core construction resumes automatically when Transformer Architecture is re-researched\n- Public alert fires when Singularity-chain techs are researched\n- Tech research order creates meaningful strategic depth (research Singularity techs early to protect them)\n- UI shows \"Knowledge at Risk\" warning on TCs when Singularity techs are researched\n- Integration test: destroy TC, lose Transformer Architecture, verify AGI Core pauses, re-research, verify resume","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:11:38Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:11:38Z","labels":["knowledge-burning","singularity","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.7","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T16:11:37Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fxt.7","depends_on_id":"roots-of-reason-fxt.5","type":"blocks","created_at":"2026-02-22T16:11:53Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-fxt.7","depends_on_id":"roots-of-reason-fxt.6","type":"blocks","created_at":"2026-02-22T16:11:51Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.8","title":"War research bonus implementation","description":"Implement escalating war research bonus that activates when military units are in combat. Bonus scales by age (5% Stone to 40% Information, 25% Singularity). Lingers 30s after combat ends. Military tech spillovers apply permanent civilian bonuses. Settings in data/settings/research.json.\n\n## Acceptance Criteria\n- [ ] War bonus detected when at least 1 military unit is in combat\n- [ ] Bonus value scales by current age per research.json\n- [ ] 30-second linger timer after last combat ends\n- [ ] Military tech spillovers (e.g. Rifling → Mining +15%) applied permanently on research\n- [ ] War bonus multiplied into research speed formula\n- [ ] Unit tests for war bonus activation, linger, and expiration\n- [ ] Integration test: enter combat → verify research speed increases","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:25:39Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:46:30Z","closed_at":"2026-02-23T13:46:30Z","close_reason":"Completed in PR #39","labels":["combat","research","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.8","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T18:25:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-fxt.9","title":"War survival mechanic (medical tech chain)","description":"Implement the medical tech chain's cumulative war survival effects. Pasteurization grants idle HP regen. Vaccines grant +15% max HP to military. Antibiotics grants 25% chance to stabilize at 1 HP instead of dying (60s cooldown). Settings in data/settings/war_survival.json.\n\n## Acceptance Criteria\n- [ ] Pasteurization: +1 HP/s regen when idle 5s+, camp disease immunity\n- [ ] Vaccines: +15% max HP for all military units\n- [ ] Antibiotics: 25% stabilize chance at 1 HP on lethal damage, 60s cooldown per unit\n- [ ] Stabilization shows visual feedback (flash, particle)\n- [ ] Cooldown tracked per unit, serializable\n- [ ] All values data-driven from war_survival.json\n- [ ] Unit tests for each medical tech effect\n- [ ] Unit tests for stabilization chance and cooldown\n- [ ] Integration test: full medical chain → unit survives lethal hit","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:25:46Z","created_by":"Dave Tashner","updated_at":"2026-02-22T23:25:46Z","labels":["combat","medical","story","tech"],"dependencies":[{"issue_id":"roots-of-reason-fxt.9","depends_on_id":"roots-of-reason-fxt","type":"parent-child","created_at":"2026-02-22T18:25:45Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt","title":"Epic 1b: Quality Pipeline \u0026 CI Infrastructure","description":"Build the CI/CD and testing infrastructure that every subsequent epic depends on. This is not optional polish — it is foundational. No gameplay code merges without passing quality gates.\n\nThe pipeline covers: unit tests, integration tests, coverage enforcement, static analysis, headless scene validation, playability smoke tests, screenshot regression, performance budgets, and export verification.\n\nMust be completed alongside or immediately after Epic 1 (Project Foundation), before any gameplay epics begin.","status":"closed","priority":0,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:35Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:46Z","closed_at":"2026-02-22T22:32:46Z","close_reason":"Core quality pipeline complete (lint, test, coverage gate). Remaining tasks deferred.","labels":["ci","epic","quality"],"dependencies":[{"issue_id":"roots-of-reason-mgt","depends_on_id":"roots-of-reason-81x","type":"blocks","created_at":"2026-02-22T14:53:37Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.1","title":"Integrate GdUnit4 test framework with project","description":"Install and configure GdUnit4 (https://github.com/MikeSchulworking/gdUnit4) as the test framework.\n\nAcceptance criteria:\n- GdUnit4 addon installed in addons/gdUnit4/\n- Test directory structure: tests/ mirroring scripts/ (e.g., tests/autoloads/test_game_manager.gd)\n- Sample test file that passes: test instantiating a Node, asserting a property\n- Can run tests locally via Godot editor and via CLI (godot --headless --script)\n- Test runner outputs JUnit XML for CI consumption\n- Document test conventions in CONTRIBUTING.md (naming, file layout, assertion style)","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:35Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:50:59Z","closed_at":"2026-02-22T21:50:59Z","close_reason":"Completed in PR #1","labels":["ci","story","testing"],"dependencies":[{"issue_id":"roots-of-reason-mgt.1","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.10","title":"Performance benchmark suite with regression detection","description":"Create automated performance benchmarks that detect regressions in CI. Scenarios: (1) Map rendering: 128x128 map, measure frame time with camera pan. (2) Unit pathfinding: 50 units simultaneously, measure completion time. (3) Combat: 100 units in melee, measure frame time. (4) Economy: 50 villagers gathering, measure per-frame cost. (5) Scene load time. Results saved as JSON artifacts. Compare against previous main branch run. Fail PR if any benchmark regresses more than 15%. Budget targets: map render \u003c16ms (60fps), 100 units \u003c16ms, scene load \u003c3s. Framework created now, scenarios added as systems are built.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:34Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:42Z","closed_at":"2026-02-22T22:32:42Z","close_reason":"Deferred — not blocking core game loop","labels":["ci","performance","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.10","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:34Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.2","title":"Set up GitHub Actions CI with Godot headless runner","description":"Create .github/workflows/ci.yml that runs on every push and PR.\n\nPipeline stages (in order):\n1. Checkout + cache Godot binary\n2. Import project (godot --headless --import)\n3. Run gdlint (static analysis)\n4. Run gdformat --check (formatting)\n5. Run GdUnit4 tests with coverage\n6. Export builds (macOS + Windows)\n7. Upload build artifacts\n\nUse official Godot Linux headless binary. Pin exact Godot version (e.g., 4.3-stable).\nCache .godot/imported/ for faster reimports.\nFail fast on lint/format, don't waste time on tests if code is malformatted.\n\nAcceptance criteria:\n- CI passes on clean main branch\n- CI fails when a test fails\n- CI fails when lint/format fails\n- Build artifacts downloadable from Actions UI","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:36Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:51:00Z","closed_at":"2026-02-22T21:51:00Z","close_reason":"Completed in PR #1","labels":["ci","github-actions","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.2","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.3","title":"Export validation — verify builds launch without crash","description":"CI builds macOS and Windows exports and verifies they run.\n\nRequirements:\n- Export macOS build (.app bundle or .zip)\n- Export Windows build (.exe + .pck)\n- For each platform: launch exported binary in headless mode, verify it starts without crash\n- Validate that exported builds contain all expected resources (no missing .import files)\n- Upload passing builds as GitHub Actions artifacts (downloadable)\n- Use matrix strategy: one job per platform\n- macOS: runs on macos-latest runner\n- Windows: runs on windows-latest runner (or Linux + Wine for cost savings)\n\nAcceptance criteria:\n- Both platform builds exported successfully\n- Both pass headless launch smoke test\n- Artifacts available for download from CI run","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:36Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:40Z","closed_at":"2026-02-22T22:32:40Z","close_reason":"Deferred — not blocking core game loop","labels":["ci","export","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.3","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:36Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.4","title":"PR quality gate — required checks and branch protection","description":"Configure GitHub branch protection and required status checks.\n\nRequirements:\n- Branch protection on main: require PR, require CI pass, require 1 approval (or auto-approve for solo dev)\n- Required status checks: lint, format, tests, coverage threshold, export builds\n- No direct push to main\n- PR template (.github/pull_request_template.md) with checklist:\n  [ ] Tests added/updated for changes\n  [ ] Coverage threshold met\n  [ ] No lint warnings\n  [ ] Playability tests pass\n  [ ] Screenshots updated (if UI changed)\n- Auto-label PRs based on path (e.g., scripts/combat/ → 'combat' label)\n- Status checks must pass before merge button is enabled\n\nThis is the enforcement layer that makes all other CI work meaningful.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:37Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:51:06Z","closed_at":"2026-02-22T21:51:06Z","close_reason":"Completed in PR #1 — branch protection + required checks wired","labels":["branch-protection","ci","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.4","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:37Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.4","depends_on_id":"roots-of-reason-mgt.2","type":"blocks","created_at":"2026-02-22T14:53:40Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.4","depends_on_id":"roots-of-reason-mgt.5","type":"blocks","created_at":"2026-02-22T14:58:40Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.4","depends_on_id":"roots-of-reason-mgt.6","type":"blocks","created_at":"2026-02-22T14:58:40Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.5","title":"Enforce code coverage threshold at 80% in CI","description":"Configure GdUnit4 coverage reporting and enforce minimum thresholds. GdUnit4 generates coverage data for all scripts in scripts/ and autoloads/. Coverage report output as Cobertura XML or similar CI-parseable format. GitHub Actions step fails PR if below 90% line coverage. Coverage summary posted as PR comment. Exclude test files, addons/, and generated code from coverage calculation. Coverage badge in README. The 90% threshold applies to new/changed files AND overall project coverage.","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:53:56Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:29:48Z","closed_at":"2026-02-22T22:29:48Z","close_reason":"Completed in PR #4","labels":["ci","coverage","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.5","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:53:55Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.5","depends_on_id":"roots-of-reason-mgt.1","type":"blocks","created_at":"2026-02-22T14:58:38Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.6","title":"Configure gdtoolkit for linting and formatting","description":"Install and configure gdtoolkit (gdlint + gdformat) for static analysis. Create .gdlintrc config file with project conventions (max line length, naming rules). Create .gdformatrc for auto-formatting. gdlint runs in CI and blocks PRs with warnings. gdformat --check runs in CI and blocks unformatted code. Zero warnings policy: no suppressions without code comment explaining why. gdtoolkit is pip-installable.","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:02Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:51:01Z","closed_at":"2026-02-22T21:51:01Z","close_reason":"Completed in PR #1","labels":["ci","lint","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.6","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:02Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.7","title":"Headless scene smoke tests — validate all scenes load","description":"Create a test harness that instantiates every .tscn scene file in headless mode and verifies no errors. Script discovers all .tscn files in scenes/. For each scene: instantiate, add to tree, wait one frame, verify no errors in log. Catches: missing dependencies, broken node references, invalid resource paths, script errors. Runs as part of CI test suite. New scenes automatically included. This is the cheapest high-value test.","status":"closed","priority":0,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:09Z","created_by":"Dave Tashner","updated_at":"2026-02-22T21:51:02Z","closed_at":"2026-02-22T21:51:02Z","close_reason":"Completed in PR #1","labels":["ci","smoke-test","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.7","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:09Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.7","depends_on_id":"roots-of-reason-mgt.1","type":"blocks","created_at":"2026-02-22T14:58:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.8","title":"Playability integration test framework","description":"Build a framework for automated gameplay scenario tests that run headless. Support: loading a test map (small, deterministic, no procedural gen), spawning entities at known positions, simulating player actions (select, move, gather, build, attack), advancing game time (simulate N ticks), asserting game state (unit position, resource count, building HP), deterministic replay (seeded RNG). Initial scenarios: (1) Villager gathers wood: spawn villager + tree, command gather, advance time, assert wood \u003e 0. (2) Building construction: spawn villager, place building, advance time, assert building complete. Each subsequent epic adds integration tests for its mechanics. Framework runs in CI, tests complete in under 30 seconds.","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:18Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:41Z","closed_at":"2026-02-22T22:32:41Z","close_reason":"Deferred — not blocking core game loop","labels":["ci","integration-test","story"],"dependencies":[{"issue_id":"roots-of-reason-mgt.8","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:17Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-mgt.8","depends_on_id":"roots-of-reason-mgt.1","type":"blocks","created_at":"2026-02-22T14:58:39Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-mgt.9","title":"Screenshot regression testing for UI scenes","description":"Capture screenshots of UI scenes in CI and compare against committed baselines. Godot headless renders specified scenes to PNG at fixed resolution (1920x1080). Scenes: main menu, in-game HUD (with mock data), tech tree viewer, civ selection. Compare against baseline images in tests/baselines/ using pixel-diff (ImageMagick or similar). Threshold: \u003e1% pixel difference flags PR for visual review. New baselines committed via PR. Diff images uploaded as CI artifacts. Catches: accidental UI layout breaks, font/theme changes, control sizing issues. Framework created now, baselines added as UI is built.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:54:26Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:32:41Z","closed_at":"2026-02-22T22:32:41Z","close_reason":"Deferred — not blocking core game loop","labels":["ci","story","visual-regression"],"dependencies":[{"issue_id":"roots-of-reason-mgt.9","depends_on_id":"roots-of-reason-mgt","type":"parent-child","created_at":"2026-02-22T14:54:26Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-n32","title":"Plan combat depth — armor types and damage modifiers","description":"Current damage formula (attack - defense, min 1) is functional but won't create meaningful unit composition decisions beyond rock-paper-scissors. Plan deeper combat math.\n\nAcceptance Criteria:\n- [ ] Evaluate armor type system (e.g., pierce/melee/siege armor vs pierce/melee/siege attack)\n- [ ] Evaluate bonus damage system (e.g., spearmen +8 vs cavalry)\n- [ ] Draft updated damage formula supporting type multipliers\n- [ ] Ensure formula remains data-driven (all multipliers in JSON)\n- [ ] Document in ADR or design doc with worked examples\n- [ ] Compare 3+ engagement scenarios under old vs new formula\n- [ ] No implementation — planning and design document only","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T22:58:32Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:58:32Z","labels":["combat","design","planning","task"],"dependencies":[{"issue_id":"roots-of-reason-n32","depends_on_id":"roots-of-reason-fk5","type":"blocks","created_at":"2026-02-22T17:58:32Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq","title":"Epic 12: Win Conditions \u0026 Endgame","description":"Conquest (destroy Town Centers), Singularity (build AGI Core), Wonder Victory (build + defend Wonder), AGI cinematic, post-game stats.","status":"open","priority":3,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:12Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:12Z","labels":["endgame","epic"],"dependencies":[{"issue_id":"roots-of-reason-nqq","depends_on_id":"roots-of-reason-fk5","type":"blocks","created_at":"2026-02-22T14:45:00Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-nqq","depends_on_id":"roots-of-reason-fxt","type":"blocks","created_at":"2026-02-22T14:45:00Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.1","title":"Conquest victory: destroy all enemy Town Centers","description":"Player wins when all enemy Town Centers are destroyed. Defeat triggered when your last Town Center falls. Allow rebuilding TC from villagers if any survive. Check victory conditions periodically.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:46Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:46Z","labels":["conquest","endgame","story"],"dependencies":[{"issue_id":"roots-of-reason-nqq.1","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:46Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.2","title":"Singularity victory: build AGI Core","description":"First player to complete AGI Core building wins Singularity victory. Requires: Information Age, GPU Foundry built, Transformer Architecture researched, massive resource cost (10000 Knowledge + other resources). Building takes 10 minutes game time.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:47Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:47Z","labels":["endgame","singularity","story"],"dependencies":[{"issue_id":"roots-of-reason-nqq.2","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.3","title":"Wonder victory: build and defend Wonder","description":"Build Wonder (expensive, available from Medieval Age). Once complete, 10-minute countdown timer starts. If Wonder survives countdown, player wins. Other players alerted. Destroying Wonder cancels countdown.","status":"open","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:48Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:48Z","labels":["endgame","story","wonder"],"dependencies":[{"issue_id":"roots-of-reason-nqq.3","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:47Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.4","title":"AGI Singularity cinematic event sequence","description":"When AGI Core completes: dramatic visual effect expanding from building, screen flash, all units on map pause, text overlay describing the singularity event. Transition to victory screen with unique singularity messaging.","status":"open","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:48Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:48Z","labels":["cinematic","endgame","story"],"dependencies":[{"issue_id":"roots-of-reason-nqq.4","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:48Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-nqq.5","title":"Post-game statistics screen","description":"After game ends, show stats: resources gathered, units produced, units killed, buildings built/destroyed, technologies researched, time in each age. Graphs over time. Compare all players side by side.","status":"open","priority":3,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:49Z","created_by":"Dave Tashner","updated_at":"2026-02-22T19:44:49Z","labels":["endgame","stats","story"],"dependencies":[{"issue_id":"roots-of-reason-nqq.5","depends_on_id":"roots-of-reason-nqq","type":"parent-child","created_at":"2026-02-22T14:44:48Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr","title":"Epic 3: Procedural Map Generation","description":"Isometric tilemap with terrain types, Perlin noise generation, resource node placement, starting locations, fog of war.","status":"closed","priority":1,"issue_type":"epic","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:06Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:54:56Z","closed_at":"2026-02-25T03:54:56Z","close_reason":"All children closed","labels":["epic","map"],"dependencies":[{"issue_id":"roots-of-reason-ovr","depends_on_id":"roots-of-reason-317","type":"blocks","created_at":"2026-02-22T14:44:53Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ovr","depends_on_id":"roots-of-reason-be7","type":"blocks","created_at":"2026-02-22T15:06:31Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.1","title":"Isometric tilemap with terrain types","description":"Create TileMap with terrain types: grass, forest, desert, water, mountain. Each terrain type has movement cost and resource availability. Use Godot TileMap with isometric mode.\n\nAcceptance Criteria:\n- [ ] TileMap node using 128x64px isometric diamond tiles (2:1 ratio)\n- [ ] Terrain types: grass, dirt, sand, water, forest, stone, mountain\n- [ ] Each terrain type has distinct visual tile (Phase 1: colored diamonds)\n- [ ] Terrain data stored in TileMap custom data layers (type, movement_cost, buildable)\n- [ ] Terrain properties loaded from data/settings/terrain.json\n- [ ] Water and mountain tiles marked impassable\n- [ ] Forest tiles provide LOS obstruction\n- [ ] Autotiling configured for terrain transitions (e.g., grass-to-water edges)\n- [ ] Map size configurable (small: 128x128, medium: 200x200, large: 256x256)\n- [ ] Tilemap state serializable for save/load\n- [ ] Unit tests for terrain property lookups\n- [ ] Smoke test: tilemap scene loads without errors","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:18Z","created_by":"Dave Tashner","updated_at":"2026-02-23T03:42:43Z","closed_at":"2026-02-23T03:42:43Z","close_reason":"Completed in PR #27","labels":["map","story","tilemap"],"dependencies":[{"issue_id":"roots-of-reason-ovr.1","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:18Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.2","title":"Perlin noise terrain generation","description":"Use FastNoiseLite (Godot built-in) to generate terrain. Multiple noise layers for elevation, moisture, temperature. Map these to terrain types. Configurable map size (small/medium/large).\n\nAcceptance Criteria:\n- [ ] Procedural map generation using FastNoiseLite (Godot built-in)\n- [ ] Noise layers: elevation (terrain type), moisture (forest distribution), resource richness\n- [ ] Elevation thresholds determine terrain: water \u003c 0.3, sand \u003c 0.4, grass \u003c 0.7, stone \u003c 0.85, mountain \u003e= 0.85\n- [ ] Thresholds configurable in data/settings/map_generation.json\n- [ ] Seed-based generation (same seed = same map)\n- [ ] Seed stored for save/load reproducibility\n- [ ] Generated maps have at least 2 landmasses connected by land bridges or shallows\n- [ ] Map edges are water (island-style) to provide natural bounds\n- [ ] Generation completes in \u003c 2 seconds for large (256x256) maps\n- [ ] Unit tests for threshold-to-terrain mapping\n- [ ] Integration test: generate map with known seed, verify terrain distribution","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:19Z","created_by":"Dave Tashner","updated_at":"2026-02-23T13:58:46Z","closed_at":"2026-02-23T13:58:46Z","close_reason":"Completed in PR #40","labels":["generation","map","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.2","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.3","title":"Resource node placement on map","description":"Place resource nodes during map gen: gold mines (mountains), stone quarries (hills), forests (wood), berry bushes/deer (food), fish (water). Ensure fair distribution relative to starting positions.\n\nAcceptance Criteria:\n- [ ] Resource nodes: Berry Bush (Food), Tree (Wood), Stone Mine (Stone), Gold Mine (Gold)\n- [ ] Placement uses noise-based distribution (not purely random)\n- [ ] Trees cluster near forest terrain, stone/gold near mountains, berries near grass\n- [ ] Minimum spacing between same-type resource clusters (configurable in JSON)\n- [ ] Each resource node has a finite yield amount (loaded from JSON)\n- [ ] Resource nodes are visible on map as distinct sprites (Phase 1: colored shapes)\n- [ ] Starting positions guaranteed to have balanced nearby resources\n- [ ] Resource node state serializable (remaining yield, position)\n- [ ] Resource placement density configurable per map size in JSON\n- [ ] Unit tests for placement algorithm (minimum spacing, terrain affinity)\n- [ ] Integration test: generate map and verify resource balance near spawn points","status":"closed","priority":1,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:20Z","created_by":"Dave Tashner","updated_at":"2026-02-23T14:27:52Z","closed_at":"2026-02-23T14:27:52Z","close_reason":"Completed in PR #43","labels":["map","resources","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.3","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.4","title":"Starting location selection with fairness","description":"Select starting locations for each player: ensure minimum distance apart, balanced resource access, no water-locked starts. Place initial Town Center and starting villagers at selected locations.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:20Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:20:34Z","closed_at":"2026-02-25T03:20:34Z","close_reason":"Completed in PR #51","labels":["map","spawns","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.4","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.5","title":"Fog of war and exploration","description":"Three visibility states: unexplored (black), explored but not visible (dimmed), visible (full). Units reveal area based on line-of-sight stat. Previously explored areas show terrain but not enemy units.","status":"closed","priority":2,"issue_type":"task","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:21Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:54:48Z","closed_at":"2026-02-25T03:54:48Z","close_reason":"Completed in PR #54","labels":["fog","map","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.5","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T14:44:20Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.6","title":"River generation with flow direction and hydrology","description":"Generate rivers during procedural map creation. Rivers flow from high elevation to low elevation with encoded flow direction per tile.\n\nGeneration algorithm:\n1. After terrain elevation is generated, identify watershed sources: tiles at local elevation maxima (mountains, large hills) with elevation \u003e threshold\n2. For each source, trace a path downhill following steepest gradient neighbor\n3. When two paths meet the same tile, merge into one river (wider)\n4. Terminate when reaching ocean, lake, or map edge\n5. Assign flow_direction (Vector2i) to each river tile pointing downstream\n6. Assign river_id to group tiles belonging to the same river system\n7. Set river_width: 1 tile for headwaters/streams, 2 tiles for rivers after a merge or after N tiles from source\n\nRiver tile data model:\n- terrain_type: 'river' (distinct from 'ocean' and 'lake')\n- flow_direction: Vector2i — one of 8 directions (N, NE, E, SE, S, SW, W, NW)\n- river_id: int — which river system\n- river_width: 1 or 2\n\nGeneration constraints:\n- Each map (small/medium/large) should have 2-4 rivers\n- Rivers should not start or end within 8 tiles of a player starting position (avoid giving one player an unfair river advantage at spawn)\n- At least 1 river should pass within 10 tiles of each starting position (everyone gets river access)\n- Rivers must be continuous — no gaps in the tile path\n- Rivers should not run perfectly straight — add slight noise to the path for natural appearance\n- Rivers can flow through forest (clearing a 1-tile path) but not through mountains\n\nMovement rules for river tiles:\n- Land units CAN cross river tiles at 50% movement speed (fording)\n- Naval units CAN traverse river tiles (rivers are navigable)\n- Buildings CANNOT be placed on river tiles (but River Dock can be placed adjacent)\n\nVisualization:\n- River tiles use a distinct blue shade (#4A90C4) different from ocean (#2E5B8A) and lake (#5B9BD5)\n- Subtle animated flow indicator: small chevrons or ripples moving in flow_direction\n- 2-wide rivers render as a wider water channel\n\nAdd river tiles to the procedural tile generator (Phase 1 placeholder: light blue diamond with arrow indicating flow direction).\n\nAcceptance criteria:\n- Generated maps contain 2-4 rivers with visible flow direction\n- Rivers flow continuously from source to terminus\n- Flow direction is consistent and always points downstream\n- River tiles are traversable by land (slowly) and naval units\n- Starting positions have balanced river access\n- River data (flow_direction, river_id) accessible to other systems","status":"closed","priority":1,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:20Z","created_by":"Dave Tashner","updated_at":"2026-02-25T13:53:19Z","closed_at":"2026-02-25T13:53:19Z","close_reason":"Already completed in PR #28","labels":["map","river","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.6","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T16:01:19Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.7","title":"Balance river access in starting location selection","description":"Extend the starting location fairness algorithm to account for river access.\n\nWhen selecting starting locations, the existing fairness system ensures balanced resource access and minimum distance. Add river access as a fairness dimension:\n\nScoring criteria for starting locations:\n- River proximity: distance from starting position to nearest river tile (lower = better)\n- River direction: does the nearest river flow TOWARD the starting position? (flow toward = high value, flow away = low value)\n- River resource access: how many resource nodes (gold, stone) are within 5 tiles of the river AND within 15 tiles of the starting position? (more = better)\n\nFairness constraint: the river access score variance across all starting positions must be below a threshold. If one player has a river flowing toward their base past 3 gold mines, other players should have comparable river advantages.\n\nIf perfect fairness is not achievable with the generated map, the generator should retry river generation (up to 3 attempts) or adjust river paths slightly to improve balance.\n\nEdge cases:\n- Island/archipelago maps: rivers may not exist on small islands. Skip river fairness for water-heavy maps.\n- Desert-heavy maps: fewer rivers. Relax fairness thresholds when total river count is low.\n- If a map has no rivers (rare), skip this entirely.\n\nAcceptance criteria:\n- Starting locations have comparable river access scores\n- River direction relative to start position is factored into fairness\n- Resource nodes near rivers are counted in fairness assessment\n- Generator retries or adjusts if river balance is too unfair\n- Works correctly on all map sizes and types","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:01:21Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:54:49Z","closed_at":"2026-02-25T03:54:49Z","close_reason":"Completed in PR #52","labels":["balance","map","river","story"],"dependencies":[{"issue_id":"roots-of-reason-ovr.7","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T16:01:21Z","created_by":"Dave Tashner","metadata":"{}"},{"issue_id":"roots-of-reason-ovr.7","depends_on_id":"roots-of-reason-ovr.6","type":"blocks","created_at":"2026-02-22T16:01:35Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-ovr.8","title":"Wolf pack spawning during map generation","description":"Spawn wolf packs as neutral Gaia fauna during procedural map generation.\n\nSpawn rules:\n- 3-5 wolf packs per map (scale with map size: 3 for small, 4 for medium, 5 for large)\n- Each pack contains 2-3 wolves\n- Spawn near forest terrain (within 3 tiles of forest)\n- Minimum 12 tiles from any player starting position (wolves shouldn't rush players at game start)\n- Minimum 8 tiles between wolf pack spawn points (spread them across the map)\n- At least 1 wolf pack should be roughly equidistant between pairs of players (contested wolves)\n- Wolves do NOT spawn on water, mountain, or desert tiles — forests and grassland near forests only\n\nWolf entity initial state:\n- Owner: Gaia (neutral faction, player_id = -1)\n- Behavior: patrol (wander within 8-tile radius of spawn point)\n- Aggro: hostile to lone villagers within 3 tiles\n- Domestication_progress: 0.0 (float, 0.0 to 1.0)\n- Fed_by: null (player_id of last player to feed)\n\nAdd wolves to the fauna data model alongside deer:\ndata/fauna/wolf.json:\n{\n  \"name\": \"Wolf\",\n  \"hp\": 30,\n  \"attack\": 8,\n  \"defense\": 0,\n  \"speed\": 2.0,\n  \"los\": 5,\n  \"aggro_radius\": 3,\n  \"flee_threshold\": 3,\n  \"food_on_kill\": 50,\n  \"domestication_cost_per_feed\": 25,\n  \"feeds_required\": 3,\n  \"domestication_decay_rate\": 0.1,\n  \"domestication_decay_interval\": 60\n}\n\nPlaceholder sprite: gray circle with pointed ears (triangle on top), slightly larger than villager placeholder. Distinct from deer (brown) and dogs (lighter gray with collar indicator).\n\nAcceptance criteria:\n- Maps generate with 3-5 wolf packs in appropriate locations\n- Wolves visible and distinct from other fauna\n- Wolf packs spread across map, not clustered\n- Starting positions safe from immediate wolf aggro\n- At least one pack in a contestable position between players","status":"closed","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T21:05:57Z","created_by":"Dave Tashner","updated_at":"2026-02-25T03:54:49Z","closed_at":"2026-02-25T03:54:49Z","close_reason":"Completed in PR #53","labels":["fauna","map","story","wolves"],"dependencies":[{"issue_id":"roots-of-reason-ovr.8","depends_on_id":"roots-of-reason-ovr","type":"parent-child","created_at":"2026-02-22T16:05:56Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-q7z","title":"Epic: Pirate Spawning System","description":"Gaia-controlled hostile naval units that spawn after any player researches Compass. Pirates patrol deep ocean, attack soft naval targets, and carry gold bounties. Creates risk/reward tension for ocean navigation.\n\nKey mechanics:\n- Spawn every 90s from ocean edges, max 8 active\n- Carry 30-120 Gold bounty scaling by age\n- Target fishing boats, trade barges, transport ships\n- Avoid military vessels and garrisoned docks\n- Spawn rate decreases in later ages\n- Settings in data/settings/pirates.json","status":"open","priority":2,"issue_type":"epic","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:25:58Z","created_by":"Dave Tashner","updated_at":"2026-02-22T23:25:58Z","labels":["epic","gaia","naval"]}
{"id":"roots-of-reason-q7z.1","title":"Pirate ship spawning and patrol AI","description":"Implement Gaia pirate ship spawning triggered by Compass research. Pirates spawn every 90s from deep ocean edges, patrol randomly, target soft naval targets, avoid warships. Max 8 active. Spawn rate decreases in later ages. Settings in data/settings/pirates.json.\n\n## Acceptance Criteria\n- [ ] Spawning begins when any player researches Compass\n- [ ] Spawn interval and max count from settings\n- [ ] Pirates spawn at deep ocean edge tiles\n- [ ] Random ocean waypoint patrol behavior\n- [ ] Pirates target fishing boats, trade barges, transport ships\n- [ ] Pirates avoid war galleys, warships, garrisoned docks\n- [ ] Spawn rate scales by age (1.0x Medieval to 0.2x Singularity)\n- [ ] Pirate stats (HP, attack, defense, speed, range, LOS) from settings\n- [ ] Unit tests for spawn logic and targeting\n- [ ] Integration test: research Compass → pirates begin spawning","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:22Z","created_by":"Dave Tashner","updated_at":"2026-02-22T23:26:22Z","labels":["gaia","naval","pirates","story"],"dependencies":[{"issue_id":"roots-of-reason-q7z.1","depends_on_id":"roots-of-reason-q7z","type":"parent-child","created_at":"2026-02-22T18:26:22Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-q7z.2","title":"Pirate bounty system: gold drops on kill","description":"Pirates carry gold bounties that drop on death. Bounty range 30-120 Gold, scaled by age. Killing player receives bounty immediately. Bounty amount visible on pirate selection.\n\n## Acceptance Criteria\n- [ ] Each pirate assigned random bounty on spawn (min_gold to max_gold)\n- [ ] Bounty scaled by age multiplier from settings\n- [ ] Gold awarded to killing player on pirate death\n- [ ] Bounty amount shown in pirate info panel when selected\n- [ ] Gold drop visual effect at pirate death location\n- [ ] Unit tests for bounty calculation and scaling\n- [ ] Integration test: kill pirate → verify gold awarded","status":"open","priority":2,"issue_type":"task","owner":"davetashner@users.noreply.github.com","created_at":"2026-02-22T23:26:23Z","created_by":"Dave Tashner","updated_at":"2026-02-22T23:26:23Z","labels":["bounty","economy","pirates","story"],"dependencies":[{"issue_id":"roots-of-reason-q7z.2","depends_on_id":"roots-of-reason-q7z","type":"parent-child","created_at":"2026-02-22T18:26:23Z","created_by":"Dave Tashner","metadata":"{}"}]}
{"id":"roots-of-reason-r2z","title":"ADR-002: Visual Style — 2D Isometric","description":"Tile-based map with isometric sprites using 2:1 diamond tiles (128x64px). Classic AoE aesthetic, sprite-based units and buildings. Well-supported by Godot TileMap.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:02Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:43Z","closed_at":"2026-02-22T22:39:43Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-rvl","title":"ADR-003: Single-player First","description":"AI opponents via state machines and behavior trees. No networking code in initial release. Multiplayer deferred to post-MVP.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:03Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:44Z","closed_at":"2026-02-22T22:39:44Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
{"id":"roots-of-reason-una","title":"ADR-001: Game Engine — Godot 4","description":"GDScript as primary language, C# for hot paths later. Godot 4 chosen for: open source, cross-platform (Mac + Windows), no licensing fees, strong 2D support, active community.","status":"closed","priority":0,"issue_type":"decision","owner":"dave@mainstreetlogic.com","created_at":"2026-02-22T19:44:02Z","created_by":"Dave Tashner","updated_at":"2026-02-22T22:39:42Z","closed_at":"2026-02-22T22:39:42Z","close_reason":"Accepted — documented in AGENTS.md","labels":["adr","architecture"]}
